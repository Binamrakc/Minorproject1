import{c as Jg,g as Nh}from"./_commonjsHelpers-Cpj98o6Y.js";const tm=["Input","Output","NotGate","OrGate","AndGate","NorGate","NandGate","XorGate","XnorGate","SevenSegDisplay","SixteenSegDisplay","HexDisplay","Multiplexer","BitSelector","Splitter","Power","Ground","ConstantVal","ControlledInverter","TriState","Adder","verilogMultiplier","verilogDivider","verilogPower","verilogShiftLeft","TwoComplement","verilogShiftRight","Rom","RAM","verilogRAM","EEPROM","TflipFlop","JKflipFlop","SRflipFlop","DflipFlop","TTY","Keyboard","Clock","DigitalLed","Stepper","VariableLed","RGBLed","SquareRGBLed","RGBLedMatrix","Button","Demultiplexer","Buffer","SubCircuit","Flag","MSB","LSB","PriorityEncoder","Tunnel","ALU","Decoder","Random","Counter","Dlatch","TB_Input","TB_Output","ForceGate"],em=["Text","Rectangle","Arrow","ImageAnnotation"],im=["Random","Dlatch","JKflipFlop","TflipFlop","SRflipFlop","DflipFlop","Buffer","Stepper","Ground","Power","ConstantVal","Input","Clock","Button","Counter"],nm=["Random","Dlatch","JKflipFlop","TflipFlop","SRflipFlop","DflipFlop","Buffer","Stepper","Ground","Power","ConstantVal","Clock","Button","Counter"],sm={Input:[{name:"Input",label:"Input"},{name:"Button",label:"Button"},{name:"Power",label:"Power"},{name:"Ground",label:"Ground"},{name:"ConstantVal",label:"Constant Value"},{name:"Stepper",label:"Stepper"},{name:"Random",label:"Random"},{name:"Counter",label:"Counter"}],Output:[{name:"Output",label:"Output"},{name:"RGBLed",label:"RGB Led"},{name:"DigitalLed",label:"Digital Led"},{name:"VariableLed",label:"Variable Led"},{name:"HexDisplay",label:"Hex Display"},{name:"SevenSegDisplay",label:"Seven Segment Display"},{name:"SixteenSegDisplay",label:"Sixteen Segment Display"},{name:"SquareRGBLed",label:"Square RGB Led"},{name:"RGBLedMatrix",label:"RGB Led Matrix"}],Gates:[{name:"AndGate",label:"And Gate"},{name:"OrGate",label:"Or Gate"},{name:"NotGate",label:"Not Gate"},{name:"XorGate",label:"Xor Gate"},{name:"NandGate",label:"Nand Gate"},{name:"NorGate",label:"Nor Gate"},{name:"XnorGate",label:"Xnor Gate"}],"Decoders & Plexers":[{name:"Multiplexer",label:"Multiplexer"},{name:"Demultiplexer",label:"Demultiplexer"},{name:"BitSelector",label:"Bit Selector"},{name:"MSB",label:"MSB(Most Significant Bit)"},{name:"LSB",label:"LSB(Least Significant Bit)"},{name:"PriorityEncoder",label:"Priority Encoder"},{name:"Decoder",label:"Decoder"}],"Sequential Elements":[{name:"DflipFlop",label:"D flip Flop"},{name:"Dlatch",label:"D latch"},{name:"TflipFlop",label:"T flip Flop"},{name:"JKflipFlop",label:"JK flip Flop"},{name:"SRflipFlop",label:"SR flip Flop"},{name:"TTY",label:"TTY"},{name:"Keyboard",label:"Keyboard"},{name:"Clock",label:"Clock"},{name:"Rom",label:"ROM"},{name:"RAM",label:"RAM"},{name:"verilogRAM",label:"Verilog RAM"},{name:"EEPROM",label:"EEPROM"}],Annotation:[{name:"Rectangle",label:"Rectangle"},{name:"Arrow",label:"Arrow"},{name:"ImageAnnotation",label:"Image Annotation"},{name:"Text",label:"Text"}],Misc:[{name:"TwoComplement",label:"Two Complement"},{name:"Flag",label:"Flag"},{name:"Splitter",label:"Splitter"},{name:"Adder",label:"Adder"},{name:"ALU",label:"ALU(Arithmetic and Logical Unit)"},{name:"TriState",label:"TriState Flip Flop"},{name:"Tunnel",label:"Tunnel"},{name:"verilogMultiplier",label:"Verilog Multiplier"},{name:"verilogDivider",label:"Verilog Divider"},{name:"verilogPower",label:"Verilog Power"},{name:"verilogShiftLeft",label:"Verilog Shift Left"},{name:"verilogShiftRight",label:"Verilog Shift Right"},{name:"Buffer",label:"Buffer"},{name:"ControlledInverter",label:"Controlled Inverter"},{name:"TB_Input",label:"TB Input"},{name:"TB_Output",label:"TB Output"},{name:"ForceGate",label:"Force Gate"}]};class rm{constructor(t){this.size=t,this.queue=new Array(t),this.frontIndex=0,this.time=0}add(t,n){if(t.queueProperties.inQueue){t.queueProperties.time=this.time+(n||t.propagationDelay);let h=t.queueProperties.index;for(;h>0&&t.queueProperties.time>this.queue[h-1].queueProperties.time;)this.swap(h,h-1),h--;for(h=t.queueProperties.index;h<this.frontIndex-1&&t.queueProperties.time<this.queue[h+1].queueProperties.time;)this.swap(h,h+1),h++;return}if(this.frontIndex==this.size)throw"EventQueue size exceeded";this.queue[this.frontIndex]=t,t.queueProperties.time=this.time+(n||t.propagationDelay),t.queueProperties.index=this.frontIndex,this.frontIndex++,t.queueProperties.inQueue=!0;let r=t.queueProperties.index;for(;r>0&&t.queueProperties.time>this.queue[r-1].queueProperties.time;)this.swap(r,r-1),r--}addImmediate(t){this.queue[this.frontIndex]=t,t.queueProperties.time=this.time,t.queueProperties.index=this.frontIndex,t.queueProperties.inQueue=!0,this.frontIndex++}swap(t,n){const r=this.queue[t];r.queueProperties.index=n;const h=this.queue[n];h.queueProperties.index=t,this.queue[t]=h,this.queue[n]=r}pop(){if(this.isEmpty())throw"Queue Empty";this.frontIndex--;const t=this.queue[this.frontIndex];return this.time=t.queueProperties.time,t.queueProperties.inQueue=!1,t}reset(){for(let t=0;t<this.frontIndex;t++)this.queue[t].queueProperties.inQueue=!1;this.time=0,this.frontIndex=0}isEmpty(){return this.frontIndex==0}}const f={canvas:document.getElementById("simulationArea"),selected:!1,hover:!1,clockState:0,clockEnabled:!0,lastSelected:void 0,stack:[],prevScale:0,oldx:0,oldy:0,objectList:[],maxHeight:0,maxWidth:0,minHeight:0,minWidth:0,multipleObjectSelections:[],copyList:[],shiftDown:!1,controlDown:!1,timePeriod:500,mouseX:0,mouseY:0,mouseDownX:0,mouseDownY:0,simulationQueue:void 0,multiAddElement:!1,touch:!1,clickCount:0,lock:"unlocked",timer(){ckickTimer=setTimeout(()=>{f.clickCount=0},600)},setup(){this.canvas=document.getElementById("simulationArea"),this.canvas.width=width,this.canvas.height=height,this.simulationQueue=new rm(1e4),this.context=this.canvas.getContext("2d"),f.changeClockTime(f.timePeriod),this.mouseDown=!1},changeClockTime(i){i<50||(clearInterval(f.ClockInterval),i=i||prompt("Enter Time Period:"),f.timePeriod=i,f.ClockInterval=setInterval(tb,i))},clear(){this.context&&this.context.clearRect(0,0,this.canvas.width,this.canvas.height)}},{changeClockTime:om}=f,ai={canvas:document.getElementById("backgroundArea"),setup(){this.canvas=document.getElementById("backgroundArea"),this.canvas.width=width,this.canvas.height=height,this.context=this.canvas.getContext("2d"),tn(!0,!1)},clear(){this.context&&this.context.clearRect(0,0,this.canvas.width,this.canvas.height)}},un={"Default Theme":{"--text-navbar--alt":"#000","--br-secondary":"#7d7d7d","--br-circuit-cur":"#fff","--br-circuit":"#fff","--cus-radio_label":"#656565","--primary":"#454545","--text-lite":"#fff","--text-dark":"#000","--text-panel":"white","--bg-navbar":"#454545","--qp-br-tl":"#333333","--qp-br-rd":"#535353","--qp-box-shadow-1":"#3b3b3b","--qp-box-shadow-2":"#4f4f4f","--bg-circuit":"#ddd","--br-circuit":"#454545","--br-primary":"#fff","--bg-primary-moz":"#454545e6","--bg-primary-chr":"#454545b3","--bg-tabs":"#8b8b8b","--bg-icons":"#7d7d7d","--bg-text":"#cacaca","--bg-secondary":"#bbbbbb","--canvas-stroke":"#eee","--canvas-fill":"white","--context-text":"white","--bg-toggle-btn-primary":"#42b983","--primary-btn-hov":"#3ca877","--btn-danger":"#dc5656","--btn-danger-darken":"#b03662","--disable":"#6c8b93","--cus-btn-hov--bg":"#ddd","--cus-btn-hov-text":"#000","--node":"green","--stroke":"black","--fill":"white","--hover-and-sel":"rgba(255, 255, 32, 0.8)","--wire-draw":"black","--wire-cnt":"green","--wire-pow":"lightgreen","--wire-sel":"blue","--wire-lose":"red","--mini-map":"green","--mini-map-stroke":"darkgreen","--input-text":"green","--secondary-stroke":"red","--text":"black","--wire-norm":"black","--node-norm":"green","--splitter":"black","--output-rect":"blue","--disable":"#6c8b93","--touch-menu":"#7d7d7d"},"Night Sky":{"--text-navbar--alt":"#fff","--br-secondary":"#665627","--cus-radio_label":"#0F111A","--primary":"#0F111A","--text-lite":"#FFF","--text-dark":"white","--text-panel":"white","--bg-navbar":"#0F111A","--br-circuit":"#0F111A","--br-primary":"#665627","--br-circuit-cur":"#cccccc","--bg-circuit":"#bdc2ca","--bg-primary-moz":"#0f111ae6","--bg-primary-chr":"#0f111ab3","--bg-tabs":"#727d8d","--bg-icons":"#4d647a","--bg-text":"#727d8d","--bg-secondary":"#536c84","--canvas-fill":"#1B2C33","--canvas-stroke":"#6A7980","--context-text":"white","--bg-toggle-btn-primary":"#48a69d","--primary-btn-hov":"#3f9189","--btn-danger":"#c33c6c","--btn-danger-darken":"#b03662","--qp-br-tl":"#282d46","--qp-br-rd":"#1d2132","--qp-box-shadow-1":"#1d2132","--qp-box-shadow-2":"#0a0b11","--cus-btn-hov--bg":"#48a69d","--cus-btn-hov-text":"#fff","--node":"#285963","--stroke":"#35aea9","--fill":"#DEFFFE","--hover-and-sel":"#E3B924","--wire-draw":"#77878C","--wire-cnt":"#3B7F58","--wire-pow":"#75FFB0","--wire-sel":"#208CC9","--wire-lose":"#BF0426","--mini-map":"#3B7F58","--mini-map-stroke":"#607F6E","--input-text":"#3B7F58","--output-rect":"#0487D9","--secondary-stroke":"#BF0426","--text":"#E9FBF8","--wire-norm":"#277F7C","--node-norm":"#FFC231","--splitter":"#0284A8","--disable":"#4F74B0","--touch-menu":"#665627"},"Lite-born Spring":{"--text-navbar--alt":"#000","--br-secondary":"#6B6B6B","--cus-radio_label":"#6B6B6B","--primary":"#EAEAEB","--text-dark":"#6B6B6B","--text-lite":"white","--text-panel":"#6B6B6B","--bg-navbar":"#6b6b6b","--qp-br-tl":"#969696","--qp-br-rd":"#545454","--qp-box-shadow-1":"#747474","--qp-box-shadow-2":"#5f5f5f","--bg-tabs":"#A4A4A4","--br-circuit-cur":"#42B983","--bg-circuit":"#D7D7D7","--br-circuit":"#42B983","--br-primary":"#42B983","--context-text-hov":"#6B6B6B","--context-text":"white","--bg-primary-moz":"rgba(107, 107, 107, 0.904)","--bg-primary-chr":"rgba(107, 107, 107, 0.704)","--bg-icons":"#DDDDDD","--bg-text":"#ddd","--bg-secondary":"#6B6B6B","--bg-toggle-btn-primary":"#42B983","--primary-btn-hov":"#66C89C","--btn-danger":"#BF2424","--btn-danger-darken":"#BF414C","--cus-btn-hov--bg":"#42B983","--cus-btn-hov-text":"#fff","--canvas-fill":"white","--canvas-stroke":"#BABABA","--node":"#42B983","--stroke":"#6B6B6B","--fill":"#EAEAEB","--hover-and-sel":"#FFE99B","--wire-draw":"#6B6B6B","--wire-cnt":"#42B983","--wire-pow":"#52E539","--wire-sel":"#0FB2F2","--wire-lose":"#F10530","--mini-map":"#42B983","--mini-map-stroke":"#0FB2F2","--input-text":"#42B983","--output-rect":"#0487D9","--secondary-stroke":"#F10530","--text":"#454545","--wire-norm":"#006839","--node-norm":"#FFC231","--splitter":"#00B462","--disable":"#656565","--touch-menu":"#BBBFCA"},"G&W":{"--text-navbar--alt":"#000","--br-secondary":"#6B6B6B","--cus-radio_label":"#6B6B6B","--primary":"#EAEAEB","--text-dark":"#6B6B6B","--text-lite":"white","--text-panel":"#656565","--bg-navbar":"#6b6b6b","--qp-br-tl":"#969696","--qp-br-rd":"#545454","--qp-box-shadow-1":"#747474","--qp-box-shadow-2":"#5f5f5f","--bg-tabs":"#A4A4A4","--br-circuit-cur":"#6b6b6b","--bg-circuit":"#D7D7D7","--br-circuit":"#6b6b6b","--br-primary":"#6B6B6B","--context-text-hov":"#6B6B6B","--context-text":"white","--bg-primary-moz":"rgba(107, 107, 107, 0.904)","--bg-primary-chr":"rgba(107, 107, 107, 0.704)","--bg-icons":"#DDDDDD","--bg-text":"#ddd","--bg-secondary":"#6B6B6B","--bg-toggle-btn-primary":"#3ac8a4","--primary-btn-hov":"#71D7BD","--btn-danger":"#fc8771","--btn-danger-darken":"#FDB2A4","--cus-btn-hov--bg":"#3ac8a4","--cus-btn-hov-text":"#fff","--canvas-fill":"white","--canvas-stroke":"#BABABA","--node":"#42B983","--stroke":"#6B6B6B","--fill":"#EAEAEB","--hover-and-sel":"#FFE99B","--wire-draw":"#6B6B6B","--wire-cnt":"#42B983","--wire-pow":"#52E539","--wire-sel":"#0FB2F2","--wire-lose":"#F10530","--mini-map":"#42B983","--mini-map-stroke":"#0FB2F2","--input-text":"#42B983","--output-rect":"#0487D9","--secondary-stroke":"#F10530","--text":"#454545","--wire-norm":"#006839","--node-norm":"#FFC231","--splitter":"#00B462","--disable":"#656565","--touch-menu":"#BBBFCA"},"High Contrast":{"--text-navbar--alt":"#000","--br-secondary":"#F38518","--cus-radio_label":"black","--primary":"black","--text-dark":"black","--text-lite":"white","--text-panel":"white","--bg-navbar":"black","--qp-br-tl":"#F38518","--qp-br-rd":"#F38518","--qp-box-shadow-1":"#0D0D0D","--qp-box-shadow-2":"#0D0D0D","--bg-tabs":"#616161","--text-circuit":"black","--br-circuit-cur":"#F38518","--bg-circuit":"#B6B6B6","--br-circuit":"#F38518","--br-primary":"#F38518","--context-text-hov":"black","--context-text":"white","--bg-primary-moz":"rgba(0, 0, 0, 0.904)","--bg-primary-chr":"rgba(0, 0, 0, 0.704)","--bg-icons":"#262626","--bg-text":"#ddd","--bg-secondary":"#6B6B6B","--bg-toggle-btn-primary":"#009599","--primary-btn-hov":"#00b1b6","--btn-danger":"#E45605","--btn-danger-darken":"#fa792f","--cus-btn-hov--bg":"#009599","--cus-btn-hov-text":"#fff","--canvas-fill":"black","--canvas-stroke":"#9ad5e9","--node":"#26a841","--stroke":"#626262","--fill":"#d4d4d4","--hover-and-sel":"#ffdf6c","--wire-draw":"#909090","--wire-cnt":"#3bb15b","--wire-pow":"#3ac53c","--wire-sel":"#049ffb","--wire-lose":"#f42f0b","--mini-map":"#1c2427","--mini-map-stroke":"#000","--input-text":"#42B983","--output-rect":"#005682","--secondary-stroke":"#f7081e","--text":"#fff","--wire-norm":"#00b965","--node-norm":"#F38518","--splitter":"#21de5a","--disable":"#262626","--touch-menu":"#F38518"},"Color Blind":{"--text-navbar--alt":"#000","--br-secondary":"#e2dad1","--cus-radio_label":"#2e2b21","--primary":"#2e2b21","--text-dark":"black","--text-lite":"white","--text-panel":"white","--bg-navbar":"#2e2b21","--qp-br-tl":"#716950","--qp-br-rd":"#6c654d","--qp-box-shadow-1":"#4f4a38","--qp-box-shadow-2":"#302d23","--bg-tabs":"#9a9a9a","--text-circuit":"black","--br-circuit-cur":"#e2dad1","--bg-circuit":"#d6d6d6","--br-circuit":"#e2dad1","--br-primary":"#e2dad1","--context-text-hov":"black","--context-text":"white","--bg-primary-moz":"rgba(46, 43, 33, 1)","--bg-primary-chr":"rgba(46, 43, 33, 1)","--bg-icons":"#9c7762","--bg-text":"#ddd","--bg-secondary":"#6B6B6B","--bg-toggle-btn-primary":"#bfaac1","--primary-btn-hov":"#ccbbcd","--btn-danger":"#b66e43","--btn-danger-darken":"#ba7144","--cus-btn-hov--bg":"#b66e43","--cus-btn-hov-text":"#fff","--canvas-fill":"#fff","--canvas-stroke":"#8d88ad","--node":"#c59434","--stroke":"#342a1f","--fill":"#e0dcd3","--hover-and-sel":"#f4d4d4","--wire-draw":"#4c4c4c","--wire-cnt":"#908eb9","--wire-pow":"#b3b1cf","--wire-sel":"#a7b8f8","--wire-lose":"#f42f0b","--mini-map":"#4b4636","--mini-map-stroke":"#000","--input-text":"#756d54","--output-rect":"#092c48","--secondary-stroke":"#cdb1ad","--text":"#000","--wire-norm":"#7f7cae","--node-norm":"#c59434","--splitter":"#836222","--disable":"#956c6a","--touch-menu":"#A0937D","--table-head-dark":"#2e2b21"},"Custom Theme":JSON.parse(localStorage.getItem("Custom Theme"))||{"--text-navbar--alt":"#000","--br-secondary":"#7d7d7d","--br-circuit-cur":"#ffffff","--br-circuit":"#ffffff","--cus-radio_label":"#656565","--primary":"#454545","--text-lite":"#ffffff","--text-dark":"#000","--text-panel":"#ffffff","--bg-navbar":"#454545","--qp-br-tl":"#333333","--qp-br-rd":"#535353","--qp-box-shadow-1":"#3b3b3b","--qp-box-shadow-2":"#4f4f4f","--bg-circuit":"#ddd","--br-circuit":"#454545","--br-primary":"#ffffff","--bg-primary-moz":"#454545e6","--bg-primary-chr":"#454545b3","--bg-tabs":"#8b8b8b","--bg-icons":"#7d7d7d","--bg-text":"#cacaca","--bg-secondary":"#bbbbbb","--canvas-stroke":"#eee","--canvas-fill":"#ffffff","--context-text":"#ffffff","--bg-toggle-btn-primary":"#42b983","--primary-btn-hov":"#3ca877","--btn-danger":"#dc5656","--btn-danger-darken":"#b03662","--disable":"#6c8b93","--cus-btn-hov--bg":"#ddd","--cus-btn-hov-text":"#000","--node":"#008000","--stroke":"#000","--fill":"#ffffff","--hover-and-sel":"#ffff20cc","--wire-draw":"#000","--wire-cnt":"#008000","--wire-pow":"#90ee90","--wire-sel":"#0000ff","--wire-lose":"#ff0000","--mini-map":"#008000","--mini-map-stroke":"#006400","--input-text":"#008000","--secondary-stroke":"#ff0000","--text":"#000","--wire-norm":"#000","--node-norm":"#008000","--splitter":"#000","--output-rect":"#0000ff","--touch-menu":"#A0937D"}},am=`<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="202.9" height="106" viewBox="0 0 202.9 106">
<defs>
  <clipPath id="clip">
    <use xlink:href="#fill"/>
  </clipPath>
  <clipPath id="clip-2">
    <use xlink:href="#fill-2"/>
  </clipPath>
  <clipPath id="clip-3">
    <use xlink:href="#fill-3"/>
  </clipPath>
</defs>
<g id="Default" transform="translate(-542 -149.868)">
  <rect class='svgGridBG' id="Rectangle_1592" data-name="Rectangle 1592" width="202" height="106" transform="translate(542.45 149.868)" fill="#f2f2f2"/>
  <line class='svgGrid' id="Line_78" data-name="Line 78" y1="105.737" transform="translate(554.145 150)" fill="none" stroke="#707070" stroke-width="0.1" opacity="1"/>
  <line class='svgGrid' id="Line_79" data-name="Line 79" y1="105.737" transform="translate(565.576 150)" fill="none" stroke="#707070" stroke-width="0.1" opacity="1"/>
  <line class='svgGrid' id="Line_80" data-name="Line 80" y1="105.737" transform="translate(577.007 150)" fill="none" stroke="#707070" stroke-width="0.1" opacity="1"/>
  <line class='svgGrid' id="Line_81" data-name="Line 81" y1="105.737" transform="translate(588.438 150)" fill="none" stroke="#707070" stroke-width="0.1" opacity="1"/>
  <line class='svgGrid' id="Line_82" data-name="Line 82" y1="105.737" transform="translate(599.87 150)" fill="none" stroke="#707070" stroke-width="0.1" opacity="1"/>
  <line class='svgGrid' id="Line_83" data-name="Line 83" y1="105.737" transform="translate(611.3 150)" fill="none" stroke="#707070" stroke-width="0.1" opacity="1"/>
  <line class='svgGrid' id="Line_84" data-name="Line 84" y1="105.737" transform="translate(622.732 150)" fill="none" stroke="#707070" stroke-width="0.1" opacity="1"/>
  <line class='svgGrid' id="Line_85" data-name="Line 85" y1="105.737" transform="translate(635.591 150)" fill="none" stroke="#707070" stroke-width="0.1" opacity="1"/>
  <line class='svgGrid' id="Line_86" data-name="Line 86" y1="105.737" transform="translate(647.022 150)" fill="none" stroke="#707070" stroke-width="0.1" opacity="1"/>
  <line class='svgGrid' id="Line_87" data-name="Line 87" y1="105.737" transform="translate(658.453 150)" fill="none" stroke="#707070" stroke-width="0.1" opacity="1"/>
  <line class='svgGrid' id="Line_88" data-name="Line 88" y1="105.737" transform="translate(669.884 150)" fill="none" stroke="#707070" stroke-width="0.1" opacity="1"/>
  <line class='svgGrid' id="Line_89" data-name="Line 89" y1="105.737" transform="translate(681.315 150)" fill="none" stroke="#707070" stroke-width="0.1" opacity="1"/>
  <line class='svgGrid' id="Line_90" data-name="Line 90" y1="105.737" transform="translate(692.746 150)" fill="none" stroke="#707070" stroke-width="0.1" opacity="1"/>
  <line class='svgGrid' id="Line_91" data-name="Line 91" y1="105.737" transform="translate(704.177 150)" fill="none" stroke="#707070" stroke-width="0.1" opacity="1"/>
  <line class='svgGrid' id="Line_92" data-name="Line 92" y1="105.737" transform="translate(715.608 150)" fill="none" stroke="#707070" stroke-width="0.1" opacity="1"/>
  <line class='svgGrid' id="Line_93" data-name="Line 93" y1="105.737" transform="translate(727.039 150)" fill="none" stroke="#707070" stroke-width="0.1" opacity="1"/>
  <line class='svgGrid' id="Line_94" data-name="Line 94" y1="105.737" transform="translate(738.47 150)" fill="none" stroke="#707070" stroke-width="0.1" opacity="1"/>
  <line class='svgGrid' id="Line_95" data-name="Line 95" x2="202.9" transform="translate(542 172.148)" fill="none" stroke="#707070" stroke-width="0.1" opacity="1"/>
  <line class='svgGrid' id="Line_96" data-name="Line 96" x2="202.9" transform="translate(542 183.579)" fill="none" stroke="#707070" stroke-width="0.1" opacity="1"/>
  <line class='svgGrid' id="Line_97" data-name="Line 97" x2="202.9" transform="translate(542 195.01)" fill="none" stroke="#707070" stroke-width="0.1" opacity="1"/>
  <line class='svgGrid' id="Line_98" data-name="Line 98" x2="202.9" transform="translate(542 206.441)" fill="none" stroke="#707070" stroke-width="0.1" opacity="1"/>
  <line class='svgGrid' id="Line_99" data-name="Line 99" x2="202.9" transform="translate(542 217.872)" fill="none" stroke="#707070" stroke-width="0.1" opacity="1"/>
  <line class='svgGrid' id="Line_100" data-name="Line 100" x2="202.9" transform="translate(542 229.303)" fill="none" stroke="#707070" stroke-width="0.1" opacity="1"/>
  <line class='svgGrid' id="Line_101" data-name="Line 101" x2="202.9" transform="translate(542 240.734)" fill="none" stroke="#707070" stroke-width="0.1" opacity="1"/>
  <line class='svgGrid' id="Line_102" data-name="Line 102" x2="202.9" transform="translate(542 252.165)" fill="none" stroke="#707070" stroke-width="0.1" opacity="1"/>
  <rect class='svgPanel' id="Rectangle_1589" data-name="Rectangle 1589" width="47" height="73" rx="4" transform="translate(552.45 172.868)" fill="#40393e"/>
  <path class='svgNav' id="Rectangle_1599" data-name="Rectangle 1599" d="M0,0H202a0,0,0,0,1,0,0V6a3,3,0,0,1-3,3H3A3,3,0,0,1,0,6V0A0,0,0,0,1,0,0Z" transform="translate(542.45 153.868)" fill="#bbb"/>
  <rect class='svgPanel' id="Rectangle_1593" data-name="Rectangle 1593" width="47" height="64" rx="4" transform="translate(689.45 172.868)" fill="#40393e"/>
  <rect class='svgHeader' id="Rectangle_1598" data-name="Rectangle 1598" width="202" height="7" transform="translate(542.45 149.868)" fill="#40393e"/>
  <g  id="Rectangle_1594" data-name="Rectangle 1594" transform="translate(559.45 183.868)" fill="#f5f5f5" class='svgText' stroke="#bbb" stroke-width="1">
    <rect width="24" height="3" stroke="none"/>
    <rect x="0.5" y="0.5" width="23" height="2" fill="none"/>
  </g>
  <g  id="Rectangle_1601" data-name="Rectangle 1601" transform="translate(694.45 182.868)" fill="#f5f5f5" class='svgText' stroke="#bbb" stroke-width="1">
    <rect width="36" height="3" stroke="none"/>
    <rect x="0.5" y="0.5" width="35" height="2" fill="none"/>
  </g>
  <g id="Rectangle_1602" data-name="Rectangle 1602" transform="translate(694.45 199.868)" fill="#f5f5f5" class='svgText' stroke="#bbb" stroke-width="1">
    <rect width="36" height="3" stroke="none"/>
    <rect x="0.5" y="0.5" width="35" height="2" fill="none"/>
  </g>
  <g id="Rectangle_1604" data-name="Rectangle 1604" transform="translate(694.45 216.868)" fill="#f5f5f5" class='svgText' stroke="#bbb" stroke-width="1">
    <rect width="36" height="3" stroke="none"/>
    <rect x="0.5" y="0.5" width="35" height="2" fill="none"/>
  </g>
  <g id="Rectangle_1600" data-name="Rectangle 1600" transform="translate(694.89 178.578)" fill="#f5f5f5" class='svgText' stroke="#bbb" stroke-width="1">
    <rect id="fill" width="12.86" height="0.714" stroke="none"/>
    <path d="M0,0.21443802118301392h12.859884262084961M12.359884262084961,0v0.7144380211830139M12.859884262084961,0.5h-12.859884262084961M0.5,0.7144380211830139v-0.7144380211830139" fill="none" clip-path="url(#clip)"/>
  </g>
  <g id="Rectangle_1606" data-name="Rectangle 1606" transform="translate(630.59 152.858)" fill="#f5f5f5" class='svgText' stroke="#bbb" stroke-width="1">
    <rect width="27.149" height="2.143" stroke="none"/>
    <rect x="0.5" y="0.5" width="26.149" height="1.143" fill="none"/>
  </g>
  <g id="Rectangle_1603" data-name="Rectangle 1603" transform="translate(694.89 195.724)" fill="#f5f5f5" class='svgText' stroke="#bbb" stroke-width="1">
    <rect id="fill-2" width="12.86" height="0.714" stroke="none"/>
    <path d="M0,0.21443802118301392h12.859884262084961M12.359884262084961,0v0.7144380211830139M12.859884262084961,0.5h-12.859884262084961M0.5,0.7144380211830139v-0.7144380211830139" fill="none" clip-path="url(#clip-2)"/>
  </g>
  <g id="Rectangle_1605" data-name="Rectangle 1605" transform="translate(694.89 212.871)" fill="#f5f5f5" class='svgText' stroke="#bbb" stroke-width="1">
    <rect id="fill-3" width="12.86" height="0.714" stroke="none"/>
    <path d="M0,0.21443802118301392h12.859884262084961M12.359884262084961,0v0.7144380211830139M12.859884262084961,0.5h-12.859884262084961M0.5,0.7144380211830139v-0.7144380211830139" fill="none" clip-path="url(#clip-3)"/>
  </g>
  <g id="Rectangle_1595" data-name="Rectangle 1595" transform="translate(559.45 198.868)" fill="#f5f5f5" class='svgText' stroke="#bbb" stroke-width="1">
    <rect width="24" height="3" stroke="none"/>
    <rect x="0.5" y="0.5" width="23" height="2" fill="none"/>
  </g>
  <g id="Rectangle_1596" data-name="Rectangle 1596" transform="translate(559.45 212.868)" fill="#f5f5f5" class='svgText' stroke="#bbb" stroke-width="1">
    <rect width="24" height="3" stroke="none"/>
    <rect x="0.5" y="0.5" width="23" height="2" fill="none"/>
  </g>
  <g id="Rectangle_1597" data-name="Rectangle 1597" transform="translate(559.45 226.868)" fill="#f5f5f5" class='svgText' stroke="#bbb" stroke-width="1">
    <rect width="24" height="3" stroke="none"/>
    <rect x="0.5" y="0.5" width="23" height="2" fill="none"/>
  </g>
  <g class='' id="chevron-down" transform="translate(587.949 185.477)">
    <path class='svgChev' id="chevron-down-2" data-name="chevron-down" d="M6,9l1.881,1.881L9.762,9" transform="translate(-6 -9)" fill="none" stroke="#bbb" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
  </g>
  <g id="chevron-down-3" data-name="chevron-down" transform="translate(587.949 199.766)">
    <path class='svgChev' id="chevron-down-4" data-name="chevron-down" d="M6,9l1.881,1.881L9.762,9" transform="translate(-6 -9)" fill="none" stroke="#bbb" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
  </g>
  <g id="chevron-down-5" data-name="chevron-down" transform="translate(587.949 214.055)">
    <path class='svgChev' id="chevron-down-6" data-name="chevron-down" d="M6,9l1.881,1.881L9.762,9" transform="translate(-6 -9)" fill="none" stroke="#bbb" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
  </g>
  <g id="chevron-down-7" data-name="chevron-down" transform="translate(587.949 228.343)">
    <path class='svgChev' id="chevron-down-8" data-name="chevron-down" d="M6,9l1.881,1.881L9.762,9" transform="translate(-6 -9)" fill="none" stroke="#bbb" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
  </g>
</g>
</svg>
`,sf=i=>({Navbar:{color:i["--bg-navbar"],description:"navbar background",ref:["--bg-navbar"]},Primary:{color:i["--primary"],description:"modals background",ref:["--primary"]},Secondary:{color:i["--bg-tabs"],description:"tabBar background",ref:["--bg-tabs"]},Canvas:{color:i["--canvas-fill"],description:"canvas background",ref:["--canvas-fill"]},Stroke:{color:i["--canvas-stroke"],description:"canvas grid color",ref:["--canvas-stroke"]},Text:{color:i["--text-lite"],description:"text color",ref:["--text-lite","--text-panel","--text-dark"]},Borders:{color:i["--br-secondary"],description:"borders color",ref:["--br-secondary"]}});var Or=sf(un["Custom Theme"]);const Ra=()=>tn(!0,!1,!0),cd=()=>{var i=document.createElement("form");Object.keys(Or).forEach(r=>{const h=document.createElement("div"),c=document.createElement("label");c.textContent=`${r} (${Or[r].description})`,c.setAttribute("for",r);const g=document.createElement("input");g.setAttribute("type","color"),g.setAttribute("name",r),g.setAttribute("value",Or[r].color),g.classList.add("customColorInput"),h.append(c),h.append(g),i.append(h)});const n=document.createElement("a");return n.setAttribute("id","downloadThemeFile"),n.setAttribute("style","display:none"),i.appendChild(n),i},lm=()=>{$("#CustomColorThemesDialog").empty(),$("#CustomColorThemesDialog").append(cd()),$("#CustomColorThemesDialog").dialog({resizable:!1,close(){un["Custom Theme"]=JSON.parse(localStorage.getItem("Custom Theme"))||un["Default Theme"],Ci(localStorage.getItem("theme")),Ra()},buttons:[{text:"Apply Theme",click(){localStorage.setItem("theme","Custom Theme"),localStorage.setItem("Custom Theme",JSON.stringify(un["Custom Theme"])),$(".set").removeClass("set"),$(".selected").addClass("set"),$(this).dialog("close")}},{text:"Import Theme",click(){$("#importThemeFile").click()}},{text:"Export Theme",click(){const n=document.getElementById("downloadThemeFile");n.setAttribute("href",`data:text/json;charset=utf-8,${encodeURIComponent(JSON.stringify(un["Custom Theme"]))}`),n.setAttribute("download","CV_CustomTheme.json"),n.click()}}]}),$("#CustomColorThemesDialog").focus();function i(){$(".customColorInput").on("input",n=>{Or[n.target.name].color=n.target.value,Or[n.target.name].ref.forEach(r=>{un["Custom Theme"][r]=n.target.value}),Ci("Custom Theme"),Ra()})}i(),setTimeout(()=>{Ci("Custom Theme"),Ra()},50);function t(n){const r=JSON.parse(n.target.result);Or=sf(r),un["Custom Theme"]=r,Ci("Custom Theme"),Ra(),$("#CustomColorThemesDialog").empty(),$("#CustomColorThemesDialog").append(cd()),i()}$("#importThemeFile").on("change",n=>{var r=n.target.files[0];if(r!==null&&r.name.split(".")[1]==="json"){var h=new FileReader;h.onload=t,h.readAsText(r),$("#importThemeFile").val("")}else alert("File Not Supported !")})},rf=()=>{let i={};return i.hover_select=getComputedStyle(document.documentElement).getPropertyValue("--hover-and-sel"),i.fill=getComputedStyle(document.documentElement).getPropertyValue("--fill"),i.mini_fill=getComputedStyle(document.documentElement).getPropertyValue("--mini-map"),i.mini_stroke=getComputedStyle(document.documentElement).getPropertyValue("--mini-map-stroke"),i.stroke=getComputedStyle(document.documentElement).getPropertyValue("--stroke"),i.stroke_alt=getComputedStyle(document.documentElement).getPropertyValue("--secondary-stroke"),i.input_text=getComputedStyle(document.documentElement).getPropertyValue("--input-text"),i.color_wire_draw=getComputedStyle(document.documentElement).getPropertyValue("--wire-draw"),i.color_wire_con=getComputedStyle(document.documentElement).getPropertyValue("--wire-cnt"),i.color_wire_pow=getComputedStyle(document.documentElement).getPropertyValue("--wire-pow"),i.color_wire_sel=getComputedStyle(document.documentElement).getPropertyValue("--wire-sel"),i.color_wire_lose=getComputedStyle(document.documentElement).getPropertyValue("--wire-lose"),i.color_wire=getComputedStyle(document.documentElement).getPropertyValue("--wire-norm"),i.text=getComputedStyle(document.documentElement).getPropertyValue("--text"),i.node=getComputedStyle(document.documentElement).getPropertyValue("--node"),i.node_norm=getComputedStyle(document.documentElement).getPropertyValue("--node-norm"),i.splitter=getComputedStyle(document.documentElement).getPropertyValue("--splitter"),i.out_rect=getComputedStyle(document.documentElement).getPropertyValue("--output-rect"),i.canvas_stroke=getComputedStyle(document.documentElement).getPropertyValue("--canvas-stroke"),i.canvas_fill=getComputedStyle(document.documentElement).getPropertyValue("--canvas-fill"),i};let ht=rf();function Ci(i){const t=un[i];if(t===void 0)return;const n=document.getElementsByTagName("html")[0];Object.keys(t).forEach((r,h)=>{n.style.setProperty(r,t[r])}),ht=rf()}const hm=i=>{const t=un[i];let n=$(am);return $(".svgText",n).attr("fill",t["--text-panel"]),$(".svgNav",n).attr("fill",t["--bg-tab"]),$(".svgNav",n).attr("stroke",t["--br-primary"]),$(".svgGridBG",n).attr("fill",t["--canvas-fill"]),$(".svgGrid",n).attr("fill",t["--canvas-stroke"]),$(".svgPanel",n).attr("fill",t["--primary"]),$(".svgPanel",n).attr("stroke",t["--br-primary"]),$(".svgChev",n).attr("stroke",t["--br-secondary"]),$(".svgHeader",n).attr("fill",t["--primary"]),n.prop("outerHTML")},dd=(i,t)=>{if(i==="Custom Theme")return"<div></div>";let n=i.replace(" ","");return`
            <div id="theme" class="theme ${t?"selected set":""}">
              <div class='themeSel'></div>
              <span>${hm(i)}</span>
              <span id='themeNameBox' class='themeNameBox'>
                <input type='radio' id='${n}' value='${i}' name='theme'>
                <label for='${n}'>${i}</label>
              </span>
            </div>
            `},um=()=>{const i=localStorage.getItem("theme");$("#colorThemesDialog").empty(),Object.keys(un).forEach(n=>{n===i?$("#colorThemesDialog").append(dd(n,!0)):$("#colorThemesDialog").append(dd(n,!1))}),$(".selected label").trigger("click"),$("#colorThemesDialog").dialog({resizable:!1,close(){Ci(localStorage.getItem("theme")),fd()},buttons:[{text:"Apply Theme",click(){$(".selected label").text()&&(localStorage.removeItem("Custom Theme"),localStorage.setItem("theme",$(".selected label").text())),$(".set").removeClass("set"),$(".selected").addClass("set"),$(this).dialog("close")}},{text:"Custom Theme",click(){lm(),$(this).dialog("close")}}]}),$("#colorThemesDialog").focus(),$('.ui-dialog[aria-describedby="colorThemesDialog"]').on("click",()=>$("#colorThemesDialog").focus()),$(".themeSel").on("mousedown",n=>{n.preventDefault(),$(".selected").removeClass("selected");let r=$(n.target.parentElement);r.addClass("selected");var h=r.find("input[type=radio]");h.trigger("click"),Ci(r.find("label").text()),fd()})},fd=()=>tn(!0,!1,!0);localStorage.getItem("theme")||localStorage.setItem("theme","Default Theme"),Ci(localStorage.getItem("theme"));const Ka={canvas:document.getElementById("miniMapArea"),setup(){if(!lightMode){this.canvas=document.getElementById("miniMapArea"),this.pageHeight=height,this.pageWidth=width,this.pageY=this.pageHeight-globalScope.oy,this.pageX=this.pageWidth-globalScope.ox,f.minHeight!=null?this.minY=Math.min(f.minHeight,-globalScope.oy/globalScope.scale):this.minY=-globalScope.oy/globalScope.scale,f.maxHeight!=null?this.maxY=Math.max(f.maxHeight,this.pageY/globalScope.scale):this.maxY=this.pageY/globalScope.scale,f.minWidth!=null?this.minX=Math.min(f.minWidth,-globalScope.ox/globalScope.scale):this.minX=-globalScope.ox/globalScope.scale,f.maxWidth!=null?this.maxX=Math.max(f.maxWidth,this.pageX/globalScope.scale):this.maxX=this.pageX/globalScope.scale;var i=this.maxY-this.minY,t=this.maxX-this.minX,n=Math.min(250/i,250/t);i>t?(this.canvas.height=250,this.canvas.width=250*t/i):(this.canvas.width=250,this.canvas.height=250*i/t),this.canvas.height+=5,this.canvas.width+=5,document.getElementById("miniMap").style.height=this.canvas.height,document.getElementById("miniMap").style.width=this.canvas.width,this.ctx=this.canvas.getContext("2d"),this.play(n)}},play(i){lightMode||_e()||(this.ctx.fillStyle="#bbb",this.ctx.rect(0,0,this.canvas.width,this.canvas.height),this.ctx.fill(),this.resolve(i))},resolve(i){if(lightMode)return;this.ctx.fillStyle="#ddd",this.ctx.beginPath(),this.ctx.rect(2.5+((this.pageX-this.pageWidth)/globalScope.scale-this.minX)*i,2.5+((this.pageY-this.pageHeight)/globalScope.scale-this.minY)*i,this.pageWidth*i/globalScope.scale,this.pageHeight*i/globalScope.scale),this.ctx.fill();var t=updateOrder;const n=ht.mini_fill,r=ht.mini_stroke;this.ctx.strokeStyle=r,this.ctx.fillStyle=n;for(var h=0;h<t.length;h++)if(t[h]==="wires")for(var c=0;c<globalScope[t[h]].length;c++)this.ctx.beginPath(),this.ctx.moveTo(2.5+(globalScope[t[h]][c].node1.absX()-this.minX)*i,2.5+(globalScope[t[h]][c].node1.absY()-this.minY)*i),this.ctx.lineTo(2.5+(globalScope[t[h]][c].node2.absX()-this.minX)*i,2.5+(globalScope[t[h]][c].node2.absY()-this.minY)*i),this.ctx.stroke();else if(t[h]!="nodes"){var g=0;(t[h]=="DigitalLed"||t[h]=="VariableLed"||t[h]=="RGBLed")&&(g=20);for(var c=0;c<globalScope[t[h]].length;c++){globalScope[t[h]][c].x-f.minWidth,globalScope[t[h]][c].y-f.minHeight,this.ctx.beginPath();var v=globalScope[t[h]][c];this.ctx.rect(2.5+(v.x-v.leftDimensionX-this.minX)*i,2.5+(v.y-v.upDimensionY-this.minY)*i,(v.rightDimensionX+v.leftDimensionX)*i,(v.downDimensionY+v.upDimensionY+g)*i),this.ctx.fill(),this.ctx.stroke()}}},clear(){lightMode||($("#miniMapArea").css("z-index","-1"),this.context.clearRect(0,0,this.canvas.width,this.canvas.height))}};var xh;function of(){xh=new Date().getTime()}function Rh(){if(!lightMode&&!(f.lastSelected==globalScope.root&&f.mouseDown)){if(xh+2e3>=new Date().getTime()){setTimeout(Rh,xh+2e3-new Date().getTime());return}$("#miniMap").fadeOut("fast")}}var cm=10;function Br(i=globalScope){var t=0;f.minWidth=void 0,f.maxWidth=void 0,f.minHeight=void 0,f.maxHeight=void 0;for(var n=0;n<updateOrder.length;n++)if(updateOrder[n]!=="wires")for(var r=0;r<i[updateOrder[n]].length;r++){t+=1;var h=i[updateOrder[n]][r];t===1&&(f.minWidth=h.absX(),f.minHeight=h.absY(),f.maxWidth=h.absX(),f.maxHeight=h.absY()),h.objectType!=="Node"?(h.y-h.upDimensionY<f.minHeight&&(f.minHeight=h.y-h.upDimensionY),h.y+h.downDimensionY>f.maxHeight&&(f.maxHeight=h.y+h.downDimensionY),h.x-h.leftDimensionX<f.minWidth&&(f.minWidth=h.x-h.leftDimensionX),h.x+h.rightDimensionX>f.maxWidth&&(f.maxWidth=h.x+h.rightDimensionX)):(h.absY()<f.minHeight&&(f.minHeight=h.absY()),h.absY()>f.maxHeight&&(f.maxHeight=h.absY()),h.absX()<f.minWidth&&(f.minWidth=h.absX()),h.absX()>f.maxWidth&&(f.maxWidth=h.absX()))}f.objectList=updateOrder}function On(i,t,n,r=1){r===3?(t=(width/2-globalScope.ox)/globalScope.scale,n=(height/2-globalScope.oy)/globalScope.scale):(t===void 0||n===void 0||t==="zoomButton"||n==="zoomButton")&&(f.lastSelected&&f.lastSelected.objectType!=="Wire"?(t=f.lastSelected.x,n=f.lastSelected.y):r===1?(t=f.mouseX,n=f.mouseY):r===2&&(t=(width/2-globalScope.ox)/globalScope.scale,n=(height/2-globalScope.oy)/globalScope.scale));var h=globalScope.scale;globalScope.scale=Math.max(.5,Math.min(4*DPR,globalScope.scale+i)),globalScope.scale=Math.round(globalScope.scale*10)/10,globalScope.ox-=Math.round(t*(globalScope.scale-h)),globalScope.oy-=Math.round(n*(globalScope.scale-h)),!embed&&!lightMode&&(Br(globalScope),Ka.setup(),$("#miniMap").show(),of(),$("#miniMap").show(),setTimeout(Rh,2e3))}function tn(i=!0,t=!1,n=!1){var r=cm*globalScope.scale,h=globalScope.ox%r,c=globalScope.oy%r;if(document.getElementById("backgroundArea").style.left=(h-r)/DPR,document.getElementById("backgroundArea").style.top=(c-r)/DPR,!(globalScope.scale===f.prevScale&&!n)&&ai.context){f.prevScale=globalScope.scale;var g=ai.canvas.width,v=ai.canvas.height,w=ai.context;if(w.beginPath(),ai.clear(),w.strokeStyle=ht.canvas_stroke,w.lineWidth=1,t||(w.fillStyle=ht.canvas_fill,w.rect(0,0,g,v),w.fill()),!embed){for(var D=.5*(w.lineWidth%2),T=0;T<g;T+=r)w.moveTo(Math.round(T+D)-D,0),w.lineTo(Math.round(T+D)-D,v);for(var R=0;R<v;R+=r)w.moveTo(0,Math.round(R+D)-D),w.lineTo(g,Math.round(R+D)-D);w.stroke()}}}function Bi(i,t,n,r,h,c,g,v,w){[i,t]=Ti(i,t,w),[n,r]=Ti(n,r,w),[h,c]=Ti(h,c,w);var{ox:D}=globalScope,{oy:T}=globalScope;i*=globalScope.scale,t*=globalScope.scale,n*=globalScope.scale,r*=globalScope.scale,h*=globalScope.scale,c*=globalScope.scale,g*=globalScope.scale,v*=globalScope.scale;var R=f.context;R.bezierCurveTo(Math.round(g+D+i),Math.round(v+T+t),Math.round(g+D+n),Math.round(v+T+r),Math.round(g+D+h),Math.round(v+T+c))}function se(i,t,n,r,h,c,g=!1){var v=.5*(i.lineWidth%2);let w,D;[w,D]=Ti(t,n,c),w*=globalScope.scale,D*=globalScope.scale,r*=globalScope.scale,h*=globalScope.scale,g?i.moveTo(r+globalScope.ox+w,h+globalScope.oy+D):i.moveTo(Math.round(r+globalScope.ox+w-v)+v,Math.round(h+globalScope.oy+D-v)+v)}function Ct(i,t,n,r,h,c){let g,v;var w=.5*(i.lineWidth%2);[g,v]=Ti(t,n,c),g*=globalScope.scale,v*=globalScope.scale,r*=globalScope.scale,h*=globalScope.scale,i.lineTo(Math.round(r+globalScope.ox+g-w)+w,Math.round(h+globalScope.oy+v-w)+w)}function ss(i,t,n,r,h,c,g,v,w){let D,T,R,W,L;var E=.5*(i.lineWidth%2);[D,T]=Ti(t,n,w),D*=globalScope.scale,T*=globalScope.scale,g*=globalScope.scale,v*=globalScope.scale,r*=globalScope.scale,[R,W,L]=lf(h,c,w),i.arc(Math.round(g+globalScope.ox+D+E)-E,Math.round(v+globalScope.oy+T+E)-E,Math.round(r),R,W,L)}function af(i,t,n,r,h,c,g,v,w){let D,T,R,W,L;var E=.5*(i.lineWidth%2);[D,T]=Ti(t,n,w),D*=globalScope.scale,T*=globalScope.scale,g*=globalScope.scale,v*=globalScope.scale,r*=globalScope.scale,[R,W,L]=lf(h,c,w);var V=0;L&&(V=Math.PI),i.arc(Math.round(g+globalScope.ox+D+E)-E,Math.round(v+globalScope.oy+T+E)-E,Math.round(r),R+V,W+V)}function $i(i,t,n,r,h,c,g){let v,w;[v,w]=Ti(t,n,g),v*=globalScope.scale,w*=globalScope.scale,h*=globalScope.scale,c*=globalScope.scale,r*=globalScope.scale,i.arc(Math.round(h+globalScope.ox+v),Math.round(c+globalScope.oy+w),Math.round(r),0,2*Math.PI)}function zi(i,t,n,r,h){var c=.5*(i.lineWidth%2);t*=globalScope.scale,n*=globalScope.scale,r*=globalScope.scale,h*=globalScope.scale,i.rect(Math.round(globalScope.ox+t-c)+c,Math.round(globalScope.oy+n-c)+c,Math.round(r),Math.round(h))}function dm(i,t,n,r,h,c){n*=globalScope.scale,r*=globalScope.scale,n+=globalScope.ox,r+=globalScope.oy,h*=globalScope.scale,c*=globalScope.scale,i.drawImage(t,n,r,h,c)}function Ee(i,t,n,r,h,c,g,v="RIGHT"){var w=.5*(i.lineWidth%2);[t,n]=Ti(t,n,v),[r,h]=Ti(r,h,v),t*=globalScope.scale,n*=globalScope.scale,r*=globalScope.scale,h*=globalScope.scale,c*=globalScope.scale,g*=globalScope.scale,i.rect(Math.round(globalScope.ox+c+t-w)+w,Math.round(globalScope.oy+g+n-w)+w,Math.round(r),Math.round(h))}function Ti(i,t,n){return n==="LEFT"?[-i,t]:n==="DOWN"?[t,i]:n==="UP"?[t,-i]:[i,t]}function Rt(i){return Math.max(1,Math.round(i*globalScope.scale))}function lf(i,t,n){return n==="LEFT"?[i,t,!0]:n==="DOWN"?[i-Math.PI/2,t-Math.PI/2,!0]:n==="UP"?[i-Math.PI/2,t-Math.PI/2,!1]:[i,t,!1]}function Ps(i,t,n,r,h,c,g){t*=globalScope.scale,n*=globalScope.scale,r*=globalScope.scale,h*=globalScope.scale,i.beginPath(),i.strokeStyle=c,i.lineCap="round",i.lineWidth=Rt(g);var v=.5*(i.lineWidth%2),w=0,D=0;n===h&&(D=v),t===r&&(w=v),i.moveTo(Math.round(t+globalScope.ox+w)-w,Math.round(n+globalScope.oy+D)-D),i.lineTo(Math.round(r+globalScope.ox+w)-w,Math.round(h+globalScope.oy+D)-D),i.stroke()}function Fo(i){var t=$("<div>");return t.css("border",`1px solid ${i}`),t.css("border-color")!==""}function Ms(i){var t,n;return t=document.createElement("canvas"),t.height=1,t.width=1,n=t.getContext("2d"),n.fillStyle=i,n.fillRect(0,0,1,1),n.getImageData(0,0,1,1).data}function kh(i,t,n,r,h){t*=globalScope.scale,n*=globalScope.scale,i.beginPath(),i.fillStyle=h,i.arc(Math.round(t+globalScope.ox),Math.round(n+globalScope.oy),Math.round(r*globalScope.scale),0,Math.PI*2,!1),i.closePath(),i.fill()}function fm(i,t,n,r,h=10){if(!(!t||!t.length)){i.font=`${Math.round(h*globalScope.scale)}px Raleway`,i.textAlign="center";var c=i.measureText(t).width/globalScope.scale+8,g=13;i.strokeStyle="black",i.lineWidth=Rt(1),i.fillStyle="yellow",i.save(),i.beginPath(),zi(i,n-c/2,r-g/2-3,c,g),i.shadowColor="#999",i.shadowBlur=10,i.shadowOffsetX=3,i.shadowOffsetY=3,i.stroke(),i.fill(),i.restore(),n*=globalScope.scale,r*=globalScope.scale,i.beginPath(),i.fillStyle="black",i.fillText(t,Math.round(n+globalScope.ox),Math.round(r+globalScope.oy)),i.fill()}}function Ut(i,t,n,r,h=20){n*=globalScope.scale,r*=globalScope.scale,i.font=`${Math.round(h*globalScope.scale)}px Raleway`,i.fillText(t,Math.round(n+globalScope.ox),Math.round(r+globalScope.oy))}function Oo(i,t,n,r,h,c,g){var v={RIGHT:0,LEFT:0,DOWN:Math.PI/2,UP:-Math.PI/2};n*=globalScope.scale,r*=globalScope.scale,[n,r]=Ti(n,r,g),h*=globalScope.scale,c*=globalScope.scale,i.font=`${Math.round(14*globalScope.scale)}px Raleway`,i.save(),i.translate(Math.round(h+n+globalScope.ox),Math.round(c+r+globalScope.oy)),i.rotate(v[g]),i.textAlign="center",i.fillText(t,0,Math.round(4*globalScope.scale)*(1-0*+(g==="DOWN"))),i.restore()}function cn(i,t,n,r,h,c,g,v=14,w="center"){n*=globalScope.scale,r*=globalScope.scale,[n,r]=Ti(n,r,g),h*=globalScope.scale,c*=globalScope.scale,i.font=`${Math.round(v*globalScope.scale)}px Raleway`,i.textAlign=w,i.fillText(t,h+n+globalScope.ox,c+r+globalScope.oy+Math.round(v/3*globalScope.scale))}function Os(i,t,n,r,h=0,c=0,g=14,v="Raleway",w="center"){n*=globalScope.scale,r*=globalScope.scale,h*=globalScope.scale,c*=globalScope.scale,i.font=`${Math.round(g*globalScope.scale)}px ${v}`,i.textAlign=w,i.fillText(t,Math.round(h+n+globalScope.ox),Math.round(c+r+globalScope.oy))}const jo={RIGHT:"LEFT",LEFT:"RIGHT",DOWN:"UP",UP:"DOWN"},pd={right:"LEFT",left:"RIGHT",down:"UP",up:"DOWN",LEFT:"LEFT",RIGHT:"RIGHT",UP:"UP",DOWN:"DOWN"};class gd{constructor(t,n,r,h="",c,g){this.type=c,this.id=r,this.label=h,this.prevx=void 0,this.prevy=void 0,this.x=t,this.y=n,this.radius=5,this.clicked=!1,this.hover=!1,this.wasClicked=!1,this.prev="a",this.count=0,this.parent=g,this.objectType="Layout Node"}absX(){return this.x}absY(){return this.y}update(){this===f.hover&&(f.hover=void 0),this.hover=this.isHover(),f.mouseDown||(this.absX()!==this.prevx||this.absY()!==this.prevy)&&(this.prevx=this.absX(),this.prevy=this.absY()),this.hover&&(f.hover=this),f.mouseDown&&(this.hover&&!f.selected||f.lastSelected===this)?(f.selected=!0,f.lastSelected=this,this.clicked=!0):this.clicked=!1,!this.wasClicked&&this.clicked?(this.wasClicked=!0,this.prev="a",f.lastSelected=this):this.wasClicked&&this.clicked&&yt.isAllowed(f.mouseX,f.mouseY)&&!yt.isNodeAt(f.mouseX,f.mouseY)&&(this.x=f.mouseX,this.y=f.mouseY)}draw(){var t=f.context;kh(t,this.absX(),this.absY(),3,["green","red"][+(f.lastSelected===this)])}isHover(){return this.absX()===f.mouseX&&this.absY()===f.mouseY}}class pm{constructor(t=globalScope){var n=300*DPR,r=50*DPR;globalScope.ox=n,globalScope.oy=r,this.layout={...t.layout},this.Input=[];for(let h=0;h<t.Input.length;h++)this.Input.push(new gd(t.Input[h].layoutProperties.x,t.Input[h].layoutProperties.y,t.Input[h].layoutProperties.id,t.Input[h].label,t.Input[h].type,t.Input[h]));this.Output=[];for(let h=0;h<t.Output.length;h++)this.Output.push(new gd(t.Output[h].layoutProperties.x,t.Output[h].layoutProperties.y,t.Output[h].layoutProperties.id,t.Output[h].label,t.Output[h].type,t.Output[h]));this.subElements=[]}isAllowed(t,n){return!(t<0||t>this.layout.width||n<0||n>this.layout.height||t>0&&t<this.layout.width&&n>0&&n<this.layout.height||t===0&&n===0||t===0&&n===this.layout.height||t===this.layout.width&&n===0||t===this.layout.width&&n===this.layout.height)}isNodeAt(t,n){for(let r=0;r<this.Input.length;r++)if(this.Input[r].x===t&&this.Input[r].y===n)return!0;for(let r=0;r<this.Output.length;r++)if(this.Output[r].x===t&&this.Output[r].y===n)return!0;return!1}}function hn(i){var t=i;return t.search(/ /g)<t.length-1&&t.search(/ /g)>=0&&(t=t.replace(/ Inverse/g,"_inv"),t=t.replace(/ /g,"_")),t.substring(0,1).search(/\\/g)<0&&(t.search(/[\W]/g)>-1||t.substring(0,1).search(/[0-9]/g)>-1)&&(t="\\"+t+" "),t}function gm(i,t,n){if(i.verilogLabel)return i.verilogLabel;var r=i.parent.verilogLabel,h;return i.label?h=hn(i.label):h=n>1?"out_"+t:"out",r.substring(0,1).search(/\\/g)<0?r+"_"+h:r.substring(0,r.length-1)+"_"+h+" "}class Ht{constructor(t,n,r,h,c){this.x=t,this.y=n,this.hover=!1,(this.x===void 0||this.y===void 0)&&(this.x=f.mouseX,this.y=f.mouseY,this.newElement=!0,this.hover=!0),this.deleteNodesWhenDeleted=!0,this.nodeList=[],this.clicked=!1,this.oldx=t,this.oldy=n,this.leftDimensionX=10,this.rightDimensionX=10,this.upDimensionY=10,this.downDimensionY=10,this.label="",this.scope=r,this.baseSetup(),this.bitWidth=c||parseInt(prompt("Enter bitWidth"),10)||1,this.direction=h,this.directionFixed=!1,this.labelDirectionFixed=!1,this.labelDirection=jo[h],this.orientationFixed=!0,this.fixedBitWidth=!1,ge(),this.queueProperties={inQueue:!1,time:void 0,index:void 0},this.canShowInSubcircuit&&(this.subcircuitMetadata={showInSubcircuit:!1,showLabelInSubcircuit:!0,labelDirection:this.labelDirection,x:0,y:0})}flipBits(t){return~t>>>0<<32-this.bitWidth>>>32-this.bitWidth}absX(){return this.x}absY(){return this.y}baseSetup(){this.scope[this.objectType].push(this)}copyFrom(t){var n=["label","labelDirection"];for(let r=0;r<n.length;r++)t[n[r]]!==void 0&&(this[n[r]]=t[n[r]])}updateScope(t){this.scope=t;for(let n=0;n<this.nodeList.length;n++)this.nodeList[n].scope=t}saveObject(){var t={x:this.x,y:this.y,objectType:this.objectType,label:this.label,direction:this.direction,labelDirection:this.labelDirection,propagationDelay:this.propagationDelay,customData:this.customSave()};return this.canShowInSubcircuit&&(t.subcircuitMetadata=this.subcircuitMetadata),t}customSave(){return{values:{},nodes:{},constructorParamaters:[]}}checkHover(){if(!f.mouseDown){for(let t=0;t<this.nodeList.length;t++)this.nodeList[t].checkHover();f.mouseDown||(f.hover===this?(this.hover=this.isHover(),this.hover||(f.hover=void 0)):f.hover?this.hover=!1:(this.hover=this.isHover(),this.hover&&(f.hover=this)))}}setDimensions(t,n){this.leftDimensionX=this.rightDimensionX=t,this.downDimensionY=this.upDimensionY=n}setWidth(t){this.leftDimensionX=this.rightDimensionX=t}setHeight(t){this.downDimensionY=this.upDimensionY=t}startDragging(){_e()?(this.oldx=this.subcircuitMetadata.x,this.oldy=this.subcircuitMetadata.y):(this.oldx=this.x,this.oldy=this.y)}drag(){_e()?(this.subcircuitMetadata.x=this.oldx+f.mouseX-f.mouseDownX,this.subcircuitMetadata.y=this.oldy+f.mouseY-f.mouseDownY):(this.x=this.oldx+f.mouseX-f.mouseDownX,this.y=this.oldy+f.mouseY-f.mouseDownY)}update(){if(_e())return this.layoutUpdate();let t=!1;if(t|=this.newElement,this.newElement)if(this.centerElement?(this.x=Math.round((f.mouseX-(this.rightDimensionX-this.leftDimensionX)/2)/10)*10,this.y=Math.round((f.mouseY-(this.downDimensionY-this.upDimensionY)/2)/10)*10):(this.x=f.mouseX,this.y=f.mouseY),f.mouseDown)this.newElement=!1,f.lastSelected=this;else return t;for(let n=0;n<this.nodeList.length;n++)t|=this.nodeList[n].update();if((!f.hover||f.hover===this)&&(this.hover=this.isHover()),f.mouseDown||(this.hover=!1),(this.clicked||!f.hover)&&this.isHover()?(this.hover=!0,f.hover=this):!f.mouseDown&&this.hover&&this.isHover()===!1&&(this.hover&&(f.hover=void 0),this.hover=!1),f.mouseDown&&this.clicked){if(this.drag(),!f.shiftDown&&f.multipleObjectSelections.contains(this))for(let n=0;n<f.multipleObjectSelections.length;n++)f.multipleObjectSelections[n].drag();t|=!0}else if(f.mouseDown&&!f.selected){if(this.startDragging(),!f.shiftDown&&f.multipleObjectSelections.contains(this))for(let n=0;n<f.multipleObjectSelections.length;n++)f.multipleObjectSelections[n].startDragging();f.selected=this.clicked=this.hover,t|=this.clicked}else this.clicked&&(f.selected=!1),this.clicked=!1,this.wasClicked=!1,this.objectType=="SubCircuit"&&this.releaseClick();return f.mouseDown&&!this.wasClicked&&this.clicked&&(this.wasClicked=!0,this.click&&this.click(),f.shiftDown?(f.lastSelected=void 0,f.multipleObjectSelections.contains(this)?f.multipleObjectSelections.clean(this):f.multipleObjectSelections.push(this)):f.lastSelected=this),t}layoutUpdate(){var t=!1;if(t|=this.newElement,this.newElement)if(this.subcircuitMetadata.x=f.mouseX,this.subcircuitMetadata.y=f.mouseY,f.mouseDown)this.newElement=!1,f.lastSelected=this;else return;if((!f.hover||f.hover==this)&&(this.hover=this.isHover()),(this.clicked||!f.hover)&&this.isHover()?(this.hover=!0,f.hover=this):!f.mouseDown&&this.hover&&this.isHover()==!1&&(this.hover&&(f.hover=void 0),this.hover=!1),f.mouseDown&&this.clicked?(this.drag(),t|=!0):f.mouseDown&&!f.selected?(this.startDragging(),f.selected=this.clicked=this.hover,t|=this.clicked):(this.clicked&&(f.selected=!1),this.clicked=!1,this.wasClicked=!1),f.mouseDown&&!this.wasClicked&&this.clicked&&(this.wasClicked=!0,f.lastSelected=this),!this.clicked&&!this.newElement){let n=this.subcircuitMetadata.x,r=this.subcircuitMetadata.y,h=yt.layout.height,c=yt.layout.width,g=this.layoutProperties.rightDimensionX,v=this.layoutProperties.leftDimensionX,w=this.layoutProperties.upDimensionY,D=this.layoutProperties.downDimensionY;if(v<=n&&n+g<=c&&r>=w&&r+D<=h)return;this.subcircuitMetadata.showInSubcircuit=!1,Ff()}return t}fixDirection(){this.direction=pd[this.direction]||this.direction,this.labelDirection=pd[this.labelDirection]||this.labelDirection}isHover(){var t=f.touch?f.mouseDownX-this.x:f.mouseXf-this.x,n=f.touch?this.y-f.mouseDownY:this.y-f.mouseYf,r=this.rightDimensionX,h=this.leftDimensionX,c=this.upDimensionY,g=this.downDimensionY;if(_e())var t=f.mouseXf-this.subcircuitMetadata.x,n=this.subcircuitMetadata.y-f.mouseYf,r=this.layoutProperties.rightDimensionX,h=this.layoutProperties.leftDimensionX,c=this.layoutProperties.upDimensionY,g=this.layoutProperties.downDimensionY;return!this.directionFixed&&!this.overrideDirectionRotation&&(this.direction==="LEFT"?(h=this.rightDimensionX,r=this.leftDimensionX):this.direction==="DOWN"?(h=this.downDimensionY,r=this.upDimensionY,c=this.leftDimensionX,g=this.rightDimensionX):this.direction==="UP"&&(h=this.downDimensionY,r=this.upDimensionY,g=this.leftDimensionX,c=this.rightDimensionX)),-h<=t&&t<=r&&-g<=n&&n<=c}isSubcircuitHover(t=0,n=0){var r=f.mouseXf-this.subcircuitMetadata.x-t,h=n+this.subcircuitMetadata.y-f.mouseYf,c=this.layoutProperties.rightDimensionX,g=this.layoutProperties.leftDimensionX,v=this.layoutProperties.upDimensionY,w=this.layoutProperties.downDimensionY;return-g<=r&&r<=c&&-w<=h&&h<=v}setLabel(t){this.label=t||""}draw(){var t=f.context;if(this.checkHover(),!(this.x*this.scope.scale+this.scope.ox<-this.rightDimensionX*this.scope.scale-0||this.x*this.scope.scale+this.scope.ox>width+this.leftDimensionX*this.scope.scale+0||this.y*this.scope.scale+this.scope.oy<-this.downDimensionY*this.scope.scale-0||this.y*this.scope.scale+this.scope.oy>height+0+this.upDimensionY*this.scope.scale)){if(this.rectangleObject&&(t.strokeStyle=ht.stroke,t.fillStyle=ht.fill,t.lineWidth=Rt(3),t.beginPath(),Ee(t,-this.leftDimensionX,-this.upDimensionY,this.leftDimensionX+this.rightDimensionX,this.upDimensionY+this.downDimensionY,this.x,this.y,[this.direction,"RIGHT"][+this.directionFixed]),(this.hover&&!f.shiftDown||f.lastSelected===this||f.multipleObjectSelections.contains(this))&&(t.fillStyle=ht.hover_select),t.fill(),t.stroke()),this.label!==""){var n=this.rightDimensionX,r=this.leftDimensionX,h=this.upDimensionY,c=this.downDimensionY;this.directionFixed||(this.direction==="LEFT"?(r=this.rightDimensionX,n=this.leftDimensionX):this.direction==="DOWN"?(r=this.downDimensionY,n=this.upDimensionY,h=this.leftDimensionX,c=this.rightDimensionX):this.direction==="UP"&&(r=this.downDimensionY,n=this.upDimensionY,c=this.leftDimensionX,h=this.rightDimensionX)),this.labelDirection==="LEFT"?(t.beginPath(),t.textAlign="right",t.fillStyle=ht.text,Ut(t,this.label,this.x-r-10,this.y+5,14),t.fill()):this.labelDirection==="RIGHT"?(t.beginPath(),t.textAlign="left",t.fillStyle=ht.text,Ut(t,this.label,this.x+n+10,this.y+5,14),t.fill()):this.labelDirection==="UP"?(t.beginPath(),t.textAlign="center",t.fillStyle=ht.text,Ut(t,this.label,this.x,this.y+5-h-10,14),t.fill()):this.labelDirection==="DOWN"&&(t.beginPath(),t.textAlign="center",t.fillStyle=ht.text,Ut(t,this.label,this.x,this.y+5+c+10,14),t.fill())}this.customDraw&&this.customDraw()}}drawLayoutMode(t=0,n=0){var r=f.context;if(_e()&&this.checkHover(),!(this.subcircuitMetadata.x*this.scope.scale+this.scope.ox<-this.layoutProperties.rightDimensionX*this.scope.scale||this.subcircuitMetadata.x*this.scope.scale+this.scope.ox>width+this.layoutProperties.leftDimensionX*this.scope.scale||this.subcircuitMetadata.y*this.scope.scale+this.scope.oy<-this.layoutProperties.downDimensionY*this.scope.scale||this.subcircuitMetadata.y*this.scope.scale+this.scope.oy>height+this.layoutProperties.upDimensionY*this.scope.scale)){if(this.subcircuitMetadata.showLabelInSubcircuit){var h=this.layoutProperties.rightDimensionX,c=this.layoutProperties.leftDimensionX,g=this.layoutProperties.upDimensionY,v=this.layoutProperties.downDimensionY;this.subcircuitMetadata.labelDirection=="LEFT"?(r.beginPath(),r.textAlign="right",r.fillStyle="black",Ut(r,this.label,this.subcircuitMetadata.x+t-c-10,this.subcircuitMetadata.y+n+5,10),r.fill()):this.subcircuitMetadata.labelDirection=="RIGHT"?(r.beginPath(),r.textAlign="left",r.fillStyle="black",Ut(r,this.label,this.subcircuitMetadata.x+t+h+10,this.subcircuitMetadata.y+n+5,10),r.fill()):this.subcircuitMetadata.labelDirection=="UP"?(r.beginPath(),r.textAlign="center",r.fillStyle="black",Ut(r,this.label,this.subcircuitMetadata.x+t,this.subcircuitMetadata.y+n+5-g-10,10),r.fill()):this.subcircuitMetadata.labelDirection=="DOWN"&&(r.beginPath(),r.textAlign="center",r.fillStyle="black",Ut(r,this.label,this.subcircuitMetadata.x+t,this.subcircuitMetadata.y+n+5+v+10,10),r.fill())}this.subcircuitDraw(t,n)}}delete(){if(f.lastSelected=void 0,this.scope[this.objectType].clean(this),this.deleteNodesWhenDeleted)this.deleteNodes();else for(let t=0;t<this.nodeList.length;t++)this.nodeList[t].connections.length?this.nodeList[t].converToIntermediate():this.nodeList[t].delete();this.deleted=!0}cleanDelete(){this.deleteNodesWhenDeleted=!0,this.delete()}deleteNodes(){for(let t=0;t<this.nodeList.length;t++)this.nodeList[t].delete()}newDirection(t){if(this.direction!==t&&!(this.directionFixed&&this.orientationFixed)){if(this.directionFixed){this.newOrientation(t);return}this.direction=t;for(let n=0;n<this.nodeList.length;n++)this.nodeList[n].refresh()}}newLabelDirection(t){_e()?this.subcircuitMetadata.labelDirection=t:this.labelDirection=t}isResolvable(){if(this.alwaysResolve)return!0;for(let t=0;t<this.nodeList.length;t++)if(this.nodeList[t].type===0&&this.nodeList[t].value===void 0)return!1;return!0}newBitWidth(t){if(!this.fixedBitWidth&&this.bitWidth!==void 0&&!(this.bitWidth<1)){this.bitWidth=t;for(let n=0;n<this.nodeList.length;n++)this.nodeList[n].bitWidth=t}}changePropagationDelay(t){if(!this.propagationDelayFixed&&t!==void 0&&t!==""){var n=parseInt(t,10);n<0||(this.propagationDelay=n)}}resolve(){}processVerilog(){for(var t=0,n=0;n<this.nodeList.length;n++)this.nodeList[n].type==NODE_OUTPUT&&this.nodeList[n].connections.length>0&&t++;for(var r=0,n=0;n<this.nodeList.length;n++)this.nodeList[n].type==NODE_OUTPUT&&(this.objectType!="Input"&&this.objectType!="Clock"&&this.nodeList[n].connections.length>0&&(this.nodeList[n].verilogLabel=gm(this.nodeList[n],r,t),this.scope.verilogWireList[this.nodeList[n].bitWidth].contains(this.nodeList[n].verilogLabel)||this.scope.verilogWireList[this.nodeList[n].bitWidth].push(this.nodeList[n].verilogLabel),r++),this.scope.stack.push(this.nodeList[n]))}isVerilogResolvable(){var t=[];for(let r=0;r<this.nodeList.length;r++)t.push(this.nodeList[r].value),this.nodeList[r].value=void 0;for(let r=0;r<this.nodeList.length;r++)this.nodeList[r].verilogLabel&&(this.nodeList[r].value=1);var n=this.isResolvable();for(let r=0;r<this.nodeList.length;r++)this.nodeList[r].value=t[r];return n}removePropagation(){for(let t=0;t<this.nodeList.length;t++)this.nodeList[t].type===NODE_OUTPUT&&this.nodeList[t].value!==void 0&&(this.nodeList[t].value=void 0,f.simulationQueue.add(this.nodeList[t]))}setOutputsUpstream(t){for(let n=0;n<this.nodeList.length;n++)this.nodeList[n].type===NODE_OUTPUT&&(this.nodeList[n].isValueUpstream=t)}verilogName(){return this.verilogType||this.objectType}verilogBaseType(){return this.verilogName()}verilogParametrizedType(){var t=this.verilogBaseType();return this.bitWidth!=null&&this.bitWidth>1&&(t+=" #("+this.bitWidth+")"),t}generateVerilog(){for(var t=[],n=[],r=0;r<this.nodeList.length;r++)this.nodeList[r].type==NODE_INPUT?t.push(this.nodeList[r]):this.nodeList[r].connections.length>0?n.push(this.nodeList[r]):n.push("");var h=n.concat(t),c=this.verilogParametrizedType(),g=h.map(v=>v.verilogLabel).join(", ");return c+=` ${this.verilogLabel}(${g});`,c}toggleLabelInLayoutMode(){this.subcircuitMetadata.showLabelInSubcircuit=!this.subcircuitMetadata.showLabelInSubcircuit}}Ht.prototype.alwaysResolve=!1;Ht.prototype.propagationDelay=10;Ht.prototype.tooltip=void 0;Ht.prototype.propagationDelayFixed=!1;Ht.prototype.rectangleObject=!0;Ht.prototype.objectType="CircuitElement";Ht.prototype.canShowInSubcircuit=!1;Ht.prototype.subcircuitMetadata={};Ht.prototype.layoutProperties={rightDimensionX:5,leftDimensionX:5,upDimensionY:5,downDimensionY:5};Ht.prototype.subcircuitMutableProperties={label:{name:"label: ",type:"text",func:"setLabel"},"show label":{name:"show label ",type:"checkbox",func:"toggleLabelInLayoutMode"}};function Bh(){if(restrictedElements.length===0)return;const{restrictedCircuitElementsUsed:i}=globalScope;let t="";i.forEach(n=>{t+=`${n}, `}),t===""?t="None":t=t.slice(0,-2),$("#restrictedElementsDiv--list").html(t)}function Ws(i=globalScope){if(restrictedElements.length===0)return;const t=[];restrictedElements.forEach(n=>{i[n].length>0&&t.push(n)}),i.restrictedCircuitElementsUsed=t,Bh()}function mm(){$("#restrictedDiv").removeClass("display--none"),$("#Help").removeClass("show"),$("#restrictedDiv").html("The element has been restricted by mentor. Usage might lead to deduction in marks")}function vm(){$("#restrictedDiv").addClass("display--none")}class bm{constructor(t,n,r){this.objectType="Wire",this.node1=t,this.scope=r,this.node2=n,this.type="horizontal",this.updateData(),this.scope.wires.push(this),Ei(!0)}updateData(){this.x1=this.node1.absX(),this.y1=this.node1.absY(),this.x2=this.node2.absX(),this.y2=this.node2.absY(),this.x1===this.x2&&(this.type="vertical")}updateScope(t){this.scope=t,this.checkConnections()}checkConnections(){var t=this.node1.deleted||this.node2.deleted||!this.node1.connections.contains(this.node2)||!this.node2.connections.contains(this.node1);return t&&this.delete(),t}dblclick(){this.node1.parent==globalScope.root&&this.node2.parent==globalScope.root&&(f.multipleObjectSelections=[this.node1,this.node2],f.lastSelected=void 0)}update(){var t=!1;if(embed)return t;if(this.node1.absX()===this.node2.absX()?(this.x1=this.x2=this.node1.absX(),this.type="vertical"):this.node1.absY()===this.node2.absY()&&(this.y1=this.y2=this.node1.absY(),this.type="horizontal"),f.shiftDown===!1&&f.mouseDown===!0&&f.selected===!1&&this.checkWithin(f.mouseDownX,f.mouseDownY))f.selected=!0,f.lastSelected=this,t=!0;else if(f.mouseDown&&f.lastSelected===this&&!this.checkWithin(f.mouseX,f.mouseY)){var n=new U(f.mouseDownX,f.mouseDownY,2,this.scope.root);n.clicked=!0,n.wasClicked=!0,f.lastSelected=n,this.converge(n)}return this.node1.deleted||this.node2.deleted?(this.delete(),t):(f.mouseDown===!1&&(this.type==="horizontal"?this.node1.absY()!==this.y1?(n=new U(this.node2.absX(),this.node1.absY(),2,this.scope.root),this.converge(n),t=!0):this.node2.absY()!==this.y2&&(n=new U(this.node1.absX(),this.node2.absY(),2,this.scope.root),this.converge(n),t=!0):this.type==="vertical"&&(this.node1.absX()!==this.x1?(n=new U(this.node1.absX(),this.node2.absY(),2,this.scope.root),this.converge(n),t=!0):this.node2.absX()!==this.x2&&(n=new U(this.node2.absX(),this.node1.absY(),2,this.scope.root),this.converge(n),t=!0))),t)}draw(){const t=f.context;var n;f.lastSelected==this?n=ht.color_wire_sel:this.node1.value==null||this.node2.value==null?n=ht.color_wire_lose:this.node1.bitWidth==1?n=[ht.color_wire_lose,ht.color_wire_con,ht.color_wire_pow][this.node1.value+1]:n=ht.color_wire,Ps(t,this.node1.absX(),this.node1.absY(),this.node2.absX(),this.node2.absY(),n,3)}checkConvergence(t){return this.checkWithin(t.absX(),t.absY())}checkWithin(t,n){return this.type==="horizontal"&&this.node1.absX()<this.node2.absX()&&t>this.node1.absX()&&t<this.node2.absX()&&n===this.node2.absY()||this.type==="horizontal"&&this.node1.absX()>this.node2.absX()&&t<this.node1.absX()&&t>this.node2.absX()&&n===this.node2.absY()||this.type==="vertical"&&this.node1.absY()<this.node2.absY()&&n>this.node1.absY()&&n<this.node2.absY()&&t===this.node2.absX()||this.type==="vertical"&&this.node1.absY()>this.node2.absY()&&n<this.node1.absY()&&n>this.node2.absY()&&t===this.node2.absX()}converge(t){this.node1.connect(t),this.node2.connect(t),this.delete()}delete(){Ei(!0),ze(!0),this.node1.connections.clean(this.node2),this.node2.connections.clean(this.node1),this.scope.wires.clean(this),this.node1.checkDeleted(),this.node2.checkDeleted(),this.scope.timeStamp=new Date().getTime()}}class ym{constructor(){this.contentionPendingMap=new Map,this.totalContentions=0}add(t,n){if(this.contentionPendingMap.has(t)){this.contentionPendingMap.get(t).has(n)||this.totalContentions++,this.contentionPendingMap.get(t).add(n);return}this.totalContentions++,this.contentionPendingMap.set(t,new Set([n]))}has(t){return this.contentionPendingMap.has(t)}remove(t,n){!this.contentionPendingMap.has(t)||!this.contentionPendingMap.get(t).has(n)||(this.contentionPendingMap.get(t).delete(n),this.contentionPendingMap.get(t).size==0&&this.contentionPendingMap.delete(t),this.totalContentions--)}removeAllContentionsForNode(t){if(!this.contentionPendingMap.has(t))return;const n=this.contentionPendingMap.get(t);for(const r of n)this.remove(t,r)}removeIfResolved(t,n){t.bitWidth===n.bitWidth&&(t.value===n.value||t.value===void 0)&&this.remove(t,n)}removeIfResolvedAllContentionsForNode(t){if(!this.contentionPendingMap.has(t))return;const n=this.contentionPendingMap.get(t);for(const r of n)this.removeIfResolved(t,r)}size(){return this.totalContentions}nodes(){var t=[];for(const[n,r]of this.contentionPendingMap)for(const h of r)t.push([n,h]);return t}}function wm(i,t){for(var n=0;n<t.connections.length;n++)i.connections.contains(i.scope.allNodes[t.connections[n]])||i.connect(i.scope.allNodes[t.connections[n]])}function md(i,t){if(t==-1)return i;var{scope:n}=i,{parent:r}=i;return r.nodeList.clean(i),i.delete(),i=n.allNodes[t],i.parent=r,r.nodeList.push(i),i.updateRotation(),i.scope.timeStamp=new Date().getTime(),i}function Sm(i,t,n){return n=="LEFT"?[-i,t]:n=="DOWN"?[t,i]:n=="UP"?[t,-i]:[i,t]}function xm(i,t,n){return i<<32-n>>>32-(n-t+1)}function Hh(i,t=void 0){var n=i.toString(2);return t==null?n:"0".repeat(t-n.length)+n}function tt(i){return i.scope.allNodes.indexOf(i)}function km(i,t){new U(i.x,i.y,i.type,t.root,i.bitWidth,i.label)}window.NODE_INPUT=0;window.NODE_OUTPUT=1;window.NODE_INTERMEDIATE=2;var vd=10;class U{constructor(t,n,r,h,c=void 0,g=""){if(isNaN(t)||isNaN(n)){this.delete(),li("Fatal error occurred");return}Ei(!0),this.objectType="Node",this.subcircuitOverride=!1,this.id=`node${vd}`,vd++,this.parent=h,r!=NODE_INTERMEDIATE&&this.parent.nodeList!==void 0&&this.parent.nodeList.push(this),c==null?this.bitWidth=h.bitWidth:this.bitWidth=c,this.label=g,this.prevx=void 0,this.prevy=void 0,this.leftx=t,this.lefty=n,this.x=t,this.y=n,this.type=r,this.connections=new Array,this.value=void 0,this.isValueUpstream=!1,this.radius=5,this.clicked=!1,this.hover=!1,this.wasClicked=!1,this.scope=this.parent.scope,this.scope.timeStamp=new Date().getTime(),this.prev="a",this.count=0,this.highlighted=!1,this.refresh(),this.type==NODE_INTERMEDIATE&&this.parent.scope.nodes.push(this),this.parent.scope.allNodes.push(this),this.queueProperties={inQueue:!1,time:void 0,index:void 0}}setLabel(t){this.label=t}converToIntermediate(){this.type=NODE_INTERMEDIATE,this.x=this.absX(),this.y=this.absY(),this.parent=this.scope.root,this.scope.nodes.push(this)}startDragging(){this.oldx=this.x,this.oldy=this.y}drag(){this.x=this.oldx+f.mouseX-f.mouseDownX,this.y=this.oldy+f.mouseY-f.mouseDownY}saveObject(){this.type==NODE_INTERMEDIATE&&(this.leftx=this.x,this.lefty=this.y);for(var t={x:this.leftx,y:this.lefty,type:this.type,bitWidth:this.bitWidth,label:this.label,connections:[]},n=0;n<this.connections.length;n++)t.connections.push(tt(this.connections[n]));return t}updateRotation(){var t,n;[t,n]=Sm(this.leftx,this.lefty,this.parent.direction),this.x=t,this.y=n}refresh(){this.updateRotation();for(var t=0;t<this.connections.length;t++)this.connections[t].connections.clean(this);this.scope.timeStamp=new Date().getTime(),this.connections=[]}absX(){return this.x+this.parent.x}absY(){return this.y+this.parent.y}updateScope(t){this.scope=t,this.type==NODE_INTERMEDIATE&&(this.parent=t.root)}isResolvable(){return this.value!=null}reset(){this.value=void 0,this.isValueUpstream=!1,this.highlighted=!1}connect(t){t!=this&&(t.connections.contains(this)||(new bm(this,t,this.parent.scope),this.connections.push(t),t.connections.push(this),this.scope.timeStamp=new Date().getTime(),be(!0),ze(!0),ge()))}connectWireLess(t){t!=this&&(t.connections.contains(this)||(this.connections.push(t),t.connections.push(this),this.scope.timeStamp=new Date().getTime(),ze(!0),ge()))}disconnectWireLess(t){this.connections.clean(t),t.connections.clean(this),this.scope.timeStamp=new Date().getTime()}resolve(){if(this.type==NODE_OUTPUT&&f.contentionPending.removeAllContentionsForNode(this),this.value==null){for(var t=0;t<this.connections.length;t++)this.connections[t].value!==void 0&&(this.connections[t].value=void 0,f.simulationQueue.add(this.connections[t]));this.type==NODE_INPUT&&(this.parent.objectType=="Splitter"?this.parent.removePropagation():this.parent.isResolvable()?f.simulationQueue.add(this.parent):(this.parent.setOutputsUpstream(!1),this.parent.removePropagation())),this.type==NODE_OUTPUT&&!this.subcircuitOverride&&this.parent.isResolvable()&&!this.parent.queueProperties.inQueue&&(this.parent.objectType=="TriState"||this.parent.objectType=="ControlledInverter"?this.parent.state.value&&f.simulationQueue.add(this.parent):f.simulationQueue.add(this.parent));return}this.type==NODE_INPUT&&(this.parent.isResolvable()?f.simulationQueue.add(this.parent):this.parent.setOutputsUpstream(!1));for(var t=0;t<this.connections.length;t++){const r=this.connections[t];switch(r.type){case NODE_OUTPUT:if(r.isValueUpstream&&r.value!=this.value||r.bitWidth!=this.bitWidth){if(r.value!=null&&r.parent.objectType!="SubCircuit"&&!(r.subcircuitOverride&&r.scope!=this.scope)){f.contentionPending.add(r,this);break}}else f.contentionPending.remove(r,this);case NODE_INPUT:if(this.bitWidth!=r.bitWidth){this.highlighted=!0,r.highlighted=!0,li(`BitWidth Error: ${this.bitWidth} and ${r.bitWidth}`);break}case NODE_INTERMEDIATE:(r.value!=this.value||r.bitWidth!=this.bitWidth)&&(r.bitWidth=this.bitWidth,r.value=this.value,f.simulationQueue.add(r))}}}setOutputsUpstream(t){}checkHover(){f.mouseDown||(f.hover==this?(this.hover=this.isHover(),this.hover||(f.hover=void 0,this.showHover=!1)):f.hover?(this.hover=!1,this.showHover=!1):(this.hover=this.isHover(),this.hover?f.hover=this:this.showHover=!1))}draw(){const t=f.context,n=ht.color_wire_draw;this.clicked&&(this.prev=="x"?(Ps(t,this.absX(),this.absY(),f.mouseX,this.absY(),n,3),Ps(t,f.mouseX,this.absY(),f.mouseX,f.mouseY,n,3)):this.prev=="y"?(Ps(t,this.absX(),this.absY(),this.absX(),f.mouseY,n,3),Ps(t,this.absX(),f.mouseY,f.mouseX,f.mouseY,n,3)):Math.abs(this.x+this.parent.x-f.mouseX)>Math.abs(this.y+this.parent.y-f.mouseY)?Ps(t,this.absX(),this.absY(),f.mouseX,this.absY(),n,3):Ps(t,this.absX(),this.absY(),this.absX(),f.mouseY,n,3));var r=ht.stroke;const h=ht.color_wire_con,c=ht.color_wire_pow,g=ht.color_wire_lose,v=ht.node;if(this.bitWidth==1&&(r=[h,c][this.value]),this.value==null&&(r=g),this.type==NODE_INTERMEDIATE&&this.checkHover(),this.type==NODE_INTERMEDIATE?kh(t,this.absX(),this.absY(),3,r):kh(t,this.absX(),this.absY(),3,v),(this.highlighted||f.lastSelected==this||this.isHover()&&!f.selected&&!f.shiftDown||f.multipleObjectSelections.contains(this))&&(t.strokeStyle=v,t.beginPath(),t.lineWidth=3,ss(t,this.x,this.y,8,0,Math.PI*2,this.parent.x,this.parent.y,"RIGHT"),t.closePath(),t.stroke()),this.hover||f.lastSelected==this)if(this.showHover||f.lastSelected==this)if(pn.x=this.absX(),pn.y=this.absY()-15,this.type==NODE_INTERMEDIATE){var w="X";this.value!==void 0&&(w=this.value.toString(16)),this.label.length?pn.string=`${this.label} : ${w}`:pn.string=w}else this.label.length&&(pn.string=this.label);else setTimeout(()=>{f.hover&&(f.hover.showHover=!0),be(!0),Vf(globalScope)},400)}checkDeleted(){this.deleted&&this.delete(),this.connections.length==0&&this.type==NODE_INTERMEDIATE&&this.delete()}update(){if(!embed){if(this==f.hover&&(f.hover=void 0),this.hover=this.isHover(),f.mouseDown||(this.absX()!=this.prevx||this.absY()!=this.prevy)&&(this.prevx=this.absX(),this.prevy=this.absY(),this.nodeConnect()),this.hover&&(f.hover=this),f.mouseDown&&(this.hover&&!f.selected||f.lastSelected==this)?(f.selected=!0,f.lastSelected=this,this.clicked=!0):this.clicked=!1,!this.wasClicked&&this.clicked){if(this.wasClicked=!0,this.prev="a",this.type==NODE_INTERMEDIATE){if(!f.shiftDown&&f.multipleObjectSelections.contains(this))for(var t=0;t<f.multipleObjectSelections.length;t++)f.multipleObjectSelections[t].startDragging();f.shiftDown?(f.lastSelected=void 0,f.multipleObjectSelections.contains(this)?f.multipleObjectSelections.clean(this):f.multipleObjectSelections.push(this)):f.lastSelected=this}}else if(this.wasClicked&&this.clicked){if(!f.shiftDown&&f.multipleObjectSelections.contains(this))for(var t=0;t<f.multipleObjectSelections.length;t++)f.multipleObjectSelections[t].drag();if(this.type==NODE_INTERMEDIATE){if(this.connections.length==1&&this.connections[0].absX()==f.mouseX&&this.absX()==f.mouseX){this.y=f.mouseY-this.parent.y,this.prev="a";return}if(this.connections.length==1&&this.connections[0].absY()==f.mouseY&&this.absY()==f.mouseY){this.x=f.mouseX-this.parent.x,this.prev="a";return}if(this.connections.length==1&&this.connections[0].absX()==this.absX()&&this.connections[0].absY()==this.absY()){this.connections[0].clicked=!0,this.connections[0].wasClicked=!0,f.lastSelected=this.connections[0],this.delete();return}}this.prev=="a"&&$d(f.mouseX,f.mouseY,this.absX(),this.absY())>=10?Math.abs(this.x+this.parent.x-f.mouseX)>Math.abs(this.y+this.parent.y-f.mouseY)?this.prev="x":this.prev="y":this.prev=="x"&&this.absY()==f.mouseY?this.prev="a":this.prev=="y"&&this.absX()==f.mouseX&&(this.prev="a")}else if(this.wasClicked&&!this.clicked){if(this.wasClicked=!1,f.mouseX==this.absX()&&f.mouseY==this.absY())return;var n,r,h,c,g=0,v,w;h=f.mouseX,c=f.mouseY;const D=this.absX(),T=this.absY();if(D!=h&&T!=c&&(this.prev=="a"&&$d(f.mouseX,f.mouseY,this.absX(),this.absY())>=10&&(Math.abs(this.x+this.parent.x-f.mouseX)>Math.abs(this.y+this.parent.y-f.mouseY)?this.prev="x":this.prev="y"),g=1,this.prev=="x"?(n=h,r=T):this.prev=="y"&&(r=c,n=D)),g==1){for(var t=0;t<this.parent.scope.allNodes.length;t++)if(n==this.parent.scope.allNodes[t].absX()&&r==this.parent.scope.allNodes[t].absY()){v=this.parent.scope.allNodes[t];break}if(v==null){v=new U(n,r,2,this.scope.root);for(var t=0;t<this.parent.scope.wires.length;t++)if(this.parent.scope.wires[t].checkConvergence(v)){this.parent.scope.wires[t].converge(v);break}}this.connect(v)}for(var t=0;t<this.parent.scope.allNodes.length;t++)if(h==this.parent.scope.allNodes[t].absX()&&c==this.parent.scope.allNodes[t].absY()){w=this.parent.scope.allNodes[t];break}if(w==null){w=new U(h,c,2,this.scope.root);for(var t=0;t<this.parent.scope.wires.length;t++)if(this.parent.scope.wires[t].checkConvergence(w)){this.parent.scope.wires[t].converge(w);break}}g==0?this.connect(w):v.connect(w),f.lastSelected==this&&(f.lastSelected=w)}this.type==NODE_INTERMEDIATE&&f.mouseDown==!1&&(this.connections.length==2?(this.connections[0].absX()==this.connections[1].absX()||this.connections[0].absY()==this.connections[1].absY())&&(this.connections[0].connect(this.connections[1]),this.delete()):this.connections.length==0&&this.delete())}}delete(){ze(!0),this.deleted=!0,this.parent.scope.allNodes.clean(this),this.parent.scope.nodes.clean(this),this.parent.scope.root.nodeList.clean(this),f.lastSelected==this&&(f.lastSelected=void 0);for(var t=0;t<this.connections.length;t++)this.connections[t].connections.clean(this),this.connections[t].checkDeleted();this.scope.timeStamp=new Date().getTime(),Hi(1),Ei(!0),ge()}isClicked(){return this.absX()==f.mouseX&&this.absY()==f.mouseY}isHover(){return this.absX()==f.mouseX&&this.absY()==f.mouseY}nodeConnect(){for(var t=this.absX(),n=this.absY(),r,h=0;h<this.parent.scope.allNodes.length;h++)if(this!=this.parent.scope.allNodes[h]&&t==this.parent.scope.allNodes[h].absX()&&n==this.parent.scope.allNodes[h].absY()){if(r=this.parent.scope.allNodes[h],this.type==NODE_INTERMEDIATE){for(var c=0;c<this.connections.length;c++)r.connect(this.connections[c]);this.delete()}else this.connect(r);break}if(r==null){for(var h=0;h<this.parent.scope.wires.length;h++)if(this.parent.scope.wires[h].checkConvergence(this)){var r=this;this.type!=NODE_INTERMEDIATE&&(r=new U(this.absX(),this.absY(),2,this.scope.root),this.connect(r)),this.parent.scope.wires[h].converge(r);break}}}processVerilog(){this.type==NODE_INPUT&&this.parent.isVerilogResolvable()&&this.scope.stack.push(this.parent);for(var t=0;t<this.connections.length;t++)this.connections[t].verilogLabel!=this.verilogLabel&&(this.connections[t].verilogLabel=this.verilogLabel,this.scope.stack.push(this.connections[t]))}}U.prototype.propagationDelay=0;U.prototype.cleanDelete=U.prototype.delete;U.prototype.processVerilog=function(){this.type==NODE_INPUT&&this.scope.stack.push(this.parent);for(var i=0;i<this.connections.length;i++)this.connections[i].verilogLabel!=this.verilogLabel&&(this.connections[i].verilogLabel=this.verilogLabel,this.scope.stack.push(this.connections[i]))};function Qa(i=0,t=globalScope){let n=20;const r={};for(let c=0;c<t.Input.length-1;c++)t.Input[c].layoutProperties.x===i&&(r[t.Input[c].layoutProperties.y]=1);for(let c=0;c<t.Output.length;c++)t.Output[c].layoutProperties.x===i&&(r[t.Output[c].layoutProperties.y]=1);for(;r[n]||r[n+10]||r[n-10];)n+=10;const h=n+20;if(h>t.layout.height){const c=t.layout.height;t.layout.height=h;for(let g=0;g<t.Input.length;g++)t.Input[g].layoutProperties.y===c&&(t.Input[g].layoutProperties.y=t.layout.height);for(let g=0;g<t.Output.length;g++)t.Output[g].layoutProperties.y===c&&(t.Output[g].layoutProperties.y=t.layout.height)}return n}var ki={};function Fs(i){if(!(i==null||i<2||i>10)&&this.inputSize!=i){i=parseInt(i,10);var t=new ki[this.objectType](this.x,this.y,this.scope,this.direction,i,this.bitWidth);return this.delete(),f.lastSelected=t,t}}function As(i){f.clockEnabled=i}const Ch={CONTEXT_SIMULATOR:0,CONTEXT_ASSIGNMENTS:1},ns={NOTPRESENT:0,WRONGBITWIDTH:1,DUPLICATE_ID_DATA:2,DUPLICATE_ID_SCOPE:3,NO_RST:4},dh="/testbench";function Cm(i,t=void 0){if(i===void 0)return"X";const n=(i>>>0).toString(2);return t?"0".repeat(t-n.length)+n:n}class Jn{constructor(t,n=0,r=0){this.currentCase=r,this.currentGroup=n,this.testData=t}isCaseValid(){if(this.currentGroup>=this.data.groups.length||this.currentGroup<0)return!1;const t=this.testData.groups[this.currentGroup].inputs[0].values.length;return!(this.currentCase>=t||this.currentCase<0)}setCase(t,n){return new Jn(this.testData,t,n).isCaseValid()?(this.currentGroup=t,this.currentCase=n,!0):!1}groupNext(){const t=new Jn(this.testData,this.currentGroup,0),n=t.testData.groups.length;let r=t.testData.groups[t.currentGroup].inputs[0].values.length;for(;r===0||this.currentGroup===t.currentGroup;){if(t.currentGroup++,t.currentGroup>=n)return!1;r=t.testData.groups[t.currentGroup].inputs[0].values.length}return this.currentGroup=t.currentGroup,this.currentCase=t.currentCase,!0}groupPrev(){const t=new Jn(this.testData,this.currentGroup,0);t.testData.groups.length;let n=t.testData.groups[t.currentGroup].inputs[0].values.length;for(;n===0||this.currentGroup===t.currentGroup;){if(t.currentGroup--,t.currentGroup<0)return!1;n=t.testData.groups[t.currentGroup].inputs[0].values.length}return this.currentGroup=t.currentGroup,this.currentCase=t.currentCase,!0}caseNext(){const t=this.testData.groups[this.currentGroup].inputs[0].values.length;return this.currentCase>=t-1?this.groupNext():(this.currentCase++,!0)}casePrev(){if(this.currentCase<=0){if(!this.groupPrev())return!1;const t=this.testData.groups[this.currentGroup].inputs[0].values.length;return this.currentCase=t-1,!0}return this.currentCase--,!0}goToFirstValidGroup(){const t=new Jn(this.testData,0,0);return t.testData.groups[this.currentGroup].inputs[0].values.length>0?!0:t.groupNext()?(this.currentGroup=t.currentGroup,this.currentCase=t.currentCase,!0):!1}}function bd(i){Bs();const n=`
    <div style="text-align: center;">
        <div style="margin: 20px;">
            
    <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="white" class="bi bi-window" viewBox="0 0 16 16">
      <path d="M2.5 4a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1zm2-.5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0zm1 .5a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1z"/>
      <path d="M2 1a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2H2zm13 2v2H1V3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1zM2 14a1 1 0 0 1-1-1V6h14v7a1 1 0 0 1-1 1H2z"/>
    </svg>
    
        </div>
        <p>A browser pop-up is opened to create the test</p>
        <p>Please save the test to open it here</p>
    </div>
    `;$("#setTestbenchData").dialog({resizable:!1,width:"auto",buttons:[{text:"Close Pop-Up",click(){$(this).dialog("close"),i.close()}}]}),$("#setTestbenchData").empty(),$("#setTestbenchData").append(n)}function Dm(i,t=globalScope,n=Ch.CONTEXT_SIMULATOR){if(Is(i,t).ok||Ce("Testbench: Some elements missing from circuit. Click Validate to know more"),n===Ch.CONTEXT_SIMULATOR){const h=new Jn(i);if(!h.goToFirstValidGroup()){Ce("Testbench: The test is empty");return}globalScope.testbenchData=h,Go();return}}function Go(){if($(".tb-dialog-button").off("click"),$(".tb-case-button").off("click"),$h(),globalScope.testbenchData!=null){const{testbenchData:i}=globalScope;Nm(i),$(".tb-case-button#prev-case-btn").on("click",gi.previousCaseButton),$(".tb-case-button#next-case-btn").on("click",gi.nextCaseButton),$(".tb-case-button#prev-group-btn").on("click",gi.previousGroupButton),$(".tb-case-button#next-group-btn").on("click",gi.nextGroupButton),$(".tb-dialog-button#change-test-btn").on("click",gi.changeTestButton),$(".tb-dialog-button#runall-btn").on("click",gi.runAllButton),$(".tb-dialog-button#edit-test-btn").on("click",gi.editTestButton),$(".tb-dialog-button#validate-btn").on("click",gi.validateButton),$(".tb-dialog-button#remove-test-btn").on("click",gi.removeTestButton)}$(".tb-dialog-button#attach-test-btn").on("click",gi.attachTestButton)}const gi={previousCaseButton:()=>{if(!Is(globalScope.testbenchData.testData,globalScope).ok){Ce("Testbench: Some elements missing from circuit. Click Validate to know more");return}globalScope.testbenchData.casePrev(),gi.computeCase()},nextCaseButton:()=>{if(!Is(globalScope.testbenchData.testData,globalScope).ok){Ce("Testbench: Some elements missing from circuit. Click Validate to know more");return}globalScope.testbenchData.caseNext(),gi.computeCase()},previousGroupButton:()=>{if(!Is(globalScope.testbenchData.testData,globalScope).ok){Ce("Testbench: Some elements missing from circuit. Click Validate to know more");return}globalScope.testbenchData.groupPrev(),gi.computeCase()},nextGroupButton:()=>{if(!Is(globalScope.testbenchData.testData,globalScope).ok){Ce("Testbench: Some elements missing from circuit. Click Validate to know more");return}globalScope.testbenchData.groupNext(),gi.computeCase()},changeTestButton:()=>{Ba("create")},runAllButton:()=>{if(!Is(globalScope.testbenchData.testData,globalScope).ok){Ce("Testbench: Some elements missing from circuit. Click Validate to know more");return}const t=Tm(globalScope.testbenchData.testData,globalScope),{passed:n}=t.summary,{total:r}=t.summary,h=JSON.stringify(t.detailed);$("#runall-summary").text(`${n} out of ${r}`),$("#runall-detailed-link").on("click",()=>{Ba("result",h)}),$(".testbench-runall-label").css("display","table-cell"),$(".testbench-runall-label").delay(5e3).fadeOut("slow")},editTestButton:()=>{const i=JSON.stringify(globalScope.testbenchData.testData);Ba("edit",i)},validateButton:()=>{const i=Is(globalScope.testbenchData.testData,globalScope);Lm(i)},removeTestButton:()=>{confirm("Are you sure you want to remove the test from the circuit?")&&(globalScope.testbenchData=void 0,$h())},attachTestButton:()=>{Ba("create")},rerunTestButton:()=>{gi.computeCase()},computeCase:()=>{cf(globalScope.testbenchData);const i=_m(globalScope.testbenchData,globalScope);Rm(globalScope.testbenchData,i)}};function $h(){if($(".testbench-manual-panel .minimize").css("display")!=="none"){if(globalScope.testbenchData===void 0){$(".tb-test-not-null").hide(),$(".tb-test-null").show();return}$(".tb-test-null").hide(),$(".tb-test-not-null").show()}}function Tm(i,t=globalScope){As(!1);const{inputs:n,outputs:r,reset:h}=jh(i,t);let c=0,g=0;i.groups.forEach(w=>{w.outputs.forEach(D=>D.results=[]);for(let D=0;D<w.n;D++){c++,zh(n,w,D,t),i.type==="seq"&&hf(t);const T=Fh(i,r);let R=!0;T.forEach((W,L)=>{const E=w.outputs.find(V=>V.label.trim()===L);E.results.push(T.get(L)),E.values[D]!==T.get(L)&&(R=!1)}),R&&g++}i.type==="seq"&&uf(h)}),As(!0);const v={};return v.detailed=i,v.summary={passed:g,total:c},v}function _m(i,t){const n=i.testData;let r;return n.type==="comb"?r=Pm(i,t):n.type==="seq"&&(r=Im(i,t)),r}function Pm(i,t){const n=i.testData,r=i.currentGroup,h=i.currentCase,{inputs:c,outputs:g}=jh(n,t),v=n.groups[r];As(!1),zh(c,v,h,t);const w=Fh(n,g);return As(!0),w}function Im(i,t){const n=i.testData,r=i.currentGroup,h=i.currentCase,{inputs:c,outputs:g,reset:v}=jh(n,t),w=n.groups[r];As(!1),uf(v,t);for(let T=0;T<=h;T++)zh(c,w,T,t),hf(t);const D=Fh(n,g);return As(!0),D}function zh(i,t,n,r){t.inputs.forEach(h=>{i[h.label.trim()].state=parseInt(h.values[n],2)}),$s(r)}function Fh(i,t){const n=new Map;return i.groups[0].outputs.forEach(r=>{const h=t[r.label.trim()].nodeList[0].value,c=t[r.label.trim()].nodeList[0].bitWidth;n.set(r.label.trim(),Cm(h,c))}),n}function Lm(i){let n=`
    <div style="text-align: center; color: white;">
        <div style="margin: 20px;">
            
    <svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" fill="white" class="bi bi-check" viewBox="0 0 16 16">
      <path d="M10.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.267.267 0 0 1 .02-.022z"/>
    </svg>
    
        </div>
        All good. No validation errors
    </div>
    `;i.ok||(n=`
        <div style="text-align: center; color: white;">
            <p>Please fix these errors to run tests</p>
            <table class="validation-ui-table">
                <tr>
                    <th><b>Identifier</b></th>
                    <th><b>Error</b></th>
                </tr>
        `,i.invalids.forEach(r=>{n+=`
                <tr>
                    <td>${r.identifier}</td>
                    <td>${r.message}</td>
                </tr>
            `}),n+="</table></div>"),$("#testbenchValidate").dialog({resizable:!1,width:"auto",buttons:[{text:"Ok",click(){$(this).dialog("close")}},{text:"Auto Fix",click(){const r=Om(i);Ce(`Testbench: Auto fixed ${r} errors`),$(this).dialog("close")}}]}),$("#testbenchValidate").empty(),$("#testbenchValidate").append(n)}function Is(i,t){let n=[];if(Em(i)||n.push({type:ns.DUPLICATE_ID_DATA,identifier:"-",message:"Duplicate identifiers in test data"}),Wm(t)||n.push({type:ns.DUPLICATE_ID_SCOPE,identifier:"-",message:"Duplicate identifiers in circuit"}),n.length>0)return{ok:!1,invalids:n};const r=Mm(i,t),h=Am(i,t);return n=r.ok?n:n.concat(r.invalids),n=h.ok?n:n.concat(h.invalids),i.type==="seq"&&(t.Input.some(g=>g.label==="RST"&&g.bitWidth===1&&g.objectType==="Input")||n.push({type:ns.NO_RST,identifier:"RST",message:"Reset(RST) not present in circuit"})),n.length>0?{ok:!1,invalids:n}:{ok:!0}}function Om(i){let t=0;return i.ok||i.invalids.filter(r=>r.type===ns.WRONGBITWIDTH).forEach(r=>{const{element:h,expectedBitWidth:c}=r.extraInfo;h.newBitWidth(c),t++}),t}function Em(i){const t=i.groups[0].inputs.map(h=>h.label.trim()),n=i.groups[0].outputs.map(h=>h.label.trim()),r=t.concat(n);return new Set(r).size===r.length}function Wm(i){const t=i.Input.map(h=>h.label.trim()),n=i.Output.map(h=>h.label.trim());let r=t.concat(n);return r=r.filter(h=>h!=""),new Set(r).size===r.length}function Mm(i,t){const n=[];return i.groups[0].inputs.forEach(r=>{const h=t.Input.find(c=>c.label.trim()===r.label.trim());h===void 0?n.push({type:ns.NOTPRESENT,identifier:r.label.trim(),message:"Input is not present in the circuit"}):h.bitWidth!==r.bitWidth&&n.push({type:ns.WRONGBITWIDTH,identifier:r.label.trim(),extraInfo:{element:h,expectedBitWidth:r.bitWidth},message:`Input bitwidths don't match in circuit and test (${h.bitWidth} vs ${r.bitWidth})`})}),n.length>0?{ok:!1,invalids:n}:{ok:!0}}function Am(i,t){const n=[];return i.groups[0].outputs.forEach(r=>{const h=t.Output.find(c=>c.label.trim()===r.label.trim());h===void 0?n.push({type:ns.NOTPRESENT,identifier:r.label.trim(),message:"Output is not present in the circuit"}):h.bitWidth!==r.bitWidth&&n.push({type:ns.WRONGBITWIDTH,identifier:r.label.trim(),extraInfo:{element:h,expectedBitWidth:r.bitWidth},message:`Output bitwidths don't match in circuit and test (${h.bitWidth} vs ${r.bitWidth})`})}),n.length>0?{ok:!1,invalids:n}:{ok:!0}}function jh(i,t){const n={},r={};let h;return i.groups[0].inputs.forEach(c=>{n[c.label.trim()]=t.Input.find(g=>g.label.trim()===c.label.trim())}),i.groups[0].outputs.forEach(c=>{r[c.label.trim()]=t.Output.find(g=>g.label.trim()===c.label.trim())}),i.type==="seq"&&(h=t.Input.find(c=>c.label.trim()==="RST")),{inputs:n,outputs:r,reset:h}}function hf(i){i.clockTick(),$s(i),i.clockTick(),$s(i)}function uf(i,t){i.state=1,$s(t),i.state=0,$s(t)}function Nm(i){const t=i.testData,n=t.groups[0].inputs.length,r=t.groups[0].outputs.length;$("#tb-manual-table-inputs-head").attr("colspan",n),$("#tb-manual-table-outputs-head").attr("colspan",r),$(".testbench-runall-label").css("display","none"),$(".tb-data#data-title").children().eq(1).text(t.title||"Untitled"),$(".tb-data#data-type").children().eq(1).text(t.type==="comb"?"Combinational":"Sequential"),$("#tb-manual-table-labels").html("<th>LABELS</th>"),$("#tb-manual-table-bitwidths").html("<td>Bitwidth</td>"),t.groups[0].inputs.concat(t.groups[0].outputs).forEach(h=>{const c=`<th>${zs(h.label)}</th>`,g=`<td>${zs(h.bitWidth.toString())}</td>`;$("#tb-manual-table-labels").append(c),$("#tb-manual-table-bitwidths").append(g)}),cf(i)}function cf(i){const t=i.testData,n=i.currentGroup,r=i.currentCase,h=$("#tb-manual-table-current-case");h.empty(),h.append("<td>Current Case</td>"),$("#tb-manual-table-test-result").empty(),$("#tb-manual-table-test-result").append("<td>Result</td>"),t.groups[n].inputs.forEach(c=>{h.append(`<td>${zs(c.values[r])}</td>`)}),t.groups[n].outputs.forEach(c=>{h.append(`<td>${zs(c.values[r])}</td>`)}),$(".testbench-manual-panel .group-label").text(t.groups[n].label),$(".testbench-manual-panel .case-label").text(r+1)}function Rm(i,t){const n=i.testData,r=i.currentGroup,h=i.currentCase,c=$("#tb-manual-table-test-result");let g=n.groups[0].inputs.length;for(c.empty(),c.append("<td>Result</td>");g--;)c.append("<td> - </td>");for(const v of t.keys()){const w=t.get(v),D=n.groups[r].outputs.find(R=>R.label.trim()===v).values[h],T=w===D?"#17FC12":"#FF1616";c.append(`<td style="color: ${T}">${zs(w)}</td>`)}}function Ba(i,t){const h=(window.height-800)/2,c=(window.width-1200)/2,g=`height=800,width=1200,top=${h},left=${c}`;let v;const w=D=>{if(D.origin!==window.origin||D.data.type!=="testData")return;const T=JSON.parse(D.data.data);window.removeEventListener("message",w),T.scopeID==globalScope.id&&(Dm(T.testData,globalScope,Ch.CONTEXT_SIMULATOR),$("#setTestbenchData").dialog("close"))};if(i==="create"){const D=`${dh}?scopeID=${globalScope.id}&popUp=true`;v=window.open(D,"popupWindow",g),bd(v),window.addEventListener("message",w)}if(i==="edit"){const D=`${dh}?scopeID=${globalScope.id}&data=${t}&popUp=true`;v=window.open(D,"popupWindow",g),bd(v),window.addEventListener("message",w)}if(i==="result"){const D=`${dh}?scopeID=${globalScope.id}&result=${t}&popUp=true`;v=window.open(D,"popupWindow",g)}if(v&&i!=="result"){const D=setInterval(()=>{v.closed&&($("#setTestbenchData").dialog("isOpen")&&$("#setTestbenchData").dialog("close"),window.removeEventListener("message",w),clearInterval(D))},1e3)}}function Bm(i){return{FlipFlop:"DflipFlop",Ram:"Rom"}[i]||i}function Hm(i,t){var n=new ki[Bm(i.objectType)](i.x,i.y,t,...i.customData.constructorParamaters||[]);if(n.label=i.label,n.labelDirection=i.labelDirection||jo[fixDirection[n.direction]],i.propagationDelay===0?n.propagationDelay=0:n.propagationDelay=i.propagationDelay||n.propagationDelay,n.fixDirection(),i.customData.values)for(var r in i.customData.values)n[r]=i.customData.values[r];if(i.customData.nodes)for(const h in i.customData.nodes){const c=i.customData.nodes[h];if(c instanceof Array)for(let g=0;g<c.length;g++)n[h][g]=md(n[h][g],c[g]);else n[h]=md(n[h],c)}i.subcircuitMetadata&&(n.subcircuitMetadata=i.subcircuitMetadata)}function $m(i=globalScope){let t=i.allNodes.length;for(let n=0;n<t;n++)i.allNodes[n].type!==2&&i.allNodes[n].parent.objectType==="CircuitElement"&&i.allNodes[n].delete(),i.allNodes.length!==t&&(n=0,t=i.allNodes.length)}function rs(i,t){const n=moduleList.slice();i.restrictedCircuitElementsUsed=t.restrictedCircuitElementsUsed,t.allNodes.map(r=>km(r,i));for(let r=0;r<t.allNodes.length;r++)wm(i.allNodes[r],t.allNodes[r]);for(let r=0;r<n.length;r++)if(t[n[r]])if(n[r]==="SubCircuit")for(let h=0;h<t[n[r]].length;h++)zm(t[n[r]][h],i);else for(let h=0;h<t[n[r]].length;h++)Hm(t[n[r]][h],i);if(i.wires.map(r=>{r.updateData(i)}),$m(i),t.verilogMetadata&&(i.verilogMetadata=t.verilogMetadata),t.testbenchData&&(globalScope.testbenchData=new Jn(t.testbenchData.testData,t.testbenchData.currentGroup,t.testbenchData.currentCase)),t.layout)i.layout=t.layout;else{i.layout={},i.layout.width=100,i.layout.height=Math.max(i.Input.length,i.Output.length)*20+20,i.layout.title_x=50,i.layout.title_y=13;for(let r=0;r<i.Input.length;r++)i.Input[r].layoutProperties={x:0,y:i.layout.height/2-i.Input.length*10+20*r+10,id:hs()};for(let r=0;r<i.Output.length;r++)i.Output[r].layoutProperties={x:i.layout.width,y:i.layout.height/2-i.Output.length*10+20*r+10,id:hs()}}i.layout.titleEnabled===void 0&&(i.layout.titleEnabled=!0)}function Nn(i){if(!i){Ro(__projectName);return}Ro(i.name),globalScope=void 0,Wf(),$(".circuits").remove();for(let c=0;c<i.scopes.length;c++){var t=!1,n=!1;i.scopes[c].verilogMetadata&&(t=i.scopes[c].verilogMetadata.isVerilogCircuit,n=i.scopes[c].verilogMetadata.isMainCircuit);const g=ds(i.scopes[c].name||"Untitled",i.scopes[c].id,t,n);rs(g,i.scopes[c]),globalScope=g,embed?globalScope.centerFocus(!0):globalScope.centerFocus(!1),fs(globalScope,!0),Ws(),Bs()}if(f.changeClockTime(i.timePeriod||500),f.clockEnabled=i.clockEnabled===void 0?!0:i.clockEnabled,embed||Rn(f.lastSelected),i.orderedTabs){var r=$(".circuits").detach(),h=$("#tabsBar").children().detach();for(const c of i.orderedTabs)$("#tabsBar").append(r.filter(`#${c}`));$("#tabsBar").append(h)}i.focussedCircuit&&Vr(i.focussedCircuit),Go(),ze(!0),be(!0),bi(!0),embed||Qt.reset(),ge(1)}function zm(i,t){new Xo(i.x,i.y,t,i.id,i)}function df(i=globalScope){if(Ns()||_e()){li("Subcircuit cannot be inserted in this mode");return}$("#insertSubcircuitDialog").empty();let t=!0;for(id in le)!le[id].checkDependency(i.id)&&le[id].isVisible()&&(t=!1,$("#insertSubcircuitDialog").append(`<label class="option custom-radio inline"><input type="radio" name="subCircuitId" value="${id}" />${le[id].name}<span></span></label>`));t&&$("#insertSubcircuitDialog").append([$("#insertSubcircuitcontent").dialog(),$("#insertSubcircuitcontent").dialog("close")]),$("#insertSubcircuitDialog").dialog({resizable:!1,maxHeight:800,width:450,maxWidth:800,minWidth:250,buttons:t?[]:[{text:"Insert SubCircuit",click(){$("input[name=subCircuitId]:checked").val()&&(f.lastSelected=new Xo(void 0,void 0,globalScope,$("input[name=subCircuitId]:checked").val()),$(this).dialog("close"))}}]})}class Xo extends Ht{constructor(t,n,r=globalScope,h=void 0,c=void 0){var w,D;super(t,n,r,"RIGHT",1),this.objectType="SubCircuit",this.scope.SubCircuit.push(this),this.id=h||prompt("Enter Id: "),this.directionFixed=!0,this.fixedBitWidth=!0,this.savedData=c,this.inputNodes=[],this.outputNodes=[],this.localScope=new Hs,this.preventCircuitSwitch=!1,this.rectangleObject=!1;var g=le[this.id];if(g==null?li(`SubCircuit : ${c&&c.title||this.id} Not found`):Cf(g)?g.checkDependency(r.id)&&li("Cyclic Circuit Error"):li(`SubCircuit : ${c&&c.title||g.name} is an empty circuit`),g==null||g.checkDependency(r.id)){if(c){for(var v=0;v<c.inputNodes.length;v++)r.allNodes[c.inputNodes[v]].deleted=!0;for(var v=0;v<c.outputNodes.length;v++)r.allNodes[c.outputNodes[v]].deleted=!0}return}if(this.savedData!=null){gl(!0),ge(),this.version=this.savedData.version||"1.0",this.id=this.savedData.id,this.label=this.savedData.label||"",this.labelDirection=this.savedData.labelDirection||"RIGHT";for(var v=0;v<this.savedData.inputNodes.length;v++)this.inputNodes.push(this.scope.allNodes[this.savedData.inputNodes[v]]),this.inputNodes[v].parent=this,this.inputNodes[v].layout_id=(w=g.Input[v])==null?void 0:w.layoutProperties.id;for(var v=0;v<this.savedData.outputNodes.length;v++)this.outputNodes.push(this.scope.allNodes[this.savedData.outputNodes[v]]),this.outputNodes[v].parent=this,this.outputNodes[v].layout_id=(D=g.Output[v])==null?void 0:D.layoutProperties.id;if(this.version=="1.0"){this.version="2.0",this.x-=g.layout.width/2,this.y-=g.layout.height/2;for(var v=0;v<this.inputNodes.length;v++)this.inputNodes[v].x=g.Input[v].layoutProperties.x,this.inputNodes[v].y=g.Input[v].layoutProperties.y,this.inputNodes[v].leftx=this.inputNodes[v].x,this.inputNodes[v].lefty=this.inputNodes[v].y;for(var v=0;v<this.outputNodes.length;v++)this.outputNodes[v].x=g.Output[v].layoutProperties.x,this.outputNodes[v].y=g.Output[v].layoutProperties.y,this.outputNodes[v].leftx=this.outputNodes[v].x,this.outputNodes[v].lefty=this.outputNodes[v].y}this.version=="2.0"&&(this.leftDimensionX=0,this.upDimensionY=0,this.rightDimensionX=g.layout.width,this.downDimensionY=g.layout.height),this.nodeList.extend(this.inputNodes),this.nodeList.extend(this.outputNodes)}else this.version="2.0";this.data=JSON.parse(Bs(g)),this.buildCircuit(),this.makeConnections()}makeConnections(){var t,n;for(let r=0;r<this.inputNodes.length;r++)(t=this.localScope.Input[r])==null||t.output1.connectWireLess(this.inputNodes[r]),this.localScope.Input[r].output1.subcircuitOverride=!0;for(let r=0;r<this.outputNodes.length;r++)(n=this.localScope.Output[r])==null||n.inp1.connectWireLess(this.outputNodes[r]),this.outputNodes[r].subcircuitOverride=!0}removeConnections(){var t,n;for(let r=0;r<this.inputNodes.length;r++)(t=this.localScope.Input[r])==null||t.output1.disconnectWireLess(this.inputNodes[r]);for(let r=0;r<this.outputNodes.length;r++)(n=this.localScope.Output[r])==null||n.inp1.disconnectWireLess(this.outputNodes[r])}buildCircuit(){var t=le[this.id];if(rs(this.localScope,this.data),this.localScope.name=this.data.name,this.lastUpdated=this.localScope.timeStamp,ze(!0),be(!0),this.savedData==null){this.leftDimensionX=0,this.upDimensionY=0,this.rightDimensionX=t.layout.width,this.downDimensionY=t.layout.height;for(var n=0;n<t.Output.length;n++){var r=new U(t.Output[n].layoutProperties.x,t.Output[n].layoutProperties.y,1,this,t.Output[n].bitWidth);r.layout_id=t.Output[n].layoutProperties.id,this.outputNodes.push(r)}for(var n=0;n<t.Input.length;n++){var r=new U(t.Input[n].layoutProperties.x,t.Input[n].layoutProperties.y,0,this,t.Input[n].bitWidth);r.layout_id=t.Input[n].layoutProperties.id,this.inputNodes.push(r)}}}reBuild(){}reBuildCircuit(){this.data=JSON.parse(Bs(le[this.id])),this.localScope=new Hs(data.name),rs(this.localScope,this.data),this.lastUpdated=this.localScope.timeStamp,this.scope.timeStamp=this.localScope.timeStamp}reset(){this.removeConnections();for(var t=le[this.id],n=0;n<t.SubCircuit.length;n++)t.SubCircuit[n].reset();let r=t.Input.length==0&&t.Output.length==0;for(let D of circuitElementList)if(t[D].length>0&&t[D][0].canShowInSubcircuit){r=!1;break}r&&li(`SubCircuit : ${t.name} is an empty circuit`),t.layout.height=t.layout.height,t.layout.width=t.layout.width,this.leftDimensionX=0,this.upDimensionY=0,this.rightDimensionX=t.layout.width,this.downDimensionY=t.layout.height;for(var h={},n=0;n<t.Input.length;n++)h[t.Input[n].layoutProperties.id]=[t.Input[n],void 0];for(var n=0;n<this.inputNodes.length;n++)h.hasOwnProperty(this.inputNodes[n].layout_id)?h[this.inputNodes[n].layout_id][1]=this.inputNodes[n]:(this.scope.backups=[],this.inputNodes[n].delete(),this.nodeList.clean(this.inputNodes[n]));for(id in h)h[id][1]&&(h[id][0].layoutProperties.x==h[id][1].x&&h[id][0].layoutProperties.y==h[id][1].y?h[id][1].bitWidth=h[id][0].bitWidth:(this.scope.backups=[],h[id][1].delete(),this.nodeList.clean(h[id][1]),h[id][1]=new U(h[id][0].layoutProperties.x,h[id][0].layoutProperties.y,0,this,h[id][0].bitWidth),h[id][1].layout_id=id));this.inputNodes=[];for(var n=0;n<t.Input.length;n++){var c=h[t.Input[n].layoutProperties.id][0];if(h[c.layoutProperties.id][1])this.inputNodes.push(h[c.layoutProperties.id][1]);else{var g=new U(c.layoutProperties.x,c.layoutProperties.y,0,this,c.bitWidth);g.layout_id=c.layoutProperties.id,this.inputNodes.push(g)}}for(var v={},n=0;n<t.Output.length;n++)v[t.Output[n].layoutProperties.id]=[t.Output[n],void 0];for(var n=0;n<this.outputNodes.length;n++)v.hasOwnProperty(this.outputNodes[n].layout_id)?v[this.outputNodes[n].layout_id][1]=this.outputNodes[n]:(this.outputNodes[n].delete(),this.nodeList.clean(this.outputNodes[n]));for(id in v)v[id][1]&&(v[id][0].layoutProperties.x==v[id][1].x&&v[id][0].layoutProperties.y==v[id][1].y?v[id][1].bitWidth=v[id][0].bitWidth:(v[id][1].delete(),this.nodeList.clean(v[id][1]),v[id][1]=new U(v[id][0].layoutProperties.x,v[id][0].layoutProperties.y,1,this,v[id][0].bitWidth),v[id][1].layout_id=id));this.outputNodes=[];for(var n=0;n<t.Output.length;n++){var w=v[t.Output[n].layoutProperties.id][0];if(v[w.layoutProperties.id][1])this.outputNodes.push(v[w.layoutProperties.id][1]);else{var g=new U(w.layoutProperties.x,w.layoutProperties.y,1,this,w.bitWidth);g.layout_id=w.layoutProperties.id,this.outputNodes.push(g)}}t.timeStamp>this.lastUpdated&&this.reBuildCircuit(),this.localScope.reset(),ze(!0),Ei(!0),this.makeConnections()}click(){var t=this.getElementHover();t&&(this.lastClickedElement=t,t.wasClicked=!0)}getElementHover(){this.layoutProperties.rightDimensionX,this.layoutProperties.leftDimensionX,this.layoutProperties.upDimensionY,this.layoutProperties.downDimensionY;for(let n of circuitElementList)if(this.localScope[n].length!==0&&this.localScope[n][0].canShowInSubcircuit)for(let r=0;r<this.localScope[n].length;r++){var t=this.localScope[n][r];if(t.subcircuitMetadata.showInSubcircuit&&t.isSubcircuitHover(this.x,this.y))return t}}releaseClick(){this.lastClickedElement!==void 0&&(this.lastClickedElement.wasClicked=!1,this.lastClickedElement=void 0)}addInputs(){for(let t=0;t<subCircuitInputList.length;t++)for(let n=0;n<this.localScope[subCircuitInputList[t]].length;n++)f.simulationQueue.add(this.localScope[subCircuitInputList[t]][n],0);for(let t=0;t<this.localScope.SubCircuit.length;t++)this.localScope.SubCircuit[t].addInputs()}dblclick(){this.elementHover||Vr(this.id)}saveObject(){var t={x:this.x,y:this.y,id:this.id,label:this.label,labelDirection:this.labelDirection,inputNodes:this.inputNodes.map(tt),outputNodes:this.outputNodes.map(tt),version:this.version};return t}isResolvable(){return!1}removePropagation(){}verilogName(){return hn(le[this.id].name)}determine_label(t,n){return t==0?["left",5,5]:t==le[this.id].layout.width?["right",-5,5]:n==0?["center",0,13]:["center",0,-6]}checkHover(){super.checkHover(),this.elementHover&&(this.elementHover.hover=!1,this.elementHover=void 0,f.hover=void 0);var t=this.getElementHover();t&&(t.hover=!0,this.elementHover=t,this.hover=!1,f.hover=t)}customDraw(){var t=le[this.id],n=f.context;n.lineWidth=globalScope.scale*3,n.strokeStyle=ht.stroke,n.fillStyle=ht.fill;var r=this.x,h=this.y;n.strokeStyle=ht.stroke,n.fillStyle=ht.fill,n.lineWidth=Rt(3),n.beginPath(),Ee(n,-this.leftDimensionX,-this.upDimensionY,this.leftDimensionX+this.rightDimensionX,this.upDimensionY+this.downDimensionY,this.x,this.y,[this.direction,"RIGHT"][+this.directionFixed]),this.elementHover||(this.hover&&!f.shiftDown||f.lastSelected===this||f.multipleObjectSelections.contains(this))&&(n.fillStyle=ht.hover_select),n.fill(),n.stroke(),n.beginPath(),n.textAlign="center",n.fillStyle="black",this.version=="1.0"?Ut(n,t.name,r,h-t.layout.height/2+13,11):this.version=="2.0"?t.layout.titleEnabled&&Ut(n,t.name,t.layout.title_x+r,h+t.layout.title_y,11):console.log("Unknown Version: ",this.version);for(var c=0;c<t.Input.length;c++)if(t.Input[c].label){var g=this.determine_label(this.inputNodes[c].x,this.inputNodes[c].y);n.textAlign=g[0],Ut(n,t.Input[c].label,this.inputNodes[c].x+g[1]+r,h+this.inputNodes[c].y+g[2],12)}for(var c=0;c<t.Output.length;c++)if(t.Output[c].label){var g=this.determine_label(this.outputNodes[c].x,this.outputNodes[c].y);n.textAlign=g[0],Ut(n,t.Output[c].label,this.outputNodes[c].x+g[1]+r,h+this.outputNodes[c].y+g[2],12)}n.fill();for(let v=0;v<this.outputNodes.length;v++)this.outputNodes[v].draw();for(let v=0;v<this.inputNodes.length;v++)this.inputNodes[v].draw();for(let v of circuitElementList)if(this.localScope[v].length!==0&&this.localScope[v][0].canShowInSubcircuit)for(let w=0;w<this.localScope[v].length;w++)this.localScope[v][w].subcircuitMetadata.showInSubcircuit&&this.localScope[v][w].drawLayoutMode(this.x,this.y)}}Xo.prototype.centerElement=!0;Xo.prototype.propagationDelayFixed=!0;var fh={exports:{}},yd;function js(){return yd||(yd=1,function(i,t){(function(n,r){i.exports=r()})(Jg,function(){var n=navigator.userAgent,r=navigator.platform,h=/gecko\/\d/i.test(n),c=/MSIE \d/.test(n),g=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(n),v=/Edge\/(\d+)/.exec(n),w=c||g||v,D=w&&(c?document.documentMode||6:+(v||g)[1]),T=!v&&/WebKit\//.test(n),R=T&&/Qt\/\d+\.\d+/.test(n),W=!v&&/Chrome\/(\d+)/.exec(n),L=W&&+W[1],E=/Opera\//.test(n),V=/Apple Computer/.test(navigator.vendor),at=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(n),H=/PhantomJS/.test(n),A=V&&(/Mobile\/\w+/.test(n)||navigator.maxTouchPoints>2),q=/Android/.test(n),F=A||q||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(n),J=A||/Mac/.test(r),St=/\bCrOS\b/.test(n),ot=/win/i.test(r),st=E&&n.match(/Version\/(\d*\.\d*)/);st&&(st=Number(st[1])),st&&st>=15&&(E=!1,T=!0);var wt=J&&(R||E&&(st==null||st<12.11)),Tt=h||w&&D>=9;function At(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}var Pt=function(e,s){var l=e.className,a=At(s).exec(l);if(a){var u=l.slice(a.index+a[0].length);e.className=l.slice(0,a.index)+(u?a[1]+u:"")}};function K(e){for(var s=e.childNodes.length;s>0;--s)e.removeChild(e.firstChild);return e}function lt(e,s){return K(e).appendChild(s)}function z(e,s,l,a){var u=document.createElement(e);if(l&&(u.className=l),a&&(u.style.cssText=a),typeof s=="string")u.appendChild(document.createTextNode(s));else if(s)for(var m=0;m<s.length;++m)u.appendChild(s[m]);return u}function oe(e,s,l,a){var u=z(e,s,l,a);return u.setAttribute("role","presentation"),u}var Zt;document.createRange?Zt=function(e,s,l,a){var u=document.createRange();return u.setEnd(a||e,l),u.setStart(e,s),u}:Zt=function(e,s,l){var a=document.body.createTextRange();try{a.moveToElementText(e.parentNode)}catch{return a}return a.collapse(!0),a.moveEnd("character",l),a.moveStart("character",s),a};function ee(e,s){if(s.nodeType==3&&(s=s.parentNode),e.contains)return e.contains(s);do if(s.nodeType==11&&(s=s.host),s==e)return!0;while(s=s.parentNode)}function jt(e){var s=e.ownerDocument||e,l;try{l=e.activeElement}catch{l=s.body||null}for(;l&&l.shadowRoot&&l.shadowRoot.activeElement;)l=l.shadowRoot.activeElement;return l}function Nt(e,s){var l=e.className;At(s).test(l)||(e.className+=(l?" ":"")+s)}function Vt(e,s){for(var l=e.split(" "),a=0;a<l.length;a++)l[a]&&!At(l[a]).test(s)&&(s+=" "+l[a]);return s}var de=function(e){e.select()};A?de=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:w&&(de=function(e){try{e.select()}catch{}});function ae(e){return e.display.wrapper.ownerDocument}function me(e){return rt(e.display.wrapper)}function rt(e){return e.getRootNode?e.getRootNode():e.ownerDocument}function Q(e){return ae(e).defaultView}function nt(e){var s=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,s)}}function N(e,s,l){s||(s={});for(var a in e)e.hasOwnProperty(a)&&(l!==!1||!s.hasOwnProperty(a))&&(s[a]=e[a]);return s}function Y(e,s,l,a,u){s==null&&(s=e.search(/[^\s\u00a0]/),s==-1&&(s=e.length));for(var m=a||0,y=u||0;;){var k=e.indexOf("	",m);if(k<0||k>=s)return y+(s-m);y+=k-m,y+=l-y%l,m=k+1}}var vt=function(){this.id=null,this.f=null,this.time=0,this.handler=nt(this.onTimeout,this)};vt.prototype.onTimeout=function(e){e.id=0,e.time<=+new Date?e.f():setTimeout(e.handler,e.time-+new Date)},vt.prototype.set=function(e,s){this.f=s;var l=+new Date+e;(!this.id||l<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,e),this.time=l)};function pt(e,s){for(var l=0;l<e.length;++l)if(e[l]==s)return l;return-1}var Lt=50,Yt={toString:function(){return"CodeMirror.Pass"}},Xt={scroll:!1},he={origin:"*mouse"},gt={origin:"+move"};function Dt(e,s,l){for(var a=0,u=0;;){var m=e.indexOf("	",a);m==-1&&(m=e.length);var y=m-a;if(m==e.length||u+y>=s)return a+Math.min(y,s-u);if(u+=m-a,u+=l-u%l,a=m+1,u>=s)return a}}var xt=[""];function qt(e){for(;xt.length<=e;)xt.push(Ft(xt)+" ");return xt[e]}function Ft(e){return e[e.length-1]}function o(e,s){for(var l=[],a=0;a<e.length;a++)l[a]=s(e[a],a);return l}function d(e,s,l){for(var a=0,u=l(s);a<e.length&&l(e[a])<=u;)a++;e.splice(a,0,s)}function p(){}function b(e,s){var l;return Object.create?l=Object.create(e):(p.prototype=e,l=new p),s&&N(s,l),l}var S=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function _(e){return/\w/.test(e)||e>""&&(e.toUpperCase()!=e.toLowerCase()||S.test(e))}function O(e,s){return s?s.source.indexOf("\\w")>-1&&_(e)?!0:s.test(e):_(e)}function B(e){for(var s in e)if(e.hasOwnProperty(s)&&e[s])return!1;return!0}var X=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function it(e){return e.charCodeAt(0)>=768&&X.test(e)}function dt(e,s,l){for(;(l<0?s>0:s<e.length)&&it(e.charAt(s));)s+=l;return s}function ct(e,s,l){for(var a=s>l?-1:1;;){if(s==l)return s;var u=(s+l)/2,m=a<0?Math.ceil(u):Math.floor(u);if(m==s)return e(m)?s:l;e(m)?l=m:s=m+a}}function kt(e,s,l,a){if(!e)return a(s,l,"ltr",0);for(var u=!1,m=0;m<e.length;++m){var y=e[m];(y.from<l&&y.to>s||s==l&&y.to==s)&&(a(Math.max(y.from,s),Math.min(y.to,l),y.level==1?"rtl":"ltr",m),u=!0)}u||a(s,l,"ltr")}var Ot=null;function ie(e,s,l){var a;Ot=null;for(var u=0;u<e.length;++u){var m=e[u];if(m.from<s&&m.to>s)return u;m.to==s&&(m.from!=m.to&&l=="before"?a=u:Ot=u),m.from==s&&(m.from!=m.to&&l!="before"?a=u:Ot=u)}return a??Ot}var Jt=function(){var e="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",s="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function l(P){return P<=247?e.charAt(P):1424<=P&&P<=1524?"R":1536<=P&&P<=1785?s.charAt(P-1536):1774<=P&&P<=2220?"r":8192<=P&&P<=8203?"w":P==8204?"b":"L"}var a=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,u=/[stwN]/,m=/[LRr]/,y=/[Lb1n]/,k=/[1n]/;function C(P,M,G){this.level=P,this.from=M,this.to=G}return function(P,M){var G=M=="ltr"?"L":"R";if(P.length==0||M=="ltr"&&!a.test(P))return!1;for(var et=P.length,Z=[],ft=0;ft<et;++ft)Z.push(l(P.charCodeAt(ft)));for(var bt=0,It=G;bt<et;++bt){var Wt=Z[bt];Wt=="m"?Z[bt]=It:It=Wt}for(var zt=0,Mt=G;zt<et;++zt){var Gt=Z[zt];Gt=="1"&&Mt=="r"?Z[zt]="n":m.test(Gt)&&(Mt=Gt,Gt=="r"&&(Z[zt]="R"))}for(var ne=1,te=Z[0];ne<et-1;++ne){var fe=Z[ne];fe=="+"&&te=="1"&&Z[ne+1]=="1"?Z[ne]="1":fe==","&&te==Z[ne+1]&&(te=="1"||te=="n")&&(Z[ne]=te),te=fe}for(var ke=0;ke<et;++ke){var Ke=Z[ke];if(Ke==",")Z[ke]="N";else if(Ke=="%"){var Le=void 0;for(Le=ke+1;Le<et&&Z[Le]=="%";++Le);for(var Si=ke&&Z[ke-1]=="!"||Le<et&&Z[Le]=="1"?"1":"N",di=ke;di<Le;++di)Z[di]=Si;ke=Le-1}}for(var He=0,fi=G;He<et;++He){var ti=Z[He];fi=="L"&&ti=="1"?Z[He]="L":m.test(ti)&&(fi=ti)}for(var Fe=0;Fe<et;++Fe)if(u.test(Z[Fe])){var $e=void 0;for($e=Fe+1;$e<et&&u.test(Z[$e]);++$e);for(var Me=(Fe?Z[Fe-1]:G)=="L",pi=($e<et?Z[$e]:G)=="L",Tr=Me==pi?Me?"L":"R":G,Zn=Fe;Zn<$e;++Zn)Z[Zn]=Tr;Fe=$e-1}for(var ni=[],ln,Qe=0;Qe<et;)if(y.test(Z[Qe])){var uh=Qe;for(++Qe;Qe<et&&y.test(Z[Qe]);++Qe);ni.push(new C(0,uh,Qe))}else{var Tn=Qe,ks=ni.length,Cs=M=="rtl"?1:0;for(++Qe;Qe<et&&Z[Qe]!="L";++Qe);for(var oi=Tn;oi<Qe;)if(k.test(Z[oi])){Tn<oi&&(ni.splice(ks,0,new C(1,Tn,oi)),ks+=Cs);var _r=oi;for(++oi;oi<Qe&&k.test(Z[oi]);++oi);ni.splice(ks,0,new C(2,_r,oi)),ks+=Cs,Tn=oi}else++oi;Tn<Qe&&ni.splice(ks,0,new C(1,Tn,Qe))}return M=="ltr"&&(ni[0].level==1&&(ln=P.match(/^\s+/))&&(ni[0].from=ln[0].length,ni.unshift(new C(0,0,ln[0].length))),Ft(ni).level==1&&(ln=P.match(/\s+$/))&&(Ft(ni).to-=ln[0].length,ni.push(new C(0,et-ln[0].length,et)))),M=="rtl"?ni.reverse():ni}}();function $t(e,s){var l=e.order;return l==null&&(l=e.order=Jt(e.text,s)),l}var Ne=[],Et=function(e,s,l){if(e.addEventListener)e.addEventListener(s,l,!1);else if(e.attachEvent)e.attachEvent("on"+s,l);else{var a=e._handlers||(e._handlers={});a[s]=(a[s]||Ne).concat(l)}};function Wi(e,s){return e._handlers&&e._handlers[s]||Ne}function je(e,s,l){if(e.removeEventListener)e.removeEventListener(s,l,!1);else if(e.detachEvent)e.detachEvent("on"+s,l);else{var a=e._handlers,u=a&&a[s];if(u){var m=pt(u,l);m>-1&&(a[s]=u.slice(0,m).concat(u.slice(m+1)))}}}function Pe(e,s){var l=Wi(e,s);if(l.length)for(var a=Array.prototype.slice.call(arguments,2),u=0;u<l.length;++u)l[u].apply(null,a)}function ve(e,s,l){return typeof s=="string"&&(s={type:s,preventDefault:function(){this.defaultPrevented=!0}}),Pe(e,l||s.type,e,s),Xe(s)||s.codemirrorIgnore}function ei(e){var s=e._handlers&&e._handlers.cursorActivity;if(s)for(var l=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),a=0;a<s.length;++a)pt(l,s[a])==-1&&l.push(s[a])}function Ge(e,s){return Wi(e,s).length>0}function Je(e){e.prototype.on=function(s,l){Et(this,s,l)},e.prototype.off=function(s,l){je(this,s,l)}}function Be(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function Fi(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function Xe(e){return e.defaultPrevented!=null?e.defaultPrevented:e.returnValue==!1}function yi(e){Be(e),Fi(e)}function Zr(e){return e.target||e.srcElement}function ji(e){var s=e.which;return s==null&&(e.button&1?s=1:e.button&2?s=3:e.button&4&&(s=2)),J&&e.ctrlKey&&s==1&&(s=3),s}var vl=function(){if(w&&D<9)return!1;var e=z("div");return"draggable"in e||"dragDrop"in e}(),ir;function ra(e){if(ir==null){var s=z("span","​");lt(e,z("span",[s,document.createTextNode("x")])),e.firstChild.offsetHeight!=0&&(ir=s.offsetWidth<=1&&s.offsetHeight>2&&!(w&&D<8))}var l=ir?z("span","​"):z("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px");return l.setAttribute("cm-text",""),l}var Jr;function zn(e){if(Jr!=null)return Jr;var s=lt(e,document.createTextNode("AخA")),l=Zt(s,0,1).getBoundingClientRect(),a=Zt(s,1,2).getBoundingClientRect();return K(e),!l||l.left==l.right?!1:Jr=a.right-l.right<3}var Mi=`

b`.split(/\n/).length!=3?function(e){for(var s=0,l=[],a=e.length;s<=a;){var u=e.indexOf(`
`,s);u==-1&&(u=e.length);var m=e.slice(s,e.charAt(u-1)=="\r"?u-1:u),y=m.indexOf("\r");y!=-1?(l.push(m.slice(0,y)),s+=y+1):(l.push(m),s=u+1)}return l}:function(e){return e.split(/\r\n?|\n/)},Fn=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch{return!1}}:function(e){var s;try{s=e.ownerDocument.selection.createRange()}catch{}return!s||s.parentElement()!=e?!1:s.compareEndPoints("StartToEnd",s)!=0},oa=function(){var e=z("div");return"oncopy"in e?!0:(e.setAttribute("oncopy","return;"),typeof e.oncopy=="function")}(),Gi=null;function bl(e){if(Gi!=null)return Gi;var s=lt(e,z("span","x")),l=s.getBoundingClientRect(),a=Zt(s,0,1).getBoundingClientRect();return Gi=Math.abs(l.left-a.left)>1}var nr={},Xi={};function Ui(e,s){arguments.length>2&&(s.dependencies=Array.prototype.slice.call(arguments,2)),nr[e]=s}function ps(e,s){Xi[e]=s}function sr(e){if(typeof e=="string"&&Xi.hasOwnProperty(e))e=Xi[e];else if(e&&typeof e.name=="string"&&Xi.hasOwnProperty(e.name)){var s=Xi[e.name];typeof s=="string"&&(s={name:s}),e=b(s,e),e.name=s.name}else{if(typeof e=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return sr("application/xml");if(typeof e=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(e))return sr("application/json")}return typeof e=="string"?{name:e}:e||{name:"null"}}function rr(e,s){s=sr(s);var l=nr[s.name];if(!l)return rr(e,"text/plain");var a=l(e,s);if(jn.hasOwnProperty(s.name)){var u=jn[s.name];for(var m in u)u.hasOwnProperty(m)&&(a.hasOwnProperty(m)&&(a["_"+m]=a[m]),a[m]=u[m])}if(a.name=s.name,s.helperType&&(a.helperType=s.helperType),s.modeProps)for(var y in s.modeProps)a[y]=s.modeProps[y];return a}var jn={};function or(e,s){var l=jn.hasOwnProperty(e)?jn[e]:jn[e]={};N(s,l)}function sn(e,s){if(s===!0)return s;if(e.copyState)return e.copyState(s);var l={};for(var a in s){var u=s[a];u instanceof Array&&(u=u.concat([])),l[a]=u}return l}function to(e,s){for(var l;e.innerMode&&(l=e.innerMode(s),!(!l||l.mode==e));)s=l.state,e=l.mode;return l||{mode:e,state:s}}function ar(e,s,l){return e.startState?e.startState(s,l):!0}var We=function(e,s,l){this.pos=this.start=0,this.string=e,this.tabSize=s||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=l};We.prototype.eol=function(){return this.pos>=this.string.length},We.prototype.sol=function(){return this.pos==this.lineStart},We.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},We.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},We.prototype.eat=function(e){var s=this.string.charAt(this.pos),l;if(typeof e=="string"?l=s==e:l=s&&(e.test?e.test(s):e(s)),l)return++this.pos,s},We.prototype.eatWhile=function(e){for(var s=this.pos;this.eat(e););return this.pos>s},We.prototype.eatSpace=function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},We.prototype.skipToEnd=function(){this.pos=this.string.length},We.prototype.skipTo=function(e){var s=this.string.indexOf(e,this.pos);if(s>-1)return this.pos=s,!0},We.prototype.backUp=function(e){this.pos-=e},We.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Y(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?Y(this.string,this.lineStart,this.tabSize):0)},We.prototype.indentation=function(){return Y(this.string,null,this.tabSize)-(this.lineStart?Y(this.string,this.lineStart,this.tabSize):0)},We.prototype.match=function(e,s,l){if(typeof e=="string"){var a=function(y){return l?y.toLowerCase():y},u=this.string.substr(this.pos,e.length);if(a(u)==a(e))return s!==!1&&(this.pos+=e.length),!0}else{var m=this.string.slice(this.pos).match(e);return m&&m.index>0?null:(m&&s!==!1&&(this.pos+=m[0].length),m)}},We.prototype.current=function(){return this.string.slice(this.start,this.pos)},We.prototype.hideFirstChars=function(e,s){this.lineStart+=e;try{return s()}finally{this.lineStart-=e}},We.prototype.lookAhead=function(e){var s=this.lineOracle;return s&&s.lookAhead(e)},We.prototype.baseToken=function(){var e=this.lineOracle;return e&&e.baseToken(this.pos)};function Kt(e,s){if(s-=e.first,s<0||s>=e.size)throw new Error("There is no line "+(s+e.first)+" in the document.");for(var l=e;!l.lines;)for(var a=0;;++a){var u=l.children[a],m=u.chunkSize();if(s<m){l=u;break}s-=m}return l.lines[s]}function wn(e,s,l){var a=[],u=s.line;return e.iter(s.line,l.line+1,function(m){var y=m.text;u==l.line&&(y=y.slice(0,l.ch)),u==s.line&&(y=y.slice(s.ch)),a.push(y),++u}),a}function eo(e,s,l){var a=[];return e.iter(s,l,function(u){a.push(u.text)}),a}function Pi(e,s){var l=s-e.height;if(l)for(var a=e;a;a=a.parent)a.height+=l}function I(e){if(e.parent==null)return null;for(var s=e.parent,l=pt(s.lines,e),a=s.parent;a;s=a,a=a.parent)for(var u=0;a.children[u]!=s;++u)l+=a.children[u].chunkSize();return l+s.first}function j(e,s){var l=e.first;t:do{for(var a=0;a<e.children.length;++a){var u=e.children[a],m=u.height;if(s<m){e=u;continue t}s-=m,l+=u.chunkSize()}return l}while(!e.lines);for(var y=0;y<e.lines.length;++y){var k=e.lines[y],C=k.height;if(s<C)break;s-=C}return l+y}function mt(e,s){return s>=e.first&&s<e.first+e.size}function _t(e,s){return String(e.lineNumberFormatter(s+e.firstLineNumber))}function ut(e,s,l){if(l===void 0&&(l=null),!(this instanceof ut))return new ut(e,s,l);this.line=e,this.ch=s,this.sticky=l}function Bt(e,s){return e.line-s.line||e.ch-s.ch}function ye(e,s){return e.sticky==s.sticky&&Bt(e,s)==0}function Ue(e){return ut(e.line,e.ch)}function hi(e,s){return Bt(e,s)<0?s:e}function lr(e,s){return Bt(e,s)<0?e:s}function cu(e,s){return Math.max(e.first,Math.min(s,e.first+e.size-1))}function ue(e,s){if(s.line<e.first)return ut(e.first,0);var l=e.first+e.size-1;return s.line>l?ut(l,Kt(e,l).text.length):tp(s,Kt(e,s.line).text.length)}function tp(e,s){var l=e.ch;return l==null||l>s?ut(e.line,s):l<0?ut(e.line,0):e}function du(e,s){for(var l=[],a=0;a<s.length;a++)l[a]=ue(e,s[a]);return l}var aa=function(e,s){this.state=e,this.lookAhead=s},rn=function(e,s,l,a){this.state=s,this.doc=e,this.line=l,this.maxLookAhead=a||0,this.baseTokens=null,this.baseTokenPos=1};rn.prototype.lookAhead=function(e){var s=this.doc.getLine(this.line+e);return s!=null&&e>this.maxLookAhead&&(this.maxLookAhead=e),s},rn.prototype.baseToken=function(e){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=e;)this.baseTokenPos+=2;var s=this.baseTokens[this.baseTokenPos+1];return{type:s&&s.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-e}},rn.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},rn.fromSaved=function(e,s,l){return s instanceof aa?new rn(e,sn(e.mode,s.state),l,s.lookAhead):new rn(e,sn(e.mode,s),l)},rn.prototype.save=function(e){var s=e!==!1?sn(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new aa(s,this.maxLookAhead):s};function fu(e,s,l,a){var u=[e.state.modeGen],m={};yu(e,s.text,e.doc.mode,l,function(P,M){return u.push(P,M)},m,a);for(var y=l.state,k=function(P){l.baseTokens=u;var M=e.state.overlays[P],G=1,et=0;l.state=!0,yu(e,s.text,M.mode,l,function(Z,ft){for(var bt=G;et<Z;){var It=u[G];It>Z&&u.splice(G,1,Z,u[G+1],It),G+=2,et=Math.min(Z,It)}if(ft)if(M.opaque)u.splice(bt,G-bt,Z,"overlay "+ft),G=bt+2;else for(;bt<G;bt+=2){var Wt=u[bt+1];u[bt+1]=(Wt?Wt+" ":"")+"overlay "+ft}},m),l.state=y,l.baseTokens=null,l.baseTokenPos=1},C=0;C<e.state.overlays.length;++C)k(C);return{styles:u,classes:m.bgClass||m.textClass?m:null}}function pu(e,s,l){if(!s.styles||s.styles[0]!=e.state.modeGen){var a=io(e,I(s)),u=s.text.length>e.options.maxHighlightLength&&sn(e.doc.mode,a.state),m=fu(e,s,a);u&&(a.state=u),s.stateAfter=a.save(!u),s.styles=m.styles,m.classes?s.styleClasses=m.classes:s.styleClasses&&(s.styleClasses=null),l===e.doc.highlightFrontier&&(e.doc.modeFrontier=Math.max(e.doc.modeFrontier,++e.doc.highlightFrontier))}return s.styles}function io(e,s,l){var a=e.doc,u=e.display;if(!a.mode.startState)return new rn(a,!0,s);var m=ep(e,s,l),y=m>a.first&&Kt(a,m-1).stateAfter,k=y?rn.fromSaved(a,y,m):new rn(a,ar(a.mode),m);return a.iter(m,s,function(C){yl(e,C.text,k);var P=k.line;C.stateAfter=P==s-1||P%5==0||P>=u.viewFrom&&P<u.viewTo?k.save():null,k.nextLine()}),l&&(a.modeFrontier=k.line),k}function yl(e,s,l,a){var u=e.doc.mode,m=new We(s,e.options.tabSize,l);for(m.start=m.pos=a||0,s==""&&gu(u,l.state);!m.eol();)wl(u,m,l.state),m.start=m.pos}function gu(e,s){if(e.blankLine)return e.blankLine(s);if(e.innerMode){var l=to(e,s);if(l.mode.blankLine)return l.mode.blankLine(l.state)}}function wl(e,s,l,a){for(var u=0;u<10;u++){a&&(a[0]=to(e,l).mode);var m=e.token(s,l);if(s.pos>s.start)return m}throw new Error("Mode "+e.name+" failed to advance stream.")}var mu=function(e,s,l){this.start=e.start,this.end=e.pos,this.string=e.current(),this.type=s||null,this.state=l};function vu(e,s,l,a){var u=e.doc,m=u.mode,y;s=ue(u,s);var k=Kt(u,s.line),C=io(e,s.line,l),P=new We(k.text,e.options.tabSize,C),M;for(a&&(M=[]);(a||P.pos<s.ch)&&!P.eol();)P.start=P.pos,y=wl(m,P,C.state),a&&M.push(new mu(P,y,sn(u.mode,C.state)));return a?M:new mu(P,y,C.state)}function bu(e,s){if(e)for(;;){var l=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!l)break;e=e.slice(0,l.index)+e.slice(l.index+l[0].length);var a=l[1]?"bgClass":"textClass";s[a]==null?s[a]=l[2]:new RegExp("(?:^|\\s)"+l[2]+"(?:$|\\s)").test(s[a])||(s[a]+=" "+l[2])}return e}function yu(e,s,l,a,u,m,y){var k=l.flattenSpans;k==null&&(k=e.options.flattenSpans);var C=0,P=null,M=new We(s,e.options.tabSize,a),G,et=e.options.addModeClass&&[null];for(s==""&&bu(gu(l,a.state),m);!M.eol();){if(M.pos>e.options.maxHighlightLength?(k=!1,y&&yl(e,s,a,M.pos),M.pos=s.length,G=null):G=bu(wl(l,M,a.state,et),m),et){var Z=et[0].name;Z&&(G="m-"+(G?Z+" "+G:Z))}if(!k||P!=G){for(;C<M.start;)C=Math.min(M.start,C+5e3),u(C,P);P=G}M.start=M.pos}for(;C<M.pos;){var ft=Math.min(M.pos,C+5e3);u(ft,P),C=ft}}function ep(e,s,l){for(var a,u,m=e.doc,y=l?-1:s-(e.doc.mode.innerMode?1e3:100),k=s;k>y;--k){if(k<=m.first)return m.first;var C=Kt(m,k-1),P=C.stateAfter;if(P&&(!l||k+(P instanceof aa?P.lookAhead:0)<=m.modeFrontier))return k;var M=Y(C.text,null,e.options.tabSize);(u==null||a>M)&&(u=k-1,a=M)}return u}function ip(e,s){if(e.modeFrontier=Math.min(e.modeFrontier,s),!(e.highlightFrontier<s-10)){for(var l=e.first,a=s-1;a>l;a--){var u=Kt(e,a).stateAfter;if(u&&(!(u instanceof aa)||a+u.lookAhead<s)){l=a+1;break}}e.highlightFrontier=Math.min(e.highlightFrontier,l)}}var wu=!1,Sn=!1;function np(){wu=!0}function sp(){Sn=!0}function la(e,s,l){this.marker=e,this.from=s,this.to=l}function no(e,s){if(e)for(var l=0;l<e.length;++l){var a=e[l];if(a.marker==s)return a}}function rp(e,s){for(var l,a=0;a<e.length;++a)e[a]!=s&&(l||(l=[])).push(e[a]);return l}function op(e,s,l){var a=l&&window.WeakSet&&(l.markedSpans||(l.markedSpans=new WeakSet));a&&e.markedSpans&&a.has(e.markedSpans)?e.markedSpans.push(s):(e.markedSpans=e.markedSpans?e.markedSpans.concat([s]):[s],a&&a.add(e.markedSpans)),s.marker.attachLine(e)}function ap(e,s,l){var a;if(e)for(var u=0;u<e.length;++u){var m=e[u],y=m.marker,k=m.from==null||(y.inclusiveLeft?m.from<=s:m.from<s);if(k||m.from==s&&y.type=="bookmark"&&(!l||!m.marker.insertLeft)){var C=m.to==null||(y.inclusiveRight?m.to>=s:m.to>s);(a||(a=[])).push(new la(y,m.from,C?null:m.to))}}return a}function lp(e,s,l){var a;if(e)for(var u=0;u<e.length;++u){var m=e[u],y=m.marker,k=m.to==null||(y.inclusiveRight?m.to>=s:m.to>s);if(k||m.from==s&&y.type=="bookmark"&&(!l||m.marker.insertLeft)){var C=m.from==null||(y.inclusiveLeft?m.from<=s:m.from<s);(a||(a=[])).push(new la(y,C?null:m.from-s,m.to==null?null:m.to-s))}}return a}function Sl(e,s){if(s.full)return null;var l=mt(e,s.from.line)&&Kt(e,s.from.line).markedSpans,a=mt(e,s.to.line)&&Kt(e,s.to.line).markedSpans;if(!l&&!a)return null;var u=s.from.ch,m=s.to.ch,y=Bt(s.from,s.to)==0,k=ap(l,u,y),C=lp(a,m,y),P=s.text.length==1,M=Ft(s.text).length+(P?u:0);if(k)for(var G=0;G<k.length;++G){var et=k[G];if(et.to==null){var Z=no(C,et.marker);Z?P&&(et.to=Z.to==null?null:Z.to+M):et.to=u}}if(C)for(var ft=0;ft<C.length;++ft){var bt=C[ft];if(bt.to!=null&&(bt.to+=M),bt.from==null){var It=no(k,bt.marker);It||(bt.from=M,P&&(k||(k=[])).push(bt))}else bt.from+=M,P&&(k||(k=[])).push(bt)}k&&(k=Su(k)),C&&C!=k&&(C=Su(C));var Wt=[k];if(!P){var zt=s.text.length-2,Mt;if(zt>0&&k)for(var Gt=0;Gt<k.length;++Gt)k[Gt].to==null&&(Mt||(Mt=[])).push(new la(k[Gt].marker,null,null));for(var ne=0;ne<zt;++ne)Wt.push(Mt);Wt.push(C)}return Wt}function Su(e){for(var s=0;s<e.length;++s){var l=e[s];l.from!=null&&l.from==l.to&&l.marker.clearWhenEmpty!==!1&&e.splice(s--,1)}return e.length?e:null}function hp(e,s,l){var a=null;if(e.iter(s.line,l.line+1,function(Z){if(Z.markedSpans)for(var ft=0;ft<Z.markedSpans.length;++ft){var bt=Z.markedSpans[ft].marker;bt.readOnly&&(!a||pt(a,bt)==-1)&&(a||(a=[])).push(bt)}}),!a)return null;for(var u=[{from:s,to:l}],m=0;m<a.length;++m)for(var y=a[m],k=y.find(0),C=0;C<u.length;++C){var P=u[C];if(!(Bt(P.to,k.from)<0||Bt(P.from,k.to)>0)){var M=[C,1],G=Bt(P.from,k.from),et=Bt(P.to,k.to);(G<0||!y.inclusiveLeft&&!G)&&M.push({from:P.from,to:k.from}),(et>0||!y.inclusiveRight&&!et)&&M.push({from:k.to,to:P.to}),u.splice.apply(u,M),C+=M.length-3}}return u}function xu(e){var s=e.markedSpans;if(s){for(var l=0;l<s.length;++l)s[l].marker.detachLine(e);e.markedSpans=null}}function ku(e,s){if(s){for(var l=0;l<s.length;++l)s[l].marker.attachLine(e);e.markedSpans=s}}function ha(e){return e.inclusiveLeft?-1:0}function ua(e){return e.inclusiveRight?1:0}function xl(e,s){var l=e.lines.length-s.lines.length;if(l!=0)return l;var a=e.find(),u=s.find(),m=Bt(a.from,u.from)||ha(e)-ha(s);if(m)return-m;var y=Bt(a.to,u.to)||ua(e)-ua(s);return y||s.id-e.id}function Cu(e,s){var l=Sn&&e.markedSpans,a;if(l)for(var u=void 0,m=0;m<l.length;++m)u=l[m],u.marker.collapsed&&(s?u.from:u.to)==null&&(!a||xl(a,u.marker)<0)&&(a=u.marker);return a}function Du(e){return Cu(e,!0)}function ca(e){return Cu(e,!1)}function up(e,s){var l=Sn&&e.markedSpans,a;if(l)for(var u=0;u<l.length;++u){var m=l[u];m.marker.collapsed&&(m.from==null||m.from<s)&&(m.to==null||m.to>s)&&(!a||xl(a,m.marker)<0)&&(a=m.marker)}return a}function Tu(e,s,l,a,u){var m=Kt(e,s),y=Sn&&m.markedSpans;if(y)for(var k=0;k<y.length;++k){var C=y[k];if(C.marker.collapsed){var P=C.marker.find(0),M=Bt(P.from,l)||ha(C.marker)-ha(u),G=Bt(P.to,a)||ua(C.marker)-ua(u);if(!(M>=0&&G<=0||M<=0&&G>=0)&&(M<=0&&(C.marker.inclusiveRight&&u.inclusiveLeft?Bt(P.to,l)>=0:Bt(P.to,l)>0)||M>=0&&(C.marker.inclusiveRight&&u.inclusiveLeft?Bt(P.from,a)<=0:Bt(P.from,a)<0)))return!0}}}function Yi(e){for(var s;s=Du(e);)e=s.find(-1,!0).line;return e}function cp(e){for(var s;s=ca(e);)e=s.find(1,!0).line;return e}function dp(e){for(var s,l;s=ca(e);)e=s.find(1,!0).line,(l||(l=[])).push(e);return l}function kl(e,s){var l=Kt(e,s),a=Yi(l);return l==a?s:I(a)}function _u(e,s){if(s>e.lastLine())return s;var l=Kt(e,s),a;if(!Gn(e,l))return s;for(;a=ca(l);)l=a.find(1,!0).line;return I(l)+1}function Gn(e,s){var l=Sn&&s.markedSpans;if(l){for(var a=void 0,u=0;u<l.length;++u)if(a=l[u],!!a.marker.collapsed){if(a.from==null)return!0;if(!a.marker.widgetNode&&a.from==0&&a.marker.inclusiveLeft&&Cl(e,s,a))return!0}}}function Cl(e,s,l){if(l.to==null){var a=l.marker.find(1,!0);return Cl(e,a.line,no(a.line.markedSpans,l.marker))}if(l.marker.inclusiveRight&&l.to==s.text.length)return!0;for(var u=void 0,m=0;m<s.markedSpans.length;++m)if(u=s.markedSpans[m],u.marker.collapsed&&!u.marker.widgetNode&&u.from==l.to&&(u.to==null||u.to!=l.from)&&(u.marker.inclusiveLeft||l.marker.inclusiveRight)&&Cl(e,s,u))return!0}function xn(e){e=Yi(e);for(var s=0,l=e.parent,a=0;a<l.lines.length;++a){var u=l.lines[a];if(u==e)break;s+=u.height}for(var m=l.parent;m;l=m,m=l.parent)for(var y=0;y<m.children.length;++y){var k=m.children[y];if(k==l)break;s+=k.height}return s}function da(e){if(e.height==0)return 0;for(var s=e.text.length,l,a=e;l=Du(a);){var u=l.find(0,!0);a=u.from.line,s+=u.from.ch-u.to.ch}for(a=e;l=ca(a);){var m=l.find(0,!0);s-=a.text.length-m.from.ch,a=m.to.line,s+=a.text.length-m.to.ch}return s}function Dl(e){var s=e.display,l=e.doc;s.maxLine=Kt(l,l.first),s.maxLineLength=da(s.maxLine),s.maxLineChanged=!0,l.iter(function(a){var u=da(a);u>s.maxLineLength&&(s.maxLineLength=u,s.maxLine=a)})}var hr=function(e,s,l){this.text=e,ku(this,s),this.height=l?l(this):1};hr.prototype.lineNo=function(){return I(this)},Je(hr);function fp(e,s,l,a){e.text=s,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),e.order!=null&&(e.order=null),xu(e),ku(e,l);var u=a?a(e):1;u!=e.height&&Pi(e,u)}function pp(e){e.parent=null,xu(e)}var gp={},mp={};function Pu(e,s){if(!e||/^\s*$/.test(e))return null;var l=s.addModeClass?mp:gp;return l[e]||(l[e]=e.replace(/\S+/g,"cm-$&"))}function Iu(e,s){var l=oe("span",null,null,T?"padding-right: .1px":null),a={pre:oe("pre",[l],"CodeMirror-line"),content:l,col:0,pos:0,cm:e,trailingSpace:!1,splitSpaces:e.getOption("lineWrapping")};s.measure={};for(var u=0;u<=(s.rest?s.rest.length:0);u++){var m=u?s.rest[u-1]:s.line,y=void 0;a.pos=0,a.addToken=bp,zn(e.display.measure)&&(y=$t(m,e.doc.direction))&&(a.addToken=wp(a.addToken,y)),a.map=[];var k=s!=e.display.externalMeasured&&I(m);Sp(m,a,pu(e,m,k)),m.styleClasses&&(m.styleClasses.bgClass&&(a.bgClass=Vt(m.styleClasses.bgClass,a.bgClass||"")),m.styleClasses.textClass&&(a.textClass=Vt(m.styleClasses.textClass,a.textClass||""))),a.map.length==0&&a.map.push(0,0,a.content.appendChild(ra(e.display.measure))),u==0?(s.measure.map=a.map,s.measure.cache={}):((s.measure.maps||(s.measure.maps=[])).push(a.map),(s.measure.caches||(s.measure.caches=[])).push({}))}if(T){var C=a.content.lastChild;(/\bcm-tab\b/.test(C.className)||C.querySelector&&C.querySelector(".cm-tab"))&&(a.content.className="cm-tab-wrap-hack")}return Pe(e,"renderLine",e,s.line,a.pre),a.pre.className&&(a.textClass=Vt(a.pre.className,a.textClass||"")),a}function vp(e){var s=z("span","•","cm-invalidchar");return s.title="\\u"+e.charCodeAt(0).toString(16),s.setAttribute("aria-label",s.title),s}function bp(e,s,l,a,u,m,y){if(s){var k=e.splitSpaces?yp(s,e.trailingSpace):s,C=e.cm.state.specialChars,P=!1,M;if(!C.test(s))e.col+=s.length,M=document.createTextNode(k),e.map.push(e.pos,e.pos+s.length,M),w&&D<9&&(P=!0),e.pos+=s.length;else{M=document.createDocumentFragment();for(var G=0;;){C.lastIndex=G;var et=C.exec(s),Z=et?et.index-G:s.length-G;if(Z){var ft=document.createTextNode(k.slice(G,G+Z));w&&D<9?M.appendChild(z("span",[ft])):M.appendChild(ft),e.map.push(e.pos,e.pos+Z,ft),e.col+=Z,e.pos+=Z}if(!et)break;G+=Z+1;var bt=void 0;if(et[0]=="	"){var It=e.cm.options.tabSize,Wt=It-e.col%It;bt=M.appendChild(z("span",qt(Wt),"cm-tab")),bt.setAttribute("role","presentation"),bt.setAttribute("cm-text","	"),e.col+=Wt}else et[0]=="\r"||et[0]==`
`?(bt=M.appendChild(z("span",et[0]=="\r"?"␍":"␤","cm-invalidchar")),bt.setAttribute("cm-text",et[0]),e.col+=1):(bt=e.cm.options.specialCharPlaceholder(et[0]),bt.setAttribute("cm-text",et[0]),w&&D<9?M.appendChild(z("span",[bt])):M.appendChild(bt),e.col+=1);e.map.push(e.pos,e.pos+1,bt),e.pos++}}if(e.trailingSpace=k.charCodeAt(s.length-1)==32,l||a||u||P||m||y){var zt=l||"";a&&(zt+=a),u&&(zt+=u);var Mt=z("span",[M],zt,m);if(y)for(var Gt in y)y.hasOwnProperty(Gt)&&Gt!="style"&&Gt!="class"&&Mt.setAttribute(Gt,y[Gt]);return e.content.appendChild(Mt)}e.content.appendChild(M)}}function yp(e,s){if(e.length>1&&!/  /.test(e))return e;for(var l=s,a="",u=0;u<e.length;u++){var m=e.charAt(u);m==" "&&l&&(u==e.length-1||e.charCodeAt(u+1)==32)&&(m=" "),a+=m,l=m==" "}return a}function wp(e,s){return function(l,a,u,m,y,k,C){u=u?u+" cm-force-border":"cm-force-border";for(var P=l.pos,M=P+a.length;;){for(var G=void 0,et=0;et<s.length&&(G=s[et],!(G.to>P&&G.from<=P));et++);if(G.to>=M)return e(l,a,u,m,y,k,C);e(l,a.slice(0,G.to-P),u,m,null,k,C),m=null,a=a.slice(G.to-P),P=G.to}}}function Lu(e,s,l,a){var u=!a&&l.widgetNode;u&&e.map.push(e.pos,e.pos+s,u),!a&&e.cm.display.input.needsContentAttribute&&(u||(u=e.content.appendChild(document.createElement("span"))),u.setAttribute("cm-marker",l.id)),u&&(e.cm.display.input.setUneditable(u),e.content.appendChild(u)),e.pos+=s,e.trailingSpace=!1}function Sp(e,s,l){var a=e.markedSpans,u=e.text,m=0;if(!a){for(var y=1;y<l.length;y+=2)s.addToken(s,u.slice(m,m=l[y]),Pu(l[y+1],s.cm.options));return}for(var k=u.length,C=0,P=1,M="",G,et,Z=0,ft,bt,It,Wt,zt;;){if(Z==C){ft=bt=It=et="",zt=null,Wt=null,Z=1/0;for(var Mt=[],Gt=void 0,ne=0;ne<a.length;++ne){var te=a[ne],fe=te.marker;if(fe.type=="bookmark"&&te.from==C&&fe.widgetNode)Mt.push(fe);else if(te.from<=C&&(te.to==null||te.to>C||fe.collapsed&&te.to==C&&te.from==C)){if(te.to!=null&&te.to!=C&&Z>te.to&&(Z=te.to,bt=""),fe.className&&(ft+=" "+fe.className),fe.css&&(et=(et?et+";":"")+fe.css),fe.startStyle&&te.from==C&&(It+=" "+fe.startStyle),fe.endStyle&&te.to==Z&&(Gt||(Gt=[])).push(fe.endStyle,te.to),fe.title&&((zt||(zt={})).title=fe.title),fe.attributes)for(var ke in fe.attributes)(zt||(zt={}))[ke]=fe.attributes[ke];fe.collapsed&&(!Wt||xl(Wt.marker,fe)<0)&&(Wt=te)}else te.from>C&&Z>te.from&&(Z=te.from)}if(Gt)for(var Ke=0;Ke<Gt.length;Ke+=2)Gt[Ke+1]==Z&&(bt+=" "+Gt[Ke]);if(!Wt||Wt.from==C)for(var Le=0;Le<Mt.length;++Le)Lu(s,0,Mt[Le]);if(Wt&&(Wt.from||0)==C){if(Lu(s,(Wt.to==null?k+1:Wt.to)-C,Wt.marker,Wt.from==null),Wt.to==null)return;Wt.to==C&&(Wt=!1)}}if(C>=k)break;for(var Si=Math.min(k,Z);;){if(M){var di=C+M.length;if(!Wt){var He=di>Si?M.slice(0,Si-C):M;s.addToken(s,He,G?G+ft:ft,It,C+He.length==Z?bt:"",et,zt)}if(di>=Si){M=M.slice(Si-C),C=Si;break}C=di,It=""}M=u.slice(m,m=l[P++]),G=Pu(l[P++],s.cm.options)}}}function Ou(e,s,l){this.line=s,this.rest=dp(s),this.size=this.rest?I(Ft(this.rest))-l+1:1,this.node=this.text=null,this.hidden=Gn(e,s)}function fa(e,s,l){for(var a=[],u,m=s;m<l;m=u){var y=new Ou(e.doc,Kt(e.doc,m),m);u=m+y.size,a.push(y)}return a}var ur=null;function xp(e){ur?ur.ops.push(e):e.ownsGroup=ur={ops:[e],delayedCallbacks:[]}}function kp(e){var s=e.delayedCallbacks,l=0;do{for(;l<s.length;l++)s[l].call(null);for(var a=0;a<e.ops.length;a++){var u=e.ops[a];if(u.cursorActivityHandlers)for(;u.cursorActivityCalled<u.cursorActivityHandlers.length;)u.cursorActivityHandlers[u.cursorActivityCalled++].call(null,u.cm)}}while(l<s.length)}function Cp(e,s){var l=e.ownsGroup;if(l)try{kp(l)}finally{ur=null,s(l)}}var so=null;function Ye(e,s){var l=Wi(e,s);if(l.length){var a=Array.prototype.slice.call(arguments,2),u;ur?u=ur.delayedCallbacks:so?u=so:(u=so=[],setTimeout(Dp,0));for(var m=function(k){u.push(function(){return l[k].apply(null,a)})},y=0;y<l.length;++y)m(y)}}function Dp(){var e=so;so=null;for(var s=0;s<e.length;++s)e[s]()}function Eu(e,s,l,a){for(var u=0;u<s.changes.length;u++){var m=s.changes[u];m=="text"?_p(e,s):m=="gutter"?Mu(e,s,l,a):m=="class"?Tl(e,s):m=="widget"&&Pp(e,s,a)}s.changes=null}function ro(e){return e.node==e.text&&(e.node=z("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),w&&D<8&&(e.node.style.zIndex=2)),e.node}function Tp(e,s){var l=s.bgClass?s.bgClass+" "+(s.line.bgClass||""):s.line.bgClass;if(l&&(l+=" CodeMirror-linebackground"),s.background)l?s.background.className=l:(s.background.parentNode.removeChild(s.background),s.background=null);else if(l){var a=ro(s);s.background=a.insertBefore(z("div",null,l),a.firstChild),e.display.input.setUneditable(s.background)}}function Wu(e,s){var l=e.display.externalMeasured;return l&&l.line==s.line?(e.display.externalMeasured=null,s.measure=l.measure,l.built):Iu(e,s)}function _p(e,s){var l=s.text.className,a=Wu(e,s);s.text==s.node&&(s.node=a.pre),s.text.parentNode.replaceChild(a.pre,s.text),s.text=a.pre,a.bgClass!=s.bgClass||a.textClass!=s.textClass?(s.bgClass=a.bgClass,s.textClass=a.textClass,Tl(e,s)):l&&(s.text.className=l)}function Tl(e,s){Tp(e,s),s.line.wrapClass?ro(s).className=s.line.wrapClass:s.node!=s.text&&(s.node.className="");var l=s.textClass?s.textClass+" "+(s.line.textClass||""):s.line.textClass;s.text.className=l||""}function Mu(e,s,l,a){if(s.gutter&&(s.node.removeChild(s.gutter),s.gutter=null),s.gutterBackground&&(s.node.removeChild(s.gutterBackground),s.gutterBackground=null),s.line.gutterClass){var u=ro(s);s.gutterBackground=z("div",null,"CodeMirror-gutter-background "+s.line.gutterClass,"left: "+(e.options.fixedGutter?a.fixedPos:-a.gutterTotalWidth)+"px; width: "+a.gutterTotalWidth+"px"),e.display.input.setUneditable(s.gutterBackground),u.insertBefore(s.gutterBackground,s.text)}var m=s.line.gutterMarkers;if(e.options.lineNumbers||m){var y=ro(s),k=s.gutter=z("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?a.fixedPos:-a.gutterTotalWidth)+"px");if(k.setAttribute("aria-hidden","true"),e.display.input.setUneditable(k),y.insertBefore(k,s.text),s.line.gutterClass&&(k.className+=" "+s.line.gutterClass),e.options.lineNumbers&&(!m||!m["CodeMirror-linenumbers"])&&(s.lineNumber=k.appendChild(z("div",_t(e.options,l),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+a.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),m)for(var C=0;C<e.display.gutterSpecs.length;++C){var P=e.display.gutterSpecs[C].className,M=m.hasOwnProperty(P)&&m[P];M&&k.appendChild(z("div",[M],"CodeMirror-gutter-elt","left: "+a.gutterLeft[P]+"px; width: "+a.gutterWidth[P]+"px"))}}}function Pp(e,s,l){s.alignable&&(s.alignable=null);for(var a=At("CodeMirror-linewidget"),u=s.node.firstChild,m=void 0;u;u=m)m=u.nextSibling,a.test(u.className)&&s.node.removeChild(u);Au(e,s,l)}function Ip(e,s,l,a){var u=Wu(e,s);return s.text=s.node=u.pre,u.bgClass&&(s.bgClass=u.bgClass),u.textClass&&(s.textClass=u.textClass),Tl(e,s),Mu(e,s,l,a),Au(e,s,a),s.node}function Au(e,s,l){if(Nu(e,s.line,s,l,!0),s.rest)for(var a=0;a<s.rest.length;a++)Nu(e,s.rest[a],s,l,!1)}function Nu(e,s,l,a,u){if(s.widgets)for(var m=ro(l),y=0,k=s.widgets;y<k.length;++y){var C=k[y],P=z("div",[C.node],"CodeMirror-linewidget"+(C.className?" "+C.className:""));C.handleMouseEvents||P.setAttribute("cm-ignore-events","true"),Lp(C,P,l,a),e.display.input.setUneditable(P),u&&C.above?m.insertBefore(P,l.gutter||l.text):m.appendChild(P),Ye(C,"redraw")}}function Lp(e,s,l,a){if(e.noHScroll){(l.alignable||(l.alignable=[])).push(s);var u=a.wrapperWidth;s.style.left=a.fixedPos+"px",e.coverGutter||(u-=a.gutterTotalWidth,s.style.paddingLeft=a.gutterTotalWidth+"px"),s.style.width=u+"px"}e.coverGutter&&(s.style.zIndex=5,s.style.position="relative",e.noHScroll||(s.style.marginLeft=-a.gutterTotalWidth+"px"))}function oo(e){if(e.height!=null)return e.height;var s=e.doc.cm;if(!s)return 0;if(!ee(document.body,e.node)){var l="position: relative;";e.coverGutter&&(l+="margin-left: -"+s.display.gutters.offsetWidth+"px;"),e.noHScroll&&(l+="width: "+s.display.wrapper.clientWidth+"px;"),lt(s.display.measure,z("div",[e.node],null,l))}return e.height=e.node.parentNode.offsetHeight}function kn(e,s){for(var l=Zr(s);l!=e.wrapper;l=l.parentNode)if(!l||l.nodeType==1&&l.getAttribute("cm-ignore-events")=="true"||l.parentNode==e.sizer&&l!=e.mover)return!0}function pa(e){return e.lineSpace.offsetTop}function _l(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function Ru(e){if(e.cachedPaddingH)return e.cachedPaddingH;var s=lt(e.measure,z("pre","x","CodeMirror-line-like")),l=window.getComputedStyle?window.getComputedStyle(s):s.currentStyle,a={left:parseInt(l.paddingLeft),right:parseInt(l.paddingRight)};return!isNaN(a.left)&&!isNaN(a.right)&&(e.cachedPaddingH=a),a}function on(e){return Lt-e.display.nativeBarWidth}function gs(e){return e.display.scroller.clientWidth-on(e)-e.display.barWidth}function Pl(e){return e.display.scroller.clientHeight-on(e)-e.display.barHeight}function Op(e,s,l){var a=e.options.lineWrapping,u=a&&gs(e);if(!s.measure.heights||a&&s.measure.width!=u){var m=s.measure.heights=[];if(a){s.measure.width=u;for(var y=s.text.firstChild.getClientRects(),k=0;k<y.length-1;k++){var C=y[k],P=y[k+1];Math.abs(C.bottom-P.bottom)>2&&m.push((C.bottom+P.top)/2-l.top)}}m.push(l.bottom-l.top)}}function Bu(e,s,l){if(e.line==s)return{map:e.measure.map,cache:e.measure.cache};if(e.rest){for(var a=0;a<e.rest.length;a++)if(e.rest[a]==s)return{map:e.measure.maps[a],cache:e.measure.caches[a]};for(var u=0;u<e.rest.length;u++)if(I(e.rest[u])>l)return{map:e.measure.maps[u],cache:e.measure.caches[u],before:!0}}}function Ep(e,s){s=Yi(s);var l=I(s),a=e.display.externalMeasured=new Ou(e.doc,s,l);a.lineN=l;var u=a.built=Iu(e,a);return a.text=u.pre,lt(e.display.lineMeasure,u.pre),a}function Hu(e,s,l,a){return an(e,cr(e,s),l,a)}function Il(e,s){if(s>=e.display.viewFrom&&s<e.display.viewTo)return e.display.view[bs(e,s)];var l=e.display.externalMeasured;if(l&&s>=l.lineN&&s<l.lineN+l.size)return l}function cr(e,s){var l=I(s),a=Il(e,l);a&&!a.text?a=null:a&&a.changes&&(Eu(e,a,l,Ml(e)),e.curOp.forceUpdate=!0),a||(a=Ep(e,s));var u=Bu(a,s,l);return{line:s,view:a,rect:null,map:u.map,cache:u.cache,before:u.before,hasHeights:!1}}function an(e,s,l,a,u){s.before&&(l=-1);var m=l+(a||""),y;return s.cache.hasOwnProperty(m)?y=s.cache[m]:(s.rect||(s.rect=s.view.text.getBoundingClientRect()),s.hasHeights||(Op(e,s.view,s.rect),s.hasHeights=!0),y=Mp(e,s,l,a),y.bogus||(s.cache[m]=y)),{left:y.left,right:y.right,top:u?y.rtop:y.top,bottom:u?y.rbottom:y.bottom}}var $u={left:0,right:0,top:0,bottom:0};function zu(e,s,l){for(var a,u,m,y,k,C,P=0;P<e.length;P+=3)if(k=e[P],C=e[P+1],s<k?(u=0,m=1,y="left"):s<C?(u=s-k,m=u+1):(P==e.length-3||s==C&&e[P+3]>s)&&(m=C-k,u=m-1,s>=C&&(y="right")),u!=null){if(a=e[P+2],k==C&&l==(a.insertLeft?"left":"right")&&(y=l),l=="left"&&u==0)for(;P&&e[P-2]==e[P-3]&&e[P-1].insertLeft;)a=e[(P-=3)+2],y="left";if(l=="right"&&u==C-k)for(;P<e.length-3&&e[P+3]==e[P+4]&&!e[P+5].insertLeft;)a=e[(P+=3)+2],y="right";break}return{node:a,start:u,end:m,collapse:y,coverStart:k,coverEnd:C}}function Wp(e,s){var l=$u;if(s=="left")for(var a=0;a<e.length&&(l=e[a]).left==l.right;a++);else for(var u=e.length-1;u>=0&&(l=e[u]).left==l.right;u--);return l}function Mp(e,s,l,a){var u=zu(s.map,l,a),m=u.node,y=u.start,k=u.end,C=u.collapse,P;if(m.nodeType==3){for(var M=0;M<4;M++){for(;y&&it(s.line.text.charAt(u.coverStart+y));)--y;for(;u.coverStart+k<u.coverEnd&&it(s.line.text.charAt(u.coverStart+k));)++k;if(w&&D<9&&y==0&&k==u.coverEnd-u.coverStart?P=m.parentNode.getBoundingClientRect():P=Wp(Zt(m,y,k).getClientRects(),a),P.left||P.right||y==0)break;k=y,y=y-1,C="right"}w&&D<11&&(P=Ap(e.display.measure,P))}else{y>0&&(C=a="right");var G;e.options.lineWrapping&&(G=m.getClientRects()).length>1?P=G[a=="right"?G.length-1:0]:P=m.getBoundingClientRect()}if(w&&D<9&&!y&&(!P||!P.left&&!P.right)){var et=m.parentNode.getClientRects()[0];et?P={left:et.left,right:et.left+fr(e.display),top:et.top,bottom:et.bottom}:P=$u}for(var Z=P.top-s.rect.top,ft=P.bottom-s.rect.top,bt=(Z+ft)/2,It=s.view.measure.heights,Wt=0;Wt<It.length-1&&!(bt<It[Wt]);Wt++);var zt=Wt?It[Wt-1]:0,Mt=It[Wt],Gt={left:(C=="right"?P.right:P.left)-s.rect.left,right:(C=="left"?P.left:P.right)-s.rect.left,top:zt,bottom:Mt};return!P.left&&!P.right&&(Gt.bogus=!0),e.options.singleCursorHeightPerLine||(Gt.rtop=Z,Gt.rbottom=ft),Gt}function Ap(e,s){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!bl(e))return s;var l=screen.logicalXDPI/screen.deviceXDPI,a=screen.logicalYDPI/screen.deviceYDPI;return{left:s.left*l,right:s.right*l,top:s.top*a,bottom:s.bottom*a}}function Fu(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var s=0;s<e.rest.length;s++)e.measure.caches[s]={}}function ju(e){e.display.externalMeasure=null,K(e.display.lineMeasure);for(var s=0;s<e.display.view.length;s++)Fu(e.display.view[s])}function ao(e){ju(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function Gu(e){return W&&q?-(e.body.getBoundingClientRect().left-parseInt(getComputedStyle(e.body).marginLeft)):e.defaultView.pageXOffset||(e.documentElement||e.body).scrollLeft}function Xu(e){return W&&q?-(e.body.getBoundingClientRect().top-parseInt(getComputedStyle(e.body).marginTop)):e.defaultView.pageYOffset||(e.documentElement||e.body).scrollTop}function Ll(e){var s=Yi(e),l=s.widgets,a=0;if(l)for(var u=0;u<l.length;++u)l[u].above&&(a+=oo(l[u]));return a}function ga(e,s,l,a,u){if(!u){var m=Ll(s);l.top+=m,l.bottom+=m}if(a=="line")return l;a||(a="local");var y=xn(s);if(a=="local"?y+=pa(e.display):y-=e.display.viewOffset,a=="page"||a=="window"){var k=e.display.lineSpace.getBoundingClientRect();y+=k.top+(a=="window"?0:Xu(ae(e)));var C=k.left+(a=="window"?0:Gu(ae(e)));l.left+=C,l.right+=C}return l.top+=y,l.bottom+=y,l}function Uu(e,s,l){if(l=="div")return s;var a=s.left,u=s.top;if(l=="page")a-=Gu(ae(e)),u-=Xu(ae(e));else if(l=="local"||!l){var m=e.display.sizer.getBoundingClientRect();a+=m.left,u+=m.top}var y=e.display.lineSpace.getBoundingClientRect();return{left:a-y.left,top:u-y.top}}function ma(e,s,l,a,u){return a||(a=Kt(e.doc,s.line)),ga(e,a,Hu(e,a,s.ch,u),l)}function qi(e,s,l,a,u,m){a=a||Kt(e.doc,s.line),u||(u=cr(e,a));function y(ft,bt){var It=an(e,u,ft,bt?"right":"left",m);return bt?It.left=It.right:It.right=It.left,ga(e,a,It,l)}var k=$t(a,e.doc.direction),C=s.ch,P=s.sticky;if(C>=a.text.length?(C=a.text.length,P="before"):C<=0&&(C=0,P="after"),!k)return y(P=="before"?C-1:C,P=="before");function M(ft,bt,It){var Wt=k[bt],zt=Wt.level==1;return y(It?ft-1:ft,zt!=It)}var G=ie(k,C,P),et=Ot,Z=M(C,G,P=="before");return et!=null&&(Z.other=M(C,et,P!="before")),Z}function Yu(e,s){var l=0;s=ue(e.doc,s),e.options.lineWrapping||(l=fr(e.display)*s.ch);var a=Kt(e.doc,s.line),u=xn(a)+pa(e.display);return{left:l,right:l,top:u,bottom:u+a.height}}function Ol(e,s,l,a,u){var m=ut(e,s,l);return m.xRel=u,a&&(m.outside=a),m}function El(e,s,l){var a=e.doc;if(l+=e.display.viewOffset,l<0)return Ol(a.first,0,null,-1,-1);var u=j(a,l),m=a.first+a.size-1;if(u>m)return Ol(a.first+a.size-1,Kt(a,m).text.length,null,1,1);s<0&&(s=0);for(var y=Kt(a,u);;){var k=Np(e,y,u,s,l),C=up(y,k.ch+(k.xRel>0||k.outside>0?1:0));if(!C)return k;var P=C.find(1);if(P.line==u)return P;y=Kt(a,u=P.line)}}function qu(e,s,l,a){a-=Ll(s);var u=s.text.length,m=ct(function(y){return an(e,l,y-1).bottom<=a},u,0);return u=ct(function(y){return an(e,l,y).top>a},m,u),{begin:m,end:u}}function Vu(e,s,l,a){l||(l=cr(e,s));var u=ga(e,s,an(e,l,a),"line").top;return qu(e,s,l,u)}function Wl(e,s,l,a){return e.bottom<=l?!1:e.top>l?!0:(a?e.left:e.right)>s}function Np(e,s,l,a,u){u-=xn(s);var m=cr(e,s),y=Ll(s),k=0,C=s.text.length,P=!0,M=$t(s,e.doc.direction);if(M){var G=(e.options.lineWrapping?Bp:Rp)(e,s,l,m,M,a,u);P=G.level!=1,k=P?G.from:G.to-1,C=P?G.to:G.from-1}var et=null,Z=null,ft=ct(function(ne){var te=an(e,m,ne);return te.top+=y,te.bottom+=y,Wl(te,a,u,!1)?(te.top<=u&&te.left<=a&&(et=ne,Z=te),!0):!1},k,C),bt,It,Wt=!1;if(Z){var zt=a-Z.left<Z.right-a,Mt=zt==P;ft=et+(Mt?0:1),It=Mt?"after":"before",bt=zt?Z.left:Z.right}else{!P&&(ft==C||ft==k)&&ft++,It=ft==0?"after":ft==s.text.length?"before":an(e,m,ft-(P?1:0)).bottom+y<=u==P?"after":"before";var Gt=qi(e,ut(l,ft,It),"line",s,m);bt=Gt.left,Wt=u<Gt.top?-1:u>=Gt.bottom?1:0}return ft=dt(s.text,ft,1),Ol(l,ft,It,Wt,a-bt)}function Rp(e,s,l,a,u,m,y){var k=ct(function(G){var et=u[G],Z=et.level!=1;return Wl(qi(e,ut(l,Z?et.to:et.from,Z?"before":"after"),"line",s,a),m,y,!0)},0,u.length-1),C=u[k];if(k>0){var P=C.level!=1,M=qi(e,ut(l,P?C.from:C.to,P?"after":"before"),"line",s,a);Wl(M,m,y,!0)&&M.top>y&&(C=u[k-1])}return C}function Bp(e,s,l,a,u,m,y){var k=qu(e,s,a,y),C=k.begin,P=k.end;/\s/.test(s.text.charAt(P-1))&&P--;for(var M=null,G=null,et=0;et<u.length;et++){var Z=u[et];if(!(Z.from>=P||Z.to<=C)){var ft=Z.level!=1,bt=an(e,a,ft?Math.min(P,Z.to)-1:Math.max(C,Z.from)).right,It=bt<m?m-bt+1e9:bt-m;(!M||G>It)&&(M=Z,G=It)}}return M||(M=u[u.length-1]),M.from<C&&(M={from:C,to:M.to,level:M.level}),M.to>P&&(M={from:M.from,to:P,level:M.level}),M}var ms;function dr(e){if(e.cachedTextHeight!=null)return e.cachedTextHeight;if(ms==null){ms=z("pre",null,"CodeMirror-line-like");for(var s=0;s<49;++s)ms.appendChild(document.createTextNode("x")),ms.appendChild(z("br"));ms.appendChild(document.createTextNode("x"))}lt(e.measure,ms);var l=ms.offsetHeight/50;return l>3&&(e.cachedTextHeight=l),K(e.measure),l||1}function fr(e){if(e.cachedCharWidth!=null)return e.cachedCharWidth;var s=z("span","xxxxxxxxxx"),l=z("pre",[s],"CodeMirror-line-like");lt(e.measure,l);var a=s.getBoundingClientRect(),u=(a.right-a.left)/10;return u>2&&(e.cachedCharWidth=u),u||10}function Ml(e){for(var s=e.display,l={},a={},u=s.gutters.clientLeft,m=s.gutters.firstChild,y=0;m;m=m.nextSibling,++y){var k=e.display.gutterSpecs[y].className;l[k]=m.offsetLeft+m.clientLeft+u,a[k]=m.clientWidth}return{fixedPos:Al(s),gutterTotalWidth:s.gutters.offsetWidth,gutterLeft:l,gutterWidth:a,wrapperWidth:s.wrapper.clientWidth}}function Al(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function Ku(e){var s=dr(e.display),l=e.options.lineWrapping,a=l&&Math.max(5,e.display.scroller.clientWidth/fr(e.display)-3);return function(u){if(Gn(e.doc,u))return 0;var m=0;if(u.widgets)for(var y=0;y<u.widgets.length;y++)u.widgets[y].height&&(m+=u.widgets[y].height);return l?m+(Math.ceil(u.text.length/a)||1)*s:m+s}}function Nl(e){var s=e.doc,l=Ku(e);s.iter(function(a){var u=l(a);u!=a.height&&Pi(a,u)})}function vs(e,s,l,a){var u=e.display;if(!l&&Zr(s).getAttribute("cm-not-content")=="true")return null;var m,y,k=u.lineSpace.getBoundingClientRect();try{m=s.clientX-k.left,y=s.clientY-k.top}catch{return null}var C=El(e,m,y),P;if(a&&C.xRel>0&&(P=Kt(e.doc,C.line).text).length==C.ch){var M=Y(P,P.length,e.options.tabSize)-P.length;C=ut(C.line,Math.max(0,Math.round((m-Ru(e.display).left)/fr(e.display))-M))}return C}function bs(e,s){if(s>=e.display.viewTo||(s-=e.display.viewFrom,s<0))return null;for(var l=e.display.view,a=0;a<l.length;a++)if(s-=l[a].size,s<0)return a}function ui(e,s,l,a){s==null&&(s=e.doc.first),l==null&&(l=e.doc.first+e.doc.size),a||(a=0);var u=e.display;if(a&&l<u.viewTo&&(u.updateLineNumbers==null||u.updateLineNumbers>s)&&(u.updateLineNumbers=s),e.curOp.viewChanged=!0,s>=u.viewTo)Sn&&kl(e.doc,s)<u.viewTo&&Un(e);else if(l<=u.viewFrom)Sn&&_u(e.doc,l+a)>u.viewFrom?Un(e):(u.viewFrom+=a,u.viewTo+=a);else if(s<=u.viewFrom&&l>=u.viewTo)Un(e);else if(s<=u.viewFrom){var m=va(e,l,l+a,1);m?(u.view=u.view.slice(m.index),u.viewFrom=m.lineN,u.viewTo+=a):Un(e)}else if(l>=u.viewTo){var y=va(e,s,s,-1);y?(u.view=u.view.slice(0,y.index),u.viewTo=y.lineN):Un(e)}else{var k=va(e,s,s,-1),C=va(e,l,l+a,1);k&&C?(u.view=u.view.slice(0,k.index).concat(fa(e,k.lineN,C.lineN)).concat(u.view.slice(C.index)),u.viewTo+=a):Un(e)}var P=u.externalMeasured;P&&(l<P.lineN?P.lineN+=a:s<P.lineN+P.size&&(u.externalMeasured=null))}function Xn(e,s,l){e.curOp.viewChanged=!0;var a=e.display,u=e.display.externalMeasured;if(u&&s>=u.lineN&&s<u.lineN+u.size&&(a.externalMeasured=null),!(s<a.viewFrom||s>=a.viewTo)){var m=a.view[bs(e,s)];if(m.node!=null){var y=m.changes||(m.changes=[]);pt(y,l)==-1&&y.push(l)}}}function Un(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function va(e,s,l,a){var u=bs(e,s),m,y=e.display.view;if(!Sn||l==e.doc.first+e.doc.size)return{index:u,lineN:l};for(var k=e.display.viewFrom,C=0;C<u;C++)k+=y[C].size;if(k!=s){if(a>0){if(u==y.length-1)return null;m=k+y[u].size-s,u++}else m=k-s;s+=m,l+=m}for(;kl(e.doc,l)!=l;){if(u==(a<0?0:y.length-1))return null;l+=a*y[u-(a<0?1:0)].size,u+=a}return{index:u,lineN:l}}function Hp(e,s,l){var a=e.display,u=a.view;u.length==0||s>=a.viewTo||l<=a.viewFrom?(a.view=fa(e,s,l),a.viewFrom=s):(a.viewFrom>s?a.view=fa(e,s,a.viewFrom).concat(a.view):a.viewFrom<s&&(a.view=a.view.slice(bs(e,s))),a.viewFrom=s,a.viewTo<l?a.view=a.view.concat(fa(e,a.viewTo,l)):a.viewTo>l&&(a.view=a.view.slice(0,bs(e,l)))),a.viewTo=l}function Qu(e){for(var s=e.display.view,l=0,a=0;a<s.length;a++){var u=s[a];!u.hidden&&(!u.node||u.changes)&&++l}return l}function lo(e){e.display.input.showSelection(e.display.input.prepareSelection())}function Zu(e,s){s===void 0&&(s=!0);var l=e.doc,a={},u=a.cursors=document.createDocumentFragment(),m=a.selection=document.createDocumentFragment(),y=e.options.$customCursor;y&&(s=!0);for(var k=0;k<l.sel.ranges.length;k++)if(!(!s&&k==l.sel.primIndex)){var C=l.sel.ranges[k];if(!(C.from().line>=e.display.viewTo||C.to().line<e.display.viewFrom)){var P=C.empty();if(y){var M=y(e,C);M&&Rl(e,M,u)}else(P||e.options.showCursorWhenSelecting)&&Rl(e,C.head,u);P||$p(e,C,m)}}return a}function Rl(e,s,l){var a=qi(e,s,"div",null,null,!e.options.singleCursorHeightPerLine),u=l.appendChild(z("div"," ","CodeMirror-cursor"));if(u.style.left=a.left+"px",u.style.top=a.top+"px",u.style.height=Math.max(0,a.bottom-a.top)*e.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(e.getWrapperElement().className)){var m=ma(e,s,"div",null,null),y=m.right-m.left;u.style.width=(y>0?y:e.defaultCharWidth())+"px"}if(a.other){var k=l.appendChild(z("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));k.style.display="",k.style.left=a.other.left+"px",k.style.top=a.other.top+"px",k.style.height=(a.other.bottom-a.other.top)*.85+"px"}}function ba(e,s){return e.top-s.top||e.left-s.left}function $p(e,s,l){var a=e.display,u=e.doc,m=document.createDocumentFragment(),y=Ru(e.display),k=y.left,C=Math.max(a.sizerWidth,gs(e)-a.sizer.offsetLeft)-y.right,P=u.direction=="ltr";function M(Mt,Gt,ne,te){Gt<0&&(Gt=0),Gt=Math.round(Gt),te=Math.round(te),m.appendChild(z("div",null,"CodeMirror-selected","position: absolute; left: "+Mt+`px;
                             top: `+Gt+"px; width: "+(ne??C-Mt)+`px;
                             height: `+(te-Gt)+"px"))}function G(Mt,Gt,ne){var te=Kt(u,Mt),fe=te.text.length,ke,Ke;function Le(He,fi){return ma(e,ut(Mt,He),"div",te,fi)}function Si(He,fi,ti){var Fe=Vu(e,te,null,He),$e=fi=="ltr"==(ti=="after")?"left":"right",Me=ti=="after"?Fe.begin:Fe.end-(/\s/.test(te.text.charAt(Fe.end-1))?2:1);return Le(Me,$e)[$e]}var di=$t(te,u.direction);return kt(di,Gt||0,ne??fe,function(He,fi,ti,Fe){var $e=ti=="ltr",Me=Le(He,$e?"left":"right"),pi=Le(fi-1,$e?"right":"left"),Tr=Gt==null&&He==0,Zn=ne==null&&fi==fe,ni=Fe==0,ln=!di||Fe==di.length-1;if(pi.top-Me.top<=3){var Qe=(P?Tr:Zn)&&ni,uh=(P?Zn:Tr)&&ln,Tn=Qe?k:($e?Me:pi).left,ks=uh?C:($e?pi:Me).right;M(Tn,Me.top,ks-Tn,Me.bottom)}else{var Cs,oi,_r,ch;$e?(Cs=P&&Tr&&ni?k:Me.left,oi=P?C:Si(He,ti,"before"),_r=P?k:Si(fi,ti,"after"),ch=P&&Zn&&ln?C:pi.right):(Cs=P?Si(He,ti,"before"):k,oi=!P&&Tr&&ni?C:Me.right,_r=!P&&Zn&&ln?k:pi.left,ch=P?Si(fi,ti,"after"):C),M(Cs,Me.top,oi-Cs,Me.bottom),Me.bottom<pi.top&&M(k,Me.bottom,null,pi.top),M(_r,pi.top,ch-_r,pi.bottom)}(!ke||ba(Me,ke)<0)&&(ke=Me),ba(pi,ke)<0&&(ke=pi),(!Ke||ba(Me,Ke)<0)&&(Ke=Me),ba(pi,Ke)<0&&(Ke=pi)}),{start:ke,end:Ke}}var et=s.from(),Z=s.to();if(et.line==Z.line)G(et.line,et.ch,Z.ch);else{var ft=Kt(u,et.line),bt=Kt(u,Z.line),It=Yi(ft)==Yi(bt),Wt=G(et.line,et.ch,It?ft.text.length+1:null).end,zt=G(Z.line,It?0:null,Z.ch).start;It&&(Wt.top<zt.top-2?(M(Wt.right,Wt.top,null,Wt.bottom),M(k,zt.top,zt.left,zt.bottom)):M(Wt.right,Wt.top,zt.left-Wt.right,Wt.bottom)),Wt.bottom<zt.top&&M(k,Wt.bottom,null,zt.top)}l.appendChild(m)}function Bl(e){if(e.state.focused){var s=e.display;clearInterval(s.blinker);var l=!0;s.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?s.blinker=setInterval(function(){e.hasFocus()||pr(e),s.cursorDiv.style.visibility=(l=!l)?"":"hidden"},e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(s.cursorDiv.style.visibility="hidden")}}function Ju(e){e.hasFocus()||(e.display.input.focus(),e.state.focused||$l(e))}function Hl(e){e.state.delayingBlurEvent=!0,setTimeout(function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,e.state.focused&&pr(e))},100)}function $l(e,s){e.state.delayingBlurEvent&&!e.state.draggingText&&(e.state.delayingBlurEvent=!1),e.options.readOnly!="nocursor"&&(e.state.focused||(Pe(e,"focus",e,s),e.state.focused=!0,Nt(e.display.wrapper,"CodeMirror-focused"),!e.curOp&&e.display.selForContextMenu!=e.doc.sel&&(e.display.input.reset(),T&&setTimeout(function(){return e.display.input.reset(!0)},20)),e.display.input.receivedFocus()),Bl(e))}function pr(e,s){e.state.delayingBlurEvent||(e.state.focused&&(Pe(e,"blur",e,s),e.state.focused=!1,Pt(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.display.shift=!1)},150))}function ya(e){for(var s=e.display,l=s.lineDiv.offsetTop,a=Math.max(0,s.scroller.getBoundingClientRect().top),u=s.lineDiv.getBoundingClientRect().top,m=0,y=0;y<s.view.length;y++){var k=s.view[y],C=e.options.lineWrapping,P=void 0,M=0;if(!k.hidden){if(u+=k.line.height,w&&D<8){var G=k.node.offsetTop+k.node.offsetHeight;P=G-l,l=G}else{var et=k.node.getBoundingClientRect();P=et.bottom-et.top,!C&&k.text.firstChild&&(M=k.text.firstChild.getBoundingClientRect().right-et.left-1)}var Z=k.line.height-P;if((Z>.005||Z<-.005)&&(u<a&&(m-=Z),Pi(k.line,P),tc(k.line),k.rest))for(var ft=0;ft<k.rest.length;ft++)tc(k.rest[ft]);if(M>e.display.sizerWidth){var bt=Math.ceil(M/fr(e.display));bt>e.display.maxLineLength&&(e.display.maxLineLength=bt,e.display.maxLine=k.line,e.display.maxLineChanged=!0)}}}Math.abs(m)>2&&(s.scroller.scrollTop+=m)}function tc(e){if(e.widgets)for(var s=0;s<e.widgets.length;++s){var l=e.widgets[s],a=l.node.parentNode;a&&(l.height=a.offsetHeight)}}function wa(e,s,l){var a=l&&l.top!=null?Math.max(0,l.top):e.scroller.scrollTop;a=Math.floor(a-pa(e));var u=l&&l.bottom!=null?l.bottom:a+e.wrapper.clientHeight,m=j(s,a),y=j(s,u);if(l&&l.ensure){var k=l.ensure.from.line,C=l.ensure.to.line;k<m?(m=k,y=j(s,xn(Kt(s,k))+e.wrapper.clientHeight)):Math.min(C,s.lastLine())>=y&&(m=j(s,xn(Kt(s,C))-e.wrapper.clientHeight),y=C)}return{from:m,to:Math.max(y,m+1)}}function zp(e,s){if(!ve(e,"scrollCursorIntoView")){var l=e.display,a=l.sizer.getBoundingClientRect(),u=null,m=l.wrapper.ownerDocument;if(s.top+a.top<0?u=!0:s.bottom+a.top>(m.defaultView.innerHeight||m.documentElement.clientHeight)&&(u=!1),u!=null&&!H){var y=z("div","​",null,`position: absolute;
                         top: `+(s.top-l.viewOffset-pa(e.display))+`px;
                         height: `+(s.bottom-s.top+on(e)+l.barHeight)+`px;
                         left: `+s.left+"px; width: "+Math.max(2,s.right-s.left)+"px;");e.display.lineSpace.appendChild(y),y.scrollIntoView(u),e.display.lineSpace.removeChild(y)}}}function Fp(e,s,l,a){a==null&&(a=0);var u;!e.options.lineWrapping&&s==l&&(l=s.sticky=="before"?ut(s.line,s.ch+1,"before"):s,s=s.ch?ut(s.line,s.sticky=="before"?s.ch-1:s.ch,"after"):s);for(var m=0;m<5;m++){var y=!1,k=qi(e,s),C=!l||l==s?k:qi(e,l);u={left:Math.min(k.left,C.left),top:Math.min(k.top,C.top)-a,right:Math.max(k.left,C.left),bottom:Math.max(k.bottom,C.bottom)+a};var P=zl(e,u),M=e.doc.scrollTop,G=e.doc.scrollLeft;if(P.scrollTop!=null&&(uo(e,P.scrollTop),Math.abs(e.doc.scrollTop-M)>1&&(y=!0)),P.scrollLeft!=null&&(ys(e,P.scrollLeft),Math.abs(e.doc.scrollLeft-G)>1&&(y=!0)),!y)break}return u}function jp(e,s){var l=zl(e,s);l.scrollTop!=null&&uo(e,l.scrollTop),l.scrollLeft!=null&&ys(e,l.scrollLeft)}function zl(e,s){var l=e.display,a=dr(e.display);s.top<0&&(s.top=0);var u=e.curOp&&e.curOp.scrollTop!=null?e.curOp.scrollTop:l.scroller.scrollTop,m=Pl(e),y={};s.bottom-s.top>m&&(s.bottom=s.top+m);var k=e.doc.height+_l(l),C=s.top<a,P=s.bottom>k-a;if(s.top<u)y.scrollTop=C?0:s.top;else if(s.bottom>u+m){var M=Math.min(s.top,(P?k:s.bottom)-m);M!=u&&(y.scrollTop=M)}var G=e.options.fixedGutter?0:l.gutters.offsetWidth,et=e.curOp&&e.curOp.scrollLeft!=null?e.curOp.scrollLeft:l.scroller.scrollLeft-G,Z=gs(e)-l.gutters.offsetWidth,ft=s.right-s.left>Z;return ft&&(s.right=s.left+Z),s.left<10?y.scrollLeft=0:s.left<et?y.scrollLeft=Math.max(0,s.left+G-(ft?0:10)):s.right>Z+et-3&&(y.scrollLeft=s.right+(ft?0:10)-Z),y}function Fl(e,s){s!=null&&(Sa(e),e.curOp.scrollTop=(e.curOp.scrollTop==null?e.doc.scrollTop:e.curOp.scrollTop)+s)}function gr(e){Sa(e);var s=e.getCursor();e.curOp.scrollToPos={from:s,to:s,margin:e.options.cursorScrollMargin}}function ho(e,s,l){(s!=null||l!=null)&&Sa(e),s!=null&&(e.curOp.scrollLeft=s),l!=null&&(e.curOp.scrollTop=l)}function Gp(e,s){Sa(e),e.curOp.scrollToPos=s}function Sa(e){var s=e.curOp.scrollToPos;if(s){e.curOp.scrollToPos=null;var l=Yu(e,s.from),a=Yu(e,s.to);ec(e,l,a,s.margin)}}function ec(e,s,l,a){var u=zl(e,{left:Math.min(s.left,l.left),top:Math.min(s.top,l.top)-a,right:Math.max(s.right,l.right),bottom:Math.max(s.bottom,l.bottom)+a});ho(e,u.scrollLeft,u.scrollTop)}function uo(e,s){Math.abs(e.doc.scrollTop-s)<2||(h||Gl(e,{top:s}),ic(e,s,!0),h&&Gl(e),po(e,100))}function ic(e,s,l){s=Math.max(0,Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,s)),!(e.display.scroller.scrollTop==s&&!l)&&(e.doc.scrollTop=s,e.display.scrollbars.setScrollTop(s),e.display.scroller.scrollTop!=s&&(e.display.scroller.scrollTop=s))}function ys(e,s,l,a){s=Math.max(0,Math.min(s,e.display.scroller.scrollWidth-e.display.scroller.clientWidth)),!((l?s==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-s)<2)&&!a)&&(e.doc.scrollLeft=s,ac(e),e.display.scroller.scrollLeft!=s&&(e.display.scroller.scrollLeft=s),e.display.scrollbars.setScrollLeft(s))}function co(e){var s=e.display,l=s.gutters.offsetWidth,a=Math.round(e.doc.height+_l(e.display));return{clientHeight:s.scroller.clientHeight,viewHeight:s.wrapper.clientHeight,scrollWidth:s.scroller.scrollWidth,clientWidth:s.scroller.clientWidth,viewWidth:s.wrapper.clientWidth,barLeft:e.options.fixedGutter?l:0,docHeight:a,scrollHeight:a+on(e)+s.barHeight,nativeBarWidth:s.nativeBarWidth,gutterWidth:l}}var ws=function(e,s,l){this.cm=l;var a=this.vert=z("div",[z("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),u=this.horiz=z("div",[z("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");a.tabIndex=u.tabIndex=-1,e(a),e(u),Et(a,"scroll",function(){a.clientHeight&&s(a.scrollTop,"vertical")}),Et(u,"scroll",function(){u.clientWidth&&s(u.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,w&&D<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};ws.prototype.update=function(e){var s=e.scrollWidth>e.clientWidth+1,l=e.scrollHeight>e.clientHeight+1,a=e.nativeBarWidth;if(l){this.vert.style.display="block",this.vert.style.bottom=s?a+"px":"0";var u=e.viewHeight-(s?a:0);this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+u)+"px"}else this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0";if(s){this.horiz.style.display="block",this.horiz.style.right=l?a+"px":"0",this.horiz.style.left=e.barLeft+"px";var m=e.viewWidth-e.barLeft-(l?a:0);this.horiz.firstChild.style.width=Math.max(0,e.scrollWidth-e.clientWidth+m)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&e.clientHeight>0&&(a==0&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:l?a:0,bottom:s?a:0}},ws.prototype.setScrollLeft=function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},ws.prototype.setScrollTop=function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},ws.prototype.zeroWidthHack=function(){var e=J&&!at?"12px":"18px";this.horiz.style.height=this.vert.style.width=e,this.horiz.style.visibility=this.vert.style.visibility="hidden",this.disableHoriz=new vt,this.disableVert=new vt},ws.prototype.enableZeroWidthBar=function(e,s,l){e.style.visibility="";function a(){var u=e.getBoundingClientRect(),m=l=="vert"?document.elementFromPoint(u.right-1,(u.top+u.bottom)/2):document.elementFromPoint((u.right+u.left)/2,u.bottom-1);m!=e?e.style.visibility="hidden":s.set(1e3,a)}s.set(1e3,a)},ws.prototype.clear=function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)};var fo=function(){};fo.prototype.update=function(){return{bottom:0,right:0}},fo.prototype.setScrollLeft=function(){},fo.prototype.setScrollTop=function(){},fo.prototype.clear=function(){};function mr(e,s){s||(s=co(e));var l=e.display.barWidth,a=e.display.barHeight;nc(e,s);for(var u=0;u<4&&l!=e.display.barWidth||a!=e.display.barHeight;u++)l!=e.display.barWidth&&e.options.lineWrapping&&ya(e),nc(e,co(e)),l=e.display.barWidth,a=e.display.barHeight}function nc(e,s){var l=e.display,a=l.scrollbars.update(s);l.sizer.style.paddingRight=(l.barWidth=a.right)+"px",l.sizer.style.paddingBottom=(l.barHeight=a.bottom)+"px",l.heightForcer.style.borderBottom=a.bottom+"px solid transparent",a.right&&a.bottom?(l.scrollbarFiller.style.display="block",l.scrollbarFiller.style.height=a.bottom+"px",l.scrollbarFiller.style.width=a.right+"px"):l.scrollbarFiller.style.display="",a.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(l.gutterFiller.style.display="block",l.gutterFiller.style.height=a.bottom+"px",l.gutterFiller.style.width=s.gutterWidth+"px"):l.gutterFiller.style.display=""}var sc={native:ws,null:fo};function rc(e){e.display.scrollbars&&(e.display.scrollbars.clear(),e.display.scrollbars.addClass&&Pt(e.display.wrapper,e.display.scrollbars.addClass)),e.display.scrollbars=new sc[e.options.scrollbarStyle](function(s){e.display.wrapper.insertBefore(s,e.display.scrollbarFiller),Et(s,"mousedown",function(){e.state.focused&&setTimeout(function(){return e.display.input.focus()},0)}),s.setAttribute("cm-not-content","true")},function(s,l){l=="horizontal"?ys(e,s):uo(e,s)},e),e.display.scrollbars.addClass&&Nt(e.display.wrapper,e.display.scrollbars.addClass)}var Xp=0;function Ss(e){e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Xp,markArrays:null},xp(e.curOp)}function xs(e){var s=e.curOp;s&&Cp(s,function(l){for(var a=0;a<l.ops.length;a++)l.ops[a].cm.curOp=null;Up(l)})}function Up(e){for(var s=e.ops,l=0;l<s.length;l++)Yp(s[l]);for(var a=0;a<s.length;a++)qp(s[a]);for(var u=0;u<s.length;u++)Vp(s[u]);for(var m=0;m<s.length;m++)Kp(s[m]);for(var y=0;y<s.length;y++)Qp(s[y])}function Yp(e){var s=e.cm,l=s.display;Jp(s),e.updateMaxLine&&Dl(s),e.mustUpdate=e.viewChanged||e.forceUpdate||e.scrollTop!=null||e.scrollToPos&&(e.scrollToPos.from.line<l.viewFrom||e.scrollToPos.to.line>=l.viewTo)||l.maxLineChanged&&s.options.lineWrapping,e.update=e.mustUpdate&&new xa(s,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function qp(e){e.updatedDisplay=e.mustUpdate&&jl(e.cm,e.update)}function Vp(e){var s=e.cm,l=s.display;e.updatedDisplay&&ya(s),e.barMeasure=co(s),l.maxLineChanged&&!s.options.lineWrapping&&(e.adjustWidthTo=Hu(s,l.maxLine,l.maxLine.text.length).left+3,s.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(l.scroller.clientWidth,l.sizer.offsetLeft+e.adjustWidthTo+on(s)+s.display.barWidth),e.maxScrollLeft=Math.max(0,l.sizer.offsetLeft+e.adjustWidthTo-gs(s))),(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=l.input.prepareSelection())}function Kp(e){var s=e.cm;e.adjustWidthTo!=null&&(s.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<s.doc.scrollLeft&&ys(s,Math.min(s.display.scroller.scrollLeft,e.maxScrollLeft),!0),s.display.maxLineChanged=!1);var l=e.focus&&e.focus==jt(me(s));e.preparedSelection&&s.display.input.showSelection(e.preparedSelection,l),(e.updatedDisplay||e.startHeight!=s.doc.height)&&mr(s,e.barMeasure),e.updatedDisplay&&Ul(s,e.barMeasure),e.selectionChanged&&Bl(s),s.state.focused&&e.updateInput&&s.display.input.reset(e.typing),l&&Ju(e.cm)}function Qp(e){var s=e.cm,l=s.display,a=s.doc;if(e.updatedDisplay&&oc(s,e.update),l.wheelStartX!=null&&(e.scrollTop!=null||e.scrollLeft!=null||e.scrollToPos)&&(l.wheelStartX=l.wheelStartY=null),e.scrollTop!=null&&ic(s,e.scrollTop,e.forceScroll),e.scrollLeft!=null&&ys(s,e.scrollLeft,!0,!0),e.scrollToPos){var u=Fp(s,ue(a,e.scrollToPos.from),ue(a,e.scrollToPos.to),e.scrollToPos.margin);zp(s,u)}var m=e.maybeHiddenMarkers,y=e.maybeUnhiddenMarkers;if(m)for(var k=0;k<m.length;++k)m[k].lines.length||Pe(m[k],"hide");if(y)for(var C=0;C<y.length;++C)y[C].lines.length&&Pe(y[C],"unhide");l.wrapper.offsetHeight&&(a.scrollTop=s.display.scroller.scrollTop),e.changeObjs&&Pe(s,"changes",s,e.changeObjs),e.update&&e.update.finish()}function wi(e,s){if(e.curOp)return s();Ss(e);try{return s()}finally{xs(e)}}function qe(e,s){return function(){if(e.curOp)return s.apply(e,arguments);Ss(e);try{return s.apply(e,arguments)}finally{xs(e)}}}function ri(e){return function(){if(this.curOp)return e.apply(this,arguments);Ss(this);try{return e.apply(this,arguments)}finally{xs(this)}}}function Ve(e){return function(){var s=this.cm;if(!s||s.curOp)return e.apply(this,arguments);Ss(s);try{return e.apply(this,arguments)}finally{xs(s)}}}function po(e,s){e.doc.highlightFrontier<e.display.viewTo&&e.state.highlight.set(s,nt(Zp,e))}function Zp(e){var s=e.doc;if(!(s.highlightFrontier>=e.display.viewTo)){var l=+new Date+e.options.workTime,a=io(e,s.highlightFrontier),u=[];s.iter(a.line,Math.min(s.first+s.size,e.display.viewTo+500),function(m){if(a.line>=e.display.viewFrom){var y=m.styles,k=m.text.length>e.options.maxHighlightLength?sn(s.mode,a.state):null,C=fu(e,m,a,!0);k&&(a.state=k),m.styles=C.styles;var P=m.styleClasses,M=C.classes;M?m.styleClasses=M:P&&(m.styleClasses=null);for(var G=!y||y.length!=m.styles.length||P!=M&&(!P||!M||P.bgClass!=M.bgClass||P.textClass!=M.textClass),et=0;!G&&et<y.length;++et)G=y[et]!=m.styles[et];G&&u.push(a.line),m.stateAfter=a.save(),a.nextLine()}else m.text.length<=e.options.maxHighlightLength&&yl(e,m.text,a),m.stateAfter=a.line%5==0?a.save():null,a.nextLine();if(+new Date>l)return po(e,e.options.workDelay),!0}),s.highlightFrontier=a.line,s.modeFrontier=Math.max(s.modeFrontier,a.line),u.length&&wi(e,function(){for(var m=0;m<u.length;m++)Xn(e,u[m],"text")})}}var xa=function(e,s,l){var a=e.display;this.viewport=s,this.visible=wa(a,e.doc,s),this.editorIsHidden=!a.wrapper.offsetWidth,this.wrapperHeight=a.wrapper.clientHeight,this.wrapperWidth=a.wrapper.clientWidth,this.oldDisplayWidth=gs(e),this.force=l,this.dims=Ml(e),this.events=[]};xa.prototype.signal=function(e,s){Ge(e,s)&&this.events.push(arguments)},xa.prototype.finish=function(){for(var e=0;e<this.events.length;e++)Pe.apply(null,this.events[e])};function Jp(e){var s=e.display;!s.scrollbarsClipped&&s.scroller.offsetWidth&&(s.nativeBarWidth=s.scroller.offsetWidth-s.scroller.clientWidth,s.heightForcer.style.height=on(e)+"px",s.sizer.style.marginBottom=-s.nativeBarWidth+"px",s.sizer.style.borderRightWidth=on(e)+"px",s.scrollbarsClipped=!0)}function tg(e){if(e.hasFocus())return null;var s=jt(me(e));if(!s||!ee(e.display.lineDiv,s))return null;var l={activeElt:s};if(window.getSelection){var a=Q(e).getSelection();a.anchorNode&&a.extend&&ee(e.display.lineDiv,a.anchorNode)&&(l.anchorNode=a.anchorNode,l.anchorOffset=a.anchorOffset,l.focusNode=a.focusNode,l.focusOffset=a.focusOffset)}return l}function eg(e){if(!(!e||!e.activeElt||e.activeElt==jt(rt(e.activeElt)))&&(e.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(e.activeElt.nodeName)&&e.anchorNode&&ee(document.body,e.anchorNode)&&ee(document.body,e.focusNode))){var s=e.activeElt.ownerDocument,l=s.defaultView.getSelection(),a=s.createRange();a.setEnd(e.anchorNode,e.anchorOffset),a.collapse(!1),l.removeAllRanges(),l.addRange(a),l.extend(e.focusNode,e.focusOffset)}}function jl(e,s){var l=e.display,a=e.doc;if(s.editorIsHidden)return Un(e),!1;if(!s.force&&s.visible.from>=l.viewFrom&&s.visible.to<=l.viewTo&&(l.updateLineNumbers==null||l.updateLineNumbers>=l.viewTo)&&l.renderedView==l.view&&Qu(e)==0)return!1;lc(e)&&(Un(e),s.dims=Ml(e));var u=a.first+a.size,m=Math.max(s.visible.from-e.options.viewportMargin,a.first),y=Math.min(u,s.visible.to+e.options.viewportMargin);l.viewFrom<m&&m-l.viewFrom<20&&(m=Math.max(a.first,l.viewFrom)),l.viewTo>y&&l.viewTo-y<20&&(y=Math.min(u,l.viewTo)),Sn&&(m=kl(e.doc,m),y=_u(e.doc,y));var k=m!=l.viewFrom||y!=l.viewTo||l.lastWrapHeight!=s.wrapperHeight||l.lastWrapWidth!=s.wrapperWidth;Hp(e,m,y),l.viewOffset=xn(Kt(e.doc,l.viewFrom)),e.display.mover.style.top=l.viewOffset+"px";var C=Qu(e);if(!k&&C==0&&!s.force&&l.renderedView==l.view&&(l.updateLineNumbers==null||l.updateLineNumbers>=l.viewTo))return!1;var P=tg(e);return C>4&&(l.lineDiv.style.display="none"),ig(e,l.updateLineNumbers,s.dims),C>4&&(l.lineDiv.style.display=""),l.renderedView=l.view,eg(P),K(l.cursorDiv),K(l.selectionDiv),l.gutters.style.height=l.sizer.style.minHeight=0,k&&(l.lastWrapHeight=s.wrapperHeight,l.lastWrapWidth=s.wrapperWidth,po(e,400)),l.updateLineNumbers=null,!0}function oc(e,s){for(var l=s.viewport,a=!0;;a=!1){if(!a||!e.options.lineWrapping||s.oldDisplayWidth==gs(e)){if(l&&l.top!=null&&(l={top:Math.min(e.doc.height+_l(e.display)-Pl(e),l.top)}),s.visible=wa(e.display,e.doc,l),s.visible.from>=e.display.viewFrom&&s.visible.to<=e.display.viewTo)break}else a&&(s.visible=wa(e.display,e.doc,l));if(!jl(e,s))break;ya(e);var u=co(e);lo(e),mr(e,u),Ul(e,u),s.force=!1}s.signal(e,"update",e),(e.display.viewFrom!=e.display.reportedViewFrom||e.display.viewTo!=e.display.reportedViewTo)&&(s.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function Gl(e,s){var l=new xa(e,s);if(jl(e,l)){ya(e),oc(e,l);var a=co(e);lo(e),mr(e,a),Ul(e,a),l.finish()}}function ig(e,s,l){var a=e.display,u=e.options.lineNumbers,m=a.lineDiv,y=m.firstChild;function k(ft){var bt=ft.nextSibling;return T&&J&&e.display.currentWheelTarget==ft?ft.style.display="none":ft.parentNode.removeChild(ft),bt}for(var C=a.view,P=a.viewFrom,M=0;M<C.length;M++){var G=C[M];if(!G.hidden)if(!G.node||G.node.parentNode!=m){var et=Ip(e,G,P,l);m.insertBefore(et,y)}else{for(;y!=G.node;)y=k(y);var Z=u&&s!=null&&s<=P&&G.lineNumber;G.changes&&(pt(G.changes,"gutter")>-1&&(Z=!1),Eu(e,G,P,l)),Z&&(K(G.lineNumber),G.lineNumber.appendChild(document.createTextNode(_t(e.options,P)))),y=G.node.nextSibling}P+=G.size}for(;y;)y=k(y)}function Xl(e){var s=e.gutters.offsetWidth;e.sizer.style.marginLeft=s+"px",Ye(e,"gutterChanged",e)}function Ul(e,s){e.display.sizer.style.minHeight=s.docHeight+"px",e.display.heightForcer.style.top=s.docHeight+"px",e.display.gutters.style.height=s.docHeight+e.display.barHeight+on(e)+"px"}function ac(e){var s=e.display,l=s.view;if(!(!s.alignWidgets&&(!s.gutters.firstChild||!e.options.fixedGutter))){for(var a=Al(s)-s.scroller.scrollLeft+e.doc.scrollLeft,u=s.gutters.offsetWidth,m=a+"px",y=0;y<l.length;y++)if(!l[y].hidden){e.options.fixedGutter&&(l[y].gutter&&(l[y].gutter.style.left=m),l[y].gutterBackground&&(l[y].gutterBackground.style.left=m));var k=l[y].alignable;if(k)for(var C=0;C<k.length;C++)k[C].style.left=m}e.options.fixedGutter&&(s.gutters.style.left=a+u+"px")}}function lc(e){if(!e.options.lineNumbers)return!1;var s=e.doc,l=_t(e.options,s.first+s.size-1),a=e.display;if(l.length!=a.lineNumChars){var u=a.measure.appendChild(z("div",[z("div",l)],"CodeMirror-linenumber CodeMirror-gutter-elt")),m=u.firstChild.offsetWidth,y=u.offsetWidth-m;return a.lineGutter.style.width="",a.lineNumInnerWidth=Math.max(m,a.lineGutter.offsetWidth-y)+1,a.lineNumWidth=a.lineNumInnerWidth+y,a.lineNumChars=a.lineNumInnerWidth?l.length:-1,a.lineGutter.style.width=a.lineNumWidth+"px",Xl(e.display),!0}return!1}function Yl(e,s){for(var l=[],a=!1,u=0;u<e.length;u++){var m=e[u],y=null;if(typeof m!="string"&&(y=m.style,m=m.className),m=="CodeMirror-linenumbers")if(s)a=!0;else continue;l.push({className:m,style:y})}return s&&!a&&l.push({className:"CodeMirror-linenumbers",style:null}),l}function hc(e){var s=e.gutters,l=e.gutterSpecs;K(s),e.lineGutter=null;for(var a=0;a<l.length;++a){var u=l[a],m=u.className,y=u.style,k=s.appendChild(z("div",null,"CodeMirror-gutter "+m));y&&(k.style.cssText=y),m=="CodeMirror-linenumbers"&&(e.lineGutter=k,k.style.width=(e.lineNumWidth||1)+"px")}s.style.display=l.length?"":"none",Xl(e)}function go(e){hc(e.display),ui(e),ac(e)}function ng(e,s,l,a){var u=this;this.input=l,u.scrollbarFiller=z("div",null,"CodeMirror-scrollbar-filler"),u.scrollbarFiller.setAttribute("cm-not-content","true"),u.gutterFiller=z("div",null,"CodeMirror-gutter-filler"),u.gutterFiller.setAttribute("cm-not-content","true"),u.lineDiv=oe("div",null,"CodeMirror-code"),u.selectionDiv=z("div",null,null,"position: relative; z-index: 1"),u.cursorDiv=z("div",null,"CodeMirror-cursors"),u.measure=z("div",null,"CodeMirror-measure"),u.lineMeasure=z("div",null,"CodeMirror-measure"),u.lineSpace=oe("div",[u.measure,u.lineMeasure,u.selectionDiv,u.cursorDiv,u.lineDiv],null,"position: relative; outline: none");var m=oe("div",[u.lineSpace],"CodeMirror-lines");u.mover=z("div",[m],null,"position: relative"),u.sizer=z("div",[u.mover],"CodeMirror-sizer"),u.sizerWidth=null,u.heightForcer=z("div",null,null,"position: absolute; height: "+Lt+"px; width: 1px;"),u.gutters=z("div",null,"CodeMirror-gutters"),u.lineGutter=null,u.scroller=z("div",[u.sizer,u.heightForcer,u.gutters],"CodeMirror-scroll"),u.scroller.setAttribute("tabIndex","-1"),u.wrapper=z("div",[u.scrollbarFiller,u.gutterFiller,u.scroller],"CodeMirror"),W&&L>=105&&(u.wrapper.style.clipPath="inset(0px)"),u.wrapper.setAttribute("translate","no"),w&&D<8&&(u.gutters.style.zIndex=-1,u.scroller.style.paddingRight=0),!T&&!(h&&F)&&(u.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(u.wrapper):e(u.wrapper)),u.viewFrom=u.viewTo=s.first,u.reportedViewFrom=u.reportedViewTo=s.first,u.view=[],u.renderedView=null,u.externalMeasured=null,u.viewOffset=0,u.lastWrapHeight=u.lastWrapWidth=0,u.updateLineNumbers=null,u.nativeBarWidth=u.barHeight=u.barWidth=0,u.scrollbarsClipped=!1,u.lineNumWidth=u.lineNumInnerWidth=u.lineNumChars=null,u.alignWidgets=!1,u.cachedCharWidth=u.cachedTextHeight=u.cachedPaddingH=null,u.maxLine=null,u.maxLineLength=0,u.maxLineChanged=!1,u.wheelDX=u.wheelDY=u.wheelStartX=u.wheelStartY=null,u.shift=!1,u.selForContextMenu=null,u.activeTouch=null,u.gutterSpecs=Yl(a.gutters,a.lineNumbers),hc(u),l.init(u)}var ka=0,Cn=null;w?Cn=-.53:h?Cn=15:W?Cn=-.7:V&&(Cn=-1/3);function uc(e){var s=e.wheelDeltaX,l=e.wheelDeltaY;return s==null&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(s=e.detail),l==null&&e.detail&&e.axis==e.VERTICAL_AXIS?l=e.detail:l==null&&(l=e.wheelDelta),{x:s,y:l}}function sg(e){var s=uc(e);return s.x*=Cn,s.y*=Cn,s}function cc(e,s){W&&L==102&&(e.display.chromeScrollHack==null?e.display.sizer.style.pointerEvents="none":clearTimeout(e.display.chromeScrollHack),e.display.chromeScrollHack=setTimeout(function(){e.display.chromeScrollHack=null,e.display.sizer.style.pointerEvents=""},100));var l=uc(s),a=l.x,u=l.y,m=Cn;s.deltaMode===0&&(a=s.deltaX,u=s.deltaY,m=1);var y=e.display,k=y.scroller,C=k.scrollWidth>k.clientWidth,P=k.scrollHeight>k.clientHeight;if(a&&C||u&&P){if(u&&J&&T){t:for(var M=s.target,G=y.view;M!=k;M=M.parentNode)for(var et=0;et<G.length;et++)if(G[et].node==M){e.display.currentWheelTarget=M;break t}}if(a&&!h&&!E&&m!=null){u&&P&&uo(e,Math.max(0,k.scrollTop+u*m)),ys(e,Math.max(0,k.scrollLeft+a*m)),(!u||u&&P)&&Be(s),y.wheelStartX=null;return}if(u&&m!=null){var Z=u*m,ft=e.doc.scrollTop,bt=ft+y.wrapper.clientHeight;Z<0?ft=Math.max(0,ft+Z-50):bt=Math.min(e.doc.height,bt+Z+50),Gl(e,{top:ft,bottom:bt})}ka<20&&s.deltaMode!==0&&(y.wheelStartX==null?(y.wheelStartX=k.scrollLeft,y.wheelStartY=k.scrollTop,y.wheelDX=a,y.wheelDY=u,setTimeout(function(){if(y.wheelStartX!=null){var It=k.scrollLeft-y.wheelStartX,Wt=k.scrollTop-y.wheelStartY,zt=Wt&&y.wheelDY&&Wt/y.wheelDY||It&&y.wheelDX&&It/y.wheelDX;y.wheelStartX=y.wheelStartY=null,zt&&(Cn=(Cn*ka+zt)/(ka+1),++ka)}},200)):(y.wheelDX+=a,y.wheelDY+=u))}}var Ii=function(e,s){this.ranges=e,this.primIndex=s};Ii.prototype.primary=function(){return this.ranges[this.primIndex]},Ii.prototype.equals=function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var s=0;s<this.ranges.length;s++){var l=this.ranges[s],a=e.ranges[s];if(!ye(l.anchor,a.anchor)||!ye(l.head,a.head))return!1}return!0},Ii.prototype.deepCopy=function(){for(var e=[],s=0;s<this.ranges.length;s++)e[s]=new we(Ue(this.ranges[s].anchor),Ue(this.ranges[s].head));return new Ii(e,this.primIndex)},Ii.prototype.somethingSelected=function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},Ii.prototype.contains=function(e,s){s||(s=e);for(var l=0;l<this.ranges.length;l++){var a=this.ranges[l];if(Bt(s,a.from())>=0&&Bt(e,a.to())<=0)return l}return-1};var we=function(e,s){this.anchor=e,this.head=s};we.prototype.from=function(){return lr(this.anchor,this.head)},we.prototype.to=function(){return hi(this.anchor,this.head)},we.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};function Vi(e,s,l){var a=e&&e.options.selectionsMayTouch,u=s[l];s.sort(function(et,Z){return Bt(et.from(),Z.from())}),l=pt(s,u);for(var m=1;m<s.length;m++){var y=s[m],k=s[m-1],C=Bt(k.to(),y.from());if(a&&!y.empty()?C>0:C>=0){var P=lr(k.from(),y.from()),M=hi(k.to(),y.to()),G=k.empty()?y.from()==y.head:k.from()==k.head;m<=l&&--l,s.splice(--m,2,new we(G?M:P,G?P:M))}}return new Ii(s,l)}function Yn(e,s){return new Ii([new we(e,s||e)],0)}function qn(e){return e.text?ut(e.from.line+e.text.length-1,Ft(e.text).length+(e.text.length==1?e.from.ch:0)):e.to}function dc(e,s){if(Bt(e,s.from)<0)return e;if(Bt(e,s.to)<=0)return qn(s);var l=e.line+s.text.length-(s.to.line-s.from.line)-1,a=e.ch;return e.line==s.to.line&&(a+=qn(s).ch-s.to.ch),ut(l,a)}function ql(e,s){for(var l=[],a=0;a<e.sel.ranges.length;a++){var u=e.sel.ranges[a];l.push(new we(dc(u.anchor,s),dc(u.head,s)))}return Vi(e.cm,l,e.sel.primIndex)}function fc(e,s,l){return e.line==s.line?ut(l.line,e.ch-s.ch+l.ch):ut(l.line+(e.line-s.line),e.ch)}function rg(e,s,l){for(var a=[],u=ut(e.first,0),m=u,y=0;y<s.length;y++){var k=s[y],C=fc(k.from,u,m),P=fc(qn(k),u,m);if(u=k.to,m=P,l=="around"){var M=e.sel.ranges[y],G=Bt(M.head,M.anchor)<0;a[y]=new we(G?P:C,G?C:P)}else a[y]=new we(C,C)}return new Ii(a,e.sel.primIndex)}function Vl(e){e.doc.mode=rr(e.options,e.doc.modeOption),mo(e)}function mo(e){e.doc.iter(function(s){s.stateAfter&&(s.stateAfter=null),s.styles&&(s.styles=null)}),e.doc.modeFrontier=e.doc.highlightFrontier=e.doc.first,po(e,100),e.state.modeGen++,e.curOp&&ui(e)}function pc(e,s){return s.from.ch==0&&s.to.ch==0&&Ft(s.text)==""&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function Kl(e,s,l,a){function u(zt){return l?l[zt]:null}function m(zt,Mt,Gt){fp(zt,Mt,Gt,a),Ye(zt,"change",zt,s)}function y(zt,Mt){for(var Gt=[],ne=zt;ne<Mt;++ne)Gt.push(new hr(P[ne],u(ne),a));return Gt}var k=s.from,C=s.to,P=s.text,M=Kt(e,k.line),G=Kt(e,C.line),et=Ft(P),Z=u(P.length-1),ft=C.line-k.line;if(s.full)e.insert(0,y(0,P.length)),e.remove(P.length,e.size-P.length);else if(pc(e,s)){var bt=y(0,P.length-1);m(G,G.text,Z),ft&&e.remove(k.line,ft),bt.length&&e.insert(k.line,bt)}else if(M==G)if(P.length==1)m(M,M.text.slice(0,k.ch)+et+M.text.slice(C.ch),Z);else{var It=y(1,P.length-1);It.push(new hr(et+M.text.slice(C.ch),Z,a)),m(M,M.text.slice(0,k.ch)+P[0],u(0)),e.insert(k.line+1,It)}else if(P.length==1)m(M,M.text.slice(0,k.ch)+P[0]+G.text.slice(C.ch),u(0)),e.remove(k.line+1,ft);else{m(M,M.text.slice(0,k.ch)+P[0],u(0)),m(G,et+G.text.slice(C.ch),Z);var Wt=y(1,P.length-1);ft>1&&e.remove(k.line+1,ft-1),e.insert(k.line+1,Wt)}Ye(e,"change",e,s)}function Vn(e,s,l){function a(u,m,y){if(u.linked)for(var k=0;k<u.linked.length;++k){var C=u.linked[k];if(C.doc!=m){var P=y&&C.sharedHist;l&&!P||(s(C.doc,P),a(C.doc,u,P))}}}a(e,null,!0)}function gc(e,s){if(s.cm)throw new Error("This document is already in use.");e.doc=s,s.cm=e,Nl(e),Vl(e),mc(e),e.options.direction=s.direction,e.options.lineWrapping||Dl(e),e.options.mode=s.modeOption,ui(e)}function mc(e){(e.doc.direction=="rtl"?Nt:Pt)(e.display.lineDiv,"CodeMirror-rtl")}function og(e){wi(e,function(){mc(e),ui(e)})}function Ca(e){this.done=[],this.undone=[],this.undoDepth=e?e.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e?e.maxGeneration:1}function Ql(e,s){var l={from:Ue(s.from),to:qn(s),text:wn(e,s.from,s.to)};return yc(e,l,s.from.line,s.to.line+1),Vn(e,function(a){return yc(a,l,s.from.line,s.to.line+1)},!0),l}function vc(e){for(;e.length;){var s=Ft(e);if(s.ranges)e.pop();else break}}function ag(e,s){if(s)return vc(e.done),Ft(e.done);if(e.done.length&&!Ft(e.done).ranges)return Ft(e.done);if(e.done.length>1&&!e.done[e.done.length-2].ranges)return e.done.pop(),Ft(e.done)}function bc(e,s,l,a){var u=e.history;u.undone.length=0;var m=+new Date,y,k;if((u.lastOp==a||u.lastOrigin==s.origin&&s.origin&&(s.origin.charAt(0)=="+"&&u.lastModTime>m-(e.cm?e.cm.options.historyEventDelay:500)||s.origin.charAt(0)=="*"))&&(y=ag(u,u.lastOp==a)))k=Ft(y.changes),Bt(s.from,s.to)==0&&Bt(s.from,k.to)==0?k.to=qn(s):y.changes.push(Ql(e,s));else{var C=Ft(u.done);for((!C||!C.ranges)&&Da(e.sel,u.done),y={changes:[Ql(e,s)],generation:u.generation},u.done.push(y);u.done.length>u.undoDepth;)u.done.shift(),u.done[0].ranges||u.done.shift()}u.done.push(l),u.generation=++u.maxGeneration,u.lastModTime=u.lastSelTime=m,u.lastOp=u.lastSelOp=a,u.lastOrigin=u.lastSelOrigin=s.origin,k||Pe(e,"historyAdded")}function lg(e,s,l,a){var u=s.charAt(0);return u=="*"||u=="+"&&l.ranges.length==a.ranges.length&&l.somethingSelected()==a.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}function hg(e,s,l,a){var u=e.history,m=a&&a.origin;l==u.lastSelOp||m&&u.lastSelOrigin==m&&(u.lastModTime==u.lastSelTime&&u.lastOrigin==m||lg(e,m,Ft(u.done),s))?u.done[u.done.length-1]=s:Da(s,u.done),u.lastSelTime=+new Date,u.lastSelOrigin=m,u.lastSelOp=l,a&&a.clearRedo!==!1&&vc(u.undone)}function Da(e,s){var l=Ft(s);l&&l.ranges&&l.equals(e)||s.push(e)}function yc(e,s,l,a){var u=s["spans_"+e.id],m=0;e.iter(Math.max(e.first,l),Math.min(e.first+e.size,a),function(y){y.markedSpans&&((u||(u=s["spans_"+e.id]={}))[m]=y.markedSpans),++m})}function ug(e){if(!e)return null;for(var s,l=0;l<e.length;++l)e[l].marker.explicitlyCleared?s||(s=e.slice(0,l)):s&&s.push(e[l]);return s?s.length?s:null:e}function cg(e,s){var l=s["spans_"+e.id];if(!l)return null;for(var a=[],u=0;u<s.text.length;++u)a.push(ug(l[u]));return a}function wc(e,s){var l=cg(e,s),a=Sl(e,s);if(!l)return a;if(!a)return l;for(var u=0;u<l.length;++u){var m=l[u],y=a[u];if(m&&y)t:for(var k=0;k<y.length;++k){for(var C=y[k],P=0;P<m.length;++P)if(m[P].marker==C.marker)continue t;m.push(C)}else y&&(l[u]=y)}return l}function vr(e,s,l){for(var a=[],u=0;u<e.length;++u){var m=e[u];if(m.ranges){a.push(l?Ii.prototype.deepCopy.call(m):m);continue}var y=m.changes,k=[];a.push({changes:k});for(var C=0;C<y.length;++C){var P=y[C],M=void 0;if(k.push({from:P.from,to:P.to,text:P.text}),s)for(var G in P)(M=G.match(/^spans_(\d+)$/))&&pt(s,Number(M[1]))>-1&&(Ft(k)[G]=P[G],delete P[G])}}return a}function Zl(e,s,l,a){if(a){var u=e.anchor;if(l){var m=Bt(s,u)<0;m!=Bt(l,u)<0?(u=s,s=l):m!=Bt(s,l)<0&&(s=l)}return new we(u,s)}else return new we(l||s,s)}function Ta(e,s,l,a,u){u==null&&(u=e.cm&&(e.cm.display.shift||e.extend)),ii(e,new Ii([Zl(e.sel.primary(),s,l,u)],0),a)}function Sc(e,s,l){for(var a=[],u=e.cm&&(e.cm.display.shift||e.extend),m=0;m<e.sel.ranges.length;m++)a[m]=Zl(e.sel.ranges[m],s[m],null,u);var y=Vi(e.cm,a,e.sel.primIndex);ii(e,y,l)}function Jl(e,s,l,a){var u=e.sel.ranges.slice(0);u[s]=l,ii(e,Vi(e.cm,u,e.sel.primIndex),a)}function xc(e,s,l,a){ii(e,Yn(s,l),a)}function dg(e,s,l){var a={ranges:s.ranges,update:function(u){this.ranges=[];for(var m=0;m<u.length;m++)this.ranges[m]=new we(ue(e,u[m].anchor),ue(e,u[m].head))},origin:l&&l.origin};return Pe(e,"beforeSelectionChange",e,a),e.cm&&Pe(e.cm,"beforeSelectionChange",e.cm,a),a.ranges!=s.ranges?Vi(e.cm,a.ranges,a.ranges.length-1):s}function kc(e,s,l){var a=e.history.done,u=Ft(a);u&&u.ranges?(a[a.length-1]=s,_a(e,s,l)):ii(e,s,l)}function ii(e,s,l){_a(e,s,l),hg(e,e.sel,e.cm?e.cm.curOp.id:NaN,l)}function _a(e,s,l){(Ge(e,"beforeSelectionChange")||e.cm&&Ge(e.cm,"beforeSelectionChange"))&&(s=dg(e,s,l));var a=l&&l.bias||(Bt(s.primary().head,e.sel.primary().head)<0?-1:1);Cc(e,Tc(e,s,a,!0)),!(l&&l.scroll===!1)&&e.cm&&e.cm.getOption("readOnly")!="nocursor"&&gr(e.cm)}function Cc(e,s){s.equals(e.sel)||(e.sel=s,e.cm&&(e.cm.curOp.updateInput=1,e.cm.curOp.selectionChanged=!0,ei(e.cm)),Ye(e,"cursorActivity",e))}function Dc(e){Cc(e,Tc(e,e.sel,null,!1))}function Tc(e,s,l,a){for(var u,m=0;m<s.ranges.length;m++){var y=s.ranges[m],k=s.ranges.length==e.sel.ranges.length&&e.sel.ranges[m],C=Pa(e,y.anchor,k&&k.anchor,l,a),P=y.head==y.anchor?C:Pa(e,y.head,k&&k.head,l,a);(u||C!=y.anchor||P!=y.head)&&(u||(u=s.ranges.slice(0,m)),u[m]=new we(C,P))}return u?Vi(e.cm,u,s.primIndex):s}function br(e,s,l,a,u){var m=Kt(e,s.line);if(m.markedSpans)for(var y=0;y<m.markedSpans.length;++y){var k=m.markedSpans[y],C=k.marker,P="selectLeft"in C?!C.selectLeft:C.inclusiveLeft,M="selectRight"in C?!C.selectRight:C.inclusiveRight;if((k.from==null||(P?k.from<=s.ch:k.from<s.ch))&&(k.to==null||(M?k.to>=s.ch:k.to>s.ch))){if(u&&(Pe(C,"beforeCursorEnter"),C.explicitlyCleared))if(m.markedSpans){--y;continue}else break;if(!C.atomic)continue;if(l){var G=C.find(a<0?1:-1),et=void 0;if((a<0?M:P)&&(G=_c(e,G,-a,G&&G.line==s.line?m:null)),G&&G.line==s.line&&(et=Bt(G,l))&&(a<0?et<0:et>0))return br(e,G,s,a,u)}var Z=C.find(a<0?-1:1);return(a<0?P:M)&&(Z=_c(e,Z,a,Z.line==s.line?m:null)),Z?br(e,Z,s,a,u):null}}return s}function Pa(e,s,l,a,u){var m=a||1,y=br(e,s,l,m,u)||!u&&br(e,s,l,m,!0)||br(e,s,l,-m,u)||!u&&br(e,s,l,-m,!0);return y||(e.cantEdit=!0,ut(e.first,0))}function _c(e,s,l,a){return l<0&&s.ch==0?s.line>e.first?ue(e,ut(s.line-1)):null:l>0&&s.ch==(a||Kt(e,s.line)).text.length?s.line<e.first+e.size-1?ut(s.line+1,0):null:new ut(s.line,s.ch+l)}function Pc(e){e.setSelection(ut(e.firstLine(),0),ut(e.lastLine()),Xt)}function Ic(e,s,l){var a={canceled:!1,from:s.from,to:s.to,text:s.text,origin:s.origin,cancel:function(){return a.canceled=!0}};return l&&(a.update=function(u,m,y,k){u&&(a.from=ue(e,u)),m&&(a.to=ue(e,m)),y&&(a.text=y),k!==void 0&&(a.origin=k)}),Pe(e,"beforeChange",e,a),e.cm&&Pe(e.cm,"beforeChange",e.cm,a),a.canceled?(e.cm&&(e.cm.curOp.updateInput=2),null):{from:a.from,to:a.to,text:a.text,origin:a.origin}}function yr(e,s,l){if(e.cm){if(!e.cm.curOp)return qe(e.cm,yr)(e,s,l);if(e.cm.state.suppressEdits)return}if(!((Ge(e,"beforeChange")||e.cm&&Ge(e.cm,"beforeChange"))&&(s=Ic(e,s,!0),!s))){var a=wu&&!l&&hp(e,s.from,s.to);if(a)for(var u=a.length-1;u>=0;--u)Lc(e,{from:a[u].from,to:a[u].to,text:u?[""]:s.text,origin:s.origin});else Lc(e,s)}}function Lc(e,s){if(!(s.text.length==1&&s.text[0]==""&&Bt(s.from,s.to)==0)){var l=ql(e,s);bc(e,s,l,e.cm?e.cm.curOp.id:NaN),vo(e,s,l,Sl(e,s));var a=[];Vn(e,function(u,m){!m&&pt(a,u.history)==-1&&(Mc(u.history,s),a.push(u.history)),vo(u,s,null,Sl(u,s))})}}function Ia(e,s,l){var a=e.cm&&e.cm.state.suppressEdits;if(!(a&&!l)){for(var u=e.history,m,y=e.sel,k=s=="undo"?u.done:u.undone,C=s=="undo"?u.undone:u.done,P=0;P<k.length&&(m=k[P],!(l?m.ranges&&!m.equals(e.sel):!m.ranges));P++);if(P!=k.length){for(u.lastOrigin=u.lastSelOrigin=null;;)if(m=k.pop(),m.ranges){if(Da(m,C),l&&!m.equals(e.sel)){ii(e,m,{clearRedo:!1});return}y=m}else if(a){k.push(m);return}else break;var M=[];Da(y,C),C.push({changes:M,generation:u.generation}),u.generation=m.generation||++u.maxGeneration;for(var G=Ge(e,"beforeChange")||e.cm&&Ge(e.cm,"beforeChange"),et=function(bt){var It=m.changes[bt];if(It.origin=s,G&&!Ic(e,It,!1))return k.length=0,{};M.push(Ql(e,It));var Wt=bt?ql(e,It):Ft(k);vo(e,It,Wt,wc(e,It)),!bt&&e.cm&&e.cm.scrollIntoView({from:It.from,to:qn(It)});var zt=[];Vn(e,function(Mt,Gt){!Gt&&pt(zt,Mt.history)==-1&&(Mc(Mt.history,It),zt.push(Mt.history)),vo(Mt,It,null,wc(Mt,It))})},Z=m.changes.length-1;Z>=0;--Z){var ft=et(Z);if(ft)return ft.v}}}}function Oc(e,s){if(s!=0&&(e.first+=s,e.sel=new Ii(o(e.sel.ranges,function(u){return new we(ut(u.anchor.line+s,u.anchor.ch),ut(u.head.line+s,u.head.ch))}),e.sel.primIndex),e.cm)){ui(e.cm,e.first,e.first-s,s);for(var l=e.cm.display,a=l.viewFrom;a<l.viewTo;a++)Xn(e.cm,a,"gutter")}}function vo(e,s,l,a){if(e.cm&&!e.cm.curOp)return qe(e.cm,vo)(e,s,l,a);if(s.to.line<e.first){Oc(e,s.text.length-1-(s.to.line-s.from.line));return}if(!(s.from.line>e.lastLine())){if(s.from.line<e.first){var u=s.text.length-1-(e.first-s.from.line);Oc(e,u),s={from:ut(e.first,0),to:ut(s.to.line+u,s.to.ch),text:[Ft(s.text)],origin:s.origin}}var m=e.lastLine();s.to.line>m&&(s={from:s.from,to:ut(m,Kt(e,m).text.length),text:[s.text[0]],origin:s.origin}),s.removed=wn(e,s.from,s.to),l||(l=ql(e,s)),e.cm?fg(e.cm,s,a):Kl(e,s,a),_a(e,l,Xt),e.cantEdit&&Pa(e,ut(e.firstLine(),0))&&(e.cantEdit=!1)}}function fg(e,s,l){var a=e.doc,u=e.display,m=s.from,y=s.to,k=!1,C=m.line;e.options.lineWrapping||(C=I(Yi(Kt(a,m.line))),a.iter(C,y.line+1,function(Z){if(Z==u.maxLine)return k=!0,!0})),a.sel.contains(s.from,s.to)>-1&&ei(e),Kl(a,s,l,Ku(e)),e.options.lineWrapping||(a.iter(C,m.line+s.text.length,function(Z){var ft=da(Z);ft>u.maxLineLength&&(u.maxLine=Z,u.maxLineLength=ft,u.maxLineChanged=!0,k=!1)}),k&&(e.curOp.updateMaxLine=!0)),ip(a,m.line),po(e,400);var P=s.text.length-(y.line-m.line)-1;s.full?ui(e):m.line==y.line&&s.text.length==1&&!pc(e.doc,s)?Xn(e,m.line,"text"):ui(e,m.line,y.line+1,P);var M=Ge(e,"changes"),G=Ge(e,"change");if(G||M){var et={from:m,to:y,text:s.text,removed:s.removed,origin:s.origin};G&&Ye(e,"change",e,et),M&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(et)}e.display.selForContextMenu=null}function wr(e,s,l,a,u){var m;a||(a=l),Bt(a,l)<0&&(m=[a,l],l=m[0],a=m[1]),typeof s=="string"&&(s=e.splitLines(s)),yr(e,{from:l,to:a,text:s,origin:u})}function Ec(e,s,l,a){l<e.line?e.line+=a:s<e.line&&(e.line=s,e.ch=0)}function Wc(e,s,l,a){for(var u=0;u<e.length;++u){var m=e[u],y=!0;if(m.ranges){m.copied||(m=e[u]=m.deepCopy(),m.copied=!0);for(var k=0;k<m.ranges.length;k++)Ec(m.ranges[k].anchor,s,l,a),Ec(m.ranges[k].head,s,l,a);continue}for(var C=0;C<m.changes.length;++C){var P=m.changes[C];if(l<P.from.line)P.from=ut(P.from.line+a,P.from.ch),P.to=ut(P.to.line+a,P.to.ch);else if(s<=P.to.line){y=!1;break}}y||(e.splice(0,u+1),u=0)}}function Mc(e,s){var l=s.from.line,a=s.to.line,u=s.text.length-(a-l)-1;Wc(e.done,l,a,u),Wc(e.undone,l,a,u)}function bo(e,s,l,a){var u=s,m=s;return typeof s=="number"?m=Kt(e,cu(e,s)):u=I(s),u==null?null:(a(m,u)&&e.cm&&Xn(e.cm,u,l),m)}function yo(e){this.lines=e,this.parent=null;for(var s=0,l=0;l<e.length;++l)e[l].parent=this,s+=e[l].height;this.height=s}yo.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,s){for(var l=e,a=e+s;l<a;++l){var u=this.lines[l];this.height-=u.height,pp(u),Ye(u,"delete")}this.lines.splice(e,s)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,s,l){this.height+=l,this.lines=this.lines.slice(0,e).concat(s).concat(this.lines.slice(e));for(var a=0;a<s.length;++a)s[a].parent=this},iterN:function(e,s,l){for(var a=e+s;e<a;++e)if(l(this.lines[e]))return!0}};function wo(e){this.children=e;for(var s=0,l=0,a=0;a<e.length;++a){var u=e[a];s+=u.chunkSize(),l+=u.height,u.parent=this}this.size=s,this.height=l,this.parent=null}wo.prototype={chunkSize:function(){return this.size},removeInner:function(e,s){this.size-=s;for(var l=0;l<this.children.length;++l){var a=this.children[l],u=a.chunkSize();if(e<u){var m=Math.min(s,u-e),y=a.height;if(a.removeInner(e,m),this.height-=y-a.height,u==m&&(this.children.splice(l--,1),a.parent=null),(s-=m)==0)break;e=0}else e-=u}if(this.size-s<25&&(this.children.length>1||!(this.children[0]instanceof yo))){var k=[];this.collapse(k),this.children=[new yo(k)],this.children[0].parent=this}},collapse:function(e){for(var s=0;s<this.children.length;++s)this.children[s].collapse(e)},insertInner:function(e,s,l){this.size+=s.length,this.height+=l;for(var a=0;a<this.children.length;++a){var u=this.children[a],m=u.chunkSize();if(e<=m){if(u.insertInner(e,s,l),u.lines&&u.lines.length>50){for(var y=u.lines.length%25+25,k=y;k<u.lines.length;){var C=new yo(u.lines.slice(k,k+=25));u.height-=C.height,this.children.splice(++a,0,C),C.parent=this}u.lines=u.lines.slice(0,y),this.maybeSpill()}break}e-=m}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var s=e.children.splice(e.children.length-5,5),l=new wo(s);if(e.parent){e.size-=l.size,e.height-=l.height;var u=pt(e.parent.children,e);e.parent.children.splice(u+1,0,l)}else{var a=new wo(e.children);a.parent=e,e.children=[a,l],e=a}l.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,s,l){for(var a=0;a<this.children.length;++a){var u=this.children[a],m=u.chunkSize();if(e<m){var y=Math.min(s,m-e);if(u.iterN(e,y,l))return!0;if((s-=y)==0)break;e=0}else e-=m}}};var So=function(e,s,l){if(l)for(var a in l)l.hasOwnProperty(a)&&(this[a]=l[a]);this.doc=e,this.node=s};So.prototype.clear=function(){var e=this.doc.cm,s=this.line.widgets,l=this.line,a=I(l);if(!(a==null||!s)){for(var u=0;u<s.length;++u)s[u]==this&&s.splice(u--,1);s.length||(l.widgets=null);var m=oo(this);Pi(l,Math.max(0,l.height-m)),e&&(wi(e,function(){Ac(e,l,-m),Xn(e,a,"widget")}),Ye(e,"lineWidgetCleared",e,this,a))}},So.prototype.changed=function(){var e=this,s=this.height,l=this.doc.cm,a=this.line;this.height=null;var u=oo(this)-s;u&&(Gn(this.doc,a)||Pi(a,a.height+u),l&&wi(l,function(){l.curOp.forceUpdate=!0,Ac(l,a,u),Ye(l,"lineWidgetChanged",l,e,I(a))}))},Je(So);function Ac(e,s,l){xn(s)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&Fl(e,l)}function pg(e,s,l,a){var u=new So(e,l,a),m=e.cm;return m&&u.noHScroll&&(m.display.alignWidgets=!0),bo(e,s,"widget",function(y){var k=y.widgets||(y.widgets=[]);if(u.insertAt==null?k.push(u):k.splice(Math.min(k.length,Math.max(0,u.insertAt)),0,u),u.line=y,m&&!Gn(e,y)){var C=xn(y)<e.scrollTop;Pi(y,y.height+oo(u)),C&&Fl(m,u.height),m.curOp.forceUpdate=!0}return!0}),m&&Ye(m,"lineWidgetAdded",m,u,typeof s=="number"?s:I(s)),u}var Nc=0,Kn=function(e,s){this.lines=[],this.type=s,this.doc=e,this.id=++Nc};Kn.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,s=e&&!e.curOp;if(s&&Ss(e),Ge(this,"clear")){var l=this.find();l&&Ye(this,"clear",l.from,l.to)}for(var a=null,u=null,m=0;m<this.lines.length;++m){var y=this.lines[m],k=no(y.markedSpans,this);e&&!this.collapsed?Xn(e,I(y),"text"):e&&(k.to!=null&&(u=I(y)),k.from!=null&&(a=I(y))),y.markedSpans=rp(y.markedSpans,k),k.from==null&&this.collapsed&&!Gn(this.doc,y)&&e&&Pi(y,dr(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var C=0;C<this.lines.length;++C){var P=Yi(this.lines[C]),M=da(P);M>e.display.maxLineLength&&(e.display.maxLine=P,e.display.maxLineLength=M,e.display.maxLineChanged=!0)}a!=null&&e&&this.collapsed&&ui(e,a,u+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&Dc(e.doc)),e&&Ye(e,"markerCleared",e,this,a,u),s&&xs(e),this.parent&&this.parent.clear()}},Kn.prototype.find=function(e,s){e==null&&this.type=="bookmark"&&(e=1);for(var l,a,u=0;u<this.lines.length;++u){var m=this.lines[u],y=no(m.markedSpans,this);if(y.from!=null&&(l=ut(s?m:I(m),y.from),e==-1))return l;if(y.to!=null&&(a=ut(s?m:I(m),y.to),e==1))return a}return l&&{from:l,to:a}},Kn.prototype.changed=function(){var e=this,s=this.find(-1,!0),l=this,a=this.doc.cm;!s||!a||wi(a,function(){var u=s.line,m=I(s.line),y=Il(a,m);if(y&&(Fu(y),a.curOp.selectionChanged=a.curOp.forceUpdate=!0),a.curOp.updateMaxLine=!0,!Gn(l.doc,u)&&l.height!=null){var k=l.height;l.height=null;var C=oo(l)-k;C&&Pi(u,u.height+C)}Ye(a,"markerChanged",a,e)})},Kn.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var s=this.doc.cm.curOp;(!s.maybeHiddenMarkers||pt(s.maybeHiddenMarkers,this)==-1)&&(s.maybeUnhiddenMarkers||(s.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},Kn.prototype.detachLine=function(e){if(this.lines.splice(pt(this.lines,e),1),!this.lines.length&&this.doc.cm){var s=this.doc.cm.curOp;(s.maybeHiddenMarkers||(s.maybeHiddenMarkers=[])).push(this)}},Je(Kn);function Sr(e,s,l,a,u){if(a&&a.shared)return gg(e,s,l,a,u);if(e.cm&&!e.cm.curOp)return qe(e.cm,Sr)(e,s,l,a,u);var m=new Kn(e,u),y=Bt(s,l);if(a&&N(a,m,!1),y>0||y==0&&m.clearWhenEmpty!==!1)return m;if(m.replacedWith&&(m.collapsed=!0,m.widgetNode=oe("span",[m.replacedWith],"CodeMirror-widget"),a.handleMouseEvents||m.widgetNode.setAttribute("cm-ignore-events","true"),a.insertLeft&&(m.widgetNode.insertLeft=!0)),m.collapsed){if(Tu(e,s.line,s,l,m)||s.line!=l.line&&Tu(e,l.line,s,l,m))throw new Error("Inserting collapsed marker partially overlapping an existing one");sp()}m.addToHistory&&bc(e,{from:s,to:l,origin:"markText"},e.sel,NaN);var k=s.line,C=e.cm,P;if(e.iter(k,l.line+1,function(G){C&&m.collapsed&&!C.options.lineWrapping&&Yi(G)==C.display.maxLine&&(P=!0),m.collapsed&&k!=s.line&&Pi(G,0),op(G,new la(m,k==s.line?s.ch:null,k==l.line?l.ch:null),e.cm&&e.cm.curOp),++k}),m.collapsed&&e.iter(s.line,l.line+1,function(G){Gn(e,G)&&Pi(G,0)}),m.clearOnEnter&&Et(m,"beforeCursorEnter",function(){return m.clear()}),m.readOnly&&(np(),(e.history.done.length||e.history.undone.length)&&e.clearHistory()),m.collapsed&&(m.id=++Nc,m.atomic=!0),C){if(P&&(C.curOp.updateMaxLine=!0),m.collapsed)ui(C,s.line,l.line+1);else if(m.className||m.startStyle||m.endStyle||m.css||m.attributes||m.title)for(var M=s.line;M<=l.line;M++)Xn(C,M,"text");m.atomic&&Dc(C.doc),Ye(C,"markerAdded",C,m)}return m}var xo=function(e,s){this.markers=e,this.primary=s;for(var l=0;l<e.length;++l)e[l].parent=this};xo.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();Ye(this,"clear")}},xo.prototype.find=function(e,s){return this.primary.find(e,s)},Je(xo);function gg(e,s,l,a,u){a=N(a),a.shared=!1;var m=[Sr(e,s,l,a,u)],y=m[0],k=a.widgetNode;return Vn(e,function(C){k&&(a.widgetNode=k.cloneNode(!0)),m.push(Sr(C,ue(C,s),ue(C,l),a,u));for(var P=0;P<C.linked.length;++P)if(C.linked[P].isParent)return;y=Ft(m)}),new xo(m,y)}function Rc(e){return e.findMarks(ut(e.first,0),e.clipPos(ut(e.lastLine())),function(s){return s.parent})}function mg(e,s){for(var l=0;l<s.length;l++){var a=s[l],u=a.find(),m=e.clipPos(u.from),y=e.clipPos(u.to);if(Bt(m,y)){var k=Sr(e,m,y,a.primary,a.primary.type);a.markers.push(k),k.parent=a}}}function vg(e){for(var s=function(a){var u=e[a],m=[u.primary.doc];Vn(u.primary.doc,function(C){return m.push(C)});for(var y=0;y<u.markers.length;y++){var k=u.markers[y];pt(m,k.doc)==-1&&(k.parent=null,u.markers.splice(y--,1))}},l=0;l<e.length;l++)s(l)}var bg=0,ci=function(e,s,l,a,u){if(!(this instanceof ci))return new ci(e,s,l,a,u);l==null&&(l=0),wo.call(this,[new yo([new hr("",null)])]),this.first=l,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=l;var m=ut(l,0);this.sel=Yn(m),this.history=new Ca(null),this.id=++bg,this.modeOption=s,this.lineSep=a,this.direction=u=="rtl"?"rtl":"ltr",this.extend=!1,typeof e=="string"&&(e=this.splitLines(e)),Kl(this,{from:m,to:m,text:e}),ii(this,Yn(m),Xt)};ci.prototype=b(wo.prototype,{constructor:ci,iter:function(e,s,l){l?this.iterN(e-this.first,s-e,l):this.iterN(this.first,this.first+this.size,e)},insert:function(e,s){for(var l=0,a=0;a<s.length;++a)l+=s[a].height;this.insertInner(e-this.first,s,l)},remove:function(e,s){this.removeInner(e-this.first,s)},getValue:function(e){var s=eo(this,this.first,this.first+this.size);return e===!1?s:s.join(e||this.lineSeparator())},setValue:Ve(function(e){var s=ut(this.first,0),l=this.first+this.size-1;yr(this,{from:s,to:ut(l,Kt(this,l).text.length),text:this.splitLines(e),origin:"setValue",full:!0},!0),this.cm&&ho(this.cm,0,0),ii(this,Yn(s),Xt)}),replaceRange:function(e,s,l,a){s=ue(this,s),l=l?ue(this,l):s,wr(this,e,s,l,a)},getRange:function(e,s,l){var a=wn(this,ue(this,e),ue(this,s));return l===!1?a:l===""?a.join(""):a.join(l||this.lineSeparator())},getLine:function(e){var s=this.getLineHandle(e);return s&&s.text},getLineHandle:function(e){if(mt(this,e))return Kt(this,e)},getLineNumber:function(e){return I(e)},getLineHandleVisualStart:function(e){return typeof e=="number"&&(e=Kt(this,e)),Yi(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return ue(this,e)},getCursor:function(e){var s=this.sel.primary(),l;return e==null||e=="head"?l=s.head:e=="anchor"?l=s.anchor:e=="end"||e=="to"||e===!1?l=s.to():l=s.from(),l},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Ve(function(e,s,l){xc(this,ue(this,typeof e=="number"?ut(e,s||0):e),null,l)}),setSelection:Ve(function(e,s,l){xc(this,ue(this,e),ue(this,s||e),l)}),extendSelection:Ve(function(e,s,l){Ta(this,ue(this,e),s&&ue(this,s),l)}),extendSelections:Ve(function(e,s){Sc(this,du(this,e),s)}),extendSelectionsBy:Ve(function(e,s){var l=o(this.sel.ranges,e);Sc(this,du(this,l),s)}),setSelections:Ve(function(e,s,l){if(e.length){for(var a=[],u=0;u<e.length;u++)a[u]=new we(ue(this,e[u].anchor),ue(this,e[u].head||e[u].anchor));s==null&&(s=Math.min(e.length-1,this.sel.primIndex)),ii(this,Vi(this.cm,a,s),l)}}),addSelection:Ve(function(e,s,l){var a=this.sel.ranges.slice(0);a.push(new we(ue(this,e),ue(this,s||e))),ii(this,Vi(this.cm,a,a.length-1),l)}),getSelection:function(e){for(var s=this.sel.ranges,l,a=0;a<s.length;a++){var u=wn(this,s[a].from(),s[a].to());l=l?l.concat(u):u}return e===!1?l:l.join(e||this.lineSeparator())},getSelections:function(e){for(var s=[],l=this.sel.ranges,a=0;a<l.length;a++){var u=wn(this,l[a].from(),l[a].to());e!==!1&&(u=u.join(e||this.lineSeparator())),s[a]=u}return s},replaceSelection:function(e,s,l){for(var a=[],u=0;u<this.sel.ranges.length;u++)a[u]=e;this.replaceSelections(a,s,l||"+input")},replaceSelections:Ve(function(e,s,l){for(var a=[],u=this.sel,m=0;m<u.ranges.length;m++){var y=u.ranges[m];a[m]={from:y.from(),to:y.to(),text:this.splitLines(e[m]),origin:l}}for(var k=s&&s!="end"&&rg(this,a,s),C=a.length-1;C>=0;C--)yr(this,a[C]);k?kc(this,k):this.cm&&gr(this.cm)}),undo:Ve(function(){Ia(this,"undo")}),redo:Ve(function(){Ia(this,"redo")}),undoSelection:Ve(function(){Ia(this,"undo",!0)}),redoSelection:Ve(function(){Ia(this,"redo",!0)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,s=0,l=0,a=0;a<e.done.length;a++)e.done[a].ranges||++s;for(var u=0;u<e.undone.length;u++)e.undone[u].ranges||++l;return{undo:s,redo:l}},clearHistory:function(){var e=this;this.history=new Ca(this.history),Vn(this,function(s){return s.history=e.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:vr(this.history.done),undone:vr(this.history.undone)}},setHistory:function(e){var s=this.history=new Ca(this.history);s.done=vr(e.done.slice(0),null,!0),s.undone=vr(e.undone.slice(0),null,!0)},setGutterMarker:Ve(function(e,s,l){return bo(this,e,"gutter",function(a){var u=a.gutterMarkers||(a.gutterMarkers={});return u[s]=l,!l&&B(u)&&(a.gutterMarkers=null),!0})}),clearGutter:Ve(function(e){var s=this;this.iter(function(l){l.gutterMarkers&&l.gutterMarkers[e]&&bo(s,l,"gutter",function(){return l.gutterMarkers[e]=null,B(l.gutterMarkers)&&(l.gutterMarkers=null),!0})})}),lineInfo:function(e){var s;if(typeof e=="number"){if(!mt(this,e)||(s=e,e=Kt(this,e),!e))return null}else if(s=I(e),s==null)return null;return{line:s,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},addLineClass:Ve(function(e,s,l){return bo(this,e,s=="gutter"?"gutter":"class",function(a){var u=s=="text"?"textClass":s=="background"?"bgClass":s=="gutter"?"gutterClass":"wrapClass";if(!a[u])a[u]=l;else{if(At(l).test(a[u]))return!1;a[u]+=" "+l}return!0})}),removeLineClass:Ve(function(e,s,l){return bo(this,e,s=="gutter"?"gutter":"class",function(a){var u=s=="text"?"textClass":s=="background"?"bgClass":s=="gutter"?"gutterClass":"wrapClass",m=a[u];if(m)if(l==null)a[u]=null;else{var y=m.match(At(l));if(!y)return!1;var k=y.index+y[0].length;a[u]=m.slice(0,y.index)+(!y.index||k==m.length?"":" ")+m.slice(k)||null}else return!1;return!0})}),addLineWidget:Ve(function(e,s,l){return pg(this,e,s,l)}),removeLineWidget:function(e){e.clear()},markText:function(e,s,l){return Sr(this,ue(this,e),ue(this,s),l,l&&l.type||"range")},setBookmark:function(e,s){var l={replacedWith:s&&(s.nodeType==null?s.widget:s),insertLeft:s&&s.insertLeft,clearWhenEmpty:!1,shared:s&&s.shared,handleMouseEvents:s&&s.handleMouseEvents};return e=ue(this,e),Sr(this,e,e,l,"bookmark")},findMarksAt:function(e){e=ue(this,e);var s=[],l=Kt(this,e.line).markedSpans;if(l)for(var a=0;a<l.length;++a){var u=l[a];(u.from==null||u.from<=e.ch)&&(u.to==null||u.to>=e.ch)&&s.push(u.marker.parent||u.marker)}return s},findMarks:function(e,s,l){e=ue(this,e),s=ue(this,s);var a=[],u=e.line;return this.iter(e.line,s.line+1,function(m){var y=m.markedSpans;if(y)for(var k=0;k<y.length;k++){var C=y[k];!(C.to!=null&&u==e.line&&e.ch>=C.to||C.from==null&&u!=e.line||C.from!=null&&u==s.line&&C.from>=s.ch)&&(!l||l(C.marker))&&a.push(C.marker.parent||C.marker)}++u}),a},getAllMarks:function(){var e=[];return this.iter(function(s){var l=s.markedSpans;if(l)for(var a=0;a<l.length;++a)l[a].from!=null&&e.push(l[a].marker)}),e},posFromIndex:function(e){var s,l=this.first,a=this.lineSeparator().length;return this.iter(function(u){var m=u.text.length+a;if(m>e)return s=e,!0;e-=m,++l}),ue(this,ut(l,s))},indexFromPos:function(e){e=ue(this,e);var s=e.ch;if(e.line<this.first||e.ch<0)return 0;var l=this.lineSeparator().length;return this.iter(this.first,e.line,function(a){s+=a.text.length+l}),s},copy:function(e){var s=new ci(eo(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return s.scrollTop=this.scrollTop,s.scrollLeft=this.scrollLeft,s.sel=this.sel,s.extend=!1,e&&(s.history.undoDepth=this.history.undoDepth,s.setHistory(this.getHistory())),s},linkedDoc:function(e){e||(e={});var s=this.first,l=this.first+this.size;e.from!=null&&e.from>s&&(s=e.from),e.to!=null&&e.to<l&&(l=e.to);var a=new ci(eo(this,s,l),e.mode||this.modeOption,s,this.lineSep,this.direction);return e.sharedHist&&(a.history=this.history),(this.linked||(this.linked=[])).push({doc:a,sharedHist:e.sharedHist}),a.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],mg(a,Rc(this)),a},unlinkDoc:function(e){if(e instanceof Ie&&(e=e.doc),this.linked)for(var s=0;s<this.linked.length;++s){var l=this.linked[s];if(l.doc==e){this.linked.splice(s,1),e.unlinkDoc(this),vg(Rc(this));break}}if(e.history==this.history){var a=[e.id];Vn(e,function(u){return a.push(u.id)},!0),e.history=new Ca(null),e.history.done=vr(this.history.done,a),e.history.undone=vr(this.history.undone,a)}},iterLinkedDocs:function(e){Vn(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):Mi(e)},lineSeparator:function(){return this.lineSep||`
`},setDirection:Ve(function(e){e!="rtl"&&(e="ltr"),e!=this.direction&&(this.direction=e,this.iter(function(s){return s.order=null}),this.cm&&og(this.cm))})}),ci.prototype.eachLine=ci.prototype.iter;var Bc=0;function yg(e){var s=this;if(Hc(s),!(ve(s,e)||kn(s.display,e))){Be(e),w&&(Bc=+new Date);var l=vs(s,e,!0),a=e.dataTransfer.files;if(!(!l||s.isReadOnly()))if(a&&a.length&&window.FileReader&&window.File)for(var u=a.length,m=Array(u),y=0,k=function(){++y==u&&qe(s,function(){l=ue(s.doc,l);var Z={from:l,to:l,text:s.doc.splitLines(m.filter(function(ft){return ft!=null}).join(s.doc.lineSeparator())),origin:"paste"};yr(s.doc,Z),kc(s.doc,Yn(ue(s.doc,l),ue(s.doc,qn(Z))))})()},C=function(Z,ft){if(s.options.allowDropFileTypes&&pt(s.options.allowDropFileTypes,Z.type)==-1){k();return}var bt=new FileReader;bt.onerror=function(){return k()},bt.onload=function(){var It=bt.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(It)){k();return}m[ft]=It,k()},bt.readAsText(Z)},P=0;P<a.length;P++)C(a[P],P);else{if(s.state.draggingText&&s.doc.sel.contains(l)>-1){s.state.draggingText(e),setTimeout(function(){return s.display.input.focus()},20);return}try{var M=e.dataTransfer.getData("Text");if(M){var G;if(s.state.draggingText&&!s.state.draggingText.copy&&(G=s.listSelections()),_a(s.doc,Yn(l,l)),G)for(var et=0;et<G.length;++et)wr(s.doc,"",G[et].anchor,G[et].head,"drag");s.replaceSelection(M,"around","paste"),s.display.input.focus()}}catch{}}}}function wg(e,s){if(w&&(!e.state.draggingText||+new Date-Bc<100)){yi(s);return}if(!(ve(e,s)||kn(e.display,s))&&(s.dataTransfer.setData("Text",e.getSelection()),s.dataTransfer.effectAllowed="copyMove",s.dataTransfer.setDragImage&&!V)){var l=z("img",null,null,"position: fixed; left: 0; top: 0;");l.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",E&&(l.width=l.height=1,e.display.wrapper.appendChild(l),l._top=l.offsetTop),s.dataTransfer.setDragImage(l,0,0),E&&l.parentNode.removeChild(l)}}function Sg(e,s){var l=vs(e,s);if(l){var a=document.createDocumentFragment();Rl(e,l,a),e.display.dragCursor||(e.display.dragCursor=z("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),e.display.lineSpace.insertBefore(e.display.dragCursor,e.display.cursorDiv)),lt(e.display.dragCursor,a)}}function Hc(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function $c(e){if(document.getElementsByClassName){for(var s=document.getElementsByClassName("CodeMirror"),l=[],a=0;a<s.length;a++){var u=s[a].CodeMirror;u&&l.push(u)}l.length&&l[0].operation(function(){for(var m=0;m<l.length;m++)e(l[m])})}}var zc=!1;function xg(){zc||(kg(),zc=!0)}function kg(){var e;Et(window,"resize",function(){e==null&&(e=setTimeout(function(){e=null,$c(Cg)},100))}),Et(window,"blur",function(){return $c(pr)})}function Cg(e){var s=e.display;s.cachedCharWidth=s.cachedTextHeight=s.cachedPaddingH=null,s.scrollbarsClipped=!1,e.setSize()}for(var Qn={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},ko=0;ko<10;ko++)Qn[ko+48]=Qn[ko+96]=String(ko);for(var La=65;La<=90;La++)Qn[La]=String.fromCharCode(La);for(var Co=1;Co<=12;Co++)Qn[Co+111]=Qn[Co+63235]="F"+Co;var Dn={};Dn.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Dn.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Dn.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Dn.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Dn.default=J?Dn.macDefault:Dn.pcDefault;function Dg(e){var s=e.split(/-(?!$)/);e=s[s.length-1];for(var l,a,u,m,y=0;y<s.length-1;y++){var k=s[y];if(/^(cmd|meta|m)$/i.test(k))m=!0;else if(/^a(lt)?$/i.test(k))l=!0;else if(/^(c|ctrl|control)$/i.test(k))a=!0;else if(/^s(hift)?$/i.test(k))u=!0;else throw new Error("Unrecognized modifier name: "+k)}return l&&(e="Alt-"+e),a&&(e="Ctrl-"+e),m&&(e="Cmd-"+e),u&&(e="Shift-"+e),e}function Tg(e){var s={};for(var l in e)if(e.hasOwnProperty(l)){var a=e[l];if(/^(name|fallthrough|(de|at)tach)$/.test(l))continue;if(a=="..."){delete e[l];continue}for(var u=o(l.split(" "),Dg),m=0;m<u.length;m++){var y=void 0,k=void 0;m==u.length-1?(k=u.join(" "),y=a):(k=u.slice(0,m+1).join(" "),y="...");var C=s[k];if(!C)s[k]=y;else if(C!=y)throw new Error("Inconsistent bindings for "+k)}delete e[l]}for(var P in s)e[P]=s[P];return e}function xr(e,s,l,a){s=Oa(s);var u=s.call?s.call(e,a):s[e];if(u===!1)return"nothing";if(u==="...")return"multi";if(u!=null&&l(u))return"handled";if(s.fallthrough){if(Object.prototype.toString.call(s.fallthrough)!="[object Array]")return xr(e,s.fallthrough,l,a);for(var m=0;m<s.fallthrough.length;m++){var y=xr(e,s.fallthrough[m],l,a);if(y)return y}}}function Fc(e){var s=typeof e=="string"?e:Qn[e.keyCode];return s=="Ctrl"||s=="Alt"||s=="Shift"||s=="Mod"}function jc(e,s,l){var a=e;return s.altKey&&a!="Alt"&&(e="Alt-"+e),(wt?s.metaKey:s.ctrlKey)&&a!="Ctrl"&&(e="Ctrl-"+e),(wt?s.ctrlKey:s.metaKey)&&a!="Mod"&&(e="Cmd-"+e),!l&&s.shiftKey&&a!="Shift"&&(e="Shift-"+e),e}function Gc(e,s){if(E&&e.keyCode==34&&e.char)return!1;var l=Qn[e.keyCode];return l==null||e.altGraphKey?!1:(e.keyCode==3&&e.code&&(l=e.code),jc(l,e,s))}function Oa(e){return typeof e=="string"?Dn[e]:e}function kr(e,s){for(var l=e.doc.sel.ranges,a=[],u=0;u<l.length;u++){for(var m=s(l[u]);a.length&&Bt(m.from,Ft(a).to)<=0;){var y=a.pop();if(Bt(y.from,m.from)<0){m.from=y.from;break}}a.push(m)}wi(e,function(){for(var k=a.length-1;k>=0;k--)wr(e.doc,"",a[k].from,a[k].to,"+delete");gr(e)})}function th(e,s,l){var a=dt(e.text,s+l,l);return a<0||a>e.text.length?null:a}function eh(e,s,l){var a=th(e,s.ch,l);return a==null?null:new ut(s.line,a,l<0?"after":"before")}function ih(e,s,l,a,u){if(e){s.doc.direction=="rtl"&&(u=-u);var m=$t(l,s.doc.direction);if(m){var y=u<0?Ft(m):m[0],k=u<0==(y.level==1),C=k?"after":"before",P;if(y.level>0||s.doc.direction=="rtl"){var M=cr(s,l);P=u<0?l.text.length-1:0;var G=an(s,M,P).top;P=ct(function(et){return an(s,M,et).top==G},u<0==(y.level==1)?y.from:y.to-1,P),C=="before"&&(P=th(l,P,1))}else P=u<0?y.to:y.from;return new ut(a,P,C)}}return new ut(a,u<0?l.text.length:0,u<0?"before":"after")}function _g(e,s,l,a){var u=$t(s,e.doc.direction);if(!u)return eh(s,l,a);l.ch>=s.text.length?(l.ch=s.text.length,l.sticky="before"):l.ch<=0&&(l.ch=0,l.sticky="after");var m=ie(u,l.ch,l.sticky),y=u[m];if(e.doc.direction=="ltr"&&y.level%2==0&&(a>0?y.to>l.ch:y.from<l.ch))return eh(s,l,a);var k=function(Wt,zt){return th(s,Wt instanceof ut?Wt.ch:Wt,zt)},C,P=function(Wt){return e.options.lineWrapping?(C=C||cr(e,s),Vu(e,s,C,Wt)):{begin:0,end:s.text.length}},M=P(l.sticky=="before"?k(l,-1):l.ch);if(e.doc.direction=="rtl"||y.level==1){var G=y.level==1==a<0,et=k(l,G?1:-1);if(et!=null&&(G?et<=y.to&&et<=M.end:et>=y.from&&et>=M.begin)){var Z=G?"before":"after";return new ut(l.line,et,Z)}}var ft=function(Wt,zt,Mt){for(var Gt=function(ke,Ke){return Ke?new ut(l.line,k(ke,1),"before"):new ut(l.line,ke,"after")};Wt>=0&&Wt<u.length;Wt+=zt){var ne=u[Wt],te=zt>0==(ne.level!=1),fe=te?Mt.begin:k(Mt.end,-1);if(ne.from<=fe&&fe<ne.to||(fe=te?ne.from:k(ne.to,-1),Mt.begin<=fe&&fe<Mt.end))return Gt(fe,te)}},bt=ft(m+a,a,M);if(bt)return bt;var It=a>0?M.end:k(M.begin,-1);return It!=null&&!(a>0&&It==s.text.length)&&(bt=ft(a>0?0:u.length-1,a,P(It)),bt)?bt:null}var Do={selectAll:Pc,singleSelection:function(e){return e.setSelection(e.getCursor("anchor"),e.getCursor("head"),Xt)},killLine:function(e){return kr(e,function(s){if(s.empty()){var l=Kt(e.doc,s.head.line).text.length;return s.head.ch==l&&s.head.line<e.lastLine()?{from:s.head,to:ut(s.head.line+1,0)}:{from:s.head,to:ut(s.head.line,l)}}else return{from:s.from(),to:s.to()}})},deleteLine:function(e){return kr(e,function(s){return{from:ut(s.from().line,0),to:ue(e.doc,ut(s.to().line+1,0))}})},delLineLeft:function(e){return kr(e,function(s){return{from:ut(s.from().line,0),to:s.from()}})},delWrappedLineLeft:function(e){return kr(e,function(s){var l=e.charCoords(s.head,"div").top+5,a=e.coordsChar({left:0,top:l},"div");return{from:a,to:s.from()}})},delWrappedLineRight:function(e){return kr(e,function(s){var l=e.charCoords(s.head,"div").top+5,a=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:l},"div");return{from:s.from(),to:a}})},undo:function(e){return e.undo()},redo:function(e){return e.redo()},undoSelection:function(e){return e.undoSelection()},redoSelection:function(e){return e.redoSelection()},goDocStart:function(e){return e.extendSelection(ut(e.firstLine(),0))},goDocEnd:function(e){return e.extendSelection(ut(e.lastLine()))},goLineStart:function(e){return e.extendSelectionsBy(function(s){return Xc(e,s.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(e){return e.extendSelectionsBy(function(s){return Uc(e,s.head)},{origin:"+move",bias:1})},goLineEnd:function(e){return e.extendSelectionsBy(function(s){return Pg(e,s.head.line)},{origin:"+move",bias:-1})},goLineRight:function(e){return e.extendSelectionsBy(function(s){var l=e.cursorCoords(s.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:l},"div")},gt)},goLineLeft:function(e){return e.extendSelectionsBy(function(s){var l=e.cursorCoords(s.head,"div").top+5;return e.coordsChar({left:0,top:l},"div")},gt)},goLineLeftSmart:function(e){return e.extendSelectionsBy(function(s){var l=e.cursorCoords(s.head,"div").top+5,a=e.coordsChar({left:0,top:l},"div");return a.ch<e.getLine(a.line).search(/\S/)?Uc(e,s.head):a},gt)},goLineUp:function(e){return e.moveV(-1,"line")},goLineDown:function(e){return e.moveV(1,"line")},goPageUp:function(e){return e.moveV(-1,"page")},goPageDown:function(e){return e.moveV(1,"page")},goCharLeft:function(e){return e.moveH(-1,"char")},goCharRight:function(e){return e.moveH(1,"char")},goColumnLeft:function(e){return e.moveH(-1,"column")},goColumnRight:function(e){return e.moveH(1,"column")},goWordLeft:function(e){return e.moveH(-1,"word")},goGroupRight:function(e){return e.moveH(1,"group")},goGroupLeft:function(e){return e.moveH(-1,"group")},goWordRight:function(e){return e.moveH(1,"word")},delCharBefore:function(e){return e.deleteH(-1,"codepoint")},delCharAfter:function(e){return e.deleteH(1,"char")},delWordBefore:function(e){return e.deleteH(-1,"word")},delWordAfter:function(e){return e.deleteH(1,"word")},delGroupBefore:function(e){return e.deleteH(-1,"group")},delGroupAfter:function(e){return e.deleteH(1,"group")},indentAuto:function(e){return e.indentSelection("smart")},indentMore:function(e){return e.indentSelection("add")},indentLess:function(e){return e.indentSelection("subtract")},insertTab:function(e){return e.replaceSelection("	")},insertSoftTab:function(e){for(var s=[],l=e.listSelections(),a=e.options.tabSize,u=0;u<l.length;u++){var m=l[u].from(),y=Y(e.getLine(m.line),m.ch,a);s.push(qt(a-y%a))}e.replaceSelections(s)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){return wi(e,function(){for(var s=e.listSelections(),l=[],a=0;a<s.length;a++)if(s[a].empty()){var u=s[a].head,m=Kt(e.doc,u.line).text;if(m){if(u.ch==m.length&&(u=new ut(u.line,u.ch-1)),u.ch>0)u=new ut(u.line,u.ch+1),e.replaceRange(m.charAt(u.ch-1)+m.charAt(u.ch-2),ut(u.line,u.ch-2),u,"+transpose");else if(u.line>e.doc.first){var y=Kt(e.doc,u.line-1).text;y&&(u=new ut(u.line,1),e.replaceRange(m.charAt(0)+e.doc.lineSeparator()+y.charAt(y.length-1),ut(u.line-1,y.length-1),u,"+transpose"))}}l.push(new we(u,u))}e.setSelections(l)})},newlineAndIndent:function(e){return wi(e,function(){for(var s=e.listSelections(),l=s.length-1;l>=0;l--)e.replaceRange(e.doc.lineSeparator(),s[l].anchor,s[l].head,"+input");s=e.listSelections();for(var a=0;a<s.length;a++)e.indentLine(s[a].from().line,null,!0);gr(e)})},openLine:function(e){return e.replaceSelection(`
`,"start")},toggleOverwrite:function(e){return e.toggleOverwrite()}};function Xc(e,s){var l=Kt(e.doc,s),a=Yi(l);return a!=l&&(s=I(a)),ih(!0,e,a,s,1)}function Pg(e,s){var l=Kt(e.doc,s),a=cp(l);return a!=l&&(s=I(a)),ih(!0,e,l,s,-1)}function Uc(e,s){var l=Xc(e,s.line),a=Kt(e.doc,l.line),u=$t(a,e.doc.direction);if(!u||u[0].level==0){var m=Math.max(l.ch,a.text.search(/\S/)),y=s.line==l.line&&s.ch<=m&&s.ch;return ut(l.line,y?0:m,l.sticky)}return l}function Ea(e,s,l){if(typeof s=="string"&&(s=Do[s],!s))return!1;e.display.input.ensurePolled();var a=e.display.shift,u=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),l&&(e.display.shift=!1),u=s(e)!=Yt}finally{e.display.shift=a,e.state.suppressEdits=!1}return u}function Ig(e,s,l){for(var a=0;a<e.state.keyMaps.length;a++){var u=xr(s,e.state.keyMaps[a],l,e);if(u)return u}return e.options.extraKeys&&xr(s,e.options.extraKeys,l,e)||xr(s,e.options.keyMap,l,e)}var Lg=new vt;function To(e,s,l,a){var u=e.state.keySeq;if(u){if(Fc(s))return"handled";if(/\'$/.test(s)?e.state.keySeq=null:Lg.set(50,function(){e.state.keySeq==u&&(e.state.keySeq=null,e.display.input.reset())}),Yc(e,u+" "+s,l,a))return!0}return Yc(e,s,l,a)}function Yc(e,s,l,a){var u=Ig(e,s,a);return u=="multi"&&(e.state.keySeq=s),u=="handled"&&Ye(e,"keyHandled",e,s,l),(u=="handled"||u=="multi")&&(Be(l),Bl(e)),!!u}function qc(e,s){var l=Gc(s,!0);return l?s.shiftKey&&!e.state.keySeq?To(e,"Shift-"+l,s,function(a){return Ea(e,a,!0)})||To(e,l,s,function(a){if(typeof a=="string"?/^go[A-Z]/.test(a):a.motion)return Ea(e,a)}):To(e,l,s,function(a){return Ea(e,a)}):!1}function Og(e,s,l){return To(e,"'"+l+"'",s,function(a){return Ea(e,a,!0)})}var nh=null;function Vc(e){var s=this;if(!(e.target&&e.target!=s.display.input.getField())&&(s.curOp.focus=jt(me(s)),!ve(s,e))){w&&D<11&&e.keyCode==27&&(e.returnValue=!1);var l=e.keyCode;s.display.shift=l==16||e.shiftKey;var a=qc(s,e);E&&(nh=a?l:null,!a&&l==88&&!oa&&(J?e.metaKey:e.ctrlKey)&&s.replaceSelection("",null,"cut")),h&&!J&&!a&&l==46&&e.shiftKey&&!e.ctrlKey&&document.execCommand&&document.execCommand("cut"),l==18&&!/\bCodeMirror-crosshair\b/.test(s.display.lineDiv.className)&&Eg(s)}}function Eg(e){var s=e.display.lineDiv;Nt(s,"CodeMirror-crosshair");function l(a){(a.keyCode==18||!a.altKey)&&(Pt(s,"CodeMirror-crosshair"),je(document,"keyup",l),je(document,"mouseover",l))}Et(document,"keyup",l),Et(document,"mouseover",l)}function Kc(e){e.keyCode==16&&(this.doc.sel.shift=!1),ve(this,e)}function Qc(e){var s=this;if(!(e.target&&e.target!=s.display.input.getField())&&!(kn(s.display,e)||ve(s,e)||e.ctrlKey&&!e.altKey||J&&e.metaKey)){var l=e.keyCode,a=e.charCode;if(E&&l==nh){nh=null,Be(e);return}if(!(E&&(!e.which||e.which<10)&&qc(s,e))){var u=String.fromCharCode(a??l);u!="\b"&&(Og(s,e,u)||s.display.input.onKeyPress(e))}}}var Wg=400,sh=function(e,s,l){this.time=e,this.pos=s,this.button=l};sh.prototype.compare=function(e,s,l){return this.time+Wg>e&&Bt(s,this.pos)==0&&l==this.button};var _o,Po;function Mg(e,s){var l=+new Date;return Po&&Po.compare(l,e,s)?(_o=Po=null,"triple"):_o&&_o.compare(l,e,s)?(Po=new sh(l,e,s),_o=null,"double"):(_o=new sh(l,e,s),Po=null,"single")}function Zc(e){var s=this,l=s.display;if(!(ve(s,e)||l.activeTouch&&l.input.supportsTouch())){if(l.input.ensurePolled(),l.shift=e.shiftKey,kn(l,e)){T||(l.scroller.draggable=!1,setTimeout(function(){return l.scroller.draggable=!0},100));return}if(!rh(s,e)){var a=vs(s,e),u=ji(e),m=a?Mg(a,u):"single";Q(s).focus(),u==1&&s.state.selectingText&&s.state.selectingText(e),!(a&&Ag(s,u,a,m,e))&&(u==1?a?Rg(s,a,m,e):Zr(e)==l.scroller&&Be(e):u==2?(a&&Ta(s.doc,a),setTimeout(function(){return l.input.focus()},20)):u==3&&(Tt?s.display.input.onContextMenu(e):Hl(s)))}}}function Ag(e,s,l,a,u){var m="Click";return a=="double"?m="Double"+m:a=="triple"&&(m="Triple"+m),m=(s==1?"Left":s==2?"Middle":"Right")+m,To(e,jc(m,u),u,function(y){if(typeof y=="string"&&(y=Do[y]),!y)return!1;var k=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),k=y(e,l)!=Yt}finally{e.state.suppressEdits=!1}return k})}function Ng(e,s,l){var a=e.getOption("configureMouse"),u=a?a(e,s,l):{};if(u.unit==null){var m=St?l.shiftKey&&l.metaKey:l.altKey;u.unit=m?"rectangle":s=="single"?"char":s=="double"?"word":"line"}return(u.extend==null||e.doc.extend)&&(u.extend=e.doc.extend||l.shiftKey),u.addNew==null&&(u.addNew=J?l.metaKey:l.ctrlKey),u.moveOnDrag==null&&(u.moveOnDrag=!(J?l.altKey:l.ctrlKey)),u}function Rg(e,s,l,a){w?setTimeout(nt(Ju,e),0):e.curOp.focus=jt(me(e));var u=Ng(e,l,a),m=e.doc.sel,y;e.options.dragDrop&&vl&&!e.isReadOnly()&&l=="single"&&(y=m.contains(s))>-1&&(Bt((y=m.ranges[y]).from(),s)<0||s.xRel>0)&&(Bt(y.to(),s)>0||s.xRel<0)?Bg(e,a,s,u):Hg(e,a,s,u)}function Bg(e,s,l,a){var u=e.display,m=!1,y=qe(e,function(P){T&&(u.scroller.draggable=!1),e.state.draggingText=!1,e.state.delayingBlurEvent&&(e.hasFocus()?e.state.delayingBlurEvent=!1:Hl(e)),je(u.wrapper.ownerDocument,"mouseup",y),je(u.wrapper.ownerDocument,"mousemove",k),je(u.scroller,"dragstart",C),je(u.scroller,"drop",y),m||(Be(P),a.addNew||Ta(e.doc,l,null,null,a.extend),T&&!V||w&&D==9?setTimeout(function(){u.wrapper.ownerDocument.body.focus({preventScroll:!0}),u.input.focus()},20):u.input.focus())}),k=function(P){m=m||Math.abs(s.clientX-P.clientX)+Math.abs(s.clientY-P.clientY)>=10},C=function(){return m=!0};T&&(u.scroller.draggable=!0),e.state.draggingText=y,y.copy=!a.moveOnDrag,Et(u.wrapper.ownerDocument,"mouseup",y),Et(u.wrapper.ownerDocument,"mousemove",k),Et(u.scroller,"dragstart",C),Et(u.scroller,"drop",y),e.state.delayingBlurEvent=!0,setTimeout(function(){return u.input.focus()},20),u.scroller.dragDrop&&u.scroller.dragDrop()}function Jc(e,s,l){if(l=="char")return new we(s,s);if(l=="word")return e.findWordAt(s);if(l=="line")return new we(ut(s.line,0),ue(e.doc,ut(s.line+1,0)));var a=l(e,s);return new we(a.from,a.to)}function Hg(e,s,l,a){w&&Hl(e);var u=e.display,m=e.doc;Be(s);var y,k,C=m.sel,P=C.ranges;if(a.addNew&&!a.extend?(k=m.sel.contains(l),k>-1?y=P[k]:y=new we(l,l)):(y=m.sel.primary(),k=m.sel.primIndex),a.unit=="rectangle")a.addNew||(y=new we(l,l)),l=vs(e,s,!0,!0),k=-1;else{var M=Jc(e,l,a.unit);a.extend?y=Zl(y,M.anchor,M.head,a.extend):y=M}a.addNew?k==-1?(k=P.length,ii(m,Vi(e,P.concat([y]),k),{scroll:!1,origin:"*mouse"})):P.length>1&&P[k].empty()&&a.unit=="char"&&!a.extend?(ii(m,Vi(e,P.slice(0,k).concat(P.slice(k+1)),0),{scroll:!1,origin:"*mouse"}),C=m.sel):Jl(m,k,y,he):(k=0,ii(m,new Ii([y],0),he),C=m.sel);var G=l;function et(Mt){if(Bt(G,Mt)!=0)if(G=Mt,a.unit=="rectangle"){for(var Gt=[],ne=e.options.tabSize,te=Y(Kt(m,l.line).text,l.ch,ne),fe=Y(Kt(m,Mt.line).text,Mt.ch,ne),ke=Math.min(te,fe),Ke=Math.max(te,fe),Le=Math.min(l.line,Mt.line),Si=Math.min(e.lastLine(),Math.max(l.line,Mt.line));Le<=Si;Le++){var di=Kt(m,Le).text,He=Dt(di,ke,ne);ke==Ke?Gt.push(new we(ut(Le,He),ut(Le,He))):di.length>He&&Gt.push(new we(ut(Le,He),ut(Le,Dt(di,Ke,ne))))}Gt.length||Gt.push(new we(l,l)),ii(m,Vi(e,C.ranges.slice(0,k).concat(Gt),k),{origin:"*mouse",scroll:!1}),e.scrollIntoView(Mt)}else{var fi=y,ti=Jc(e,Mt,a.unit),Fe=fi.anchor,$e;Bt(ti.anchor,Fe)>0?($e=ti.head,Fe=lr(fi.from(),ti.anchor)):($e=ti.anchor,Fe=hi(fi.to(),ti.head));var Me=C.ranges.slice(0);Me[k]=$g(e,new we(ue(m,Fe),$e)),ii(m,Vi(e,Me,k),he)}}var Z=u.wrapper.getBoundingClientRect(),ft=0;function bt(Mt){var Gt=++ft,ne=vs(e,Mt,!0,a.unit=="rectangle");if(ne)if(Bt(ne,G)!=0){e.curOp.focus=jt(me(e)),et(ne);var te=wa(u,m);(ne.line>=te.to||ne.line<te.from)&&setTimeout(qe(e,function(){ft==Gt&&bt(Mt)}),150)}else{var fe=Mt.clientY<Z.top?-20:Mt.clientY>Z.bottom?20:0;fe&&setTimeout(qe(e,function(){ft==Gt&&(u.scroller.scrollTop+=fe,bt(Mt))}),50)}}function It(Mt){e.state.selectingText=!1,ft=1/0,Mt&&(Be(Mt),u.input.focus()),je(u.wrapper.ownerDocument,"mousemove",Wt),je(u.wrapper.ownerDocument,"mouseup",zt),m.history.lastSelOrigin=null}var Wt=qe(e,function(Mt){Mt.buttons===0||!ji(Mt)?It(Mt):bt(Mt)}),zt=qe(e,It);e.state.selectingText=zt,Et(u.wrapper.ownerDocument,"mousemove",Wt),Et(u.wrapper.ownerDocument,"mouseup",zt)}function $g(e,s){var l=s.anchor,a=s.head,u=Kt(e.doc,l.line);if(Bt(l,a)==0&&l.sticky==a.sticky)return s;var m=$t(u);if(!m)return s;var y=ie(m,l.ch,l.sticky),k=m[y];if(k.from!=l.ch&&k.to!=l.ch)return s;var C=y+(k.from==l.ch==(k.level!=1)?0:1);if(C==0||C==m.length)return s;var P;if(a.line!=l.line)P=(a.line-l.line)*(e.doc.direction=="ltr"?1:-1)>0;else{var M=ie(m,a.ch,a.sticky),G=M-y||(a.ch-l.ch)*(k.level==1?-1:1);M==C-1||M==C?P=G<0:P=G>0}var et=m[C+(P?-1:0)],Z=P==(et.level==1),ft=Z?et.from:et.to,bt=Z?"after":"before";return l.ch==ft&&l.sticky==bt?s:new we(new ut(l.line,ft,bt),a)}function td(e,s,l,a){var u,m;if(s.touches)u=s.touches[0].clientX,m=s.touches[0].clientY;else try{u=s.clientX,m=s.clientY}catch{return!1}if(u>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;a&&Be(s);var y=e.display,k=y.lineDiv.getBoundingClientRect();if(m>k.bottom||!Ge(e,l))return Xe(s);m-=k.top-y.viewOffset;for(var C=0;C<e.display.gutterSpecs.length;++C){var P=y.gutters.childNodes[C];if(P&&P.getBoundingClientRect().right>=u){var M=j(e.doc,m),G=e.display.gutterSpecs[C];return Pe(e,l,e,M,G.className,s),Xe(s)}}}function rh(e,s){return td(e,s,"gutterClick",!0)}function ed(e,s){kn(e.display,s)||zg(e,s)||ve(e,s,"contextmenu")||Tt||e.display.input.onContextMenu(s)}function zg(e,s){return Ge(e,"gutterContextMenu")?td(e,s,"gutterContextMenu",!1):!1}function nd(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),ao(e)}var Cr={toString:function(){return"CodeMirror.Init"}},sd={},Wa={};function Fg(e){var s=e.optionHandlers;function l(a,u,m,y){e.defaults[a]=u,m&&(s[a]=y?function(k,C,P){P!=Cr&&m(k,C,P)}:m)}e.defineOption=l,e.Init=Cr,l("value","",function(a,u){return a.setValue(u)},!0),l("mode",null,function(a,u){a.doc.modeOption=u,Vl(a)},!0),l("indentUnit",2,Vl,!0),l("indentWithTabs",!1),l("smartIndent",!0),l("tabSize",4,function(a){mo(a),ao(a),ui(a)},!0),l("lineSeparator",null,function(a,u){if(a.doc.lineSep=u,!!u){var m=[],y=a.doc.first;a.doc.iter(function(C){for(var P=0;;){var M=C.text.indexOf(u,P);if(M==-1)break;P=M+u.length,m.push(ut(y,M))}y++});for(var k=m.length-1;k>=0;k--)wr(a.doc,u,m[k],ut(m[k].line,m[k].ch+u.length))}}),l("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\u202d\u202e\u2066\u2067\u2069\ufeff\ufff9-\ufffc]/g,function(a,u,m){a.state.specialChars=new RegExp(u.source+(u.test("	")?"":"|	"),"g"),m!=Cr&&a.refresh()}),l("specialCharPlaceholder",vp,function(a){return a.refresh()},!0),l("electricChars",!0),l("inputStyle",F?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),l("spellcheck",!1,function(a,u){return a.getInputField().spellcheck=u},!0),l("autocorrect",!1,function(a,u){return a.getInputField().autocorrect=u},!0),l("autocapitalize",!1,function(a,u){return a.getInputField().autocapitalize=u},!0),l("rtlMoveVisually",!ot),l("wholeLineUpdateBefore",!0),l("theme","default",function(a){nd(a),go(a)},!0),l("keyMap","default",function(a,u,m){var y=Oa(u),k=m!=Cr&&Oa(m);k&&k.detach&&k.detach(a,y),y.attach&&y.attach(a,k||null)}),l("extraKeys",null),l("configureMouse",null),l("lineWrapping",!1,Gg,!0),l("gutters",[],function(a,u){a.display.gutterSpecs=Yl(u,a.options.lineNumbers),go(a)},!0),l("fixedGutter",!0,function(a,u){a.display.gutters.style.left=u?Al(a.display)+"px":"0",a.refresh()},!0),l("coverGutterNextToScrollbar",!1,function(a){return mr(a)},!0),l("scrollbarStyle","native",function(a){rc(a),mr(a),a.display.scrollbars.setScrollTop(a.doc.scrollTop),a.display.scrollbars.setScrollLeft(a.doc.scrollLeft)},!0),l("lineNumbers",!1,function(a,u){a.display.gutterSpecs=Yl(a.options.gutters,u),go(a)},!0),l("firstLineNumber",1,go,!0),l("lineNumberFormatter",function(a){return a},go,!0),l("showCursorWhenSelecting",!1,lo,!0),l("resetSelectionOnContextMenu",!0),l("lineWiseCopyCut",!0),l("pasteLinesPerSelection",!0),l("selectionsMayTouch",!1),l("readOnly",!1,function(a,u){u=="nocursor"&&(pr(a),a.display.input.blur()),a.display.input.readOnlyChanged(u)}),l("screenReaderLabel",null,function(a,u){u=u===""?null:u,a.display.input.screenReaderLabelChanged(u)}),l("disableInput",!1,function(a,u){u||a.display.input.reset()},!0),l("dragDrop",!0,jg),l("allowDropFileTypes",null),l("cursorBlinkRate",530),l("cursorScrollMargin",0),l("cursorHeight",1,lo,!0),l("singleCursorHeightPerLine",!0,lo,!0),l("workTime",100),l("workDelay",100),l("flattenSpans",!0,mo,!0),l("addModeClass",!1,mo,!0),l("pollInterval",100),l("undoDepth",200,function(a,u){return a.doc.history.undoDepth=u}),l("historyEventDelay",1250),l("viewportMargin",10,function(a){return a.refresh()},!0),l("maxHighlightLength",1e4,mo,!0),l("moveInputWithCursor",!0,function(a,u){u||a.display.input.resetPosition()}),l("tabindex",null,function(a,u){return a.display.input.getField().tabIndex=u||""}),l("autofocus",null),l("direction","ltr",function(a,u){return a.doc.setDirection(u)},!0),l("phrases",null)}function jg(e,s,l){var a=l&&l!=Cr;if(!s!=!a){var u=e.display.dragFunctions,m=s?Et:je;m(e.display.scroller,"dragstart",u.start),m(e.display.scroller,"dragenter",u.enter),m(e.display.scroller,"dragover",u.over),m(e.display.scroller,"dragleave",u.leave),m(e.display.scroller,"drop",u.drop)}}function Gg(e){e.options.lineWrapping?(Nt(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(Pt(e.display.wrapper,"CodeMirror-wrap"),Dl(e)),Nl(e),ui(e),ao(e),setTimeout(function(){return mr(e)},100)}function Ie(e,s){var l=this;if(!(this instanceof Ie))return new Ie(e,s);this.options=s=s?N(s):{},N(sd,s,!1);var a=s.value;typeof a=="string"?a=new ci(a,s.mode,null,s.lineSeparator,s.direction):s.mode&&(a.modeOption=s.mode),this.doc=a;var u=new Ie.inputStyles[s.inputStyle](this),m=this.display=new ng(e,a,u,s);m.wrapper.CodeMirror=this,nd(this),s.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),rc(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new vt,keySeq:null,specialChars:null},s.autofocus&&!F&&m.input.focus(),w&&D<11&&setTimeout(function(){return l.display.input.reset(!0)},20),Xg(this),xg(),Ss(this),this.curOp.forceUpdate=!0,gc(this,a),s.autofocus&&!F||this.hasFocus()?setTimeout(function(){l.hasFocus()&&!l.state.focused&&$l(l)},20):pr(this);for(var y in Wa)Wa.hasOwnProperty(y)&&Wa[y](this,s[y],Cr);lc(this),s.finishInit&&s.finishInit(this);for(var k=0;k<oh.length;++k)oh[k](this);xs(this),T&&s.lineWrapping&&getComputedStyle(m.lineDiv).textRendering=="optimizelegibility"&&(m.lineDiv.style.textRendering="auto")}Ie.defaults=sd,Ie.optionHandlers=Wa;function Xg(e){var s=e.display;Et(s.scroller,"mousedown",qe(e,Zc)),w&&D<11?Et(s.scroller,"dblclick",qe(e,function(C){if(!ve(e,C)){var P=vs(e,C);if(!(!P||rh(e,C)||kn(e.display,C))){Be(C);var M=e.findWordAt(P);Ta(e.doc,M.anchor,M.head)}}})):Et(s.scroller,"dblclick",function(C){return ve(e,C)||Be(C)}),Et(s.scroller,"contextmenu",function(C){return ed(e,C)}),Et(s.input.getField(),"contextmenu",function(C){s.scroller.contains(C.target)||ed(e,C)});var l,a={end:0};function u(){s.activeTouch&&(l=setTimeout(function(){return s.activeTouch=null},1e3),a=s.activeTouch,a.end=+new Date)}function m(C){if(C.touches.length!=1)return!1;var P=C.touches[0];return P.radiusX<=1&&P.radiusY<=1}function y(C,P){if(P.left==null)return!0;var M=P.left-C.left,G=P.top-C.top;return M*M+G*G>20*20}Et(s.scroller,"touchstart",function(C){if(!ve(e,C)&&!m(C)&&!rh(e,C)){s.input.ensurePolled(),clearTimeout(l);var P=+new Date;s.activeTouch={start:P,moved:!1,prev:P-a.end<=300?a:null},C.touches.length==1&&(s.activeTouch.left=C.touches[0].pageX,s.activeTouch.top=C.touches[0].pageY)}}),Et(s.scroller,"touchmove",function(){s.activeTouch&&(s.activeTouch.moved=!0)}),Et(s.scroller,"touchend",function(C){var P=s.activeTouch;if(P&&!kn(s,C)&&P.left!=null&&!P.moved&&new Date-P.start<300){var M=e.coordsChar(s.activeTouch,"page"),G;!P.prev||y(P,P.prev)?G=new we(M,M):!P.prev.prev||y(P,P.prev.prev)?G=e.findWordAt(M):G=new we(ut(M.line,0),ue(e.doc,ut(M.line+1,0))),e.setSelection(G.anchor,G.head),e.focus(),Be(C)}u()}),Et(s.scroller,"touchcancel",u),Et(s.scroller,"scroll",function(){s.scroller.clientHeight&&(uo(e,s.scroller.scrollTop),ys(e,s.scroller.scrollLeft,!0),Pe(e,"scroll",e))}),Et(s.scroller,"mousewheel",function(C){return cc(e,C)}),Et(s.scroller,"DOMMouseScroll",function(C){return cc(e,C)}),Et(s.wrapper,"scroll",function(){return s.wrapper.scrollTop=s.wrapper.scrollLeft=0}),s.dragFunctions={enter:function(C){ve(e,C)||yi(C)},over:function(C){ve(e,C)||(Sg(e,C),yi(C))},start:function(C){return wg(e,C)},drop:qe(e,yg),leave:function(C){ve(e,C)||Hc(e)}};var k=s.input.getField();Et(k,"keyup",function(C){return Kc.call(e,C)}),Et(k,"keydown",qe(e,Vc)),Et(k,"keypress",qe(e,Qc)),Et(k,"focus",function(C){return $l(e,C)}),Et(k,"blur",function(C){return pr(e,C)})}var oh=[];Ie.defineInitHook=function(e){return oh.push(e)};function Io(e,s,l,a){var u=e.doc,m;l==null&&(l="add"),l=="smart"&&(u.mode.indent?m=io(e,s).state:l="prev");var y=e.options.tabSize,k=Kt(u,s),C=Y(k.text,null,y);k.stateAfter&&(k.stateAfter=null);var P=k.text.match(/^\s*/)[0],M;if(!a&&!/\S/.test(k.text))M=0,l="not";else if(l=="smart"&&(M=u.mode.indent(m,k.text.slice(P.length),k.text),M==Yt||M>150)){if(!a)return;l="prev"}l=="prev"?s>u.first?M=Y(Kt(u,s-1).text,null,y):M=0:l=="add"?M=C+e.options.indentUnit:l=="subtract"?M=C-e.options.indentUnit:typeof l=="number"&&(M=C+l),M=Math.max(0,M);var G="",et=0;if(e.options.indentWithTabs)for(var Z=Math.floor(M/y);Z;--Z)et+=y,G+="	";if(et<M&&(G+=qt(M-et)),G!=P)return wr(u,G,ut(s,0),ut(s,P.length),"+input"),k.stateAfter=null,!0;for(var ft=0;ft<u.sel.ranges.length;ft++){var bt=u.sel.ranges[ft];if(bt.head.line==s&&bt.head.ch<P.length){var It=ut(s,P.length);Jl(u,ft,new we(It,It));break}}}var Ki=null;function Ma(e){Ki=e}function ah(e,s,l,a,u){var m=e.doc;e.display.shift=!1,a||(a=m.sel);var y=+new Date-200,k=u=="paste"||e.state.pasteIncoming>y,C=Mi(s),P=null;if(k&&a.ranges.length>1)if(Ki&&Ki.text.join(`
`)==s){if(a.ranges.length%Ki.text.length==0){P=[];for(var M=0;M<Ki.text.length;M++)P.push(m.splitLines(Ki.text[M]))}}else C.length==a.ranges.length&&e.options.pasteLinesPerSelection&&(P=o(C,function(Wt){return[Wt]}));for(var G=e.curOp.updateInput,et=a.ranges.length-1;et>=0;et--){var Z=a.ranges[et],ft=Z.from(),bt=Z.to();Z.empty()&&(l&&l>0?ft=ut(ft.line,ft.ch-l):e.state.overwrite&&!k?bt=ut(bt.line,Math.min(Kt(m,bt.line).text.length,bt.ch+Ft(C).length)):k&&Ki&&Ki.lineWise&&Ki.text.join(`
`)==C.join(`
`)&&(ft=bt=ut(ft.line,0)));var It={from:ft,to:bt,text:P?P[et%P.length]:C,origin:u||(k?"paste":e.state.cutIncoming>y?"cut":"+input")};yr(e.doc,It),Ye(e,"inputRead",e,It)}s&&!k&&od(e,s),gr(e),e.curOp.updateInput<2&&(e.curOp.updateInput=G),e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=-1}function rd(e,s){var l=e.clipboardData&&e.clipboardData.getData("Text");if(l)return e.preventDefault(),!s.isReadOnly()&&!s.options.disableInput&&s.hasFocus()&&wi(s,function(){return ah(s,l,0,null,"paste")}),!0}function od(e,s){if(!(!e.options.electricChars||!e.options.smartIndent))for(var l=e.doc.sel,a=l.ranges.length-1;a>=0;a--){var u=l.ranges[a];if(!(u.head.ch>100||a&&l.ranges[a-1].head.line==u.head.line)){var m=e.getModeAt(u.head),y=!1;if(m.electricChars){for(var k=0;k<m.electricChars.length;k++)if(s.indexOf(m.electricChars.charAt(k))>-1){y=Io(e,u.head.line,"smart");break}}else m.electricInput&&m.electricInput.test(Kt(e.doc,u.head.line).text.slice(0,u.head.ch))&&(y=Io(e,u.head.line,"smart"));y&&Ye(e,"electricInput",e,u.head.line)}}}function ad(e){for(var s=[],l=[],a=0;a<e.doc.sel.ranges.length;a++){var u=e.doc.sel.ranges[a].head.line,m={anchor:ut(u,0),head:ut(u+1,0)};l.push(m),s.push(e.getRange(m.anchor,m.head))}return{text:s,ranges:l}}function lh(e,s,l,a){e.setAttribute("autocorrect",l?"on":"off"),e.setAttribute("autocapitalize",a?"on":"off"),e.setAttribute("spellcheck",!!s)}function ld(){var e=z("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),s=z("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return T?e.style.width="1000px":e.setAttribute("wrap","off"),A&&(e.style.border="1px solid black"),s}function Ug(e){var s=e.optionHandlers,l=e.helpers={};e.prototype={constructor:e,focus:function(){Q(this).focus(),this.display.input.focus()},setOption:function(a,u){var m=this.options,y=m[a];m[a]==u&&a!="mode"||(m[a]=u,s.hasOwnProperty(a)&&qe(this,s[a])(this,u,y),Pe(this,"optionChange",this,a))},getOption:function(a){return this.options[a]},getDoc:function(){return this.doc},addKeyMap:function(a,u){this.state.keyMaps[u?"push":"unshift"](Oa(a))},removeKeyMap:function(a){for(var u=this.state.keyMaps,m=0;m<u.length;++m)if(u[m]==a||u[m].name==a)return u.splice(m,1),!0},addOverlay:ri(function(a,u){var m=a.token?a:e.getMode(this.options,a);if(m.startState)throw new Error("Overlays may not be stateful.");d(this.state.overlays,{mode:m,modeSpec:a,opaque:u&&u.opaque,priority:u&&u.priority||0},function(y){return y.priority}),this.state.modeGen++,ui(this)}),removeOverlay:ri(function(a){for(var u=this.state.overlays,m=0;m<u.length;++m){var y=u[m].modeSpec;if(y==a||typeof a=="string"&&y.name==a){u.splice(m,1),this.state.modeGen++,ui(this);return}}}),indentLine:ri(function(a,u,m){typeof u!="string"&&typeof u!="number"&&(u==null?u=this.options.smartIndent?"smart":"prev":u=u?"add":"subtract"),mt(this.doc,a)&&Io(this,a,u,m)}),indentSelection:ri(function(a){for(var u=this.doc.sel.ranges,m=-1,y=0;y<u.length;y++){var k=u[y];if(k.empty())k.head.line>m&&(Io(this,k.head.line,a,!0),m=k.head.line,y==this.doc.sel.primIndex&&gr(this));else{var C=k.from(),P=k.to(),M=Math.max(m,C.line);m=Math.min(this.lastLine(),P.line-(P.ch?0:1))+1;for(var G=M;G<m;++G)Io(this,G,a);var et=this.doc.sel.ranges;C.ch==0&&u.length==et.length&&et[y].from().ch>0&&Jl(this.doc,y,new we(C,et[y].to()),Xt)}}}),getTokenAt:function(a,u){return vu(this,a,u)},getLineTokens:function(a,u){return vu(this,ut(a),u,!0)},getTokenTypeAt:function(a){a=ue(this.doc,a);var u=pu(this,Kt(this.doc,a.line)),m=0,y=(u.length-1)/2,k=a.ch,C;if(k==0)C=u[2];else for(;;){var P=m+y>>1;if((P?u[P*2-1]:0)>=k)y=P;else if(u[P*2+1]<k)m=P+1;else{C=u[P*2+2];break}}var M=C?C.indexOf("overlay "):-1;return M<0?C:M==0?null:C.slice(0,M-1)},getModeAt:function(a){var u=this.doc.mode;return u.innerMode?e.innerMode(u,this.getTokenAt(a).state).mode:u},getHelper:function(a,u){return this.getHelpers(a,u)[0]},getHelpers:function(a,u){var m=[];if(!l.hasOwnProperty(u))return m;var y=l[u],k=this.getModeAt(a);if(typeof k[u]=="string")y[k[u]]&&m.push(y[k[u]]);else if(k[u])for(var C=0;C<k[u].length;C++){var P=y[k[u][C]];P&&m.push(P)}else k.helperType&&y[k.helperType]?m.push(y[k.helperType]):y[k.name]&&m.push(y[k.name]);for(var M=0;M<y._global.length;M++){var G=y._global[M];G.pred(k,this)&&pt(m,G.val)==-1&&m.push(G.val)}return m},getStateAfter:function(a,u){var m=this.doc;return a=cu(m,a??m.first+m.size-1),io(this,a+1,u).state},cursorCoords:function(a,u){var m,y=this.doc.sel.primary();return a==null?m=y.head:typeof a=="object"?m=ue(this.doc,a):m=a?y.from():y.to(),qi(this,m,u||"page")},charCoords:function(a,u){return ma(this,ue(this.doc,a),u||"page")},coordsChar:function(a,u){return a=Uu(this,a,u||"page"),El(this,a.left,a.top)},lineAtHeight:function(a,u){return a=Uu(this,{top:a,left:0},u||"page").top,j(this.doc,a+this.display.viewOffset)},heightAtLine:function(a,u,m){var y=!1,k;if(typeof a=="number"){var C=this.doc.first+this.doc.size-1;a<this.doc.first?a=this.doc.first:a>C&&(a=C,y=!0),k=Kt(this.doc,a)}else k=a;return ga(this,k,{top:0,left:0},u||"page",m||y).top+(y?this.doc.height-xn(k):0)},defaultTextHeight:function(){return dr(this.display)},defaultCharWidth:function(){return fr(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(a,u,m,y,k){var C=this.display;a=qi(this,ue(this.doc,a));var P=a.bottom,M=a.left;if(u.style.position="absolute",u.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(u),C.sizer.appendChild(u),y=="over")P=a.top;else if(y=="above"||y=="near"){var G=Math.max(C.wrapper.clientHeight,this.doc.height),et=Math.max(C.sizer.clientWidth,C.lineSpace.clientWidth);(y=="above"||a.bottom+u.offsetHeight>G)&&a.top>u.offsetHeight?P=a.top-u.offsetHeight:a.bottom+u.offsetHeight<=G&&(P=a.bottom),M+u.offsetWidth>et&&(M=et-u.offsetWidth)}u.style.top=P+"px",u.style.left=u.style.right="",k=="right"?(M=C.sizer.clientWidth-u.offsetWidth,u.style.right="0px"):(k=="left"?M=0:k=="middle"&&(M=(C.sizer.clientWidth-u.offsetWidth)/2),u.style.left=M+"px"),m&&jp(this,{left:M,top:P,right:M+u.offsetWidth,bottom:P+u.offsetHeight})},triggerOnKeyDown:ri(Vc),triggerOnKeyPress:ri(Qc),triggerOnKeyUp:Kc,triggerOnMouseDown:ri(Zc),execCommand:function(a){if(Do.hasOwnProperty(a))return Do[a].call(null,this)},triggerElectric:ri(function(a){od(this,a)}),findPosH:function(a,u,m,y){var k=1;u<0&&(k=-1,u=-u);for(var C=ue(this.doc,a),P=0;P<u&&(C=hh(this.doc,C,k,m,y),!C.hitSide);++P);return C},moveH:ri(function(a,u){var m=this;this.extendSelectionsBy(function(y){return m.display.shift||m.doc.extend||y.empty()?hh(m.doc,y.head,a,u,m.options.rtlMoveVisually):a<0?y.from():y.to()},gt)}),deleteH:ri(function(a,u){var m=this.doc.sel,y=this.doc;m.somethingSelected()?y.replaceSelection("",null,"+delete"):kr(this,function(k){var C=hh(y,k.head,a,u,!1);return a<0?{from:C,to:k.head}:{from:k.head,to:C}})}),findPosV:function(a,u,m,y){var k=1,C=y;u<0&&(k=-1,u=-u);for(var P=ue(this.doc,a),M=0;M<u;++M){var G=qi(this,P,"div");if(C==null?C=G.left:G.left=C,P=hd(this,G,k,m),P.hitSide)break}return P},moveV:ri(function(a,u){var m=this,y=this.doc,k=[],C=!this.display.shift&&!y.extend&&y.sel.somethingSelected();if(y.extendSelectionsBy(function(M){if(C)return a<0?M.from():M.to();var G=qi(m,M.head,"div");M.goalColumn!=null&&(G.left=M.goalColumn),k.push(G.left);var et=hd(m,G,a,u);return u=="page"&&M==y.sel.primary()&&Fl(m,ma(m,et,"div").top-G.top),et},gt),k.length)for(var P=0;P<y.sel.ranges.length;P++)y.sel.ranges[P].goalColumn=k[P]}),findWordAt:function(a){var u=this.doc,m=Kt(u,a.line).text,y=a.ch,k=a.ch;if(m){var C=this.getHelper(a,"wordChars");(a.sticky=="before"||k==m.length)&&y?--y:++k;for(var P=m.charAt(y),M=O(P,C)?function(G){return O(G,C)}:/\s/.test(P)?function(G){return/\s/.test(G)}:function(G){return!/\s/.test(G)&&!O(G)};y>0&&M(m.charAt(y-1));)--y;for(;k<m.length&&M(m.charAt(k));)++k}return new we(ut(a.line,y),ut(a.line,k))},toggleOverwrite:function(a){a!=null&&a==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?Nt(this.display.cursorDiv,"CodeMirror-overwrite"):Pt(this.display.cursorDiv,"CodeMirror-overwrite"),Pe(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==jt(me(this))},isReadOnly:function(){return!!(this.options.readOnly||this.doc.cantEdit)},scrollTo:ri(function(a,u){ho(this,a,u)}),getScrollInfo:function(){var a=this.display.scroller;return{left:a.scrollLeft,top:a.scrollTop,height:a.scrollHeight-on(this)-this.display.barHeight,width:a.scrollWidth-on(this)-this.display.barWidth,clientHeight:Pl(this),clientWidth:gs(this)}},scrollIntoView:ri(function(a,u){a==null?(a={from:this.doc.sel.primary().head,to:null},u==null&&(u=this.options.cursorScrollMargin)):typeof a=="number"?a={from:ut(a,0),to:null}:a.from==null&&(a={from:a,to:null}),a.to||(a.to=a.from),a.margin=u||0,a.from.line!=null?Gp(this,a):ec(this,a.from,a.to,a.margin)}),setSize:ri(function(a,u){var m=this,y=function(C){return typeof C=="number"||/^\d+$/.test(String(C))?C+"px":C};a!=null&&(this.display.wrapper.style.width=y(a)),u!=null&&(this.display.wrapper.style.height=y(u)),this.options.lineWrapping&&ju(this);var k=this.display.viewFrom;this.doc.iter(k,this.display.viewTo,function(C){if(C.widgets){for(var P=0;P<C.widgets.length;P++)if(C.widgets[P].noHScroll){Xn(m,k,"widget");break}}++k}),this.curOp.forceUpdate=!0,Pe(this,"refresh",this)}),operation:function(a){return wi(this,a)},startOperation:function(){return Ss(this)},endOperation:function(){return xs(this)},refresh:ri(function(){var a=this.display.cachedTextHeight;ui(this),this.curOp.forceUpdate=!0,ao(this),ho(this,this.doc.scrollLeft,this.doc.scrollTop),Xl(this.display),(a==null||Math.abs(a-dr(this.display))>.5||this.options.lineWrapping)&&Nl(this),Pe(this,"refresh",this)}),swapDoc:ri(function(a){var u=this.doc;return u.cm=null,this.state.selectingText&&this.state.selectingText(),gc(this,a),ao(this),this.display.input.reset(),ho(this,a.scrollLeft,a.scrollTop),this.curOp.forceScroll=!0,Ye(this,"swapDoc",this,u),u}),phrase:function(a){var u=this.options.phrases;return u&&Object.prototype.hasOwnProperty.call(u,a)?u[a]:a},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Je(e),e.registerHelper=function(a,u,m){l.hasOwnProperty(a)||(l[a]=e[a]={_global:[]}),l[a][u]=m},e.registerGlobalHelper=function(a,u,m,y){e.registerHelper(a,u,y),l[a]._global.push({pred:m,val:y})}}function hh(e,s,l,a,u){var m=s,y=l,k=Kt(e,s.line),C=u&&e.direction=="rtl"?-l:l;function P(){var zt=s.line+C;return zt<e.first||zt>=e.first+e.size?!1:(s=new ut(zt,s.ch,s.sticky),k=Kt(e,zt))}function M(zt){var Mt;if(a=="codepoint"){var Gt=k.text.charCodeAt(s.ch+(l>0?0:-1));if(isNaN(Gt))Mt=null;else{var ne=l>0?Gt>=55296&&Gt<56320:Gt>=56320&&Gt<57343;Mt=new ut(s.line,Math.max(0,Math.min(k.text.length,s.ch+l*(ne?2:1))),-l)}}else u?Mt=_g(e.cm,k,s,l):Mt=eh(k,s,l);if(Mt==null)if(!zt&&P())s=ih(u,e.cm,k,s.line,C);else return!1;else s=Mt;return!0}if(a=="char"||a=="codepoint")M();else if(a=="column")M(!0);else if(a=="word"||a=="group")for(var G=null,et=a=="group",Z=e.cm&&e.cm.getHelper(s,"wordChars"),ft=!0;!(l<0&&!M(!ft));ft=!1){var bt=k.text.charAt(s.ch)||`
`,It=O(bt,Z)?"w":et&&bt==`
`?"n":!et||/\s/.test(bt)?null:"p";if(et&&!ft&&!It&&(It="s"),G&&G!=It){l<0&&(l=1,M(),s.sticky="after");break}if(It&&(G=It),l>0&&!M(!ft))break}var Wt=Pa(e,s,m,y,!0);return ye(m,Wt)&&(Wt.hitSide=!0),Wt}function hd(e,s,l,a){var u=e.doc,m=s.left,y;if(a=="page"){var k=Math.min(e.display.wrapper.clientHeight,Q(e).innerHeight||u(e).documentElement.clientHeight),C=Math.max(k-.5*dr(e.display),3);y=(l>0?s.bottom:s.top)+l*C}else a=="line"&&(y=l>0?s.bottom+3:s.top-3);for(var P;P=El(e,m,y),!!P.outside;){if(l<0?y<=0:y>=u.height){P.hitSide=!0;break}y+=l*5}return P}var Se=function(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new vt,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};Se.prototype.init=function(e){var s=this,l=this,a=l.cm,u=l.div=e.lineDiv;u.contentEditable=!0,lh(u,a.options.spellcheck,a.options.autocorrect,a.options.autocapitalize);function m(k){for(var C=k.target;C;C=C.parentNode){if(C==u)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(C.className))break}return!1}Et(u,"paste",function(k){!m(k)||ve(a,k)||rd(k,a)||D<=11&&setTimeout(qe(a,function(){return s.updateFromDOM()}),20)}),Et(u,"compositionstart",function(k){s.composing={data:k.data,done:!1}}),Et(u,"compositionupdate",function(k){s.composing||(s.composing={data:k.data,done:!1})}),Et(u,"compositionend",function(k){s.composing&&(k.data!=s.composing.data&&s.readFromDOMSoon(),s.composing.done=!0)}),Et(u,"touchstart",function(){return l.forceCompositionEnd()}),Et(u,"input",function(){s.composing||s.readFromDOMSoon()});function y(k){if(!(!m(k)||ve(a,k))){if(a.somethingSelected())Ma({lineWise:!1,text:a.getSelections()}),k.type=="cut"&&a.replaceSelection("",null,"cut");else if(a.options.lineWiseCopyCut){var C=ad(a);Ma({lineWise:!0,text:C.text}),k.type=="cut"&&a.operation(function(){a.setSelections(C.ranges,0,Xt),a.replaceSelection("",null,"cut")})}else return;if(k.clipboardData){k.clipboardData.clearData();var P=Ki.text.join(`
`);if(k.clipboardData.setData("Text",P),k.clipboardData.getData("Text")==P){k.preventDefault();return}}var M=ld(),G=M.firstChild;lh(G),a.display.lineSpace.insertBefore(M,a.display.lineSpace.firstChild),G.value=Ki.text.join(`
`);var et=jt(rt(u));de(G),setTimeout(function(){a.display.lineSpace.removeChild(M),et.focus(),et==u&&l.showPrimarySelection()},50)}}Et(u,"copy",y),Et(u,"cut",y)},Se.prototype.screenReaderLabelChanged=function(e){e?this.div.setAttribute("aria-label",e):this.div.removeAttribute("aria-label")},Se.prototype.prepareSelection=function(){var e=Zu(this.cm,!1);return e.focus=jt(rt(this.div))==this.div,e},Se.prototype.showSelection=function(e,s){!e||!this.cm.display.view.length||((e.focus||s)&&this.showPrimarySelection(),this.showMultipleSelections(e))},Se.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},Se.prototype.showPrimarySelection=function(){var e=this.getSelection(),s=this.cm,l=s.doc.sel.primary(),a=l.from(),u=l.to();if(s.display.viewTo==s.display.viewFrom||a.line>=s.display.viewTo||u.line<s.display.viewFrom){e.removeAllRanges();return}var m=Aa(s,e.anchorNode,e.anchorOffset),y=Aa(s,e.focusNode,e.focusOffset);if(!(m&&!m.bad&&y&&!y.bad&&Bt(lr(m,y),a)==0&&Bt(hi(m,y),u)==0)){var k=s.display.view,C=a.line>=s.display.viewFrom&&ud(s,a)||{node:k[0].measure.map[2],offset:0},P=u.line<s.display.viewTo&&ud(s,u);if(!P){var M=k[k.length-1].measure,G=M.maps?M.maps[M.maps.length-1]:M.map;P={node:G[G.length-1],offset:G[G.length-2]-G[G.length-3]}}if(!C||!P){e.removeAllRanges();return}var et=e.rangeCount&&e.getRangeAt(0),Z;try{Z=Zt(C.node,C.offset,P.offset,P.node)}catch{}Z&&(!h&&s.state.focused?(e.collapse(C.node,C.offset),Z.collapsed||(e.removeAllRanges(),e.addRange(Z))):(e.removeAllRanges(),e.addRange(Z)),et&&e.anchorNode==null?e.addRange(et):h&&this.startGracePeriod()),this.rememberSelection()}},Se.prototype.startGracePeriod=function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation(function(){return e.cm.curOp.selectionChanged=!0})},20)},Se.prototype.showMultipleSelections=function(e){lt(this.cm.display.cursorDiv,e.cursors),lt(this.cm.display.selectionDiv,e.selection)},Se.prototype.rememberSelection=function(){var e=this.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},Se.prototype.selectionInEditor=function(){var e=this.getSelection();if(!e.rangeCount)return!1;var s=e.getRangeAt(0).commonAncestorContainer;return ee(this.div,s)},Se.prototype.focus=function(){this.cm.options.readOnly!="nocursor"&&((!this.selectionInEditor()||jt(rt(this.div))!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},Se.prototype.blur=function(){this.div.blur()},Se.prototype.getField=function(){return this.div},Se.prototype.supportsTouch=function(){return!0},Se.prototype.receivedFocus=function(){var e=this,s=this;this.selectionInEditor()?setTimeout(function(){return e.pollSelection()},20):wi(this.cm,function(){return s.cm.curOp.selectionChanged=!0});function l(){s.cm.state.focused&&(s.pollSelection(),s.polling.set(s.cm.options.pollInterval,l))}this.polling.set(this.cm.options.pollInterval,l)},Se.prototype.selectionChanged=function(){var e=this.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},Se.prototype.pollSelection=function(){if(!(this.readDOMTimeout!=null||this.gracePeriod||!this.selectionChanged())){var e=this.getSelection(),s=this.cm;if(q&&W&&this.cm.display.gutterSpecs.length&&Yg(e.anchorNode)){this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),this.focus();return}if(!this.composing){this.rememberSelection();var l=Aa(s,e.anchorNode,e.anchorOffset),a=Aa(s,e.focusNode,e.focusOffset);l&&a&&wi(s,function(){ii(s.doc,Yn(l,a),Xt),(l.bad||a.bad)&&(s.curOp.selectionChanged=!0)})}}},Se.prototype.pollContent=function(){this.readDOMTimeout!=null&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var e=this.cm,s=e.display,l=e.doc.sel.primary(),a=l.from(),u=l.to();if(a.ch==0&&a.line>e.firstLine()&&(a=ut(a.line-1,Kt(e.doc,a.line-1).length)),u.ch==Kt(e.doc,u.line).text.length&&u.line<e.lastLine()&&(u=ut(u.line+1,0)),a.line<s.viewFrom||u.line>s.viewTo-1)return!1;var m,y,k;a.line==s.viewFrom||(m=bs(e,a.line))==0?(y=I(s.view[0].line),k=s.view[0].node):(y=I(s.view[m].line),k=s.view[m-1].node.nextSibling);var C=bs(e,u.line),P,M;if(C==s.view.length-1?(P=s.viewTo-1,M=s.lineDiv.lastChild):(P=I(s.view[C+1].line)-1,M=s.view[C+1].node.previousSibling),!k)return!1;for(var G=e.doc.splitLines(qg(e,k,M,y,P)),et=wn(e.doc,ut(y,0),ut(P,Kt(e.doc,P).text.length));G.length>1&&et.length>1;)if(Ft(G)==Ft(et))G.pop(),et.pop(),P--;else if(G[0]==et[0])G.shift(),et.shift(),y++;else break;for(var Z=0,ft=0,bt=G[0],It=et[0],Wt=Math.min(bt.length,It.length);Z<Wt&&bt.charCodeAt(Z)==It.charCodeAt(Z);)++Z;for(var zt=Ft(G),Mt=Ft(et),Gt=Math.min(zt.length-(G.length==1?Z:0),Mt.length-(et.length==1?Z:0));ft<Gt&&zt.charCodeAt(zt.length-ft-1)==Mt.charCodeAt(Mt.length-ft-1);)++ft;if(G.length==1&&et.length==1&&y==a.line)for(;Z&&Z>a.ch&&zt.charCodeAt(zt.length-ft-1)==Mt.charCodeAt(Mt.length-ft-1);)Z--,ft++;G[G.length-1]=zt.slice(0,zt.length-ft).replace(/^\u200b+/,""),G[0]=G[0].slice(Z).replace(/\u200b+$/,"");var ne=ut(y,Z),te=ut(P,et.length?Ft(et).length-ft:0);if(G.length>1||G[0]||Bt(ne,te))return wr(e.doc,G,ne,te,"+input"),!0},Se.prototype.ensurePolled=function(){this.forceCompositionEnd()},Se.prototype.reset=function(){this.forceCompositionEnd()},Se.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},Se.prototype.readFromDOMSoon=function(){var e=this;this.readDOMTimeout==null&&(this.readDOMTimeout=setTimeout(function(){if(e.readDOMTimeout=null,e.composing)if(e.composing.done)e.composing=null;else return;e.updateFromDOM()},80))},Se.prototype.updateFromDOM=function(){var e=this;(this.cm.isReadOnly()||!this.pollContent())&&wi(this.cm,function(){return ui(e.cm)})},Se.prototype.setUneditable=function(e){e.contentEditable="false"},Se.prototype.onKeyPress=function(e){e.charCode==0||this.composing||(e.preventDefault(),this.cm.isReadOnly()||qe(this.cm,ah)(this.cm,String.fromCharCode(e.charCode==null?e.keyCode:e.charCode),0))},Se.prototype.readOnlyChanged=function(e){this.div.contentEditable=String(e!="nocursor")},Se.prototype.onContextMenu=function(){},Se.prototype.resetPosition=function(){},Se.prototype.needsContentAttribute=!0;function ud(e,s){var l=Il(e,s.line);if(!l||l.hidden)return null;var a=Kt(e.doc,s.line),u=Bu(l,a,s.line),m=$t(a,e.doc.direction),y="left";if(m){var k=ie(m,s.ch);y=k%2?"right":"left"}var C=zu(u.map,s.ch,y);return C.offset=C.collapse=="right"?C.end:C.start,C}function Yg(e){for(var s=e;s;s=s.parentNode)if(/CodeMirror-gutter-wrapper/.test(s.className))return!0;return!1}function Dr(e,s){return s&&(e.bad=!0),e}function qg(e,s,l,a,u){var m="",y=!1,k=e.doc.lineSeparator(),C=!1;function P(Z){return function(ft){return ft.id==Z}}function M(){y&&(m+=k,C&&(m+=k),y=C=!1)}function G(Z){Z&&(M(),m+=Z)}function et(Z){if(Z.nodeType==1){var ft=Z.getAttribute("cm-text");if(ft){G(ft);return}var bt=Z.getAttribute("cm-marker"),It;if(bt){var Wt=e.findMarks(ut(a,0),ut(u+1,0),P(+bt));Wt.length&&(It=Wt[0].find(0))&&G(wn(e.doc,It.from,It.to).join(k));return}if(Z.getAttribute("contenteditable")=="false")return;var zt=/^(pre|div|p|li|table|br)$/i.test(Z.nodeName);if(!/^br$/i.test(Z.nodeName)&&Z.textContent.length==0)return;zt&&M();for(var Mt=0;Mt<Z.childNodes.length;Mt++)et(Z.childNodes[Mt]);/^(pre|p)$/i.test(Z.nodeName)&&(C=!0),zt&&(y=!0)}else Z.nodeType==3&&G(Z.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;et(s),s!=l;)s=s.nextSibling,C=!1;return m}function Aa(e,s,l){var a;if(s==e.display.lineDiv){if(a=e.display.lineDiv.childNodes[l],!a)return Dr(e.clipPos(ut(e.display.viewTo-1)),!0);s=null,l=0}else for(a=s;;a=a.parentNode){if(!a||a==e.display.lineDiv)return null;if(a.parentNode&&a.parentNode==e.display.lineDiv)break}for(var u=0;u<e.display.view.length;u++){var m=e.display.view[u];if(m.node==a)return Vg(m,s,l)}}function Vg(e,s,l){var a=e.text.firstChild,u=!1;if(!s||!ee(a,s))return Dr(ut(I(e.line),0),!0);if(s==a&&(u=!0,s=a.childNodes[l],l=0,!s)){var m=e.rest?Ft(e.rest):e.line;return Dr(ut(I(m),m.text.length),u)}var y=s.nodeType==3?s:null,k=s;for(!y&&s.childNodes.length==1&&s.firstChild.nodeType==3&&(y=s.firstChild,l&&(l=y.nodeValue.length));k.parentNode!=a;)k=k.parentNode;var C=e.measure,P=C.maps;function M(It,Wt,zt){for(var Mt=-1;Mt<(P?P.length:0);Mt++)for(var Gt=Mt<0?C.map:P[Mt],ne=0;ne<Gt.length;ne+=3){var te=Gt[ne+2];if(te==It||te==Wt){var fe=I(Mt<0?e.line:e.rest[Mt]),ke=Gt[ne]+zt;return(zt<0||te!=It)&&(ke=Gt[ne+(zt?1:0)]),ut(fe,ke)}}}var G=M(y,k,l);if(G)return Dr(G,u);for(var et=k.nextSibling,Z=y?y.nodeValue.length-l:0;et;et=et.nextSibling){if(G=M(et,et.firstChild,0),G)return Dr(ut(G.line,G.ch-Z),u);Z+=et.textContent.length}for(var ft=k.previousSibling,bt=l;ft;ft=ft.previousSibling){if(G=M(ft,ft.firstChild,-1),G)return Dr(ut(G.line,G.ch+bt),u);bt+=ft.textContent.length}}var Re=function(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new vt,this.hasSelection=!1,this.composing=null,this.resetting=!1};Re.prototype.init=function(e){var s=this,l=this,a=this.cm;this.createField(e);var u=this.textarea;e.wrapper.insertBefore(this.wrapper,e.wrapper.firstChild),A&&(u.style.width="0px"),Et(u,"input",function(){w&&D>=9&&s.hasSelection&&(s.hasSelection=null),l.poll()}),Et(u,"paste",function(y){ve(a,y)||rd(y,a)||(a.state.pasteIncoming=+new Date,l.fastPoll())});function m(y){if(!ve(a,y)){if(a.somethingSelected())Ma({lineWise:!1,text:a.getSelections()});else if(a.options.lineWiseCopyCut){var k=ad(a);Ma({lineWise:!0,text:k.text}),y.type=="cut"?a.setSelections(k.ranges,null,Xt):(l.prevInput="",u.value=k.text.join(`
`),de(u))}else return;y.type=="cut"&&(a.state.cutIncoming=+new Date)}}Et(u,"cut",m),Et(u,"copy",m),Et(e.scroller,"paste",function(y){if(!(kn(e,y)||ve(a,y))){if(!u.dispatchEvent){a.state.pasteIncoming=+new Date,l.focus();return}var k=new Event("paste");k.clipboardData=y.clipboardData,u.dispatchEvent(k)}}),Et(e.lineSpace,"selectstart",function(y){kn(e,y)||Be(y)}),Et(u,"compositionstart",function(){var y=a.getCursor("from");l.composing&&l.composing.range.clear(),l.composing={start:y,range:a.markText(y,a.getCursor("to"),{className:"CodeMirror-composing"})}}),Et(u,"compositionend",function(){l.composing&&(l.poll(),l.composing.range.clear(),l.composing=null)})},Re.prototype.createField=function(e){this.wrapper=ld(),this.textarea=this.wrapper.firstChild;var s=this.cm.options;lh(this.textarea,s.spellcheck,s.autocorrect,s.autocapitalize)},Re.prototype.screenReaderLabelChanged=function(e){e?this.textarea.setAttribute("aria-label",e):this.textarea.removeAttribute("aria-label")},Re.prototype.prepareSelection=function(){var e=this.cm,s=e.display,l=e.doc,a=Zu(e);if(e.options.moveInputWithCursor){var u=qi(e,l.sel.primary().head,"div"),m=s.wrapper.getBoundingClientRect(),y=s.lineDiv.getBoundingClientRect();a.teTop=Math.max(0,Math.min(s.wrapper.clientHeight-10,u.top+y.top-m.top)),a.teLeft=Math.max(0,Math.min(s.wrapper.clientWidth-10,u.left+y.left-m.left))}return a},Re.prototype.showSelection=function(e){var s=this.cm,l=s.display;lt(l.cursorDiv,e.cursors),lt(l.selectionDiv,e.selection),e.teTop!=null&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},Re.prototype.reset=function(e){if(!(this.contextMenuPending||this.composing&&e)){var s=this.cm;if(this.resetting=!0,s.somethingSelected()){this.prevInput="";var l=s.getSelection();this.textarea.value=l,s.state.focused&&de(this.textarea),w&&D>=9&&(this.hasSelection=l)}else e||(this.prevInput=this.textarea.value="",w&&D>=9&&(this.hasSelection=null));this.resetting=!1}},Re.prototype.getField=function(){return this.textarea},Re.prototype.supportsTouch=function(){return!1},Re.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!F||jt(rt(this.textarea))!=this.textarea))try{this.textarea.focus()}catch{}},Re.prototype.blur=function(){this.textarea.blur()},Re.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Re.prototype.receivedFocus=function(){this.slowPoll()},Re.prototype.slowPoll=function(){var e=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){e.poll(),e.cm.state.focused&&e.slowPoll()})},Re.prototype.fastPoll=function(){var e=!1,s=this;s.pollingFast=!0;function l(){var a=s.poll();!a&&!e?(e=!0,s.polling.set(60,l)):(s.pollingFast=!1,s.slowPoll())}s.polling.set(20,l)},Re.prototype.poll=function(){var e=this,s=this.cm,l=this.textarea,a=this.prevInput;if(this.contextMenuPending||this.resetting||!s.state.focused||Fn(l)&&!a&&!this.composing||s.isReadOnly()||s.options.disableInput||s.state.keySeq)return!1;var u=l.value;if(u==a&&!s.somethingSelected())return!1;if(w&&D>=9&&this.hasSelection===u||J&&/[\uf700-\uf7ff]/.test(u))return s.display.input.reset(),!1;if(s.doc.sel==s.display.selForContextMenu){var m=u.charCodeAt(0);if(m==8203&&!a&&(a="​"),m==8666)return this.reset(),this.cm.execCommand("undo")}for(var y=0,k=Math.min(a.length,u.length);y<k&&a.charCodeAt(y)==u.charCodeAt(y);)++y;return wi(s,function(){ah(s,u.slice(y),a.length-y,null,e.composing?"*compose":null),u.length>1e3||u.indexOf(`
`)>-1?l.value=e.prevInput="":e.prevInput=u,e.composing&&(e.composing.range.clear(),e.composing.range=s.markText(e.composing.start,s.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},Re.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Re.prototype.onKeyPress=function(){w&&D>=9&&(this.hasSelection=null),this.fastPoll()},Re.prototype.onContextMenu=function(e){var s=this,l=s.cm,a=l.display,u=s.textarea;s.contextMenuPending&&s.contextMenuPending();var m=vs(l,e),y=a.scroller.scrollTop;if(!m||E)return;var k=l.options.resetSelectionOnContextMenu;k&&l.doc.sel.contains(m)==-1&&qe(l,ii)(l.doc,Yn(m),Xt);var C=u.style.cssText,P=s.wrapper.style.cssText,M=s.wrapper.offsetParent.getBoundingClientRect();s.wrapper.style.cssText="position: static",u.style.cssText=`position: absolute; width: 30px; height: 30px;
      top: `+(e.clientY-M.top-5)+"px; left: "+(e.clientX-M.left-5)+`px;
      z-index: 1000; background: `+(w?"rgba(255, 255, 255, .05)":"transparent")+`;
      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);`;var G;T&&(G=u.ownerDocument.defaultView.scrollY),a.input.focus(),T&&u.ownerDocument.defaultView.scrollTo(null,G),a.input.reset(),l.somethingSelected()||(u.value=s.prevInput=" "),s.contextMenuPending=Z,a.selForContextMenu=l.doc.sel,clearTimeout(a.detectingSelectAll);function et(){if(u.selectionStart!=null){var bt=l.somethingSelected(),It="​"+(bt?u.value:"");u.value="⇚",u.value=It,s.prevInput=bt?"":"​",u.selectionStart=1,u.selectionEnd=It.length,a.selForContextMenu=l.doc.sel}}function Z(){if(s.contextMenuPending==Z&&(s.contextMenuPending=!1,s.wrapper.style.cssText=P,u.style.cssText=C,w&&D<9&&a.scrollbars.setScrollTop(a.scroller.scrollTop=y),u.selectionStart!=null)){(!w||w&&D<9)&&et();var bt=0,It=function(){a.selForContextMenu==l.doc.sel&&u.selectionStart==0&&u.selectionEnd>0&&s.prevInput=="​"?qe(l,Pc)(l):bt++<10?a.detectingSelectAll=setTimeout(It,500):(a.selForContextMenu=null,a.input.reset())};a.detectingSelectAll=setTimeout(It,200)}}if(w&&D>=9&&et(),Tt){yi(e);var ft=function(){je(window,"mouseup",ft),setTimeout(Z,20)};Et(window,"mouseup",ft)}else setTimeout(Z,50)},Re.prototype.readOnlyChanged=function(e){e||this.reset(),this.textarea.disabled=e=="nocursor",this.textarea.readOnly=!!e},Re.prototype.setUneditable=function(){},Re.prototype.needsContentAttribute=!1;function Kg(e,s){if(s=s?N(s):{},s.value=e.value,!s.tabindex&&e.tabIndex&&(s.tabindex=e.tabIndex),!s.placeholder&&e.placeholder&&(s.placeholder=e.placeholder),s.autofocus==null){var l=jt(rt(e));s.autofocus=l==e||e.getAttribute("autofocus")!=null&&l==document.body}function a(){e.value=k.getValue()}var u;if(e.form&&(Et(e.form,"submit",a),!s.leaveSubmitMethodAlone)){var m=e.form;u=m.submit;try{var y=m.submit=function(){a(),m.submit=u,m.submit(),m.submit=y}}catch{}}s.finishInit=function(C){C.save=a,C.getTextArea=function(){return e},C.toTextArea=function(){C.toTextArea=isNaN,a(),e.parentNode.removeChild(C.getWrapperElement()),e.style.display="",e.form&&(je(e.form,"submit",a),!s.leaveSubmitMethodAlone&&typeof e.form.submit=="function"&&(e.form.submit=u))}},e.style.display="none";var k=Ie(function(C){return e.parentNode.insertBefore(C,e.nextSibling)},s);return k}function Qg(e){e.off=je,e.on=Et,e.wheelEventPixels=sg,e.Doc=ci,e.splitLines=Mi,e.countColumn=Y,e.findColumn=Dt,e.isWordChar=_,e.Pass=Yt,e.signal=Pe,e.Line=hr,e.changeEnd=qn,e.scrollbarModel=sc,e.Pos=ut,e.cmpPos=Bt,e.modes=nr,e.mimeModes=Xi,e.resolveMode=sr,e.getMode=rr,e.modeExtensions=jn,e.extendMode=or,e.copyState=sn,e.startState=ar,e.innerMode=to,e.commands=Do,e.keyMap=Dn,e.keyName=Gc,e.isModifierKey=Fc,e.lookupKey=xr,e.normalizeKeyMap=Tg,e.StringStream=We,e.SharedTextMarker=xo,e.TextMarker=Kn,e.LineWidget=So,e.e_preventDefault=Be,e.e_stopPropagation=Fi,e.e_stop=yi,e.addClass=Nt,e.contains=ee,e.rmClass=Pt,e.keyNames=Qn}Fg(Ie),Ug(Ie);var Zg="iter insert remove copy getEditor constructor".split(" ");for(var Na in ci.prototype)ci.prototype.hasOwnProperty(Na)&&pt(Zg,Na)<0&&(Ie.prototype[Na]=function(e){return function(){return e.apply(this.doc,arguments)}}(ci.prototype[Na]));return Je(ci),Ie.inputStyles={textarea:Re,contenteditable:Se},Ie.defineMode=function(e){!Ie.defaults.mode&&e!="null"&&(Ie.defaults.mode=e),Ui.apply(this,arguments)},Ie.defineMIME=ps,Ie.defineMode("null",function(){return{token:function(e){return e.skipToEnd()}}}),Ie.defineMIME("text/plain","null"),Ie.defineExtension=function(e,s){Ie.prototype[e]=s},Ie.defineDocExtension=function(e,s){ci.prototype[e]=s},Ie.fromTextArea=Kg,Qg(Ie),Ie.version="5.65.18",Ie})}(fh)),fh.exports}var Fm=js();const Xa=Nh(Fm);(function(i,t){(function(n){n(js())})(function(n){n.defineMode("verilog",function(W,L){var E=W.indentUnit,V=L.statementIndentUnit||E,at=L.dontAlignCalls,H=L.compilerDirectivesUseRegularIndentation,A=L.noIndentKeywords||[],q=L.multiLineStrings,F=L.hooks||{};function J(gt){for(var Dt={},xt=gt.split(" "),qt=0;qt<xt.length;++qt)Dt[xt[qt]]=!0;return Dt}var St=J("accept_on alias always always_comb always_ff always_latch and assert assign assume automatic before begin bind bins binsof bit break buf bufif0 bufif1 byte case casex casez cell chandle checker class clocking cmos config const constraint context continue cover covergroup coverpoint cross deassign default defparam design disable dist do edge else end endcase endchecker endclass endclocking endconfig endfunction endgenerate endgroup endinterface endmodule endpackage endprimitive endprogram endproperty endspecify endsequence endtable endtask enum event eventually expect export extends extern final first_match for force foreach forever fork forkjoin function generate genvar global highz0 highz1 if iff ifnone ignore_bins illegal_bins implements implies import incdir include initial inout input inside instance int integer interconnect interface intersect join join_any join_none large let liblist library local localparam logic longint macromodule matches medium modport module nand negedge nettype new nexttime nmos nor noshowcancelled not notif0 notif1 null or output package packed parameter pmos posedge primitive priority program property protected pull0 pull1 pulldown pullup pulsestyle_ondetect pulsestyle_onevent pure rand randc randcase randsequence rcmos real realtime ref reg reject_on release repeat restrict return rnmos rpmos rtran rtranif0 rtranif1 s_always s_eventually s_nexttime s_until s_until_with scalared sequence shortint shortreal showcancelled signed small soft solve specify specparam static string strong strong0 strong1 struct super supply0 supply1 sync_accept_on sync_reject_on table tagged task this throughout time timeprecision timeunit tran tranif0 tranif1 tri tri0 tri1 triand trior trireg type typedef union unique unique0 unsigned until until_with untyped use uwire var vectored virtual void wait wait_order wand weak weak0 weak1 while wildcard wire with within wor xnor xor"),ot=/[\+\-\*\/!~&|^%=?:<>]/,st=/[\[\]{}()]/,wt=/\d[0-9_]*/,Tt=/\d*\s*'s?d\s*\d[0-9_]*/i,At=/\d*\s*'s?b\s*[xz01][xz01_]*/i,Pt=/\d*\s*'s?o\s*[xz0-7][xz0-7_]*/i,K=/\d*\s*'s?h\s*[0-9a-fxz?][0-9a-fxz?_]*/i,lt=/(\d[\d_]*(\.\d[\d_]*)?E-?[\d_]+)|(\d[\d_]*\.\d[\d_]*)/i,z=/^((`?\w+)|[)}\]])/,oe=/[)}\]]/,Zt=new RegExp("^(`(?:ifdef|ifndef|elsif|else|endif|undef|undefineall|define|include|begin_keywords|celldefine|default|nettype|end_keywords|endcelldefine|line|nounconnected_drive|pragma|resetall|timescale|unconnected_drive))\\b"),ee=/^(`(?:ifdef|ifndef|elsif|else))\b/,jt=/^(`(?:elsif|else|endif))\b/,Nt,Vt,de=J("case checker class clocking config function generate interface module package primitive program property specify sequence table task"),ae={};for(var me in de)ae[me]="end"+me;ae.begin="end",ae.casex="endcase",ae.casez="endcase",ae.do="while",ae.fork="join;join_any;join_none",ae.covergroup="endgroup",ae.macro_begin="macro_end";for(var rt in A){var me=A[rt];ae[me]&&(ae[me]=void 0)}var Q=J("always always_comb always_ff always_latch assert assign assume else export for foreach forever if import initial repeat while extern typedef");function nt(gt,Dt){var xt=gt.peek(),qt;if(F[xt]&&(qt=F[xt](gt,Dt))!=!1||F.tokenBase&&(qt=F.tokenBase(gt,Dt))!=!1)return qt;if(/[,;:\.]/.test(xt))return Nt=gt.next(),null;if(st.test(xt))return Nt=gt.next(),"bracket";if(xt=="`")if(gt.next(),gt.eatWhile(/[\w\$_]/)){var Ft=gt.current();if(Vt=Ft,Ft.startsWith("`uvm_")&&Ft.endsWith("_begin")){var o=Vt.substr(0,Vt.length-5)+"end";ae[Ft]=o,Nt="newblock"}else{gt.eatSpace(),gt.peek()=="("&&(Nt="newmacro");var d=gt.current();gt.backUp(d.length-Ft.length)}return"def"}else return null;if(xt=="$")return gt.next(),gt.eatWhile(/[\w\$_]/)?"meta":null;if(xt=="#")return gt.next(),gt.eatWhile(/[\d_.]/),"def";if(xt=="@")return gt.next(),gt.eatWhile(/[@]/),"def";if(xt=='"')return gt.next(),Dt.tokenize=N(xt),Dt.tokenize(gt,Dt);if(xt=="/"){if(gt.next(),gt.eat("*"))return Dt.tokenize=Y,Y(gt,Dt);if(gt.eat("/"))return gt.skipToEnd(),"comment";gt.backUp(1)}if(gt.match(lt)||gt.match(Tt)||gt.match(At)||gt.match(Pt)||gt.match(K)||gt.match(wt)||gt.match(lt))return"number";if(gt.eatWhile(ot))return Nt=gt.current(),"meta";if(gt.eatWhile(/[\w\$_]/)){var Ft=gt.current();return St[Ft]?(ae[Ft]&&(Nt="newblock",Ft==="fork"&&(gt.eatSpace(),gt.peek()==";"&&(Nt="newstatement"),gt.backUp(gt.current().length-Ft.length))),Q[Ft]&&(Nt="newstatement"),Vt=Ft,"keyword"):"variable"}return gt.next(),null}function N(gt){return function(Dt,xt){for(var qt=!1,Ft,o=!1;(Ft=Dt.next())!=null;){if(Ft==gt&&!qt){o=!0;break}qt=!qt&&Ft=="\\"}return(o||!(qt||q))&&(xt.tokenize=nt),"string"}}function Y(gt,Dt){for(var xt=!1,qt;qt=gt.next();){if(qt=="/"&&xt){Dt.tokenize=nt;break}xt=qt=="*"}return"comment"}function vt(gt,Dt,xt,qt,Ft,o){this.indented=gt,this.column=Dt,this.type=xt,this.scopekind=qt,this.align=Ft,this.prev=o}function pt(gt,Dt,xt,qt){var Ft=gt.indented,o=new vt(Ft,Dt,xt,qt||"",null,gt.context);return gt.context=o}function Lt(gt){var Dt=gt.context.type;return(Dt==")"||Dt=="]"||Dt=="}")&&(gt.indented=gt.context.indented),gt.context=gt.context.prev}function Yt(gt,Dt){if(gt==Dt)return!0;var xt=Dt.split(";");for(var qt in xt)if(gt==xt[qt])return!0;return!1}function Xt(gt,Dt){return gt==null?!1:gt.scopekind===Dt?!0:Xt(gt.prev,Dt)}function he(){var gt=[];for(var Dt in ae)if(ae[Dt]){var xt=ae[Dt].split(";");for(var qt in xt)gt.push(xt[qt])}var Ft=new RegExp("[{}()\\[\\]]|("+gt.join("|")+")$");return Ft}return{electricInput:he(),startState:function(gt){var Dt={tokenize:null,context:new vt((gt||0)-E,0,"top","top",!1),indented:0,compilerDirectiveIndented:0,startOfLine:!0};return F.startState&&F.startState(Dt),Dt},token:function(gt,Dt){var xt=Dt.context;if(gt.sol()&&(xt.align==null&&(xt.align=!1),Dt.indented=gt.indentation(),Dt.startOfLine=!0),F.token){var qt=F.token(gt,Dt);if(qt!==void 0)return qt}if(gt.eatSpace())return null;Nt=null,Vt=null;var qt=(Dt.tokenize||nt)(gt,Dt);if(qt=="comment"||qt=="meta"||qt=="variable")return(Nt==="="||Nt==="<=")&&!Xt(xt,"assignment")&&(pt(Dt,gt.column()+Nt.length,"assignment","assignment"),xt.align==null&&(xt.align=!0)),qt;xt.align==null&&(xt.align=!0);var Ft=xt.type=="assignment"&&oe.test(Nt)&&xt.prev&&xt.prev.type===Nt;if(Nt==xt.type||Ft){if(Ft&&(xt=Lt(Dt)),xt=Lt(Dt),Nt==")"){if(xt&&xt.type==="macro")for(xt=Lt(Dt);xt&&(xt.type=="statement"||xt.type=="assignment");)xt=Lt(Dt)}else if(Nt=="}"&&xt&&xt.type==="statement")for(;xt&&xt.type=="statement";)xt=Lt(Dt)}else if((Nt==";"||Nt==",")&&(xt.type=="statement"||xt.type=="assignment")||xt.type&&Yt(Vt,xt.type))for(xt=Lt(Dt);xt&&(xt.type=="statement"||xt.type=="assignment");)xt=Lt(Dt);else if(Nt=="{")pt(Dt,gt.column(),"}");else if(Nt=="[")pt(Dt,gt.column(),"]");else if(Nt=="(")pt(Dt,gt.column(),")");else if(xt&&xt.type=="endcase"&&Nt==":")pt(Dt,gt.column(),"statement","case");else if(Nt=="newstatement")pt(Dt,gt.column(),"statement",Vt);else if(Nt=="newblock"){if(!(Vt=="function"&&xt&&(xt.type=="statement"||xt.type=="endgroup"))){if(!(Vt=="task"&&xt&&xt.type=="statement")){if(!(Vt=="class"&&xt&&xt.type=="statement")){var o=ae[Vt];pt(Dt,gt.column(),o,Vt)}}}}else(Nt=="newmacro"||Vt&&Vt.match(Zt))&&(Nt=="newmacro"&&pt(Dt,gt.column(),"macro","macro"),Vt.match(jt)&&(Dt.compilerDirectiveIndented-=V),Vt.match(ee)&&(Dt.compilerDirectiveIndented+=V));return Dt.startOfLine=!1,qt},indent:function(gt,Dt){if(gt.tokenize!=nt&&gt.tokenize!=null)return n.Pass;if(F.indent){var xt=F.indent(gt);if(xt>=0)return xt}var qt=gt.context,Ft=Dt&&Dt.charAt(0);qt.type=="statement"&&Ft=="}"&&(qt=qt.prev);var o=!1,d=Dt.match(z);return d&&(o=Yt(d[0],qt.type)),!H&&Dt.match(Zt)?Dt.match(jt)?gt.compilerDirectiveIndented-V:gt.compilerDirectiveIndented:qt.type=="statement"?qt.indented+(Ft=="{"?0:V):(oe.test(qt.type)||qt.type=="assignment")&&qt.align&&!at?qt.column+(o?0:1):qt.type==")"&&!o?qt.indented+V:qt.indented+(o?0:E)},blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//",fold:"indent"}}),n.defineMIME("text/x-verilog",{name:"verilog"}),n.defineMIME("text/x-systemverilog",{name:"verilog"});var r={"|":"link",">":"property",$:"variable",$$:"variable","?$":"qualifier","?*":"qualifier","-":"hr","/":"property","/-":"property","@":"variable-3","@-":"variable-3","@++":"variable-3","@+=":"variable-3","@+=-":"variable-3","@--":"variable-3","@-=":"variable-3","%+":"tag","%-":"tag","%":"tag",">>":"tag","<<":"tag","<>":"tag","#":"tag","^":"attribute","^^":"attribute","^!":"attribute","*":"variable-2","**":"variable-2","\\":"keyword",'"':"comment"},h={"/":"beh-hier",">":"beh-hier","-":"phys-hier","|":"pipe","?":"when","@":"stage","\\":"keyword"},c=3,g=/^([~!@#\$%\^&\*-\+=\?\/\\\|'"<>]+)([\d\w_]*)/,v=/^[! ]  /,w=/^[! ] */,D=/^\/[\/\*]/;function T(W,L,E){var V=L/c;return"tlv-"+W.tlvIndentationStyle[V]+"-"+E}function R(W){var L;return(L=W.match(g,!1))&&L[2].length>0}n.defineMIME("text/x-tlv",{name:"verilog",hooks:{electricInput:!1,token:function(W,L){var E=void 0,V;if(W.sol()&&!L.tlvInBlockComment){W.peek()=="\\"&&(E="def",W.skipToEnd(),W.string.match(/\\SV/)?L.tlvCodeActive=!1:W.string.match(/\\TLV/)&&(L.tlvCodeActive=!0)),L.tlvCodeActive&&W.pos==0&&L.indented==0&&(V=W.match(w,!1))&&(L.indented=V[0].length);var at=L.indented,H=at/c;if(H<=L.tlvIndentationStyle.length){var A=W.string.length==at,q=H*c;if(q<W.string.length){var F=W.string.slice(q),J=F[0];h[J]&&(V=F.match(g))&&r[V[1]]&&(at+=c,J=="\\"&&q>0||(L.tlvIndentationStyle[H]=h[J],H++))}if(!A)for(;L.tlvIndentationStyle.length>H;)L.tlvIndentationStyle.pop()}L.tlvNextIndent=at}if(L.tlvCodeActive){var St=!1,V;if(E!==void 0)E+=" "+T(L,0,"scope-ident");else if(W.pos/c<L.tlvIndentationStyle.length&&(V=W.match(W.sol()?v:/^   /)))E="tlv-indent-"+(W.pos%2==0?"even":"odd")+" "+T(L,W.pos-c,"indent"),V[0].charAt(0)=="!"&&(E+=" tlv-alert-line-prefix"),R(W)&&(E+=" "+T(L,W.pos,"before-scope-ident"));else if(L.tlvInBlockComment)W.match(/^.*?\*\//)?L.tlvInBlockComment=!1:W.skipToEnd(),E="comment";else if((V=W.match(D))&&!L.tlvInBlockComment)V[0]=="//"?W.skipToEnd():L.tlvInBlockComment=!0,E="comment";else if(V=W.match(g)){var ot=V[1],st=V[2];r.hasOwnProperty(ot)&&(st.length>0||W.eol())?(E=r[ot],W.column()==L.indented&&(E+=" "+T(L,W.column(),"scope-ident"))):(W.backUp(W.current().length-1),E="tlv-default")}else W.match(/^\t+/)?E="tlv-tab":W.match(/^[\[\]{}\(\);\:]+/)?E="meta":(V=W.match(/^[mM]4([\+_])?[\w\d_]*/))?E=V[1]=="+"?"tlv-m4-plus":"tlv-m4":W.match(/^ +/)?W.eol()?E="error":E="tlv-default":W.match(/^[\w\d_]+/)?E="number":(W.next(),E="tlv-default");St&&(E+=" tlv-statement")}else W.match(/^[mM]4([\w\d_]*)/)&&(E="tlv-m4");return E},indent:function(W){return W.tlvCodeActive==!0?W.tlvNextIndent:-1},startState:function(W){W.tlvIndentationStyle=[],W.tlvCodeActive=!0,W.tlvNextIndent=-1,W.tlvInBlockComment=!1}}})})})();(function(i,t){(function(n){n(js())})(function(n){var r={pairs:`()[]{}''""`,closeBefore:`)]}'":;>`,triples:"",explode:"[]{}"},h=n.Pos;n.defineOption("autoCloseBrackets",!1,function(H,A,q){q&&q!=n.Init&&(H.removeKeyMap(g),H.state.closeBrackets=null),A&&(v(c(A,"pairs")),H.state.closeBrackets=A,H.addKeyMap(g))});function c(H,A){return A=="pairs"&&typeof H=="string"?H:typeof H=="object"&&H[A]!=null?H[A]:r[A]}var g={Backspace:T,Enter:R};function v(H){for(var A=0;A<H.length;A++){var q=H.charAt(A),F="'"+q+"'";g[F]||(g[F]=w(q))}}v(r.pairs+"`");function w(H){return function(A){return E(A,H)}}function D(H){var A=H.state.closeBrackets;if(!A||A.override)return A;var q=H.getModeAt(H.getCursor());return q.closeBrackets||A}function T(H){var A=D(H);if(!A||H.getOption("disableInput"))return n.Pass;for(var q=c(A,"pairs"),F=H.listSelections(),J=0;J<F.length;J++){if(!F[J].empty())return n.Pass;var St=V(H,F[J].head);if(!St||q.indexOf(St)%2!=0)return n.Pass}for(var J=F.length-1;J>=0;J--){var ot=F[J].head;H.replaceRange("",h(ot.line,ot.ch-1),h(ot.line,ot.ch+1),"+delete")}}function R(H){var A=D(H),q=A&&c(A,"explode");if(!q||H.getOption("disableInput"))return n.Pass;for(var F=H.listSelections(),J=0;J<F.length;J++){if(!F[J].empty())return n.Pass;var St=V(H,F[J].head);if(!St||q.indexOf(St)%2!=0)return n.Pass}H.operation(function(){var ot=H.lineSeparator()||`
`;H.replaceSelection(ot+ot,null),W(H,-1),F=H.listSelections();for(var st=0;st<F.length;st++){var wt=F[st].head.line;H.indentLine(wt,null,!0),H.indentLine(wt+1,null,!0)}})}function W(H,A){for(var q=[],F=H.listSelections(),J=0,St=0;St<F.length;St++){var ot=F[St];ot.head==H.getCursor()&&(J=St);var st=ot.head.ch||A>0?{line:ot.head.line,ch:ot.head.ch+A}:{line:ot.head.line-1};q.push({anchor:st,head:st})}H.setSelections(q,J)}function L(H){var A=n.cmpPos(H.anchor,H.head)>0;return{anchor:new h(H.anchor.line,H.anchor.ch+(A?-1:1)),head:new h(H.head.line,H.head.ch+(A?1:-1))}}function E(H,A){var q=D(H);if(!q||H.getOption("disableInput"))return n.Pass;var F=c(q,"pairs"),J=F.indexOf(A);if(J==-1)return n.Pass;for(var St=c(q,"closeBefore"),ot=c(q,"triples"),st=F.charAt(J+1)==A,wt=H.listSelections(),Tt=J%2==0,At,Pt=0;Pt<wt.length;Pt++){var K=wt[Pt],lt=K.head,z,oe=H.getRange(lt,h(lt.line,lt.ch+1));if(Tt&&!K.empty())z="surround";else if((st||!Tt)&&oe==A)st&&at(H,lt)?z="both":ot.indexOf(A)>=0&&H.getRange(lt,h(lt.line,lt.ch+3))==A+A+A?z="skipThree":z="skip";else if(st&&lt.ch>1&&ot.indexOf(A)>=0&&H.getRange(h(lt.line,lt.ch-2),lt)==A+A){if(lt.ch>2&&/\bstring/.test(H.getTokenTypeAt(h(lt.line,lt.ch-2))))return n.Pass;z="addFour"}else if(st){var Zt=lt.ch==0?" ":H.getRange(h(lt.line,lt.ch-1),lt);if(!n.isWordChar(oe)&&Zt!=A&&!n.isWordChar(Zt))z="both";else return n.Pass}else if(Tt&&(oe.length===0||/\s/.test(oe)||St.indexOf(oe)>-1))z="both";else return n.Pass;if(!At)At=z;else if(At!=z)return n.Pass}var ee=J%2?F.charAt(J-1):A,jt=J%2?A:F.charAt(J+1);H.operation(function(){if(At=="skip")W(H,1);else if(At=="skipThree")W(H,3);else if(At=="surround"){for(var Nt=H.getSelections(),Vt=0;Vt<Nt.length;Vt++)Nt[Vt]=ee+Nt[Vt]+jt;H.replaceSelections(Nt,"around"),Nt=H.listSelections().slice();for(var Vt=0;Vt<Nt.length;Vt++)Nt[Vt]=L(Nt[Vt]);H.setSelections(Nt)}else At=="both"?(H.replaceSelection(ee+jt,null),H.triggerElectric(ee+jt),W(H,-1)):At=="addFour"&&(H.replaceSelection(ee+ee+ee+ee,"before"),W(H,1))})}function V(H,A){var q=H.getRange(h(A.line,A.ch-1),h(A.line,A.ch+1));return q.length==2?q:null}function at(H,A){var q=H.getTokenAt(h(A.line,A.ch+1));return/\bstring/.test(q.type)&&q.start==A.ch&&(A.ch==0||!/\bstring/.test(H.getTokenTypeAt(A)))}})})();(function(i,t){(function(n){n(js())})(function(n){var r=/[\w$]+/,h=500;n.registerHelper("hint","anyword",function(c,g){for(var v=g&&g.word||r,w=g&&g.range||h,D=c.getCursor(),T=c.getLine(D.line),R=D.ch,W=R;W&&v.test(T.charAt(W-1));)--W;for(var L=W!=R&&T.slice(W,R),E=g&&g.list||[],V={},at=new RegExp(v.source,"g"),H=-1;H<=1;H+=2)for(var A=D.line,q=Math.min(Math.max(A+H*w,c.firstLine()),c.lastLine())+H;A!=q;A+=H)for(var F=c.getLine(A),J;J=at.exec(F);)A==D.line&&J[0]===L||(!L||J[0].lastIndexOf(L,0)==0)&&!Object.prototype.hasOwnProperty.call(V,J[0])&&(V[J[0]]=!0,E.push(J[0]));return{list:E,from:n.Pos(D.line,W),to:n.Pos(D.line,R)}})})})();(function(i,t){(function(n){n(js())})(function(n){var r="CodeMirror-hint",h="CodeMirror-hint-active";n.showHint=function(H,A,q){if(!A)return H.showHint(q);q&&q.async&&(A.async=!0);var F={hint:A};if(q)for(var J in q)F[J]=q[J];return H.showHint(F)},n.defineExtension("showHint",function(H){H=w(this,this.getCursor("start"),H);var A=this.listSelections();if(!(A.length>1)){if(this.somethingSelected()){if(!H.hint.supportsSelection)return;for(var q=0;q<A.length;q++)if(A[q].head.line!=A[q].anchor.line)return}this.state.completionActive&&this.state.completionActive.close();var F=this.state.completionActive=new c(this,H);F.options.hint&&(n.signal(this,"startCompletion",this),F.update(!0))}}),n.defineExtension("closeHint",function(){this.state.completionActive&&this.state.completionActive.close()});function c(H,A){if(this.cm=H,this.options=A,this.widget=null,this.debounce=0,this.tick=0,this.startPos=this.cm.getCursor("start"),this.startLen=this.cm.getLine(this.startPos.line).length-this.cm.getSelection().length,this.options.updateOnCursorActivity){var q=this;H.on("cursorActivity",this.activityFunc=function(){q.cursorActivity()})}}var g=window.requestAnimationFrame||function(H){return setTimeout(H,1e3/60)},v=window.cancelAnimationFrame||clearTimeout;c.prototype={close:function(){this.active()&&(this.cm.state.completionActive=null,this.tick=null,this.options.updateOnCursorActivity&&this.cm.off("cursorActivity",this.activityFunc),this.widget&&this.data&&n.signal(this.data,"close"),this.widget&&this.widget.close(),n.signal(this.cm,"endCompletion",this.cm))},active:function(){return this.cm.state.completionActive==this},pick:function(H,A){var q=H.list[A],F=this;this.cm.operation(function(){q.hint?q.hint(F.cm,H,q):F.cm.replaceRange(D(q),q.from||H.from,q.to||H.to,"complete"),n.signal(H,"pick",q),F.cm.scrollIntoView()}),this.options.closeOnPick&&this.close()},cursorActivity:function(){this.debounce&&(v(this.debounce),this.debounce=0);var H=this.startPos;this.data&&(H=this.data.from);var A=this.cm.getCursor(),q=this.cm.getLine(A.line);if(A.line!=this.startPos.line||q.length-A.ch!=this.startLen-this.startPos.ch||A.ch<H.ch||this.cm.somethingSelected()||!A.ch||this.options.closeCharacters.test(q.charAt(A.ch-1)))this.close();else{var F=this;this.debounce=g(function(){F.update()}),this.widget&&this.widget.disable()}},update:function(H){if(this.tick!=null){var A=this,q=++this.tick;E(this.options.hint,this.cm,this.options,function(F){A.tick==q&&A.finishUpdate(F,H)})}},finishUpdate:function(H,A){this.data&&n.signal(this.data,"update");var q=this.widget&&this.widget.picked||A&&this.options.completeSingle;this.widget&&this.widget.close(),this.data=H,H&&H.list.length&&(q&&H.list.length==1?this.pick(H,0):(this.widget=new W(this,H),n.signal(H,"shown")))}};function w(H,A,q){var F=H.options.hintOptions,J={};for(var St in at)J[St]=at[St];if(F)for(var St in F)F[St]!==void 0&&(J[St]=F[St]);if(q)for(var St in q)q[St]!==void 0&&(J[St]=q[St]);return J.hint.resolve&&(J.hint=J.hint.resolve(H,A)),J}function D(H){return typeof H=="string"?H:H.text}function T(H,A){var q={Up:function(){A.moveFocus(-1)},Down:function(){A.moveFocus(1)},PageUp:function(){A.moveFocus(-A.menuSize()+1,!0)},PageDown:function(){A.moveFocus(A.menuSize()-1,!0)},Home:function(){A.setFocus(0)},End:function(){A.setFocus(A.length-1)},Enter:A.pick,Tab:A.pick,Esc:A.close},F=/Mac/.test(navigator.platform);F&&(q["Ctrl-P"]=function(){A.moveFocus(-1)},q["Ctrl-N"]=function(){A.moveFocus(1)});var J=H.options.customKeys,St=J?{}:q;function ot(Tt,At){var Pt;typeof At!="string"?Pt=function(K){return At(K,A)}:q.hasOwnProperty(At)?Pt=q[At]:Pt=At,St[Tt]=Pt}if(J)for(var st in J)J.hasOwnProperty(st)&&ot(st,J[st]);var wt=H.options.extraKeys;if(wt)for(var st in wt)wt.hasOwnProperty(st)&&ot(st,wt[st]);return St}function R(H,A){for(;A&&A!=H;){if(A.nodeName.toUpperCase()==="LI"&&A.parentNode==H)return A;A=A.parentNode}}function W(H,A){this.id="cm-complete-"+Math.floor(Math.random(1e6)),this.completion=H,this.data=A,this.picked=!1;var q=this,F=H.cm,J=F.getInputField().ownerDocument,St=J.defaultView||J.parentWindow,ot=this.hints=J.createElement("ul");ot.setAttribute("role","listbox"),ot.setAttribute("aria-expanded","true"),ot.id=this.id;var st=H.cm.options.theme;ot.className="CodeMirror-hints "+st,this.selectedHint=A.selectedHint||0;for(var wt=A.list,Tt=0;Tt<wt.length;++Tt){var At=ot.appendChild(J.createElement("li")),Pt=wt[Tt],K=r+(Tt!=this.selectedHint?"":" "+h);Pt.className!=null&&(K=Pt.className+" "+K),At.className=K,Tt==this.selectedHint&&At.setAttribute("aria-selected","true"),At.id=this.id+"-"+Tt,At.setAttribute("role","option"),Pt.render?Pt.render(At,A,Pt):At.appendChild(J.createTextNode(Pt.displayText||D(Pt))),At.hintId=Tt}var lt=H.options.container||J.body,z=F.cursorCoords(H.options.alignWithWord?A.from:null),oe=z.left,Zt=z.bottom,ee=!0,jt=0,Nt=0;if(lt!==J.body){var Vt=["absolute","relative","fixed"].indexOf(St.getComputedStyle(lt).position)!==-1,de=Vt?lt:lt.offsetParent,ae=de.getBoundingClientRect(),me=J.body.getBoundingClientRect();jt=ae.left-me.left-de.scrollLeft,Nt=ae.top-me.top-de.scrollTop}ot.style.left=oe-jt+"px",ot.style.top=Zt-Nt+"px";var rt=St.innerWidth||Math.max(J.body.offsetWidth,J.documentElement.offsetWidth),Q=St.innerHeight||Math.max(J.body.offsetHeight,J.documentElement.offsetHeight);lt.appendChild(ot),F.getInputField().setAttribute("aria-autocomplete","list"),F.getInputField().setAttribute("aria-owns",this.id),F.getInputField().setAttribute("aria-activedescendant",this.id+"-"+this.selectedHint);var nt=H.options.moveOnOverlap?ot.getBoundingClientRect():new DOMRect,N=H.options.paddingForScrollbar?ot.scrollHeight>ot.clientHeight+1:!1,Y;setTimeout(function(){Y=F.getScrollInfo()});var vt=nt.bottom-Q;if(vt>0){var pt=nt.bottom-nt.top,Lt=nt.top-(z.bottom-z.top)-2;Q-nt.top<Lt?(pt>Lt&&(ot.style.height=(pt=Lt)+"px"),ot.style.top=(Zt=z.top-pt)+Nt+"px",ee=!1):ot.style.height=Q-nt.top-2+"px"}var Yt=nt.right-rt;if(N&&(Yt+=F.display.nativeBarWidth),Yt>0&&(nt.right-nt.left>rt&&(ot.style.width=rt-5+"px",Yt-=nt.right-nt.left-rt),ot.style.left=(oe=Math.max(z.left-Yt-jt,0))+"px"),N)for(var Xt=ot.firstChild;Xt;Xt=Xt.nextSibling)Xt.style.paddingRight=F.display.nativeBarWidth+"px";if(F.addKeyMap(this.keyMap=T(H,{moveFocus:function(Dt,xt){q.changeActive(q.selectedHint+Dt,xt)},setFocus:function(Dt){q.changeActive(Dt)},menuSize:function(){return q.screenAmount()},length:wt.length,close:function(){H.close()},pick:function(){q.pick()},data:A})),H.options.closeOnUnfocus){var he;F.on("blur",this.onBlur=function(){he=setTimeout(function(){H.close()},100)}),F.on("focus",this.onFocus=function(){clearTimeout(he)})}F.on("scroll",this.onScroll=function(){var Dt=F.getScrollInfo(),xt=F.getWrapperElement().getBoundingClientRect();Y||(Y=F.getScrollInfo());var qt=Zt+Y.top-Dt.top,Ft=qt-(St.pageYOffset||(J.documentElement||J.body).scrollTop);if(ee||(Ft+=ot.offsetHeight),Ft<=xt.top||Ft>=xt.bottom)return H.close();ot.style.top=qt+"px",ot.style.left=oe+Y.left-Dt.left+"px"}),n.on(ot,"dblclick",function(Dt){var xt=R(ot,Dt.target||Dt.srcElement);xt&&xt.hintId!=null&&(q.changeActive(xt.hintId),q.pick())}),n.on(ot,"click",function(Dt){var xt=R(ot,Dt.target||Dt.srcElement);xt&&xt.hintId!=null&&(q.changeActive(xt.hintId),H.options.completeOnSingleClick&&q.pick())}),n.on(ot,"mousedown",function(){setTimeout(function(){F.focus()},20)});var gt=this.getSelectedHintRange();return(gt.from!==0||gt.to!==0)&&this.scrollToActive(),n.signal(A,"select",wt[this.selectedHint],ot.childNodes[this.selectedHint]),!0}W.prototype={close:function(){if(this.completion.widget==this){this.completion.widget=null,this.hints.parentNode&&this.hints.parentNode.removeChild(this.hints),this.completion.cm.removeKeyMap(this.keyMap);var H=this.completion.cm.getInputField();H.removeAttribute("aria-activedescendant"),H.removeAttribute("aria-owns");var A=this.completion.cm;this.completion.options.closeOnUnfocus&&(A.off("blur",this.onBlur),A.off("focus",this.onFocus)),A.off("scroll",this.onScroll)}},disable:function(){this.completion.cm.removeKeyMap(this.keyMap);var H=this;this.keyMap={Enter:function(){H.picked=!0}},this.completion.cm.addKeyMap(this.keyMap)},pick:function(){this.completion.pick(this.data,this.selectedHint)},changeActive:function(H,A){if(H>=this.data.list.length?H=A?this.data.list.length-1:0:H<0&&(H=A?0:this.data.list.length-1),this.selectedHint!=H){var q=this.hints.childNodes[this.selectedHint];q&&(q.className=q.className.replace(" "+h,""),q.removeAttribute("aria-selected")),q=this.hints.childNodes[this.selectedHint=H],q.className+=" "+h,q.setAttribute("aria-selected","true"),this.completion.cm.getInputField().setAttribute("aria-activedescendant",q.id),this.scrollToActive(),n.signal(this.data,"select",this.data.list[this.selectedHint],q)}},scrollToActive:function(){var H=this.getSelectedHintRange(),A=this.hints.childNodes[H.from],q=this.hints.childNodes[H.to],F=this.hints.firstChild;A.offsetTop<this.hints.scrollTop?this.hints.scrollTop=A.offsetTop-F.offsetTop:q.offsetTop+q.offsetHeight>this.hints.scrollTop+this.hints.clientHeight&&(this.hints.scrollTop=q.offsetTop+q.offsetHeight-this.hints.clientHeight+F.offsetTop)},screenAmount:function(){return Math.floor(this.hints.clientHeight/this.hints.firstChild.offsetHeight)||1},getSelectedHintRange:function(){var H=this.completion.options.scrollMargin||0;return{from:Math.max(0,this.selectedHint-H),to:Math.min(this.data.list.length-1,this.selectedHint+H)}}};function L(H,A){if(!H.somethingSelected())return A;for(var q=[],F=0;F<A.length;F++)A[F].supportsSelection&&q.push(A[F]);return q}function E(H,A,q,F){if(H.async)H(A,F,q);else{var J=H(A,q);J&&J.then?J.then(F):F(J)}}function V(H,A){var q=H.getHelpers(A,"hint"),F;if(q.length){var J=function(St,ot,st){var wt=L(St,q);function Tt(At){if(At==wt.length)return ot(null);E(wt[At],St,st,function(Pt){Pt&&Pt.list.length>0?ot(Pt):Tt(At+1)})}Tt(0)};return J.async=!0,J.supportsSelection=!0,J}else return(F=H.getHelper(H.getCursor(),"hintWords"))?function(St){return n.hint.fromList(St,{words:F})}:n.hint.anyword?function(St,ot){return n.hint.anyword(St,ot)}:function(){}}n.registerHelper("hint","auto",{resolve:V}),n.registerHelper("hint","fromList",function(H,A){var q=H.getCursor(),F=H.getTokenAt(q),J,St=n.Pos(q.line,F.start),ot=q;F.start<q.ch&&/\w/.test(F.string.charAt(q.ch-F.start-1))?J=F.string.substr(0,q.ch-F.start):(J="",St=q);for(var st=[],wt=0;wt<A.words.length;wt++){var Tt=A.words[wt];Tt.slice(0,J.length)==J&&st.push(Tt)}if(st.length)return{list:st,from:St,to:ot}}),n.commands.autocomplete=n.showHint;var at={hint:n.hint.auto,completeSingle:!0,alignWithWord:!0,closeCharacters:/[\s()\[\]{};:>,]/,closeOnPick:!0,closeOnUnfocus:!0,updateOnCursorActivity:!0,completeOnSingleClick:!0,container:null,customKeys:null,extraKeys:null,paddingForScrollbar:!0,moveOnOverlap:!0};n.defineOption("hintOptions",null)})})();(function(i,t){(function(n){n(js())})(function(n){n.defineOption("autoRefresh",!1,function(c,g){c.state.autoRefresh&&(h(c,c.state.autoRefresh),c.state.autoRefresh=null),g&&c.display.wrapper.offsetHeight==0&&r(c,c.state.autoRefresh={delay:g.delay||250})});function r(c,g){function v(){c.display.wrapper.offsetHeight?(h(c,g),c.display.lastWrapHeight!=c.display.wrapper.clientHeight&&c.refresh()):g.timeout=setTimeout(v,g.delay)}g.timeout=setTimeout(v,g.delay),g.hurry=function(){clearTimeout(g.timeout),g.timeout=setTimeout(v,50)},n.on(window,"mouseup",g.hurry),n.on(window,"keyup",g.hurry)}function h(c,g){clearTimeout(g.timeout),n.off(window,"mouseup",g.hurry),n.off(window,"keyup",g.hurry)}})})();class en extends Ht{constructor(t,n,r=globalScope,h="RIGHT",c=2,g=1){if(super(t,n,r,h,g),this.rectangleObject=!1,this.setDimensions(15,20),this.inp=[],this.inputSize=c,c%2===1){for(let w=0;w<c/2-1;w++){const D=new U(-10,-10*(w+1),0,this);this.inp.push(D)}let v=new U(-10,0,0,this);this.inp.push(v);for(let w=c/2+1;w<c;w++)v=new U(-10,10*(w+1-c/2-1),0,this),this.inp.push(v)}else{for(let v=0;v<c/2;v++){const w=new U(-10,-10*(v+1),0,this);this.inp.push(w)}for(let v=c/2;v<c;v++){const w=new U(-10,10*(v+1-c/2),0,this);this.inp.push(w)}}this.output1=new U(20,0,1,this)}customSave(){return{constructorParamaters:[this.direction,this.inputSize,this.bitWidth],nodes:{inp:this.inp.map(tt),output1:tt(this.output1)}}}resolve(){let t=this.inp[0].value||0;if(this.isResolvable()!==!1){for(let n=1;n<this.inputSize;n++)t&=this.inp[n].value||0;this.output1.value=t>>>0,f.simulationQueue.add(this.output1),this.setOutputsUpstream(!0)}}customDraw(){var t=f.context;t.beginPath(),t.lineWidth=Rt(3),t.strokeStyle=ht.stroke,t.fillStyle=ht.fill;const n=this.x,r=this.y;se(t,-10,-20,n,r,this.direction),Ct(t,0,-20,n,r,this.direction),ss(t,0,0,20,-Math.PI/2,Math.PI/2,n,r,this.direction),Ct(t,-10,20,n,r,this.direction),Ct(t,-10,-20,n,r,this.direction),t.closePath(),(this.hover&&!f.shiftDown||f.lastSelected===this||f.multipleObjectSelections.contains(this))&&(t.fillStyle=ht.hover_select),t.fill(),t.stroke()}generateVerilog(){return Qr.call(this,"&")}}en.prototype.tooltipText="And Gate ToolTip : Implements logical conjunction";en.prototype.alwaysResolve=!0;en.prototype.verilogType="and";en.prototype.changeInputSize=Fs;en.prototype.helplink="https://docs.circuitverse.org/#/chapter4/4gates?id=and-gate";en.prototype.objectType="AndGate";class bn extends Ht{constructor(t,n,r=globalScope,h="RIGHT",c=2,g=1){if(super(t,n,r,h,g),this.rectangleObject=!1,this.setDimensions(15,20),this.inp=[],this.inputSize=c,c%2===1){for(let w=0;w<c/2-1;w++){const D=new U(-10,-10*(w+1),0,this);this.inp.push(D)}let v=new U(-10,0,0,this);this.inp.push(v);for(let w=c/2+1;w<c;w++)v=new U(-10,10*(w+1-c/2-1),0,this),this.inp.push(v)}else{for(let v=0;v<c/2;v++){const w=new U(-10,-10*(v+1),0,this);this.inp.push(w)}for(let v=c/2;v<c;v++){const w=new U(-10,10*(v+1-c/2),0,this);this.inp.push(w)}}this.output1=new U(30,0,1,this)}customSave(){return{constructorParamaters:[this.direction,this.inputSize,this.bitWidth],nodes:{inp:this.inp.map(tt),output1:tt(this.output1)}}}resolve(){let t=this.inp[0].value||0;if(this.isResolvable()!==!1){for(let n=1;n<this.inputSize;n++)t&=this.inp[n].value||0;t=~t>>>0<<32-this.bitWidth>>>32-this.bitWidth,this.output1.value=t,f.simulationQueue.add(this.output1),this.setOutputsUpstream(!0)}}customDraw(){var t=f.context;t.beginPath(),t.lineWidth=Rt(3),t.strokeStyle=ht.stroke,t.fillStyle=ht.fill;const n=this.x,r=this.y;se(t,-10,-20,n,r,this.direction),Ct(t,0,-20,n,r,this.direction),ss(t,0,0,20,-Math.PI/2,Math.PI/2,n,r,this.direction),Ct(t,-10,20,n,r,this.direction),Ct(t,-10,-20,n,r,this.direction),t.closePath(),(this.hover&&!f.shiftDown||f.lastSelected===this||f.multipleObjectSelections.contains(this))&&(t.fillStyle=ht.hover_select),t.fill(),t.stroke(),t.beginPath(),$i(t,25,0,5,n,r,this.direction),t.stroke()}generateVerilog(){return Qr.call(this,"&",!0)}}bn.prototype.tooltipText="Nand Gate ToolTip : Combination of AND and NOT gates";bn.prototype.alwaysResolve=!0;bn.prototype.changeInputSize=Fs;bn.prototype.verilogType="nand";bn.prototype.helplink="https://docs.circuitverse.org/#/chapter4/4gates?id=nand-gate";bn.prototype.objectType="NandGate";class Ni extends Ht{constructor(t,n,r=globalScope,h="RIGHT",c=1,g=1){super(t,n,r,h,c),this.controlSignalSize=g||parseInt(prompt("Enter control signal bitWidth"),10),this.inputSize=1<<this.controlSignalSize,this.xOff=0,this.yOff=1,this.controlSignalSize===1&&(this.xOff=10),this.controlSignalSize<=3&&(this.yOff=2),this.setDimensions(20-this.xOff,this.yOff*5*this.inputSize),this.rectangleObject=!1,this.inp=[];for(let v=0;v<this.inputSize;v++){const w=new U(-20+this.xOff,+this.yOff*10*(v-this.inputSize/2)+10,0,this);this.inp.push(w)}this.output1=new U(20-this.xOff,0,1,this),this.controlSignalInput=new U(0,this.yOff*10*(this.inputSize/2-1)+this.xOff+10,0,this,this.controlSignalSize,"Control Signal")}changeControlSignalSize(t){if(t===void 0||t<1||t>32||this.controlSignalSize===t)return;const n=new Ni(this.x,this.y,this.scope,this.direction,this.bitWidth,t);return this.cleanDelete(),f.lastSelected=n,n}newBitWidth(t){this.bitWidth=t;for(let n=0;n<this.inputSize;n++)this.inp[n].bitWidth=t;this.output1.bitWidth=t}isResolvable(){return this.controlSignalInput.value!==void 0&&this.inp[this.controlSignalInput.value].value!==void 0}customSave(){return{constructorParamaters:[this.direction,this.bitWidth,this.controlSignalSize],nodes:{inp:this.inp.map(tt),output1:tt(this.output1),controlSignalInput:tt(this.controlSignalInput)}}}resolve(){this.isResolvable()!==!1&&(this.output1.value=this.inp[this.controlSignalInput.value].value,f.simulationQueue.add(this.output1),this.setOutputsUpstream(!0))}customDraw(){var t=f.context;const n=this.x,r=this.y;t.beginPath(),se(t,0,this.yOff*10*(this.inputSize/2-1)+10+.5*this.xOff,n,r,this.direction),Ct(t,0,this.yOff*5*(this.inputSize-1)+this.xOff,n,r,this.direction),t.stroke(),t.lineWidth=Rt(3),t.beginPath(),t.strokeStyle=ht.stroke,t.fillStyle=ht.fill,se(t,-20+this.xOff,-this.yOff*10*(this.inputSize/2),n,r,this.direction),Ct(t,-20+this.xOff,20+this.yOff*10*(this.inputSize/2-1),n,r,this.direction),Ct(t,20-this.xOff,+this.yOff*10*(this.inputSize/2-1)+this.xOff,n,r,this.direction),Ct(t,20-this.xOff,-this.yOff*10*(this.inputSize/2)-this.xOff+20,n,r,this.direction),t.closePath(),(this.hover&&!f.shiftDown||f.lastSelected===this||f.multipleObjectSelections.contains(this))&&(t.fillStyle=ht.hover_select),t.fill(),t.stroke(),t.beginPath(),t.fillStyle="black",t.textAlign="center";for(let h=0;h<this.inputSize;h++)this.direction==="RIGHT"?Ut(t,String(h),n+this.inp[h].x+7,r+this.inp[h].y+2,10):this.direction==="LEFT"?Ut(t,String(h),n+this.inp[h].x-7,r+this.inp[h].y+2,10):this.direction==="UP"?Ut(t,String(h),n+this.inp[h].x,r+this.inp[h].y-4,10):Ut(t,String(h),n+this.inp[h].x,r+this.inp[h].y+10,10);t.fill()}verilogBaseType(){return this.verilogName()+this.inp.length}generateVerilog(){return Ni.selSizes.add(this.controlSignalSize),Ht.prototype.generateVerilog.call(this)}static moduleVerilog(){var t="";for(var n of Ni.selSizes){for(var r=1<<n,h="",c=0;c<r;c++)h+=`in${c}, `;t+=`
module Multiplexer${r}(out, ${h}sel);
`,t+=`  parameter WIDTH = 1;
`,t+=`  output reg [WIDTH-1:0] out;
`,t+="  input [WIDTH-1:0] ";for(var c=0;c<r-1;c++)t+=`in${c}, `;t+="in"+(r-1)+`;
`,t+=`  input [${n-1}:0] sel;
`,t+=`  
`,t+=`  always @ (*)
`,t+=`    case (sel)
`;for(var c=0;c<r;c++)t+=`      ${c} : out = in${c};
`;t+=`    endcase
`,t+=`endmodule
`,t+=`
`}return t}static resetVerilog(){Ni.selSizes=new Set}}Ni.prototype.tooltipText="Multiplexer ToolTip : Multiple inputs and a single line output.";Ni.prototype.helplink="https://docs.circuitverse.org/#/chapter4/5muxandplex?id=multiplexer";Ni.prototype.mutableProperties={controlSignalSize:{name:"Control Signal Size",type:"number",max:"10",min:"1",func:"changeControlSignalSize"}};Ni.prototype.objectType="Multiplexer";class Bn extends Ht{constructor(t,n,r=globalScope,h="RIGHT",c=2,g=1){if(super(t,n,r,h,g),this.rectangleObject=!1,this.setDimensions(15,20),this.inp=[],this.inputSize=c,c%2===1){for(let w=0;w<c/2-1;w++){const D=new U(-20,-10*(w+1),0,this);this.inp.push(D)}let v=new U(-20,0,0,this);this.inp.push(v);for(let w=c/2+1;w<c;w++)v=new U(-20,10*(w+1-c/2-1),0,this),this.inp.push(v)}else{for(let v=0;v<c/2;v++){const w=new U(-20,-10*(v+1),0,this);this.inp.push(w)}for(let v=c/2;v<c;v++){const w=new U(-20,10*(v+1-c/2),0,this);this.inp.push(w)}}this.output1=new U(20,0,1,this)}customSave(){return{constructorParamaters:[this.direction,this.inputSize,this.bitWidth],nodes:{inp:this.inp.map(tt),output1:tt(this.output1)}}}resolve(){let t=this.inp[0].value||0;if(this.isResolvable()!==!1){for(let n=1;n<this.inputSize;n++)t^=this.inp[n].value||0;this.output1.value=t,f.simulationQueue.add(this.output1),this.setOutputsUpstream(!0)}}customDraw(){var t=f.context;t.strokeStyle=ht.stroke,t.lineWidth=Rt(3);const n=this.x,r=this.y;t.beginPath(),t.fillStyle=ht.fill,se(t,-10,-20,n,r,this.direction,!0),Bi(0,-20,15,-10,20,0,n,r,this.direction),Bi(15,10,0,20,-10,20,n,r,this.direction),Bi(0,0,0,0,-10,-20,n,r,this.direction),t.closePath(),(this.hover&&!f.shiftDown||f.lastSelected===this||f.multipleObjectSelections.contains(this))&&(t.fillStyle=ht.hover_select),t.fill(),t.stroke(),t.beginPath(),af(t,-35,0,25,1.7*Math.PI,.3*Math.PI,n,r,this.direction),t.stroke()}generateVerilog(){return Qr.call(this,"^")}}Bn.prototype.tooltipText="Xor Gate ToolTip : Implements an exclusive OR.";Bn.prototype.alwaysResolve=!0;Bn.prototype.changeInputSize=Fs;Bn.prototype.verilogType="xor";Bn.prototype.helplink="https://docs.circuitverse.org/#/chapter4/4gates?id=xor-gate";Bn.prototype.objectType="XorGate";class nn extends Ht{constructor(t,n,r=globalScope,h="RIGHT",c=2,g=1){if(super(t,n,r,h,g),this.rectangleObject=!1,this.setDimensions(15,20),this.inp=[],this.inputSize=c,c%2===1){for(let w=0;w<c/2-1;w++){const D=new U(-20,-10*(w+1),0,this);this.inp.push(D)}let v=new U(-20,0,0,this);this.inp.push(v);for(let w=c/2+1;w<c;w++)v=new U(-20,10*(w+1-c/2-1),0,this),this.inp.push(v)}else{for(let v=0;v<c/2;v++){const w=new U(-20,-10*(v+1),0,this);this.inp.push(w)}for(let v=c/2;v<c;v++){const w=new U(-20,10*(v+1-c/2),0,this);this.inp.push(w)}}this.output1=new U(30,0,1,this)}customSave(){return{constructorParamaters:[this.direction,this.inputSize,this.bitWidth],nodes:{inp:this.inp.map(tt),output1:tt(this.output1)}}}resolve(){let t=this.inp[0].value||0;if(this.isResolvable()!==!1){for(let n=1;n<this.inputSize;n++)t^=this.inp[n].value||0;t=~t>>>0<<32-this.bitWidth>>>32-this.bitWidth,this.output1.value=t,f.simulationQueue.add(this.output1),this.setOutputsUpstream(!0)}}customDraw(){var t=f.context;t.strokeStyle=ht.stroke,t.lineWidth=Rt(3);const n=this.x,r=this.y;t.beginPath(),t.fillStyle=ht.fill,se(t,-10,-20,n,r,this.direction,!0),Bi(0,-20,15,-10,20,0,n,r,this.direction),Bi(15,10,0,20,-10,20,n,r,this.direction),Bi(0,0,0,0,-10,-20,n,r,this.direction),t.closePath(),(this.hover&&!f.shiftDown||f.lastSelected===this||f.multipleObjectSelections.contains(this))&&(t.fillStyle=ht.hover_select),t.fill(),t.stroke(),t.beginPath(),af(t,-35,0,25,1.7*Math.PI,.3*Math.PI,n,r,this.direction),t.stroke(),t.beginPath(),$i(t,25,0,5,n,r,this.direction),t.stroke()}generateVerilog(){return Qr.call(this,"^",!0)}}nn.prototype.alwaysResolve=!0;nn.prototype.tooltipText="Xnor Gate ToolTip : Logical complement of the XOR gate";nn.prototype.changeInputSize=Fs;nn.prototype.verilogType="xnor";nn.prototype.helplink="https://docs.circuitverse.org/#/chapter4/4gates?id=xnor-gate";nn.prototype.objectType="XnorGate";class Gs extends Ht{constructor(t,n,r=globalScope,h="Red"){super(t,n,r,"RIGHT",1),this.fixedBitWidth=!0,this.directionFixed=!0,this.setDimensions(30,50),this.g=new U(-20,-50,0,this),this.f=new U(-10,-50,0,this),this.a=new U(10,-50,0,this),this.b=new U(20,-50,0,this),this.e=new U(-20,50,0,this),this.d=new U(-10,50,0,this),this.c=new U(10,50,0,this),this.dot=new U(20,50,0,this),this.direction="RIGHT",this.color=h,this.actualColor=h}changeColor(t){if(Fo(t))if(t.trim()==="")this.color="Red",this.actualColor="rgba(255, 0, 0, 1)";else{this.color=t;const n=Ms(t);this.actualColor=`rgba(${n[0]},${n[1]},${n[2]}, ${n[3]})`}}customSave(){return{constructorParamaters:[this.color],nodes:{g:tt(this.g),f:tt(this.f),a:tt(this.a),b:tt(this.b),d:tt(this.d),e:tt(this.e),c:tt(this.c),dot:tt(this.dot)}}}customDrawSegment(t,n,r,h,c){c===void 0&&(c="lightgrey");var g=f.context;g.beginPath(),g.strokeStyle=c,g.lineWidth=Rt(5);const v=this.x,w=this.y;se(g,t,n,v,w,this.direction),Ct(g,r,h,v,w,this.direction),g.closePath(),g.stroke()}customDraw(){var t=f.context;const n=this.x,r=this.y;this.customDrawSegment(18,-3,18,-38,["lightgrey",this.actualColor][this.b.value]),this.customDrawSegment(18,3,18,38,["lightgrey",this.actualColor][this.c.value]),this.customDrawSegment(-18,-3,-18,-38,["lightgrey",this.actualColor][this.f.value]),this.customDrawSegment(-18,3,-18,38,["lightgrey",this.actualColor][this.e.value]),this.customDrawSegment(-17,-38,17,-38,["lightgrey",this.actualColor][this.a.value]),this.customDrawSegment(-17,0,17,0,["lightgrey",this.actualColor][this.g.value]),this.customDrawSegment(-15,38,17,38,["lightgrey",this.actualColor][this.d.value]),t.beginPath();const h=["lightgrey",this.actualColor][this.dot.value]||"lightgrey";t.strokeStyle=h,zi(t,n+22,r+42,2,2),t.stroke()}subcircuitDrawSegment(t,n,r,h,c,g,v){c==null&&(c="lightgrey");var w=f.context;w.beginPath(),w.strokeStyle=c,w.lineWidth=Rt(3);var D=g,T=v;se(w,t,n,D,T,this.direction),Ct(w,r,h,D,T,this.direction),w.closePath(),w.stroke()}subcircuitDraw(t=0,n=0){var r=f.context,h=this.subcircuitMetadata.x+t,c=this.subcircuitMetadata.y+n;this.subcircuitDrawSegment(10,-20,10,-38,["lightgrey",this.actualColor][this.b.value],h,c),this.subcircuitDrawSegment(10,-17,10,1,["lightgrey",this.actualColor][this.c.value],h,c),this.subcircuitDrawSegment(-10,-20,-10,-38,["lightgrey",this.actualColor][this.f.value],h,c),this.subcircuitDrawSegment(-10,-17,-10,1,["lightgrey",this.actualColor][this.e.value],h,c),this.subcircuitDrawSegment(-8,-38,8,-38,["lightgrey",this.actualColor][this.a.value],h,c),this.subcircuitDrawSegment(-8,-18,8,-18,["lightgrey",this.actualColor][this.g.value],h,c),this.subcircuitDrawSegment(-8,1,8,1,["lightgrey",this.actualColor][this.d.value],h,c),r.beginPath();var g=["lightgrey",this.actualColor][this.dot.value]||"lightgrey";r.strokeStyle=g,zi(r,h+13,c+5,1,1),r.stroke(),r.beginPath(),r.strokeStyle="black",r.lineWidth=Rt(1),Ee(r,-15,-42,33,51,h,c,this.direction),r.stroke(),(this.hover&&!f.shiftDown||f.lastSelected==this||f.multipleObjectSelections.contains(this))&&(r.fillStyle="rgba(255, 255, 32,0.6)",r.fill())}generateVerilog(){return`
      always @ (*)
        $display("SevenSegDisplay:${this.verilogLabel}.abcdefg. = %b%b%b%b%b%b%b%b}",
                 ${this.a.verilogLabel}, ${this.b.verilogLabel}, ${this.c.verilogLabel}, ${this.d.verilogLabel}, ${this.e.verilogLabel}, ${this.f.verilogLabel}, ${this.g.verilogLabel}, ${this.dot.verilogLabel});`}}Gs.prototype.tooltipText="Seven Display ToolTip: Consists of 7+1 single bit inputs.";Gs.prototype.helplink="https://docs.circuitverse.org/#/chapter4/3output?id=sevensegdisplay";Gs.prototype.objectType="SevenSegDisplay";Gs.prototype.canShowInSubcircuit=!0;Gs.prototype.layoutProperties={rightDimensionX:20,leftDimensionX:15,upDimensionY:42,downDimensionY:10};Gs.prototype.mutableProperties={color:{name:"Color: ",type:"text",func:"changeColor"}};class Xs extends Ht{constructor(t,n,r=globalScope,h="Red"){super(t,n,r,"RIGHT",16),this.fixedBitWidth=!0,this.directionFixed=!0,this.setDimensions(30,50),this.input1=new U(0,-50,0,this,16),this.dot=new U(0,50,0,this,1),this.direction="RIGHT",this.color=h,this.actualColor=h}changeColor(t){if(Fo(t))if(t.trim()==="")this.color="Red",this.actualColor="rgba(255, 0, 0, 1)";else{this.color=t;const n=Ms(t);this.actualColor=`rgba(${n[0]},${n[1]},${n[2]}, ${n[3]})`}}customSave(){return{constructorParamaters:[this.color],nodes:{input1:tt(this.input1),dot:tt(this.dot)}}}customDrawSegment(t,n,r,h,c){c===void 0&&(c="lightgrey");var g=f.context;g.beginPath(),g.strokeStyle=c,g.lineWidth=Rt(4);const v=this.x,w=this.y;se(g,t,n,v,w,this.direction),Ct(g,r,h,v,w,this.direction),g.closePath(),g.stroke()}customDrawSegmentSlant(t,n,r,h,c){c===void 0&&(c="lightgrey");var g=f.context;g.beginPath(),g.strokeStyle=c,g.lineWidth=Rt(3);const v=this.x,w=this.y;se(g,t,n,v,w,this.direction),Ct(g,r,h,v,w,this.direction),g.closePath(),g.stroke()}customDraw(){var t=f.context;const n=this.x,r=this.y;this.actualColor;const{value:h}=this.input1;this.customDrawSegment(-20,-38,0,-38,["lightgrey",this.actualColor][h>>15&1]),this.customDrawSegment(20,-38,0,-38,["lightgrey",this.actualColor][h>>14&1]),this.customDrawSegment(21.5,-2,21.5,-36,["lightgrey",this.actualColor][h>>13&1]),this.customDrawSegment(21.5,2,21.5,36,["lightgrey",this.actualColor][h>>12&1]),this.customDrawSegment(-20,38,0,38,["lightgrey",this.actualColor][h>>11&1]),this.customDrawSegment(20,38,0,38,["lightgrey",this.actualColor][h>>10&1]),this.customDrawSegment(-21.5,2,-21.5,36,["lightgrey",this.actualColor][h>>9&1]),this.customDrawSegment(-21.5,-36,-21.5,-2,["lightgrey",this.actualColor][h>>8&1]),this.customDrawSegment(-20,0,0,0,["lightgrey",this.actualColor][h>>7&1]),this.customDrawSegment(20,0,0,0,["lightgrey",this.actualColor][h>>6&1]),this.customDrawSegmentSlant(0,0,-21,-37,["lightgrey",this.actualColor][h>>5&1]),this.customDrawSegment(0,-2,0,-36,["lightgrey",this.actualColor][h>>4&1]),this.customDrawSegmentSlant(0,0,21,-37,["lightgrey",this.actualColor][h>>3&1]),this.customDrawSegmentSlant(0,0,21,37,["lightgrey",this.actualColor][h>>2&1]),this.customDrawSegment(0,2,0,36,["lightgrey",this.actualColor][h>>1&1]),this.customDrawSegmentSlant(0,0,-21,37,["lightgrey",this.actualColor][h>>0&1]),t.beginPath();const c=["lightgrey",this.actualColor][this.dot.value]||"lightgrey";t.strokeStyle=c,zi(t,n+22,r+42,2,2),t.stroke()}subcircuitDrawSegment(t,n,r,h,c,g,v){c==null&&(c="lightgrey");var w=f.context;w.beginPath(),w.strokeStyle=c,w.lineWidth=Rt(3);var D=g,T=v;se(w,t,n,D,T,this.direction),Ct(w,r,h,D,T,this.direction),w.closePath(),w.stroke()}subcircuitDrawSegmentSlant(t,n,r,h,c,g,v){c==null&&(c="lightgrey");var w=f.context;w.beginPath(),w.strokeStyle=c,w.lineWidth=Rt(2);var D=g,T=v;se(w,t,n,D,T,this.direction),Ct(w,r,h,D,T,this.direction),w.closePath(),w.stroke()}subcircuitDraw(t=0,n=0){var r=f.context,h=this.subcircuitMetadata.x+t,c=this.subcircuitMetadata.y+n;this.actualColor;var g=this.input1.value;this.subcircuitDrawSegment(-10,-38,0,-38,["lightgrey",this.actualColor][g>>15&1],h,c),this.subcircuitDrawSegment(10,-38,0,-38,["lightgrey",this.actualColor][g>>14&1],h,c),this.subcircuitDrawSegment(11.5,-19,11.5,-36,["lightgrey",this.actualColor][g>>13&1],h,c),this.subcircuitDrawSegment(11.5,2,11.5,-15,["lightgrey",this.actualColor][g>>12&1],h,c),this.subcircuitDrawSegment(-10,4,0,4,["lightgrey",this.actualColor][g>>11&1],h,c),this.subcircuitDrawSegment(10,4,0,4,["lightgrey",this.actualColor][g>>10&1],h,c),this.subcircuitDrawSegment(-11.5,2,-11.5,-15,["lightgrey",this.actualColor][g>>9&1],h,c),this.subcircuitDrawSegment(-11.5,-36,-11.5,-19,["lightgrey",this.actualColor][g>>8&1],h,c),this.subcircuitDrawSegment(-10,-17,0,-17,["lightgrey",this.actualColor][g>>7&1],h,c),this.subcircuitDrawSegment(10,-17,0,-17,["lightgrey",this.actualColor][g>>6&1],h,c),this.subcircuitDrawSegmentSlant(0,-17,-9,-36,["lightgrey",this.actualColor][g>>5&1],h,c),this.subcircuitDrawSegment(0,-36,0,-19,["lightgrey",this.actualColor][g>>4&1],h,c),this.subcircuitDrawSegmentSlant(0,-17,9,-36,["lightgrey",this.actualColor][g>>3&1],h,c),this.subcircuitDrawSegmentSlant(0,-17,9,0,["lightgrey",this.actualColor][g>>2&1],h,c),this.subcircuitDrawSegment(0,-17,0,2,["lightgrey",this.actualColor][g>>1&1],h,c),this.subcircuitDrawSegmentSlant(0,-17,-9,0,["lightgrey",this.actualColor][g>>0&1],h,c),r.beginPath();var v=["lightgrey",this.actualColor][this.dot.value]||"lightgrey";r.strokeStyle=v,zi(r,h+13,c+5,1,1),r.stroke(),r.beginPath(),r.strokeStyle="black",r.lineWidth=Rt(1),Ee(r,-15,-42,33,51,h,c,this.direction),r.stroke(),(this.hover&&!f.shiftDown||f.lastSelected==this||f.multipleObjectSelections.contains(this))&&(r.fillStyle="rgba(255, 255, 32,0.6)",r.fill())}generateVerilog(){return`
      always @ (*)
        $display("SixteenSegDisplay:{${this.input1.verilogLabel},${this.dot.verilogLabel}} = {%16b,%1b}", ${this.input1.verilogLabel}, ${this.dot.verilogLabel});`}}Xs.prototype.tooltipText="Sixteen Display ToolTip: Consists of 16+1 bit inputs.";Xs.prototype.helplink="https://docs.circuitverse.org/#/chapter4/3output?id=sixteensegdisplay";Xs.prototype.objectType="SixteenSegDisplay";Xs.prototype.canShowInSubcircuit=!0;Xs.prototype.layoutProperties={rightDimensionX:20,leftDimensionX:15,upDimensionY:42,downDimensionY:10};Xs.prototype.mutableProperties={color:{name:"Color: ",type:"text",func:"changeColor"}};class Us extends Ht{constructor(t,n,r=globalScope,h="Red"){super(t,n,r,"RIGHT",4),this.directionFixed=!0,this.fixedBitWidth=!0,this.setDimensions(30,50),this.inp=new U(0,-50,0,this,4),this.direction="RIGHT",this.color=h,this.actualColor=h}changeColor(t){if(Fo(t))if(t.trim()==="")this.color="Red",this.actualColor="rgba(255, 0, 0, 1)";else{this.color=t;const n=Ms(t);this.actualColor=`rgba(${n[0]},${n[1]},${n[2]}, ${n[3]})`}}customSave(){return{constructorParamaters:[this.color],nodes:{inp:tt(this.inp)}}}customDrawSegment(t,n,r,h,c){c===void 0&&(c="lightgrey");var g=f.context;g.beginPath(),g.strokeStyle=c,g.lineWidth=Rt(5);const v=this.x,w=this.y;se(g,t,n,v,w,this.direction),Ct(g,r,h,v,w,this.direction),g.closePath(),g.stroke()}customDraw(){var t=f.context;this.x,this.y,t.strokeStyle=ht.stroke,t.lineWidth=Rt(3);let n=0,r=0,h=0,c=0,g=0,v=0,w=0;switch(this.inp.value){case 0:n=r=h=c=g=v=1;break;case 1:r=h=1;break;case 2:n=r=w=g=c=1;break;case 3:n=r=w=h=c=1;break;case 4:v=w=r=h=1;break;case 5:n=v=w=h=c=1;break;case 6:n=v=w=g=h=c=1;break;case 7:n=r=h=1;break;case 8:n=r=h=c=g=w=v=1;break;case 9:n=v=w=r=h=1;break;case 10:n=v=r=h=w=g=1;break;case 11:v=g=w=h=c=1;break;case 12:n=v=g=c=1;break;case 13:r=h=w=g=c=1;break;case 14:n=v=w=g=c=1;break;case 15:n=v=w=g=1;break}this.customDrawSegment(18,-3,18,-38,["lightgrey",this.actualColor][r]),this.customDrawSegment(18,3,18,38,["lightgrey",this.actualColor][h]),this.customDrawSegment(-18,-3,-18,-38,["lightgrey",this.actualColor][v]),this.customDrawSegment(-18,3,-18,38,["lightgrey",this.actualColor][g]),this.customDrawSegment(-17,-38,17,-38,["lightgrey",this.actualColor][n]),this.customDrawSegment(-17,0,17,0,["lightgrey",this.actualColor][w]),this.customDrawSegment(-15,38,17,38,["lightgrey",this.actualColor][c])}subcircuitDrawSegment(t,n,r,h,c,g,v){c==null&&(c="lightgrey");var w=f.context;w.beginPath(),w.strokeStyle=c,w.lineWidth=Rt(3);var D=g,T=v;se(w,t,n,D,T,this.direction),Ct(w,r,h,D,T,this.direction),w.closePath(),w.stroke()}subcircuitDraw(t=0,n=0){var r=f.context,h=this.subcircuitMetadata.x+t,c=this.subcircuitMetadata.y+n;r.strokeStyle="black",r.lineWidth=Rt(3);let g=0,v=0,w=0,D=0,T=0,R=0,W=0;switch(this.inp.value){case 0:g=v=w=D=T=R=1;break;case 1:v=w=1;break;case 2:g=v=W=T=D=1;break;case 3:g=v=W=w=D=1;break;case 4:R=W=v=w=1;break;case 5:g=R=W=w=D=1;break;case 6:g=R=W=T=w=D=1;break;case 7:g=v=w=1;break;case 8:g=v=w=D=T=W=R=1;break;case 9:g=R=W=v=w=1;break;case 10:g=R=v=w=W=T=1;break;case 11:R=T=W=w=D=1;break;case 12:g=R=T=D=1;break;case 13:v=w=W=T=D=1;break;case 14:g=R=W=T=D=1;break;case 15:g=R=W=T=1;break}this.subcircuitDrawSegment(10,-20,10,-38,["lightgrey",this.actualColor][v],h,c),this.subcircuitDrawSegment(10,-17,10,1,["lightgrey",this.actualColor][w],h,c),this.subcircuitDrawSegment(-10,-20,-10,-38,["lightgrey",this.actualColor][R],h,c),this.subcircuitDrawSegment(-10,-17,-10,1,["lightgrey",this.actualColor][T],h,c),this.subcircuitDrawSegment(-8,-38,8,-38,["lightgrey",this.actualColor][g],h,c),this.subcircuitDrawSegment(-8,-18,8,-18,["lightgrey",this.actualColor][W],h,c),this.subcircuitDrawSegment(-8,1,8,1,["lightgrey",this.actualColor][D],h,c),r.beginPath(),r.strokeStyle="black",r.lineWidth=Rt(1),Ee(r,-15,-42,33,51,h,c,this.direction),r.stroke(),(this.hover&&!f.shiftDown||f.lastSelected==this||f.multipleObjectSelections.contains(this))&&(r.fillStyle="rgba(255, 255, 32,0.6)",r.fill())}generateVerilog(){return`
      always @ (*)
        $display("HexDisplay:${this.verilogLabel}=%d", ${this.inp.verilogLabel});`}}Us.prototype.tooltipText="Hex Display ToolTip: Inputs a 4 Bit Hex number and displays it.";Us.prototype.helplink="https://docs.circuitverse.org/#/chapter4/3output?id=hexdisplay";Us.prototype.objectType="HexDisplay";Us.prototype.canShowInSubcircuit=!0;Us.prototype.layoutProperties={rightDimensionX:20,leftDimensionX:15,upDimensionY:42,downDimensionY:10};Us.prototype.mutableProperties={color:{name:"Color: ",type:"text",func:"changeColor"}};class yn extends Ht{constructor(t,n,r=globalScope,h="RIGHT",c=2,g=1){if(super(t,n,r,h,g),this.rectangleObject=!1,this.setDimensions(15,20),this.inp=[],this.inputSize=c,c%2===1){for(let w=Math.floor(c/2)-1;w>=0;w--){const D=new U(-10,-10*(w+1),0,this);this.inp.push(D)}let v=new U(-10,0,0,this);this.inp.push(v);for(let w=0;w<Math.floor(c/2);w++)v=new U(-10,10*(w+1),0,this),this.inp.push(v)}else{for(let v=c/2-1;v>=0;v--){const w=new U(-10,-10*(v+1),0,this);this.inp.push(w)}for(let v=0;v<c/2;v++){const w=new U(-10,10*(v+1),0,this);this.inp.push(w)}}this.output1=new U(20,0,1,this)}customSave(){return{constructorParamaters:[this.direction,this.inputSize,this.bitWidth],nodes:{inp:this.inp.map(tt),output1:tt(this.output1)}}}resolve(){let t=this.inp[0].value||0;if(this.isResolvable()!==!1){for(let n=1;n<this.inputSize;n++)t|=this.inp[n].value||0;this.output1.value=t>>>0,f.simulationQueue.add(this.output1),this.setOutputsUpstream(!0)}}customDraw(){var t=f.context;t.strokeStyle=ht.stroke,t.lineWidth=Rt(3);const n=this.x,r=this.y;t.beginPath(),t.fillStyle=ht.fill,se(t,-10,-20,n,r,this.direction,!0),Bi(0,-20,15,-10,20,0,n,r,this.direction),Bi(15,10,0,20,-10,20,n,r,this.direction),Bi(0,0,0,0,-10,-20,n,r,this.direction),t.closePath(),(this.hover&&!f.shiftDown||f.lastSelected===this||f.multipleObjectSelections.contains(this))&&(t.fillStyle=ht.hover_select),t.fill(),t.stroke()}generateVerilog(){return Qr.call(this,"|")}}yn.prototype.tooltipText="Or Gate ToolTip : Implements logical disjunction";yn.prototype.changeInputSize=Fs;yn.prototype.alwaysResolve=!0;yn.prototype.verilogType="or";yn.prototype.helplink="https://docs.circuitverse.org/#/chapter4/4gates?id=or-gate";yn.prototype.objectType="OrGate";class nl extends Ht{constructor(t,n,r=globalScope,h="RIGHT",c=8){super(t,n,r,h,c),this.setDimensions(20,20),this.output1=new U(20,0,1,this,c),this.state=0}customSave(){var t={constructorParamaters:[this.direction,this.bitWidth],nodes:{output1:tt(this.output1)},values:{state:this.state}};return t}customDraw(){var t=f.context;t.beginPath(),t.font="20px Raleway",t.fillStyle=ht.input_text,t.textAlign="center",Ut(t,this.state.toString(16),this.x,this.y+5),t.fill()}resolve(){this.state=Math.min(this.state,(1<<this.bitWidth)-1),this.output1.value=this.state,f.simulationQueue.add(this.output1),this.setOutputsUpstream(!0)}keyDown2(t){this.state<1<<this.bitWidth&&(t==="+"||t==="=")&&this.state++,this.state>0&&(t==="_"||t==="-")&&this.state--}}nl.prototype.tooltipText="Stepper ToolTip: Increase/Decrease value by selecting the stepper and using +/- keys.";nl.prototype.helplink="https://docs.circuitverse.org/#/chapter4/2input?id=stepper";nl.prototype.objectType="Stepper";class Oi extends Ht{constructor(t,n,r=globalScope,h="RIGHT",c=1){super(t,n,r,h,c),this.rectangleObject=!1,this.setDimensions(15,15),this.inp1=new U(-10,0,0,this),this.output1=new U(20,0,1,this)}customSave(){return{constructorParamaters:[this.direction,this.bitWidth],nodes:{output1:tt(this.output1),inp1:tt(this.inp1)}}}resolve(){this.isResolvable()!==!1&&(this.output1.value=~this.inp1.value>>>0<<32-this.bitWidth>>>32-this.bitWidth,f.simulationQueue.add(this.output1),this.setOutputsUpstream(!0))}customDraw(){var t=f.context;t.strokeStyle=ht.stroke,t.lineWidth=Rt(3);const n=this.x,r=this.y;t.beginPath(),t.fillStyle=ht.fill,se(t,-10,-10,n,r,this.direction),Ct(t,10,0,n,r,this.direction),Ct(t,-10,10,n,r,this.direction),t.closePath(),(this.hover&&!f.shiftDown||f.lastSelected===this||f.multipleObjectSelections.contains(this))&&(t.fillStyle=ht.hover_select),t.fill(),t.stroke(),t.beginPath(),$i(t,15,0,5,n,r,this.direction),t.stroke()}generateVerilog(){return"assign "+this.output1.verilogLabel+" = ~"+this.inp1.verilogLabel+";"}}Oi.prototype.tooltipText="Not Gate ToolTip : Inverts the input digital signal.";Oi.prototype.helplink="https://docs.circuitverse.org/#/chapter4/4gates?id=not-gate";Oi.prototype.objectType="NotGate";Oi.prototype.verilogType="not";function sl(i){if(i!==void 0){var t=JSON.parse(i);if(t.logixClipBoardData){var n=globalScope.id;for(let E=0;E<t.scopes.length;E++)if(le[t.scopes[E].id]===void 0){var r=!1,h=!1;t.scopes[E].verilogMetadata&&(r=t.scopes[E].verilogMetadata.isVerilogCircuit,h=t.scopes[E].verilogMetadata.isMainCircuit);var c=ds(t.scopes[E].name,t.scopes[E].id,r,h);rs(c,t.scopes[E]),le[t.scopes[E].id]=c}Vr(n);var g=new Hs(globalScope.name,globalScope.id),v=globalScope.ox,w=globalScope.oy,D=globalScope.scale;rs(g,t);var T=g.allNodes.length;for(let E=0;E<g.allNodes.length;E++)g.allNodes[E].checkDeleted(),g.allNodes.length!=T&&(T--,E--);var R=0,W=0,L=0;for(let E=0;E<updateOrder.length;E++)for(let V=0;V<g[updateOrder[E]].length;V++){const at=g[updateOrder[E]][V];at.updateScope(globalScope),at.objectType!="Wire"&&(R+=at.x,W+=at.y,L++)}for(let E=0;E<g.CircuitElement.length;E++)g.CircuitElement[E].updateScope(globalScope);R/=L,W/=L,R=Math.round(R/10)*10,W=Math.round(W/10)*10;for(let E=0;E<updateOrder.length;E++)for(let V=0;V<g[updateOrder[E]].length;V++){const at=g[updateOrder[E]][V];at.objectType!=="Wire"&&(at.x+=f.mouseX-R,at.y+=f.mouseY-W)}Object.keys(g).forEach(E=>{g[E]instanceof Array&&E!=="objects"&&E!=="CircuitElement"&&globalScope[E].extend(g[E])});for(let E=0;E<g.Input.length;E++)g.Input[E].layoutProperties.y=Qa(0,globalScope),g.Input[E].layoutProperties.id=hs();for(let E=0;E<g.Output.length;E++)g.Output[E].layoutProperties.x=globalScope.layout.width,g.Output[E].layoutProperties.id=hs(),g.Output[E].layoutProperties.y=Qa(globalScope.layout.width,globalScope);ze(!0),gl(!0),ge(),globalScope.ox=v,globalScope.oy=w,globalScope.scale=D,Ei(!0)}}}function Dh(i,t=!1){if(i.length===0)return;var n=new Hs(globalScope.name,globalScope.id),r=globalScope.ox,h=globalScope.oy,c=globalScope.scale,g=No(globalScope);const v=globalScope.testbenchData;if(rs(n,g),le[n.id]=n,t)for(let E=0;E<i.length;E++){const V=i[E];V.objectType==="Node"&&(V.objectType="allNodes");for(let at=0;at<n[V.objectType].length;at++)if(n[V.objectType][at].x===V.x&&n[V.objectType][at].y===V.y&&(V.objectType!="Node"||V.type===2)){n[V.objectType][at].delete();break}}n.backups=globalScope.backups;for(let E=0;E<updateOrder.length;E++){let V=globalScope[updateOrder[E]].length;for(let at=0;at<globalScope[updateOrder[E]].length;at++)globalScope[updateOrder[E]][at].objectType!="Wire"&&(i.contains(globalScope[updateOrder[E]][at])||globalScope[updateOrder[E]][at].cleanDelete()),globalScope[updateOrder[E]].length!=V&&(V--,at--)}var w=globalScope.wires.length;for(let E=0;E<globalScope.wires.length;E++)globalScope.wires[E].checkConnections(),globalScope.wires.length!=w&&(w--,E--);ze(!0);var D=No(globalScope);D.scopes=[];var T={},R=globalScope.getDependencies(),W={};Object.keys(le).forEach(E=>{T[E]=le[E].getDependencies()});function L(E){if(!W[E]){for(let V=0;V<T[E].length;V++)L(T[E][V]);W[E]=!0,D.scopes.push(No(le[E]))}}for(let E=0;E<R.length;E++)L(R[E]);return D.logixClipBoardData=!0,D.testbenchData=void 0,D=JSON.stringify(D),f.multipleObjectSelections=[],f.copyList=[],ze(!0),globalScope=n,ge(),globalScope.ox=r,globalScope.oy=h,globalScope.scale=c,v&&(globalScope.testbenchData=new Jn(v.testData,v.currentGroup,v.currentCase)),Ei(!0),D}function jm(i=globalScope){moduleList.forEach((t,n,r)=>{i.hasOwnProperty(t)&&f.multipleObjectSelections.push(...i[t])}),i.nodes&&f.multipleObjectSelections.push(...i.nodes)}class Ys extends Ht{constructor(t,n,r=globalScope,h="",c=14){super(t,n,r,"RIGHT",1),this.fixedBitWidth=!0,this.directionFixed=!0,this.labelDirectionFixed=!0,this.setLabel(h),this.setFontSize(c)}setLabel(t=""){this.label=t;var n=f.context;n.font=`${this.fontSize}px Raleway`,this.leftDimensionX=10,this.rightDimensionX=n.measureText(this.label).width+10,this.setTextboxSize()}setFontSize(t=14){this.fontSize=t;var n=f.context;n.font=`${this.fontSize}px Raleway`,this.setTextboxSize()}setTextboxSize(){this.leftDimensionX=10;var t=0,n=this.label.split(`
`),r=f.context;n.forEach(h=>t=Math.max(t,r.measureText(h).width)),this.rightDimensionX=t+10,this.downDimensionY=n.length*this.fontSize}customSave(){return{constructorParamaters:[this.label,this.fontSize]}}keyDown(t){if(f.controlDown&&(t==="c"||t==="C")){const n=Dh([this]);navigator.clipboard.writeText(n),localStorage.setItem("clipboardData",n)}else f.controlDown&&(t==="v"||t==="V")?sl(localStorage.getItem("clipboardData")):t.length===1?this.label==="Enter Text Here"?this.setLabel(t):this.setLabel(this.label+t):t==="Backspace"?this.label==="Enter Text Here"?this.setLabel(""):this.setLabel(this.label.slice(0,-1)):t==="Enter"&&(this.label==="Enter Text Here"?this.setLabel(""):this.setLabel(this.label+`
`));$("[name=setLabel]").val(this.label)}draw(){this.label.length===0&&f.lastSelected!==this&&this.delete();var t=f.context;t.strokeStyle=ht.stroke,t.lineWidth=1;const n=this.x,r=this.y;if(this.hover&&!f.shiftDown||f.lastSelected===this||f.multipleObjectSelections.contains(this)){t.beginPath(),t.fillStyle=ht.fill;const g=this.fontSize-14;Ee(t,-this.leftDimensionX,-this.upDimensionY-g,this.leftDimensionX+this.rightDimensionX,this.upDimensionY+this.downDimensionY+g,this.x,this.y,"RIGHT"),t.fillStyle="rgba(255, 255, 32,0.1)",t.fill(),t.stroke()}t.beginPath(),t.textAlign="left",t.fillStyle=ht.text;for(var h=this.label.split(`
`),c=0;c<h.length;c++)Ut(t,h[c],n,r+5+c*this.fontSize,this.fontSize);t.fill()}}Ys.prototype.tooltipText="Text ToolTip: Use this to document your circuit.";Ys.prototype.helplink="https://docs.circuitverse.org/#/chapter4/7annotation?id=text";Ys.prototype.mutableProperties={fontSize:{name:"Font size: ",type:"number",max:"84",min:"14",func:"setFontSize"},label:{name:"Text: ",type:"textarea",func:"setLabel"}};Ys.prototype.disableLabel=!0;Ys.prototype.objectType="Text";Ys.prototype.propagationDelayFixed=!0;class rl extends Ht{constructor(t,n,r=globalScope,h="RIGHT",c=1){super(t,n,r,h,c),this.rectangleObject=!1,this.setDimensions(15,15),this.inp1=new U(-10,0,0,this),this.output1=new U(20,0,1,this),this.state=new U(0,0,0,this,1,"Enable")}customSave(){return{constructorParamaters:[this.direction,this.bitWidth],nodes:{output1:tt(this.output1),inp1:tt(this.inp1),state:tt(this.state)}}}newBitWidth(t){this.inp1.bitWidth=t,this.output1.bitWidth=t,this.bitWidth=t}resolve(){this.isResolvable()!==!1&&(this.state.value===1?this.output1.value!==this.inp1.value&&(this.output1.value=this.inp1.value,f.simulationQueue.add(this.output1),this.setOutputsUpstream(!0)):this.output1.value!==void 0&&!f.contentionPending.has(this.output1)?(this.output1.value=void 0,f.simulationQueue.add(this.output1),this.setOutputsUpstream(!1)):this.setOutputsUpstream(!1),f.contentionPending.removeAllContentionsForNode(this.output1))}customDraw(){var t=f.context;t.strokeStyle=ht.stroke,t.lineWidth=Rt(3);const n=this.x,r=this.y;t.beginPath(),t.fillStyle=ht.fill,se(t,-10,-15,n,r,this.direction),Ct(t,20,0,n,r,this.direction),Ct(t,-10,15,n,r,this.direction),t.closePath(),(this.hover&&!f.shiftDown||f.lastSelected===this||f.multipleObjectSelections.contains(this))&&(t.fillStyle=ht.hover_select),t.fill(),t.stroke()}generateVerilog(){return`assign ${this.output1.verilogLabel} = (${this.state.verilogLabel}!=0) ? ${this.inp1.verilogLabel} : ${this.inp1.bitWidth}'b?;`}}rl.prototype.tooltipText="TriState ToolTip : Effectively removes the output from the circuit.";rl.prototype.helplink="https://docs.circuitverse.org/#/chapter4/8misc?id=tristate-buffer";rl.prototype.objectType="TriState";class Uo extends Ht{constructor(t,n,r=globalScope,h="RIGHT",c=1){super(t,n,r,h,c),this.rectangleObject=!1,this.setDimensions(15,15),this.state=0,this.preState=0,this.inp1=new U(-10,0,0,this),this.reset=new U(0,0,0,this,1,"reset"),this.output1=new U(20,0,1,this)}customSave(){return{constructorParamaters:[this.direction,this.bitWidth],nodes:{output1:tt(this.output1),inp1:tt(this.inp1),reset:tt(this.reset)}}}newBitWidth(t){this.inp1.bitWidth=t,this.output1.bitWidth=t,this.bitWidth=t}isResolvable(){return!0}resolve(){this.reset.value===1&&(this.state=this.preState),this.inp1.value!==void 0&&(this.state=this.inp1.value),this.output1.value=this.state,f.simulationQueue.add(this.output1),this.setOutputsUpstream(!0)}customDraw(){var t=f.context;t.strokeStyle=ht.stroke_alt,t.lineWidth=Rt(3);const n=this.x,r=this.y;t.beginPath(),t.fillStyle=ht.fill,se(t,-10,-15,n,r,this.direction),Ct(t,20,0,n,r,this.direction),Ct(t,-10,15,n,r,this.direction),t.closePath(),(this.hover&&!f.shiftDown||f.lastSelected===this||f.multipleObjectSelections.contains(this))&&(t.fillStyle=ht.hover_select),t.fill(),t.stroke()}generateVerilog(){return"assign "+this.output1.verilogLabel+" = "+this.inp1.verilogLabel+";"}}Uo.prototype.tooltipText="Buffer ToolTip : Isolate the input from the output.";Uo.prototype.helplink="https://docs.circuitverse.org/#/chapter4/8misc?id=buffer";Uo.prototype.objectType="Buffer";class Gh extends Ht{constructor(t,n,r=globalScope,h="RIGHT",c=1){super(t,n,r,h,c),this.rectangleObject=!1,this.setDimensions(15,15),this.inp1=new U(-10,0,0,this),this.output1=new U(30,0,1,this),this.state=new U(0,0,0,this,1,"Enable")}customSave(){return{constructorParamaters:[this.direction,this.bitWidth],nodes:{output1:tt(this.output1),inp1:tt(this.inp1),state:tt(this.state)}}}newBitWidth(t){this.inp1.bitWidth=t,this.output1.bitWidth=t,this.bitWidth=t}resolve(){this.isResolvable()!==!1&&(this.state.value===1?(this.output1.value=~this.inp1.value>>>0<<32-this.bitWidth>>>32-this.bitWidth,f.simulationQueue.add(this.output1),this.setOutputsUpstream(!0)):this.output1.value!==void 0&&!f.contentionPending.has(this.output1)&&(this.output1.value=void 0,f.simulationQueue.add(this.output1),this.setOutputsUpstream(!1)),f.contentionPending.removeAllContentionsForNode(this.output1))}customDraw(){var t=f.context;t.strokeStyle=ht.stroke,t.lineWidth=Rt(3);const n=this.x,r=this.y;t.beginPath(),t.fillStyle=ht.fill,se(t,-10,-15,n,r,this.direction),Ct(t,20,0,n,r,this.direction),Ct(t,-10,15,n,r,this.direction),t.closePath(),(this.hover&&!f.shiftDown||f.lastSelected===this||f.multipleObjectSelections.contains(this))&&(t.fillStyle=ht.hover_select),t.fill(),t.stroke(),t.beginPath(),$i(t,25,0,5,n,r,this.direction),t.stroke()}generateVerilog(){return`assign ${this.output1.verilogLabel} = (${this.state.verilogLabel}!=0) ? ~${this.inp1.verilogLabel} : ${this.inp1.verilogLabel};`}}Gh.prototype.tooltipText="Controlled Inverter ToolTip : Controlled buffer and NOT gate.";Gh.prototype.objectType="ControlledInverter";class qs extends Ht{constructor(t,n,r=globalScope,h="RIGHT",c=1){super(t,n,r,h,c),this.setDimensions(20,20),this.inpA=new U(-20,-10,0,this,this.bitWidth,"A"),this.inpB=new U(-20,0,0,this,this.bitWidth,"B"),this.carryIn=new U(-20,10,0,this,1,"Cin"),this.sum=new U(20,0,1,this,this.bitWidth,"Sum"),this.carryOut=new U(20,10,1,this,1,"Cout")}customSave(){return{constructorParamaters:[this.direction,this.bitWidth],nodes:{inpA:tt(this.inpA),inpB:tt(this.inpB),carryIn:tt(this.carryIn),carryOut:tt(this.carryOut),sum:tt(this.sum)}}}isResolvable(){return this.inpA.value!==void 0&&this.inpB.value!==void 0}newBitWidth(t){this.bitWidth=t,this.inpA.bitWidth=t,this.inpB.bitWidth=t,this.sum.bitWidth=t}resolve(){if(this.isResolvable()===!1)return;let t=this.carryIn.value;t===void 0&&(t=0);const n=this.inpA.value+this.inpB.value+t;this.sum.value=n<<32-this.bitWidth>>>32-this.bitWidth,this.carryOut.value=+(n>>>this.bitWidth!==0),f.simulationQueue.add(this.carryOut),f.simulationQueue.add(this.sum),this.setOutputsUpstream(!0)}generateVerilog(){return this.carryIn.verilogLabel?`assign ${this.sum.verilogLabel} = ${this.inpA.verilogLabel} + ${this.inpB.verilogLabel} + ${this.carryIn.verilogLabel};`:`assign ${this.sum.verilogLabel} = ${this.inpA.verilogLabel} + ${this.inpB.verilogLabel};`}}qs.prototype.tooltipText="Adder ToolTip : Performs addition of numbers.";qs.prototype.helplink="https://docs.circuitverse.org/#/chapter4/8misc?id=adder";qs.prototype.objectType="Adder";class Yo extends Ht{constructor(t,n,r=globalScope,h="RIGHT",c=1,g=1){super(t,n,r,h,c),this.setDimensions(20,20),this.outputBitWidth=g,this.inpA=new U(-20,-10,0,this,this.bitWidth,"A"),this.inpB=new U(-20,0,0,this,this.bitWidth,"B"),this.product=new U(20,0,1,this,this.outputBitWidth,"Product")}customSave(){return{constructorParamaters:[this.direction,this.bitWidth,this.outputBitWidth],nodes:{inpA:tt(this.inpA),inpB:tt(this.inpB),product:tt(this.product)}}}isResolvable(){return this.inpA.value!==void 0&&this.inpB.value!==void 0}newBitWidth(t){this.bitWidth=t,this.inpA.bitWidth=t,this.inpB.bitWidth=t,this.product.bitWidth=t}resolve(){if(this.isResolvable()===!1)return;const t=this.inpA.value*this.inpB.value;this.product.value=t<<32-this.outputBitWidth>>>32-this.outputBitWidth,f.simulationQueue.add(this.product),this.setOutputsUpstream(!0)}}Yo.prototype.tooltipText="verilogMultiplier ToolTip : Performs addition of numbers.";Yo.prototype.helplink="https://docs.circuitverse.org/#/miscellaneous?id=verilogMultiplier";Yo.prototype.objectType="verilogMultiplier";class Hr extends Ht{constructor(t,n,r=globalScope,h="RIGHT",c=1,g=1){super(t,n,r,h,c),this.setDimensions(20,20),this.outputBitWidth=g,this.inpA=new U(-20,-10,0,this,this.bitWidth,"A"),this.inpB=new U(-20,0,0,this,this.bitWidth,"B"),this.quotient=new U(20,0,1,this,this.outputBitWidth,"Quotient"),this.remainder=new U(20,0,1,this,this.outputBitWidth,"Remainder")}customSave(){return{constructorParamaters:[this.direction,this.bitWidth,this.outputBitWidth],nodes:{inpA:tt(this.inpA),inpB:tt(this.inpB),quotient:tt(this.quotient),remainder:tt(this.remainder)}}}isResolvable(){return this.inpA.value!==void 0&&this.inpB.value!==void 0}newBitWidth(t){this.bitWidth=t,this.inpA.bitWidth=t,this.inpB.bitWidth=t,this.quotient.bitWidth=t,this.remainder.bitWidth=t}resolve(){if(this.isResolvable()===!1)return;const t=this.inpA.value/this.inpB.value,n=this.inpA.value%this.inpB.value;this.remainder.value=n<<32-this.outputBitWidth>>>32-this.outputBitWidth,this.quotient.value=t<<32-this.outputBitWidth>>>32-this.outputBitWidth,f.simulationQueue.add(this.quotient),f.simulationQueue.add(this.remainder),this.setOutputsUpstream(!0)}}Hr.prototype.tooltipText="verilogDivider ToolTip : Performs addition of numbers.";Hr.prototype.helplink="https://docs.circuitverse.org/#/miscellaneous?id=verilogDivider";Hr.prototype.objectType="verilogDivider";class qo extends Ht{constructor(t,n,r=globalScope,h="RIGHT",c=1,g=1){super(t,n,r,h,c),this.setDimensions(20,20),this.outputBitWidth=g,this.inpA=new U(-20,-10,0,this,this.bitWidth,"A"),this.inpB=new U(-20,0,0,this,this.bitWidth,"B"),this.answer=new U(20,0,1,this,this.outputBitWidth,"Answer")}customSave(){return{constructorParamaters:[this.direction,this.bitWidth,this.outputBitWidth],nodes:{inpA:tt(this.inpA),inpB:tt(this.inpB),answer:tt(this.answer)}}}isResolvable(){return this.inpA.value!==void 0&&this.inpB.value!==void 0}newBitWidth(t){this.bitWidth=t,this.inpA.bitWidth=t,this.inpB.bitWidth=t,this.answer.bitWidth=t}resolve(){if(this.isResolvable()===!1)return;const t=Math.pow(this.inpA.value,this.inpB.value);this.answer.value=t<<32-this.outputBitWidth>>>32-this.outputBitWidth,f.simulationQueue.add(this.answer),this.setOutputsUpstream(!0)}}qo.prototype.tooltipText="verilogPower ToolTip : Performs addition of numbers.";qo.prototype.helplink="https://docs.circuitverse.org/#/miscellaneous?id=verilogPower";qo.prototype.objectType="verilogPower";class Vo extends Ht{constructor(t,n,r=globalScope,h="RIGHT",c=1,g=1){super(t,n,r,h,c),this.setDimensions(20,20),this.outputBitWidth=g,this.inp1=new U(-20,-10,0,this,this.bitWidth,"Input"),this.shiftInp=new U(-20,0,0,this,this.bitWidth,"ShiftInput"),this.output1=new U(20,0,1,this,this.outputBitWidth,"Output")}customSave(){return{constructorParamaters:[this.direction,this.bitWidth,this.outputBitWidth],nodes:{inp1:tt(this.inp1),shiftInp:tt(this.shiftInp),output1:tt(this.output1)}}}isResolvable(){return this.inp1.value!==void 0&&this.shiftInp.value!==void 0}newBitWidth(t){this.bitWidth=t,this.inp1.bitWidth=t,this.shiftInp.bitWidth=t,this.output1.bitWidth=t}resolve(){if(this.isResolvable()===!1)return;const t=this.inp1.value<<this.shiftInp.value;this.output1.value=t<<32-this.outputBitWidth>>>32-this.outputBitWidth,f.simulationQueue.add(this.output1),this.setOutputsUpstream(!0)}}Vo.prototype.tooltipText="verilogShiftLeft ToolTip : Performs addition of numbers.";Vo.prototype.helplink="https://docs.circuitverse.org/#/miscellaneous?id=verilogShiftLeft";Vo.prototype.objectType="verilogShiftLeft";class Ko extends Ht{constructor(t,n,r=globalScope,h="RIGHT",c=1,g=1){super(t,n,r,h,c),this.setDimensions(20,20),this.outputBitWidth=g,this.inp1=new U(-20,-10,0,this,this.bitWidth,"Input"),this.shiftInp=new U(-20,0,0,this,this.bitWidth,"ShiftInput"),this.output1=new U(20,0,1,this,this.outputBitWidth,"Output")}customSave(){return{constructorParamaters:[this.direction,this.bitWidth,this.outputBitWidth],nodes:{inp1:tt(this.inp1),shiftInp:tt(this.shiftInp),output1:tt(this.output1)}}}isResolvable(){return this.inp1.value!==void 0&&this.shiftInp.value!==void 0}newBitWidth(t){this.bitWidth=t,this.inp1.bitWidth=t,this.shiftInp.bitWidth=t,this.output1.bitWidth=t}resolve(){if(this.isResolvable()===!1)return;const t=this.inp1.value>>this.shiftInp.value;this.output1.value=t<<32-this.outputBitWidth>>>32-this.outputBitWidth,f.simulationQueue.add(this.output1),this.setOutputsUpstream(!0)}}Ko.prototype.tooltipText="verilogShiftRight ToolTip : Performs addition of numbers.";Ko.prototype.helplink="https://docs.circuitverse.org/#/miscellaneous?id=verilogShiftRight";Ko.prototype.objectType="verilogShiftRight";class Xh extends Ht{constructor(t,n,r=globalScope,h="RIGHT",c=1){super(t,n,r,h,c),this.rectangleObject=!1,this.setDimensions(15,15),this.inp1=new U(-10,0,0,this,this.bitWidth,"input stream"),this.output1=new U(20,0,1,this,this.bitWidth,"2's complement")}customSave(){return{constructorParamaters:[this.direction,this.bitWidth],nodes:{output1:tt(this.output1),inp1:tt(this.inp1)}}}resolve(){if(this.isResolvable()===!1)return;let t=~this.inp1.value>>>0<<32-this.bitWidth>>>32-this.bitWidth;t+=1,this.output1.value=t<<32-this.bitWidth>>>32-this.bitWidth,f.simulationQueue.add(this.output1),this.setOutputsUpstream(!0)}customDraw(){var t=f.context;t.strokeStyle=ht.stroke,t.lineWidth=Rt(3);const n=this.x,r=this.y;t.beginPath(),t.fillStyle="black",Ut(t,"2'",n,r,10),(this.hover&&!f.shiftDown||f.lastSelected===this||f.multipleObjectSelections.contains(this))&&(t.fillStyle=ht.hover_select),t.fill(),t.beginPath(),$i(t,5,0,15,n,r,this.direction),t.stroke()}generateVerilog(){return`assign ${this.output1.verilogLabel} = ~${this.inp1.verilogLabel} + 1;`}}Xh.prototype.tooltipText="Two's Complement Tooltip : Calculates the two's complement";Xh.prototype.objectType="TwoComplement";function Gm(i,t,n){return i<<32-n>>>32-(n-t+1)}class xe extends Ht{constructor(t,n,r=globalScope,h="RIGHT",c=void 0,g=void 0){super(t,n,r,h,c),this.rectangleObject=!1,this.bitWidthSplit=g||(prompt("Enter bitWidth Split")||`${"1 ".repeat((this.bitWidth||1)-1)}1`).split(" ").filter(v=>v!=="").map(v=>parseInt(v,10)||1),this.splitCount=this.bitWidthSplit.length,this.setDimensions(10,(this.splitCount-1)*10+10),this.yOffset=(this.splitCount/2-1)*20,this.inp1=new U(-10,10+this.yOffset,0,this,this.bitWidth),this.outputs=[];for(let v=0;v<this.splitCount;v++)this.outputs.push(new U(20,v*20-this.yOffset-20,0,this,this.bitWidthSplit[v]));this.prevInpValue=void 0}customSave(){return{constructorParamaters:[this.direction,this.bitWidth,this.bitWidthSplit],nodes:{outputs:this.outputs.map(tt),inp1:tt(this.inp1)}}}removePropagation(){if(this.inp1.value===void 0){let t=0;for(t=0;t<this.outputs.length;t++)if(this.outputs[t].value===void 0)return;for(t=0;t<this.outputs.length;t++)this.outputs[t].value!==void 0&&(this.outputs[t].value=void 0,f.simulationQueue.add(this.outputs[t]))}else this.inp1.value!==void 0&&(this.inp1.value=void 0,f.simulationQueue.add(this.inp1));this.prevInpValue=void 0}isResolvable(){let t=!1;if(this.inp1.value!==this.prevInpValue)return this.inp1.value!==void 0;let n;for(n=0;n<this.splitCount&&this.outputs[n].value!==void 0;n++);return n===this.splitCount&&(t=!0),t}resolve(){if(this.isResolvable()!==!1){if(this.inp1.value!==void 0&&this.inp1.value!==this.prevInpValue){let t=1;for(let n=0;n<this.splitCount;n++){const r=Gm(this.inp1.value,t,t+this.bitWidthSplit[n]-1);this.outputs[n].value!==r&&this.outputs[n].value!==r&&(this.outputs[n].value=r,f.simulationQueue.add(this.outputs[n])),t+=this.bitWidthSplit[n]}}else{let t=0;for(let n=this.splitCount-1;n>=0;n--)t<<=this.bitWidthSplit[n],t+=this.outputs[n].value;this.inp1.value!==t>>>0&&(this.inp1.value=t>>>0,f.simulationQueue.add(this.inp1))}this.prevInpValue=this.inp1.value}}reset(){this.prevInpValue=void 0}processVerilog(){if(this.inp1.verilogLabel!==""&&this.outputs[0].verilogLabel===""){let t=0;for(let n=0;n<this.splitCount;n++)this.bitWidthSplit[n]>1?(`${this.inp1.verilogLabel}`,t+this.bitWidthSplit[n]-1,`${t}`):`${this.inp1.verilogLabel}${t}`,this.outputs[n].verilogLabel!==label&&(this.outputs[n].verilogLabel=label,this.scope.stack.push(this.outputs[n])),t+=this.bitWidthSplit[n]}else if(this.inp1.verilogLabel===""&&this.outputs[0].verilogLabel!==""){const t=`{${this.outputs.map(n=>n.verilogLabel).join(",")}}`;this.inp1.verilogLabel!==t&&(this.inp1.verilogLabel=t,this.scope.stack.push(this.inp1))}}customDraw(){var t=f.context;t.strokeStyle=[ht.splitter,"brown"][(this.hover&&!f.shiftDown||f.lastSelected===this||f.multipleObjectSelections.contains(this))+0],t.lineWidth=Rt(3);const n=this.x,r=this.y;t.beginPath(),se(t,-10,10+this.yOffset,n,r,this.direction),Ct(t,0,0+this.yOffset,n,r,this.direction),Ct(t,0,-20*(this.splitCount-1)+this.yOffset,n,r,this.direction);let h=0;for(let g=this.splitCount-1;g>=0;g--)se(t,0,-20*g+this.yOffset,n,r,this.direction),Ct(t,20,-20*g+this.yOffset,n,r,this.direction);t.stroke(),t.beginPath(),t.fillStyle=ht.text;for(let g=this.splitCount-1;g>=0;g--){var c;this.bitWidthSplit[this.splitCount-g-1]==1?c=`${h}`:c=`${h}:${h+this.bitWidthSplit[this.splitCount-g-1]-1}`,Oo(t,c,16,-20*g+this.yOffset+10,n,r,this.direction),h+=this.bitWidthSplit[this.splitCount-g-1]}t.fill()}processVerilog(){if(this.inp1.verilogLabel==""){this.isSplitter=!1,this.inp1.verilogLabel=this.verilogLabel+"_cmb",this.scope.verilogWireList[this.bitWidth].contains(this.inp1.verilogLabel)||this.scope.verilogWireList[this.bitWidth].push(this.inp1.verilogLabel),this.scope.stack.push(this.inp1);return}this.isSplitter=!0;for(var t=0;t<this.outputs.length;t++){var n=0,r=this.inp1.verilogLabel,h=/^(.*)\[(\d*):(\d*)\]$/;if(h.test(r)){var c=r.match(h);r=c[1],n=parseInt(c[3])}for(var g=0;g<this.splitCount;g++){if(this.bitWidthSplit[g]>1)var v=r+"["+(n+this.bitWidthSplit[g]-1)+":"+n+"]";else var v=r+"["+n+"]";this.outputs[g].verilogLabel!=v&&(this.outputs[g].verilogLabel=v,this.scope.stack.push(this.outputs[g])),n+=this.bitWidthSplit[g]}}}generateVerilog(){var t="";if(!this.isSplitter){t+="assign "+this.inp1.verilogLabel+" = {";for(var n=this.outputs.length-1;n>0;n--)t+=this.outputs[n].verilogLabel+",";t+=this.outputs[0].verilogLabel+"};"}return t}}xe.prototype.tooltipText="Splitter ToolTip: Split multiBit Input into smaller bitwidths or vice versa.";xe.prototype.helplink="https://docs.circuitverse.org/#/chapter4/8misc?id=splitter";xe.prototype.objectType="Splitter";class Qo extends Ht{constructor(t,n,r=globalScope,h=1){super(t,n,r,"RIGHT",h),this.rectangleObject=!1,this.setDimensions(10,10),this.directionFixed=!0,this.output1=new U(0,-10,1,this)}customSave(){return{nodes:{output1:tt(this.output1)},values:{state:this.state},constructorParamaters:[this.direction,this.bitWidth]}}resolve(){this.output1.value=0,f.simulationQueue.add(this.output1),this.setOutputsUpstream(!0)}customSave(){return{nodes:{output1:tt(this.output1)},constructorParamaters:[this.bitWidth]}}customDraw(){var t=f.context;t.beginPath(),t.strokeStyle=[ht.stroke,"brown"][(this.hover&&!f.shiftDown||f.lastSelected===this||f.multipleObjectSelections.contains(this))+0],t.lineWidth=Rt(3);const n=this.x,r=this.y;se(t,0,-10,n,r,this.direction),Ct(t,0,0,n,r,this.direction),se(t,-10,0,n,r,this.direction),Ct(t,10,0,n,r,this.direction),se(t,-6,5,n,r,this.direction),Ct(t,6,5,n,r,this.direction),se(t,-2.5,10,n,r,this.direction),Ct(t,2.5,10,n,r,this.direction),t.stroke()}generateVerilog(){return`assign ${this.output1.verilogLabel} = ${this.bitWidth}'b0;`}}Qo.prototype.tooltipText="Ground: All bits are Low(0).";Qo.prototype.helplink="https://docs.circuitverse.org/#/chapter4/2input?id=ground";Qo.prototype.propagationDelay=0;Qo.prototype.objectType="Ground";class Zo extends Ht{constructor(t,n,r=globalScope,h=1){super(t,n,r,"RIGHT",h),this.directionFixed=!0,this.rectangleObject=!1,this.setDimensions(10,10),this.output1=new U(0,10,1,this)}resolve(){this.output1.value=-1>>>32-this.bitWidth,f.simulationQueue.add(this.output1),this.setOutputsUpstream(!0)}customSave(){return{nodes:{output1:tt(this.output1)},constructorParamaters:[this.bitWidth]}}customDraw(){var t=f.context;const n=this.x,r=this.y;t.beginPath(),t.strokeStyle="rgba(0,0,0,1)",t.lineWidth=Rt(3),t.fillStyle=ht.fill,se(t,0,-10,n,r,this.direction),Ct(t,-10,0,n,r,this.direction),Ct(t,10,0,n,r,this.direction),Ct(t,0,-10,n,r,this.direction),t.closePath(),t.stroke(),(this.hover&&!f.shiftDown||f.lastSelected===this||f.multipleObjectSelections.contains(this))&&(t.fillStyle=ht.hover_select),t.fill(),se(t,0,0,n,r,this.direction),Ct(t,0,10,n,r,this.direction),t.stroke()}generateVerilog(){return`assign ${this.output1.verilogLabel} = ~${this.bitWidth}'b0;`}}Zo.prototype.tooltipText="Power: All bits are High(1).";Zo.prototype.helplink="https://docs.circuitverse.org/#/chapter4/2input?id=power";Zo.prototype.propagationDelay=0;Zo.prototype.objectType="Power";function Xm(i){return parseInt(i,2)}function Um(i,t=void 0){var n=i.toString(2);return t==null?n:"0".repeat(t-n.length)+n}class us extends Ht{constructor(t,n,r=globalScope,h="RIGHT",c=1,g){super(t,n,r,h,c),g?this.layoutProperties=g:(this.layoutProperties={},this.layoutProperties.x=0,this.layoutProperties.y=Qa(0,r),this.layoutProperties.id=hs()),this.state=0,this.orientationFixed=!1,this.state=Xm(this.state),this.output1=new U(this.bitWidth*10,0,1,this),this.wasClicked=!1,this.directionFixed=!0,this.setWidth(this.bitWidth*10),this.rectangleObject=!0}customSave(){return{nodes:{output1:tt(this.output1)},values:{state:this.state},constructorParamaters:[this.direction,this.bitWidth,this.layoutProperties]}}resolve(){this.output1.value=this.state,f.simulationQueue.add(this.output1),this.setOutputsUpstream(!0)}newBitWidth(t){if(t<1)return;const n=t-this.bitWidth;this.bitWidth=t,this.setWidth(this.bitWidth*10),this.state=0,this.output1.bitWidth=t,this.direction==="RIGHT"?(this.x-=10*n,this.output1.x=10*this.bitWidth,this.output1.leftx=10*this.bitWidth):this.direction==="LEFT"&&(this.x+=10*n,this.output1.x=-10*this.bitWidth,this.output1.leftx=10*this.bitWidth)}click(){let t=this.findPos();t===0&&(t=1),!(t<1||t>this.bitWidth)&&(this.state=(this.state>>>0^1<<this.bitWidth-t)>>>0)}customDraw(){var t=f.context;t.beginPath(),t.lineWidth=Rt(3);const n=this.x,r=this.y;t.beginPath(),t.fillStyle=ht.input_text,t.textAlign="center";const h=Um(this.state,this.bitWidth);for(let c=0;c<this.bitWidth;c++)Ut(t,h[c],n-10*this.bitWidth+10+c*20,r+5);t.fill()}newDirection(t){t!==this.direction&&(this.direction=t,this.output1.refresh(),t==="RIGHT"||t==="LEFT"?(this.output1.leftx=10*this.bitWidth,this.output1.lefty=0):(this.output1.leftx=10,this.output1.lefty=0),this.output1.refresh(),this.labelDirection=jo[this.direction])}findPos(){return Math.round((f.mouseX-this.x+10*this.bitWidth)/20)}}us.prototype.tooltipText="Input ToolTip: Toggle the individual bits by clicking on them.";us.prototype.helplink="https://docs.circuitverse.org/#/chapter4/2input?id=input";us.prototype.propagationDelay=0;us.prototype.objectType="Input";function Ym(i,t=void 0){var n=i.toString(2);return t==null?n:"0".repeat(t-n.length)+n}class os extends Ht{constructor(t,n,r=globalScope,h="LEFT",c=1,g){super(t,n,r,h,c),g?this.layoutProperties=g:(this.layoutProperties={},this.layoutProperties.x=r.layout.width,this.layoutProperties.y=Qa(r.layout.width,r),this.layoutProperties.id=hs()),this.rectangleObject=!1,this.directionFixed=!0,this.orientationFixed=!1,this.setDimensions(this.bitWidth*10,10),this.inp1=new U(this.bitWidth*10,0,0,this)}generateVerilog(){return`assign ${this.label} = ${this.inp1.verilogLabel};`}customSave(){return{nodes:{inp1:tt(this.inp1)},constructorParamaters:[this.direction,this.bitWidth,this.layoutProperties]}}newBitWidth(t){if(t<1)return;const n=t-this.bitWidth;this.state=void 0,this.inp1.bitWidth=t,this.bitWidth=t,this.setWidth(10*this.bitWidth),this.direction==="RIGHT"?(this.x-=10*n,this.inp1.x=10*this.bitWidth,this.inp1.leftx=10*this.bitWidth):this.direction==="LEFT"&&(this.x+=10*n,this.inp1.x=-10*this.bitWidth,this.inp1.leftx=10*this.bitWidth)}customDraw(){this.state=this.inp1.value;var t=f.context;t.beginPath(),t.strokeStyle=[ht.out_rect,ht.stroke_alt][+(this.inp1.value===void 0)],t.fillStyle=ht.fill,t.lineWidth=Rt(3);const n=this.x,r=this.y;Ee(t,-10*this.bitWidth,-10,20*this.bitWidth,20,n,r,"RIGHT"),(this.hover&&!f.shiftDown||f.lastSelected===this||f.multipleObjectSelections.contains(this))&&(t.fillStyle=ht.hover_select),t.fill(),t.stroke(),t.beginPath(),t.font="20px Raleway",t.fillStyle=ht.input_text,t.textAlign="center";let h;this.state===void 0?h="x".repeat(this.bitWidth):h=Ym(this.state,this.bitWidth);for(let c=0;c<this.bitWidth;c++)Ut(t,h[c],n-10*this.bitWidth+10+c*20,r+5);t.fill()}newDirection(t){t!==this.direction&&(this.direction=t,this.inp1.refresh(),t==="RIGHT"||t==="LEFT"?(this.inp1.leftx=10*this.bitWidth,this.inp1.lefty=0):(this.inp1.leftx=10,this.inp1.lefty=0),this.inp1.refresh(),this.labelDirection=jo[this.direction])}generateVerilog(){return"assign "+this.verilogLabel+" = "+this.inp1.verilogLabel+";"}}os.prototype.tooltipText="Output ToolTip: Simple output element showing output in binary.";os.prototype.helplink="https://docs.circuitverse.org/#/chapter4/3output?id=output-1";os.prototype.propagationDelay=0;os.prototype.objectType="Output";class Jo extends Ht{constructor(t,n,r=globalScope,h="RIGHT",c=2,g=1){super(t,n,r,h,c),this.setDimensions(20,20),this.selectorBitWidth=g||parseInt(prompt("Enter Selector bitWidth"),10),this.rectangleObject=!1,this.inp1=new U(-20,0,0,this,this.bitWidth,"Input"),this.output1=new U(20,0,1,this,1,"Output"),this.bitSelectorInp=new U(0,20,0,this,this.selectorBitWidth,"Bit Selector")}changeSelectorBitWidth(t){t===void 0||t<1||t>32||(this.selectorBitWidth=t,this.bitSelectorInp.bitWidth=t)}customSave(){return{nodes:{inp1:tt(this.inp1),output1:tt(this.output1),bitSelectorInp:tt(this.bitSelectorInp)},constructorParamaters:[this.direction,this.bitWidth,this.selectorBitWidth]}}newBitWidth(t){this.inp1.bitWidth=t,this.bitWidth=t}resolve(){this.output1.value=xm(this.inp1.value,this.bitSelectorInp.value+1,this.bitSelectorInp.value+1),f.simulationQueue.add(this.output1),this.setOutputsUpstream(!0)}customDraw(){var t=f.context;t.beginPath(),t.strokeStyle=["blue",ht.stroke_alt][(this.state===void 0)+0],t.fillStyle=ht.fill,t.lineWidth=Rt(3);const n=this.x,r=this.y;zi(t,n-20,r-20,40,40),(this.hover&&!f.shiftDown||f.lastSelected===this||f.multipleObjectSelections.contains(this))&&(t.fillStyle=ht.hover_select),t.fill(),t.stroke(),t.beginPath(),t.font="20px Raleway",t.fillStyle=ht.input_text,t.textAlign="center";var h;this.bitSelectorInp.value===void 0?h="x":h=this.bitSelectorInp.value,Ut(t,h,n,r+5),t.fill()}generateVerilog(){return`assign ${this.output1.verilogLabel} = ${this.inp1.verilogLabel} >> ${this.bitSelectorInp.verilogLabel};`}}Jo.prototype.tooltipText="BitSelector ToolTip : Divides input bits into several equal-sized groups.";Jo.prototype.helplink="https://docs.circuitverse.org/#/chapter4/5muxandplex?id=bitselector";Jo.prototype.mutableProperties={selectorBitWidth:{name:"Selector Bit Width: ",type:"number",max:"32",min:"1",func:"changeSelectorBitWidth"}};Jo.prototype.objectType="BitSelector";function qm(i){return parseInt(i,2)}class Ze extends Ht{constructor(t,n,r=globalScope,h="RIGHT",c=1,g="0"){super(t,n,r,h,g.length),this.state=g,this.setDimensions(10*this.state.length,10),this.bitWidth=c||this.state.length,this.directionFixed=!0,this.orientationFixed=!1,this.rectangleObject=!1,this.output1=new U(this.bitWidth*10,0,1,this),this.wasClicked=!1,this.label=""}generateVerilog(){return`localparam [${this.bitWidth-1}:0] ${this.verilogLabel}=${this.bitWidth}b'${this.state};`}customSave(){return{nodes:{output1:tt(this.output1)},constructorParamaters:[this.direction,this.bitWidth,this.state]}}resolve(){this.output1.value=qm(this.state),f.simulationQueue.add(this.output1),this.setOutputsUpstream(!0)}dblclick(){const t=prompt("Re enter the value")||"0";if(!this.isValidState(t)){Ce("Invalid constant value. Please only input binary values");return}this.state=t,this.newBitWidth(this.state.toString().length)}isValidState(t){for(const n of t)if(n!="0"&&n!="1")return!1;return!0}newBitWidth(t){t>this.state.length?this.state="0".repeat(t-this.state.length)+this.state:t<this.state.length&&(this.state=this.state.slice(this.bitWidth-t)),this.bitWidth=t,this.output1.bitWidth=t,this.setDimensions(10*this.bitWidth,10),this.direction==="RIGHT"?(this.output1.x=10*this.bitWidth,this.output1.leftx=10*this.bitWidth):this.direction==="LEFT"&&(this.output1.x=-10*this.bitWidth,this.output1.leftx=10*this.bitWidth)}customDraw(){var t=f.context;t.beginPath(),t.strokeStyle=ht.stroke,t.fillStyle=ht.fill,t.lineWidth=Rt(1);const n=this.x,r=this.y;Ee(t,-10*this.bitWidth,-10,20*this.bitWidth,20,n,r,"RIGHT"),(this.hover&&!f.shiftDown||f.lastSelected===this||f.multipleObjectSelections.contains(this))&&(t.fillStyle=ht.hover_select),t.fill(),t.stroke(),t.beginPath(),t.fillStyle=ht.input_text,t.textAlign="center";const h=this.state;for(let c=0;c<this.bitWidth;c++)Ut(t,h[c],n-10*this.bitWidth+10+c*20,r+5);t.fill()}newDirection(t){t!==this.direction&&(this.direction=t,this.output1.refresh(),t==="RIGHT"||t==="LEFT"?(this.output1.leftx=10*this.bitWidth,this.output1.lefty=0):(this.output1.leftx=10,this.output1.lefty=0),this.output1.refresh(),this.labelDirection=jo[this.direction])}generateVerilog(){return`assign ${this.output1.verilogLabel} = ${this.bitWidth}'b${this.state};`}}Ze.prototype.tooltipText="Constant ToolTip: Bits are fixed. Double click element to change the bits.";Ze.prototype.helplink="https://docs.circuitverse.org/#/chapter4/2input?id=constantval";Ze.prototype.propagationDelay=0;Ze.prototype.objectType="ConstantVal";class Hn extends Ht{constructor(t,n,r=globalScope,h="RIGHT",c=2,g=1){if(super(t,n,r,h,g),this.rectangleObject=!1,this.setDimensions(15,20),this.inp=[],this.inputSize=c,c%2===1){for(let w=0;w<c/2-1;w++){const D=new U(-10,-10*(w+1),0,this);this.inp.push(D)}let v=new U(-10,0,0,this);this.inp.push(v);for(let w=c/2+1;w<c;w++)v=new U(-10,10*(w+1-c/2-1),0,this),this.inp.push(v)}else{for(let v=0;v<c/2;v++){const w=new U(-10,-10*(v+1),0,this);this.inp.push(w)}for(let v=c/2;v<c;v++){const w=new U(-10,10*(v+1-c/2),0,this);this.inp.push(w)}}this.output1=new U(30,0,1,this)}customSave(){return{constructorParamaters:[this.direction,this.inputSize,this.bitWidth],nodes:{inp:this.inp.map(tt),output1:tt(this.output1)}}}resolve(){let t=this.inp[0].value||0;for(let n=1;n<this.inputSize;n++)t|=this.inp[n].value||0;t=~t>>>0<<32-this.bitWidth>>>32-this.bitWidth,this.output1.value=t,f.simulationQueue.add(this.output1),this.setOutputsUpstream(!0)}customDraw(){var t=f.context;t.strokeStyle=ht.stroke,t.lineWidth=Rt(3);const n=this.x,r=this.y;t.beginPath(),t.fillStyle=ht.fill,se(t,-10,-20,n,r,this.direction,!0),Bi(0,-20,15,-10,20,0,n,r,this.direction),Bi(15,10,0,20,-10,20,n,r,this.direction),Bi(0,0,0,0,-10,-20,n,r,this.direction),t.closePath(),(this.hover&&!f.shiftDown||f.lastSelected===this||f.multipleObjectSelections.contains(this))&&(t.fillStyle=ht.hover_select),t.fill(),t.stroke(),t.beginPath(),$i(t,25,0,5,n,r,this.direction),t.stroke()}generateVerilog(){return Qr.call(this,"|",!0)}}Hn.prototype.tooltipText="Nor Gate ToolTip : Combination of OR gate and NOT gate.";Hn.prototype.alwaysResolve=!0;Hn.prototype.changeInputSize=Fs;Hn.prototype.verilogType="nor";Hn.prototype.helplink="https://docs.circuitverse.org/#/chapter4/4gates?id=nor-gate";Hn.prototype.objectType="NorGate";class Vs extends Ht{constructor(t,n,r=globalScope,h="Red"){super(t,n,r,"UP",1),this.rectangleObject=!1,this.setWidth(10),this.upDimensionY=20,this.downDimensionY=40,this.inp1=new U(-40,0,0,this,1),this.directionFixed=!0,this.fixedBitWidth=!0,this.color=h;const c=Ms(this.color);this.actualColor=`rgba(${c[0]},${c[1]},${c[2]},${.8})`}customSave(){return{constructorParamaters:[this.color],nodes:{inp1:tt(this.inp1)}}}changeColor(t){if(Fo(t)){this.color=t;const n=Ms(this.color);this.actualColor=`rgba(${n[0]},${n[1]},${n[2]},${.8})`}}customDraw(){var t=f.context;const n=this.x,r=this.y;t.strokeStyle="#e3e4e5",t.lineWidth=Rt(3),t.beginPath(),se(t,-20,0,n,r,this.direction),Ct(t,-40,0,n,r,this.direction),t.stroke(),t.strokeStyle="#d3d4d5",t.fillStyle=["rgba(227,228,229,0.8)",this.actualColor][this.inp1.value||0],t.lineWidth=Rt(1),t.beginPath(),se(t,-15,-9,n,r,this.direction),Ct(t,0,-9,n,r,this.direction),ss(t,0,0,9,-Math.PI/2,Math.PI/2,n,r,this.direction),Ct(t,-15,9,n,r,this.direction),Ct(t,-18,12,n,r,this.direction),ss(t,0,0,Math.sqrt(468),Math.PI/2+Math.acos(12/Math.sqrt(468)),-Math.PI/2-Math.asin(18/Math.sqrt(468)),n,r,this.direction),Ct(t,-15,-9,n,r,this.direction),t.stroke(),(this.hover&&!f.shiftDown||f.lastSelected===this||f.multipleObjectSelections.contains(this))&&(t.fillStyle=ht.hover_select),t.fill()}subcircuitDraw(t=0,n=0){var r=f.context,h=this.subcircuitMetadata.x+t,c=this.subcircuitMetadata.y+n;r.strokeStyle="#090a0a",r.fillStyle=["rgba(227,228,229,0.8)",this.actualColor][this.inp1.value||0],r.lineWidth=Rt(1),r.beginPath(),$i(r,0,0,6,h,c,this.direction),r.stroke(),(this.hover&&!f.shiftDown||f.lastSelected==this||f.multipleObjectSelections.contains(this))&&(r.fillStyle="rgba(255, 255, 32,0.8)"),r.fill()}generateVerilog(){var t=this.label?this.verilogLabel:this.inp1.verilogLabel;return`
      always @ (*)
        $display("DigitalLed:${t}=%d", ${this.inp1.verilogLabel});`}}Vs.prototype.tooltipText="Digital Led ToolTip: Digital LED glows high when input is High(1).";Vs.prototype.helplink="https://docs.circuitverse.org/#/chapter4/3output?id=digital-led";Vs.prototype.mutableProperties={color:{name:"Color: ",type:"text",func:"changeColor"}};Vs.prototype.objectType="DigitalLed";Vs.prototype.canShowInSubcircuit=!0;class $r extends Ht{constructor(t,n,r=globalScope,h="Red"){super(t,n,r,"UP",8),this.rectangleObject=!1,this.setDimensions(10,20),this.downDimensionY=40,this.inp1=new U(-40,0,0,this,8),this.directionFixed=!0,this.fixedBitWidth=!0,this.color=h;const c=Ms(this.color);this.actualColor=`rgba(${c[0]},${c[1]},${c[2]},${.8})`}changeColor(t){if(Fo(t))if(t.trim()==="")this.color="Red",this.actualColor="rgba(255, 0, 0, 1)";else{this.color=t;const n=Ms(t);this.actualColor=`rgba(${n[0]},${n[1]},${n[2]}, ${n[3]})`}}createRGBA(t=1){const n=this.actualColor.length,r=this.actualColor.split("").slice(5,n-1).join("").split(",");return t.toString()==="NaN"?`rgba(${r[0]}, ${r[1]}, ${r[2]}, 1)`:`rgba(${r[0]},${r[1]},${r[2]},${t})`}customSave(){return{constructorParamaters:[this.color],nodes:{inp1:tt(this.inp1)}}}customDraw(){var t=f.context;const n=this.x,r=this.y;t.strokeStyle="#353535",t.lineWidth=Rt(3),t.beginPath(),se(t,-20,0,n,r,this.direction),Ct(t,-40,0,n,r,this.direction),t.stroke();const h=this.inp1.value,c=h/255;t.strokeStyle="#090a0a",t.fillStyle=[this.createRGBA(c),"rgba(227, 228, 229, 0.8)"][(h===void 0||h===0)+0],t.lineWidth=Rt(1),t.beginPath(),se(t,-20,-9,n,r,this.direction),Ct(t,0,-9,n,r,this.direction),ss(t,0,0,9,-Math.PI/2,Math.PI/2,n,r,this.direction),Ct(t,-20,9,n,r,this.direction),Ct(t,-20,-9,n,r,this.direction),t.stroke(),(this.hover&&!f.shiftDown||f.lastSelected===this||f.multipleObjectSelections.contains(this))&&(t.fillStyle=ht.hover_select),t.fill()}subcircuitDraw(t=0,n=0){var r=f.context,h=this.subcircuitMetadata.x+t,c=this.subcircuitMetadata.y+n,g=this.inp1.value,v=g/255;r.strokeStyle="#090a0a",r.fillStyle=[this.createRGBA(v),"rgba(227, 228, 229, 0.8)"][(g===void 0||g==0)+0],r.lineWidth=Rt(1),r.beginPath(),$i(r,0,0,6,h,c,this.direction),r.stroke(),(this.hover&&!f.shiftDown||f.lastSelected==this||f.multipleObjectSelections.contains(this))&&(r.fillStyle="rgba(255, 255, 32,0.8)"),r.fill()}generateVerilog(){return`
      always @ (*)
        $display("VeriableLed:${this.inp1.verilogLabel}=%d", ${this.inp1.verilogLabel});`}}$r.prototype.tooltipText="Variable Led ToolTip: Variable LED inputs an 8 bit value and glows with a proportional intensity.";$r.prototype.mutableProperties={color:{name:"Color: ",type:"text",func:"changeColor"}};$r.prototype.helplink="https://docs.circuitverse.org/#/chapter4/3output?id=variableled";$r.prototype.objectType="VariableLed";$r.prototype.canShowInSubcircuit=!0;class Ri extends Ht{constructor(t,n,r=globalScope,h="RIGHT"){super(t,n,r,h,1),this.state=0,this.output1=new U(30,0,1,this),this.wasClicked=!1,this.rectangleObject=!1,this.setDimensions(10,10)}customSave(){return{nodes:{output1:tt(this.output1)},values:{state:this.state},constructorParamaters:[this.direction,this.bitWidth]}}resolve(){this.wasClicked?(this.state=1,this.output1.value=this.state):(this.state=0,this.output1.value=this.state),f.simulationQueue.add(this.output1),this.setOutputsUpstream(!0)}customDraw(){var t=f.context;const n=this.x,r=this.y;t.fillStyle="#ddd",t.strokeStyle="#353535",t.lineWidth=Rt(5),t.beginPath(),se(t,10,0,n,r,this.direction),Ct(t,30,0,n,r,this.direction),t.stroke(),t.beginPath(),$i(t,0,0,12,n,r,this.direction),t.stroke(),(this.hover&&!f.shiftDown||f.lastSelected===this||f.multipleObjectSelections.contains(this))&&(t.fillStyle="rgba(232, 13, 13,0.6)"),this.wasClicked&&(t.fillStyle="rgba(232, 13, 13,0.8)"),t.fill()}subcircuitDraw(t=0,n=0){var r=f.context,h=this.subcircuitMetadata.x+t,c=this.subcircuitMetadata.y+n;r.fillStyle="#ddd",r.strokeStyle="#353535",r.lineWidth=Rt(3),r.beginPath(),$i(r,0,0,6,h,c,this.direction),r.stroke(),(this.hover&&!f.shiftDown||f.lastSelected==this||f.multipleObjectSelections.contains(this))&&(r.fillStyle="rgba(232, 13, 13,0.6)"),this.wasClicked&&(r.fillStyle="rgba(232, 13, 13,0.8)"),r.fill()}static verilogInstructions(){return`Button - Buttons are not natively supported in verilog, consider using Inputs instead
`}verilogBaseType(){return this.verilogName()+(Ri.selSizes.length-1)}generateVerilog(){return Ri.selSizes.push(this.data),Ht.prototype.generateVerilog.call(this)}static moduleVerilog(){for(var t="",n=0;n<Ri.selSizes.length;n++)t+=`// Skeleton for Button${n}
    /*
    module Button${n}(out);
      output reg out;
    
      initial begin
        //do something with the button here
      end
    endmodule
    */
    `;return t}static resetVerilog(){Ri.selSizes=[]}}Ri.prototype.tooltipText="Button ToolTip: High(1) when pressed and Low(0) when released.";Ri.prototype.helplink="https://docs.circuitverse.org/#/chapter4/2input?id=button";Ri.prototype.propagationDelay=0;Ri.prototype.objectType="Button";Ri.prototype.canShowInSubcircuit=!0;class ta extends Ht{constructor(t,n,r=globalScope){super(t,n,r,"UP",8),this.rectangleObject=!1,this.inp=[],this.setDimensions(10,10),this.downDimensionY=40,this.inp1=new U(-40,-10,0,this,8),this.inp2=new U(-40,0,0,this,8),this.inp3=new U(-40,10,0,this,8),this.inp.push(this.inp1),this.inp.push(this.inp2),this.inp.push(this.inp3),this.directionFixed=!0,this.fixedBitWidth=!0}customSave(){return{nodes:{inp1:tt(this.inp1),inp2:tt(this.inp2),inp3:tt(this.inp3)}}}customDraw(){var t=f.context;const n=this.x,r=this.y;t.strokeStyle="green",t.lineWidth=Rt(3),t.beginPath(),se(t,-20,0,n,r,this.direction),Ct(t,-40,0,n,r,this.direction),t.stroke(),t.strokeStyle="red",t.lineWidth=Rt(3),t.beginPath(),se(t,-20,-10,n,r,this.direction),Ct(t,-40,-10,n,r,this.direction),t.stroke(),t.strokeStyle="blue",t.lineWidth=Rt(3),t.beginPath(),se(t,-20,10,n,r,this.direction),Ct(t,-40,10,n,r,this.direction),t.stroke();const h=this.inp1.value,c=this.inp2.value,g=this.inp3.value;t.strokeStyle="#d3d4d5",t.fillStyle=[`rgba(${h}, ${c}, ${g}, 0.8)`,"rgba(227, 228, 229, 0.8)"][(h===void 0||c===void 0||g===void 0)+0],t.lineWidth=Rt(1),t.beginPath(),se(t,-18,-11,n,r,this.direction),Ct(t,0,-11,n,r,this.direction),ss(t,0,0,11,-Math.PI/2,Math.PI/2,n,r,this.direction),Ct(t,-18,11,n,r,this.direction),Ct(t,-21,15,n,r,this.direction),ss(t,0,0,Math.sqrt(666),Math.PI/2+Math.acos(15/Math.sqrt(666)),-Math.PI/2-Math.asin(21/Math.sqrt(666)),n,r,this.direction),Ct(t,-18,-11,n,r,this.direction),t.stroke(),(this.hover&&!f.shiftDown||f.lastSelected===this||f.multipleObjectSelections.contains(this))&&(t.fillStyle=ht.hover_select),t.fill()}subcircuitDraw(t=0,n=0){var r=f.context,h=this.subcircuitMetadata.x+t,c=this.subcircuitMetadata.y+n,g=6,v=this.inp1.value,w=this.inp2.value,D=this.inp3.value;r.strokeStyle="#090a0a",r.fillStyle=["rgba("+v+", "+w+", "+D+", 0.8)","rgba(227, 228, 229, 0.8)"][(v===void 0||w===void 0||D===void 0)+0],r.lineWidth=Rt(1),r.beginPath(),$i(r,0,0,g,h,c,this.direction),r.stroke(),(this.hover&&!f.shiftDown||f.lastSelected==this||f.multipleObjectSelections.contains(this))&&(r.fillStyle="rgba(255, 255, 32,0.8)"),r.fill()}generateVerilog(){return`
      always @ (*)
        $display("RGBLed:{${this.inp1.verilogLabel},${this.inp2.verilogLabel},${this.inp3.verilogLabel}} = {%d,%d,%d}", ${this.inp1.verilogLabel}, ${this.inp2.verilogLabel}, ${this.inp3.verilogLabel});`}}ta.prototype.tooltipText="RGB Led ToolTip: RGB Led inputs 8 bit values for the colors RED, GREEN and BLUE.";ta.prototype.helplink="https://docs.circuitverse.org/#/chapter4/3output?id=rgbled";ta.prototype.objectType="RGBLed";ta.prototype.canShowInSubcircuit=!0;class cs extends Ht{constructor(t,n,r=globalScope,h="UP",c=1){super(t,n,r,h,8),this.rectangleObject=!1,this.setDimensions(15,15),this.pinLength=c===void 0?1:c;const g=-10-10*c;this.inp1=new U(g,-10,0,this,8,"R"),this.inp2=new U(g,0,0,this,8,"G"),this.inp3=new U(g,10,0,this,8,"B"),this.inp=[this.inp1,this.inp2,this.inp3],this.labelDirection="UP",this.fixedBitWidth=!0,this.changePinLength=function(v){if(v===void 0||(v=parseInt(v,10),v<0||v>1e3))return;const w=10*(v-this.pinLength),D=this.direction==="LEFT"?-w:this.direction==="RIGHT"?w:0,T=this.direction==="UP"?-w:this.direction==="DOWN"?w:0,R=new cs(this.x+D,this.y+T,this.scope,this.direction,v);return R.label=this.label,R.labelDirection=this.labelDirection,this.cleanDelete(),f.lastSelected=R,R},this.mutableProperties={pinLength:{name:"Pin Length",type:"number",max:"1000",min:"0",func:"changePinLength"}}}customSave(){return{constructorParamaters:[this.direction,this.pinLength],nodes:{inp1:tt(this.inp1),inp2:tt(this.inp2),inp3:tt(this.inp3)}}}customDraw(){const t=f.context,n=this.x,r=this.y,h=this.inp1.value,c=this.inp2.value,g=this.inp3.value,v=["rgb(174,20,20)","rgb(40,174,40)","rgb(0,100,255)"];for(let w=0;w<3;w++){const D=-10-10*this.pinLength,T=w*10-10;t.lineWidth=Rt(3),t.beginPath(),t.lineCap="butt",t.strokeStyle="rgb(227, 228, 229)",se(t,-15,T,n,r,this.direction),Ct(t,D+10,T,n,r,this.direction),t.stroke(),t.lineCap="round",t.beginPath(),t.strokeStyle=v[w],se(t,D+10,T,n,r,this.direction),Ct(t,D,T,n,r,this.direction),t.stroke()}t.strokeStyle="#d3d4d5",t.fillStyle=h===void 0&&c===void 0&&g===void 0?"rgb(227, 228, 229)":`rgb(${h||0}, ${c||0}, ${g||0})`,t.lineWidth=Rt(1),t.beginPath(),Ee(t,-15,-15,30,30,n,r,this.direction),t.stroke(),(this.hover&&!f.shiftDown||f.lastSelected===this||f.multipleObjectSelections.contains(this))&&(t.fillStyle="rgba(255, 255, 32)"),t.fill()}subcircuitDraw(t=0,n=0){var r=f.context,h=this.subcircuitMetadata.x+t,c=this.subcircuitMetadata.y+n,g=this.inp1.value,v=this.inp2.value,w=this.inp3.value;r.strokeStyle="#d3d4d5",r.fillStyle=g===void 0&&v===void 0&&w===void 0?"rgb(227, 228, 229)":"rgb("+(g||0)+", "+(v||0)+", "+(w||0)+")",r.lineWidth=Rt(1),r.beginPath(),Ee(r,0,0,15,15,h,c,this.direction),r.stroke(),(this.hover&&!f.shiftDown||f.lastSelected==this||f.multipleObjectSelections.contains(this))&&(r.fillStyle="rgba(255, 255, 32)"),r.fill()}generateVerilog(){return this.generateVerilog.call(this)}}cs.prototype.tooltipText="Square RGB Led ToolTip: RGB Led inputs 8 bit values for the colors RED, GREEN and BLUE.";cs.prototype.helplink="https://docs.circuitverse.org/#/chapter4/3output?id=squarergbled";cs.prototype.objectType="SquareRGBLed";cs.prototype.canShowInSubcircuit=!0;cs.prototype.layoutProperties={rightDimensionX:15,leftDimensionX:0,upDimensionY:15,downDimensionY:0};class En extends Ht{constructor(t,n,r=globalScope,h="LEFT",c=1,g=1){super(t,n,r,h,c),this.controlSignalSize=g||parseInt(prompt("Enter control signal bitWidth"),10),this.outputsize=1<<this.controlSignalSize,this.xOff=0,this.yOff=1,this.controlSignalSize===1&&(this.xOff=10),this.controlSignalSize<=3&&(this.yOff=2),this.changeControlSignalSize=function(v){if(v===void 0||v<1||v>32||this.controlSignalSize===v)return;const w=new En(this.x,this.y,this.scope,this.direction,this.bitWidth,v);return this.cleanDelete(),f.lastSelected=w,w},this.mutableProperties={controlSignalSize:{name:"Control Signal Size",type:"number",max:"10",min:"1",func:"changeControlSignalSize"}},this.newBitWidth=function(v){this.bitWidth=v;for(let w=0;w<this.outputsize;w++)this.output1[w].bitWidth=v;this.input.bitWidth=v},this.setDimensions(20-this.xOff,this.yOff*5*this.outputsize),this.rectangleObject=!1,this.input=new U(20-this.xOff,0,0,this),this.output1=[];for(let v=0;v<this.outputsize;v++){const w=new U(-20+this.xOff,+this.yOff*10*(v-this.outputsize/2)+10,1,this);this.output1.push(w)}this.controlSignalInput=new U(0,this.yOff*10*(this.outputsize/2-1)+this.xOff+10,0,this,this.controlSignalSize,"Control Signal")}customSave(){return{constructorParamaters:[this.direction,this.bitWidth,this.controlSignalSize],nodes:{output1:this.output1.map(tt),input:tt(this.input),controlSignalInput:tt(this.controlSignalInput)}}}resolve(){for(let t=0;t<this.output1.length;t++)this.output1[t].value=0;this.output1[this.controlSignalInput.value].value=this.input.value;for(let t=0;t<this.output1.length;t++)f.simulationQueue.add(this.output1[t]);this.setOutputsUpstream(!0)}customDraw(){var t=f.context;const n=this.x,r=this.y;t.beginPath(),se(t,0,this.yOff*10*(this.outputsize/2-1)+10+.5*this.xOff,n,r,this.direction),Ct(t,0,this.yOff*5*(this.outputsize-1)+this.xOff,n,r,this.direction),t.stroke(),t.beginPath(),t.strokeStyle=ht.stroke,t.lineWidth=Rt(4),t.fillStyle=ht.fill,se(t,-20+this.xOff,-this.yOff*10*(this.outputsize/2),n,r,this.direction),Ct(t,-20+this.xOff,20+this.yOff*10*(this.outputsize/2-1),n,r,this.direction),Ct(t,20-this.xOff,+this.yOff*10*(this.outputsize/2-1)+this.xOff,n,r,this.direction),Ct(t,20-this.xOff,-this.yOff*10*(this.outputsize/2)-this.xOff+20,n,r,this.direction),t.closePath(),(this.hover&&!f.shiftDown||f.lastSelected===this||f.multipleObjectSelections.contains(this))&&(t.fillStyle=ht.hover_select),t.fill(),t.stroke(),t.beginPath(),t.fillStyle="black",t.textAlign="center";for(let h=0;h<this.outputsize;h++)this.direction==="LEFT"?Ut(t,String(h),n+this.output1[h].x-7,r+this.output1[h].y+2,10):this.direction==="RIGHT"?Ut(t,String(h),n+this.output1[h].x+7,r+this.output1[h].y+2,10):this.direction==="UP"?Ut(t,String(h),n+this.output1[h].x,r+this.output1[h].y-5,10):Ut(t,String(h),n+this.output1[h].x,r+this.output1[h].y+10,10);t.fill()}verilogBaseType(){return this.verilogName()+this.output1.length}generateVerilog(){return En.selSizes.add(this.controlSignalSize),Ht.prototype.generateVerilog.call(this)}static moduleVerilog(){var t="";for(var n of En.selSizes){var r=1<<n;t+=`
`,t+="module Demultiplexer"+r,t+="(";for(var h=0;h<r;h++)t+="out"+h+", ";t+=`in, sel);
`,t+=`  parameter WIDTH = 1;
`,t+="  output reg [WIDTH-1:0] ";for(var h=0;h<r-1;h++)t+="out"+h+", ";t+="out"+(r-1)+`;
`,t+=`  input [WIDTH-1:0] in;
`,t+="  input ["+(n-1)+`:0] sel;
`,t+=`  
`,t+=`  always @ (*) begin
`;for(var h=0;h<r;h++)t+="    out"+h+` = 0;
`;t+=`    case (sel)
`;for(var h=0;h<r;h++)t+="      "+h+" : out"+h+` = in;
`;t+=`    endcase
`,t+=`  end
`,t+=`endmodule
`}return t}static resetVerilog(){En.selSizes=new Set}}En.prototype.tooltipText="DeMultiplexer ToolTip : Multiple outputs and a single line input.";En.prototype.helplink="https://docs.circuitverse.org/#/chapter4/5muxandplex?id=demultiplexer";En.prototype.objectType="Demultiplexer";class Wn extends Ht{constructor(t,n,r=globalScope,h="LEFT",c=1){super(t,n,r,h,c),this.outputsize=1<<this.bitWidth,this.xOff=0,this.yOff=1,this.bitWidth===1&&(this.xOff=10),this.bitWidth<=3&&(this.yOff=2),this.newBitWidth=function(g){if(g===void 0||g<1||g>32||this.bitWidth===g)return;const v=new Wn(this.x,this.y,this.scope,this.direction,g);return this.cleanDelete(),f.lastSelected=v,v},this.setDimensions(20-this.xOff,this.yOff*5*this.outputsize),this.rectangleObject=!1,this.input=new U(20-this.xOff,0,0,this),this.output1=[];for(let g=0;g<this.outputsize;g++){const v=new U(-20+this.xOff,+this.yOff*10*(g-this.outputsize/2)+10,1,this,1);this.output1.push(v)}}customSave(){return{constructorParamaters:[this.direction,this.bitWidth],nodes:{output1:this.output1.map(tt),input:tt(this.input)}}}resolve(){for(let t=0;t<this.output1.length;t++)this.output1[t].value=0;this.input.value!==void 0&&(this.output1[this.input.value].value=1);for(let t=0;t<this.output1.length;t++)f.simulationQueue.add(this.output1[t]);this.setOutputsUpstream(!0)}customDraw(){var t=f.context;const n=this.x,r=this.y;t.beginPath(),t.strokeStyle=ht.stroke,t.lineWidth=Rt(4),t.fillStyle=ht.fill,se(t,-20+this.xOff,-this.yOff*10*(this.outputsize/2),n,r,this.direction),Ct(t,-20+this.xOff,20+this.yOff*10*(this.outputsize/2-1),n,r,this.direction),Ct(t,20-this.xOff,+this.yOff*10*(this.outputsize/2-1)+this.xOff,n,r,this.direction),Ct(t,20-this.xOff,-this.yOff*10*(this.outputsize/2)-this.xOff+20,n,r,this.direction),t.closePath(),(this.hover&&!f.shiftDown||f.lastSelected===this||f.multipleObjectSelections.contains(this))&&(t.fillStyle=ht.hover_select),t.fill(),t.stroke(),t.beginPath(),t.fillStyle="black",t.textAlign="center";for(let h=0;h<this.outputsize;h++)this.direction==="LEFT"?Ut(t,String(h),n+this.output1[h].x-7,r+this.output1[h].y+2,10):this.direction==="RIGHT"?Ut(t,String(h),n+this.output1[h].x+7,r+this.output1[h].y+2,10):this.direction==="UP"?Ut(t,String(h),n+this.output1[h].x,r+this.output1[h].y-5,10):Ut(t,String(h),n+this.output1[h].x,r+this.output1[h].y+10,10);t.fill()}verilogBaseType(){return this.verilogName()+this.output1.length}generateVerilog(){return Wn.selSizes.add(this.bitWidth),Ht.prototype.generateVerilog.call(this)}static moduleVerilog(){var t="";for(var n of Wn.selSizes){var r=1<<n;t+=`
`,t+="module Decoder"+r,t+="(";for(var h=0;h<r;h++)t+="out"+h+", ";t+=`sel);
`,t+="  output reg ";for(var h=0;h<r-1;h++)t+="out"+h+", ";t+="out"+(r-1)+`;
`,t+="  input ["+(n-1)+`:0] sel;
`,t+=`  
`,t+=`  always @ (*) begin
`;for(var h=0;h<r;h++)t+="    out"+h+` = 0;
`;t+=`    case (sel)
`;for(var h=0;h<r;h++)t+="      "+h+" : out"+h+` = 1;
`;t+=`    endcase
`,t+=`  end
`,t+=`endmodule
`}return t}static resetVerilog(){Wn.selSizes=new Set}}Wn.prototype.tooltipText="Decoder ToolTip : Converts coded inputs into coded outputs.";Wn.prototype.helplink="https://docs.circuitverse.org/#/chapter4/5muxandplex?id=decoder";Wn.prototype.objectType="Decoder";class zr extends Ht{constructor(t,n,r=globalScope,h="RIGHT",c=1,g){super(t,n,r,h,c),this.setWidth(60),this.setHeight(20),this.rectangleObject=!1,this.directionFixed=!0,this.orientationFixed=!1,this.identifier=g||`F${this.scope.Flag.length}`,this.plotValues=[],this.xSize=10,this.flagTimeUnit=0,this.inp1=new U(40,0,0,this)}resolve(){this.flagTimeUnit=f.simulationQueue.time;const t=Qt.getPlotTime(this.flagTimeUnit);if(this.plotValues.length&&this.plotValues[this.plotValues.length-1][0]===t&&this.plotValues.pop(),this.plotValues.length===0){this.plotValues.push([t,this.inp1.value]);return}this.plotValues[this.plotValues.length-1][1]!==this.inp1.value&&this.plotValues.push([t,this.inp1.value])}customSave(){return{constructorParamaters:[this.direction,this.bitWidth],nodes:{inp1:tt(this.inp1)},values:{identifier:this.identifier}}}setIdentifier(t=""){if(t.length===0)return;this.identifier=t;const n=this.identifier.length;n===1?this.xSize=20:n>1&&n<4?this.xSize=10:this.xSize=0}customDraw(){var t=f.context;t.beginPath(),t.strokeStyle=ht.stroke,t.fillStyle=ht.fill,t.lineWidth=Rt(1);const n=this.x,r=this.y;Ee(t,-50+this.xSize,-20,100-2*this.xSize,40,n,r,"RIGHT"),(this.hover&&!f.shiftDown||f.lastSelected===this||f.multipleObjectSelections.contains(this))&&(t.fillStyle=ht.hover_select),t.fill(),t.stroke(),t.font="14px Raleway",this.xOff=t.measureText(this.identifier).width,t.beginPath(),Ee(t,-40+this.xSize,-12,this.xOff+10,25,n,r,"RIGHT"),t.fillStyle="#eee",t.strokeStyle="#ccc",t.fill(),t.stroke(),t.beginPath(),t.textAlign="center",t.fillStyle="black",Ut(t,this.identifier,n-35+this.xOff/2+this.xSize,r+5,14),t.fill(),t.beginPath(),t.font="30px Raleway",t.textAlign="center",t.fillStyle=["blue","red"][+(this.inp1.value===void 0)],this.inp1.value!==void 0?Ut(t,this.inp1.value.toString(16),n+35-this.xSize,r+8,25):Ut(t,"x",n+35-this.xSize,r+8,25),t.fill()}newDirection(t){t!==this.direction&&(this.direction=t,this.inp1.refresh(),t==="RIGHT"||t==="LEFT"?this.inp1.leftx=50-this.xSize:t==="UP"?this.inp1.leftx=20:this.inp1.leftx=20,this.inp1.refresh())}}zr.prototype.tooltipText="FLag ToolTip: Use this for debugging and plotting.";zr.prototype.helplink="https://docs.circuitverse.org/#/chapter4/8misc?id=flag";zr.prototype.mutableProperties={identifier:{name:"Debug Flag identifier",type:"text",maxlength:"5",func:"setIdentifier"}};zr.prototype.objectType="Flag";zr.prototype.propagationDelay=0;class ol extends Ht{constructor(t,n,r=globalScope,h="RIGHT",c=1){super(t,n,r,h,c),this.leftDimensionX=10,this.rightDimensionX=20,this.setHeight(30),this.directionFixed=!0,this.bitWidth=c||parseInt(prompt("Enter bitWidth"),10),this.rectangleObject=!1,this.intputSize=this.bitWidth,this.inp1=new U(-10,0,0,this,this.inputSize),this.output1=new U(20,0,1,this,this.bitWidth),this.enable=new U(20,20,1,this,1)}customSave(){return{nodes:{inp1:tt(this.inp1),output1:tt(this.output1),enable:tt(this.enable)},constructorParamaters:[this.direction,this.bitWidth]}}newBitWidth(t){this.inputSize=t,this.inp1.bitWidth=this.inputSize,this.bitWidth=t,this.output1.bitWidth=t}resolve(){const t=this.inp1.value;this.output1.value=Hh(t).length-1,f.simulationQueue.add(this.output1),t!=0?this.enable.value=1:this.enable.value=0,f.simulationQueue.add(this.enable),this.setOutputsUpstream(!0)}customDraw(){var t=f.context;t.beginPath(),t.strokeStyle=ht.stroke,t.fillStyle=ht.fill,t.lineWidth=Rt(3);const n=this.x,r=this.y;zi(t,n-10,r-30,30,60),(this.hover&&!f.shiftDown||f.lastSelected===this||f.multipleObjectSelections.contains(this))&&(t.fillStyle=ht.hover_select),t.fill(),t.stroke(),t.beginPath(),t.fillStyle="black",t.textAlign="center",Ut(t,"MSB",n+6,r-12,10),Ut(t,"EN",n+this.enable.x-12,r+this.enable.y+3,8),t.fill(),t.beginPath(),t.fillStyle="green",t.textAlign="center",this.output1.value!==void 0&&Ut(t,this.output1.value,n+5,r+14,13),t.stroke(),t.fill()}generateVerilog(){return`assign ${this.output1.verilogLabel} = (${this.enable.verilogLabel}!=0) ? ${this.inp1.verilogLabel}[${this.inp1.bitWidth-1}] : 0;`}}ol.prototype.tooltipText="MSB ToolTip : The most significant bit or the high-order bit.";ol.prototype.helplink="https://docs.circuitverse.org/#/chapter4/5muxandplex?id=most-significant-bit-msb-detector";ol.prototype.objectType="MSB";class ea extends Ht{constructor(t,n,r=globalScope,h="RIGHT",c=1){super(t,n,r,h,c),this.leftDimensionX=10,this.rightDimensionX=20,this.setHeight(30),this.directionFixed=!0,this.bitWidth=c||parseInt(prompt("Enter bitWidth"),10),this.rectangleObject=!1,this.intputSize=this.bitWidth,this.inp1=new U(-10,0,0,this,this.inputSize),this.output1=new U(20,0,1,this,this.bitWidth),this.enable=new U(20,20,1,this,1)}customSave(){return{nodes:{inp1:tt(this.inp1),output1:tt(this.output1),enable:tt(this.enable)},constructorParamaters:[this.direction,this.bitWidth]}}newBitWidth(t){this.inputSize=t,this.inp1.bitWidth=this.inputSize,this.bitWidth=t,this.output1.bitWidth=t}resolve(){const t=Hh(this.inp1.value);let n=0;for(let r=t.length-1;r>=0;r--)if(t[r]==="1"){n=t.length-1-r;break}this.output1.value=n,f.simulationQueue.add(this.output1),t!=0?this.enable.value=1:this.enable.value=0,f.simulationQueue.add(this.enable),this.setOutputsUpstream(!0)}customDraw(){var t=f.context;t.beginPath(),t.strokeStyle=ht.stroke,t.fillStyle=ht.fill,t.lineWidth=Rt(3);const n=this.x,r=this.y;zi(t,n-10,r-30,30,60),(this.hover&&!f.shiftDown||f.lastSelected===this||f.multipleObjectSelections.contains(this))&&(t.fillStyle=ht.hover_select),t.fill(),t.stroke(),t.beginPath(),t.fillStyle="black",t.textAlign="center",Ut(t,"LSB",n+6,r-12,10),Ut(t,"EN",n+this.enable.x-12,r+this.enable.y+3,8),t.fill(),t.beginPath(),t.fillStyle="green",t.textAlign="center",this.output1.value!==void 0&&Ut(t,this.output1.value,n+5,r+14,13),t.stroke(),t.fill()}generateVerilog(){return`assign ${this.output1.verilogLabel} = (${this.enable.verilogLabel}!=0) ? ${this.inp1.verilogLabel}[0] : 0;`}}ea.prototype.tooltipText="LSB ToolTip : The least significant bit or the low-order bit.";ea.prototype.helplink="https://docs.circuitverse.org/#/chapter4/5muxandplex?id=least-significant-bit-lsb-detector";ea.prototype.objectType="LSB";class Mn extends Ht{constructor(t,n,r=globalScope,h="RIGHT",c=1){super(t,n,r,h,c),this.bitWidth=c||parseInt(prompt("Enter bitWidth"),10),this.inputSize=1<<this.bitWidth,this.yOff=1,this.bitWidth<=3&&(this.yOff=2),this.setDimensions(20,this.yOff*5*this.inputSize+10),this.rightDimensionX+=10,this.directionFixed=!0,this.rectangleObject=!1,this.inp1=[];for(let g=0;g<this.inputSize;g++){const v=new U(-10,+this.yOff*10*(g-this.inputSize/2)+10,0,this,1);this.inp1.push(v)}this.output1=[];for(let g=0;g<this.bitWidth;g++){const v=new U(30,20*(g-this.bitWidth/2)+10,1,this,1);this.output1.push(v)}this.enable=new U(10,20+this.inp1[this.inputSize-1].y,1,this,1)}customSave(){return{nodes:{inp1:this.inp1.map(tt),output1:this.output1.map(tt),enable:tt(this.enable)},constructorParamaters:[this.direction,this.bitWidth]}}newBitWidth(t){if(t===void 0||t<1||t>32||this.bitWidth===t)return;this.bitWidth=t;const n=new Mn(this.x,this.y,this.scope,this.direction,this.bitWidth);return this.inputSize=1<<t,this.cleanDelete(),f.lastSelected=n,n}resolve(){let t=0,n=0;for(let r=this.inputSize-1;r>=0;r--)if(this.inp1[r].value===1){t=Hh(r);break}if(n=t,t.length!==void 0?this.enable.value=1:this.enable.value=0,f.simulationQueue.add(this.enable),n.length===void 0){n="0";for(let r=0;r<this.bitWidth-1;r++)n=`0${n}`}if(n.length!==this.bitWidth)for(let r=n.length;r<this.bitWidth;r++)n=`0${n}`;for(let r=this.bitWidth-1;r>=0;r--)this.output1[this.bitWidth-1-r].value=Number(n[r]),f.simulationQueue.add(this.output1[this.bitWidth-1-r]);this.setOutputsUpstream(!0)}customDraw(){var t=f.context;t.beginPath(),t.strokeStyle=ht.stroke,t.fillStyle=ht.fill,t.lineWidth=Rt(3);const n=this.x,r=this.y;this.bitWidth<=3?zi(t,n-10,r-10-this.yOff*5*this.inputSize,40,20*(this.inputSize+1)):zi(t,n-10,r-10-this.yOff*5*this.inputSize,40,10*(this.inputSize+3)),(this.hover&&!f.shiftDown||f.lastSelected===this||f.multipleObjectSelections.contains(this))&&(t.fillStyle=ht.hover_select),t.fill(),t.stroke(),t.beginPath(),t.fillStyle="black",t.textAlign="center";for(let h=0;h<this.inputSize;h++)Ut(t,String(h),n,r+this.inp1[h].y+2,10);for(let h=0;h<this.bitWidth;h++)Ut(t,String(h),n+this.output1[0].x-10,r+this.output1[h].y+2,10);Ut(t,"EN",n+this.enable.x,r+this.enable.y-5,10),t.fill()}verilogBaseType(){return this.verilogName()+this.inp1.length}generateVerilog(){return Mn.selSizes.add(this.bitWidth),Ht.prototype.generateVerilog.call(this)}static moduleVerilog(){var t="";for(var n of Mn.selSizes){var r=1<<n;t+=`
`,t+="module PriorityEncoder"+r,t+="(sel, ze, ";for(var h=0;h<r-1;h++)t+="in"+h+", ";t+="in"+(r-1)+`);
`,t+="  output reg ["+(n-1)+`:0] sel;
`,t+=`  output reg ze;
`,t+="  input ";for(var h=0;h<r-1;h++)t+="in"+h+", ";t+="in"+(r-1)+`;
`,t+=`
`,t+=`  always @ (*) begin
`,t+=`    sel = 0;
`,t+=`    ze = 0;
`,t+="    if (in"+(r-1)+`)
`,t+="      sel = "+(r-1)+`;
`;for(var h=r-2;h<=0;h++)t+="    else if (in"+h+`)
`,t+="      sel = "+h+`;
`;t+=`    else
`,t+=`      ze = 1;
`,t+=`  end
`,t+=`endmodule
`}return t}static resetVerilog(){Mn.selSizes=new Set}}Mn.prototype.tooltipText="Priority Encoder ToolTip : Compresses binary inputs into a smaller number of outputs.";Mn.prototype.helplink="https://docs.circuitverse.org/#/chapter4/5muxandplex?id=priority-encoder";Mn.prototype.objectType="PriorityEncoder";class Fr extends Ht{constructor(t,n,r=globalScope,h="LEFT",c=1,g){super(t,n,r,h,c),this.rectangleObject=!1,this.centerElement=!0,this.xSize=10,this.plotValues=[],this.inp1=new U(0,0,0,this),this.checked=!1,this.setIdentifier(g||"T"),this.setBounds(),this.scope.tunnelList[this.identifier].length>0&&this.newBitWidth(this.scope.tunnelList[this.identifier][0].bitWidth)}newDirection(t){this.direction!==t&&(this.direction=t,this.setBounds())}setBounds(){let t=0,n=0;this.direction==="LEFT"?(t=0,n=0):this.direction==="RIGHT"?(t=120-this.xSize,n=0):this.direction==="UP"?(t=60-this.xSize/2,n=-20):(t=60-this.xSize/2,n=20),this.leftDimensionX=Math.abs(-120+t+this.xSize),this.upDimensionY=Math.abs(-20+n),this.rightDimensionX=Math.abs(t),this.downDimensionY=Math.abs(20+n)}resolve(){if(this.checked){this.checked=!1;return}for(const t of this.scope.tunnelList[this.identifier])t.inp1.bitWidth!==this.inp1.bitWidth&&(this.inp1.highlighted=!0,t.inp1.highlighted=!0,li(`BitWidth Error: ${this.inp1.bitWidth} and ${t.inp1.bitWidth}`)),t.inp1.value!==this.inp1.value&&(t.inp1.value=this.inp1.value,f.simulationQueue.add(t.inp1)),t!==this&&(t.checked=!0)}updateScope(t){this.scope=t,this.inp1.updateScope(t),this.setIdentifier(this.identifier)}setPlotValue(){}customSave(){return{constructorParamaters:[this.direction,this.bitWidth,this.identifier],nodes:{inp1:tt(this.inp1)},values:{identifier:this.identifier}}}setIdentifier(t=""){if(t.length===0)return;this.scope.tunnelList[this.identifier]&&this.scope.tunnelList[this.identifier].clean(this),this.identifier=t,this.scope.tunnelList[this.identifier]?this.scope.tunnelList[this.identifier].push(this):this.scope.tunnelList[this.identifier]=[this],this.scope.tunnelList[this.identifier]&&this.scope.tunnelList[this.identifier].length>1&&(this.bitWidth=this.inp1.bitWidth=this.scope.tunnelList[this.identifier][0].bitWidth);const n=this.identifier.length;n===1?this.xSize=40:n>1&&n<4?this.xSize=20:this.xSize=0,this.setBounds()}delete(){this.scope.Tunnel.clean(this),this.scope.tunnelList[this.identifier].clean(this),super.delete()}customDraw(){var t=f.context;t.beginPath(),t.strokeStyle=ht.stroke,t.fillStyle=ht.fill,t.lineWidth=Rt(1);const n=this.x,r=this.y;let h=0,c=0;this.direction==="LEFT"?(h=0,c=0):this.direction==="RIGHT"?(h=120-this.xSize,c=0):this.direction==="UP"?(h=60-this.xSize/2,c=-20):(h=60-this.xSize/2,c=20),Ee(t,-120+h+this.xSize,-20+c,120-this.xSize,40,n,r,"RIGHT"),(this.hover&&!f.shiftDown||f.lastSelected===this||f.multipleObjectSelections.contains(this))&&(t.fillStyle=ht.hover_select),t.fill(),t.stroke(),t.font="14px Raleway",this.xOff=t.measureText(this.identifier).width,t.beginPath(),Ee(t,-105+h+this.xSize,-11+c,this.xOff+10,23,n,r,"RIGHT"),t.fillStyle="#eee",t.strokeStyle="#ccc",t.fill(),t.stroke(),t.beginPath(),t.textAlign="center",t.fillStyle="black",Ut(t,this.identifier,n-100+this.xOff/2+h+this.xSize,r+6+c,14),t.fill(),t.beginPath(),t.font="30px Raleway",t.textAlign="center",t.fillStyle=["blue","red"][+(this.inp1.value===void 0)],this.inp1.value!==void 0?Ut(t,this.inp1.value.toString(16),n-23+h,r+8+c,25):Ut(t,"x",n-23+h,r+8+c,25),t.fill()}newBitWidth(t){for(let n of this.scope.tunnelList[this.identifier])if(!n.fixedBitWidth&&n.bitWidth!==void 0&&!(n.bitWidth<1)){n.bitWidth=t;for(let r=0;r<n.nodeList.length;r++)n.nodeList[r].bitWidth=t}}}Fr.prototype.tooltipText="Tunnel ToolTip : Tunnel Selected.";Fr.prototype.helplink="https://docs.circuitverse.org/#/chapter4/8misc?id=tunnel";Fr.prototype.overrideDirectionRotation=!0;Fr.prototype.mutableProperties={identifier:{name:"Debug Flag identifier",type:"text",maxlength:"5",func:"setIdentifier"}};Fr.prototype.objectType="Tunnel";class $n extends Ht{constructor(t,n,r=globalScope,h="RIGHT",c=1){super(t,n,r,h,c),this.message="ALU",this.setDimensions(30,40),this.rectangleObject=!1,this.inp1=new U(-30,-30,0,this,this.bitwidth,"A"),this.inp2=new U(-30,30,0,this,this.bitwidth,"B"),this.controlSignalInput=new U(-10,-40,0,this,3,"Ctrl"),this.carryOut=new U(-10,40,1,this,1,"Cout"),this.output=new U(30,0,1,this,this.bitwidth,"Out")}newBitWidth(t){this.bitWidth=t,this.inp1.bitWidth=t,this.inp2.bitWidth=t,this.output.bitWidth=t}customSave(){return{constructorParamaters:[this.direction,this.bitWidth],nodes:{inp1:tt(this.inp1),inp2:tt(this.inp2),output:tt(this.output),carryOut:tt(this.carryOut),controlSignalInput:tt(this.controlSignalInput)}}}customDraw(){var t=f.context;const n=this.x,r=this.y;t.strokeStyle=ht.stroke,t.fillStyle=ht.fill,t.lineWidth=Rt(3),t.beginPath(),se(t,30,10,n,r,this.direction),Ct(t,30,-10,n,r,this.direction),Ct(t,10,-40,n,r,this.direction),Ct(t,-30,-40,n,r,this.direction),Ct(t,-30,-20,n,r,this.direction),Ct(t,-20,-10,n,r,this.direction),Ct(t,-20,10,n,r,this.direction),Ct(t,-30,20,n,r,this.direction),Ct(t,-30,40,n,r,this.direction),Ct(t,10,40,n,r,this.direction),Ct(t,30,10,n,r,this.direction),t.closePath(),t.stroke(),(this.hover&&!f.shiftDown||f.lastSelected===this||f.multipleObjectSelections.contains(this))&&(t.fillStyle=ht.hover_select),t.fill(),t.stroke(),t.beginPath(),t.fillStyle="Black",t.textAlign="center",cn(t,"B",-23,30,n,r,this.direction,6),cn(t,"A",-23,-30,n,r,this.direction,6),cn(t,"CTR",-10,-30,n,r,this.direction,6),cn(t,"Carry",-10,30,n,r,this.direction,6),cn(t,"Ans",20,0,n,r,this.direction,6),t.fill(),t.beginPath(),t.fillStyle="DarkGreen",cn(t,this.message,0,0,n,r,this.direction,12),t.fill()}resolve(){if(this.controlSignalInput.value===0)this.output.value=this.inp1.value&this.inp2.value,f.simulationQueue.add(this.output),this.carryOut.value=0,f.simulationQueue.add(this.carryOut),this.message="A&B";else if(this.controlSignalInput.value===1)this.output.value=this.inp1.value|this.inp2.value,f.simulationQueue.add(this.output),this.carryOut.value=0,f.simulationQueue.add(this.carryOut),this.message="A|B";else if(this.controlSignalInput.value===2){const t=this.inp1.value+this.inp2.value;this.output.value=t<<32-this.bitWidth>>>32-this.bitWidth,this.carryOut.value=+(t>>>this.bitWidth!==0),f.simulationQueue.add(this.carryOut),f.simulationQueue.add(this.output),this.message="A+B"}else this.controlSignalInput.value===3?this.message="ALU":this.controlSignalInput.value===4?(this.message="A&~B",this.output.value=this.inp1.value&this.flipBits(this.inp2.value),f.simulationQueue.add(this.output),this.carryOut.value=0,f.simulationQueue.add(this.carryOut)):this.controlSignalInput.value===5?(this.message="A|~B",this.output.value=this.inp1.value|this.flipBits(this.inp2.value),f.simulationQueue.add(this.output),this.carryOut.value=0,f.simulationQueue.add(this.carryOut)):this.controlSignalInput.value===6?(this.message="A-B",this.output.value=this.inp1.value-this.inp2.value<<32-this.bitWidth>>>32-this.bitWidth,f.simulationQueue.add(this.output),this.carryOut.value=0,f.simulationQueue.add(this.carryOut)):this.controlSignalInput.value===7&&(this.message="A<B",this.inp1.value<this.inp2.value?this.output.value=1:this.output.value=0,f.simulationQueue.add(this.output),this.carryOut.value=0,f.simulationQueue.add(this.carryOut));this.setOutputsUpstream(!0)}}$n.prototype.tooltipText="ALU ToolTip: 0: A&B, 1:A|B, 2:A+B, 4:A&~B, 5:A|~B, 6:A-B, 7:SLT ";$n.prototype.helplink="https://docs.circuitverse.org/#/chapter4/8misc?id=alu";$n.prototype.objectType="ALU";class jr extends Ht{constructor(t,n,r=globalScope,h=15,c=20){super(t,n,r,"RIGHT",1),this.directionFixed=!0,this.fixedBitWidth=!0,this.rectangleObject=!1,this.cols=c||parseInt(prompt("Enter cols:"),10),this.rows=h||parseInt(prompt("Enter rows:"),10),this.setSize()}changeRowSize(t){if(!(t===void 0||t<5||t>1e3)&&this.rows!==t)return this.rows=parseInt(t,10),this.setSize(),this}changeColSize(t){if(!(t===void 0||t<5||t>1e3)&&this.cols!==t)return this.cols=parseInt(t,10),this.setSize(),this}keyDown3(t){t==="ArrowRight"&&this.changeColSize(this.cols+2),t==="ArrowLeft"&&this.changeColSize(this.cols-2),t==="ArrowDown"&&this.changeRowSize(this.rows+2),t==="ArrowUp"&&this.changeRowSize(this.rows-2)}customSave(){return{constructorParamaters:[this.rows,this.cols]}}customDraw(){var t=f.context;t.beginPath(),t.strokeStyle="rgba(0,0,0,1)",t.setLineDash([5*globalScope.scale,5*globalScope.scale]),t.lineWidth=Rt(1.5);const n=this.x,r=this.y;zi(t,n,r,this.elementWidth,this.elementHeight),t.stroke(),(f.lastSelected===this||f.multipleObjectSelections.contains(this))&&(t.fillStyle="rgba(255, 255, 32,0.1)",t.fill()),t.setLineDash([])}setSize(){this.elementWidth=this.cols*10,this.elementHeight=this.rows*10,this.upDimensionY=0,this.leftDimensionX=0,this.rightDimensionX=this.elementWidth,this.downDimensionY=this.elementHeight}}jr.prototype.tooltipText="Rectangle ToolTip : Used to Box the Circuit or area you want to highlight.";jr.prototype.helplink="https://docs.circuitverse.org/#/chapter4/7annotation?id=rectangle";jr.prototype.propagationDelayFixed=!0;jr.prototype.mutableProperties={cols:{name:"Columns",type:"number",max:"1000",min:"5",func:"changeColSize"},rows:{name:"Rows",type:"number",max:"1000",min:"5",func:"changeRowSize"}};jr.prototype.objectType="Rectangle";class ia extends Ht{constructor(t,n,r=globalScope,h="RIGHT"){super(t,n,r,h,8),this.rectangleObject=!1,this.fixedBitWidth=!0,this.setDimensions(30,20)}customSave(){return{constructorParamaters:[this.direction]}}customDraw(){var t=f.context;t.lineWidth=Rt(3);const n=this.x,r=this.y;t.strokeStyle=ht.stroke_alt,t.fillStyle=ht.fill,t.beginPath(),se(t,-30,-3,n,r,this.direction),Ct(t,10,-3,n,r,this.direction),Ct(t,10,-15,n,r,this.direction),Ct(t,30,0,n,r,this.direction),Ct(t,10,15,n,r,this.direction),Ct(t,10,3,n,r,this.direction),Ct(t,-30,3,n,r,this.direction),t.closePath(),t.stroke(),(this.hover&&!f.shiftDown||f.lastSelected===this||f.multipleObjectSelections.contains(this))&&(t.fillStyle=ht.hover_select),t.fill()}}ia.prototype.tooltipText="Arrow ToolTip : Arrow Selected.";ia.prototype.propagationDelayFixed=!0;ia.prototype.helplink="https://docs.circuitverse.org/#/chapter4/7annotation?id=arrow";ia.prototype.objectType="Arrow";class Ks extends Ht{constructor(t,n,r=globalScope,h=8){super(t,n,r,"RIGHT",h),this.directionFixed=!0,this.rectangleObject=!0,this.setDimensions(20,20),this.maxValue=new U(-20,-10,0,this,this.bitWidth,"MaxValue"),this.clock=new U(-20,10,0,this,1,"Clock"),this.reset=new U(0,20,0,this,1,"Reset"),this.output=new U(20,-10,1,this,this.bitWidth,"Value"),this.zero=new U(20,10,1,this,1,"Zero"),this.value=0,this.prevClockState=void 0}customSave(){return{nodes:{maxValue:tt(this.maxValue),clock:tt(this.clock),reset:tt(this.reset),output:tt(this.output),zero:tt(this.zero)},constructorParamaters:[this.bitWidth]}}newBitWidth(t){this.bitWidth=t,this.maxValue.bitWidth=t,this.output.bitWidth=t}isResolvable(){return!0}resolve(){var t=this.maxValue.value!=null?this.maxValue.value:(1<<this.bitWidth)-1,n=this.value;this.clock.value!=this.prevClockState&&this.clock.value==1&&n++,this.prevClockState=this.clock.value,n=n%(t+1),this.reset.value==1&&(n=0),this.value=n,this.output.value!=n&&(this.output.value=n,f.simulationQueue.add(this.output));var r=this.clock.value==1&&n==0?1:0;this.zero.value!=r&&(this.zero.value=r,f.simulationQueue.add(this.zero)),this.setOutputsUpstream(!0)}customDraw(){var t=f.context,n=this.x,r=this.y;t.beginPath(),t.font="20px Raleway",t.fillStyle=ht.input_text,t.textAlign="center",Ut(t,this.value.toString(16),this.x,this.y+5),t.fill(),t.strokeStyle=ht.stroke,t.beginPath(),se(t,-20,5,n,r,this.direction),Ct(t,-15,10,n,r,this.direction),Ct(t,-20,15,n,r,this.direction),t.stroke()}subcircuitDraw(t=0,n=0){var r=f.context,h=this.subcircuitMetadata.x+t,c=this.subcircuitMetadata.y+n;r.beginPath(),r.font="20px Raleway",r.fillStyle="green",r.textAlign="center",Ut(r,this.value.toString(16),h+10,c+17),r.fill(),r.beginPath(),r.lineWidth=Rt(1),Ee(r,0,0,20,20,h,c,this.direction),r.stroke(),(this.hover&&!f.shiftDown||f.lastSelected==this||f.multipleObjectSelections.contains(this))&&(r.fillStyle="rgba(255, 255, 32,0.6)",r.fill())}static moduleVerilog(){return`
    module Counter(val, zero, max, clk, rst);
      parameter WIDTH = 1;
      output reg [WIDTH-1:0] val;
      output reg zero;
      input [WIDTH-1:0] max;
      input clk, rst;
    
      initial
        val = 0;
    
      always @ (val)
        if (val == 0)
          zero = 1;
        else
          zero = 0;
    
      always @ (posedge clk or posedge rst) begin
        if (rst)
          val <= 0;
        else
          if (val == max)
            val <= 0;
          else
            val <= val + 1;
      end
    endmodule`}}Ks.prototype.tooltipText="Counter: a binary counter from zero to a given maximum value";Ks.prototype.helplink="https://docs.circuitverse.org/#/chapter4/2input?id=counter";Ks.prototype.objectType="Counter";Ks.prototype.objectType="Counter";Ks.prototype.canShowInSubcircuit=!0;Ks.prototype.layoutProperties={rightDimensionX:20,leftDimensionX:0,upDimensionY:0,downDimensionY:20};class Gr extends Ht{constructor(t,n,r=globalScope,h="RIGHT",c=1){super(t,n,r,h,c),this.directionFixed=!0,this.setDimensions(20,20),this.rectangleObject=!0,this.currentRandomNo=0,this.clockInp=new U(-20,10,0,this,1,"Clock"),this.maxValue=new U(-20,-10,0,this,this.bitWidth,"MaxValue"),this.output=new U(20,-10,1,this,this.bitWidth,"RandomValue"),this.prevClockState=0,this.wasClicked=!1}isResolvable(){return this.clockInp.value!=null&&(this.maxValue.value!=null||this.maxValue.connections.length==0)}newBitWidth(t){this.bitWidth=t,this.maxValue.bitWidth=t,this.output.bitWidth=t}resolve(){var t=this.maxValue.connections.length?this.maxValue.value+1:2<<this.bitWidth-1;this.clockInp.value!=null&&this.clockInp.value!=this.prevClockState&&(this.clockInp.value==1&&(this.currentRandomNo=Math.floor(Math.random()*t)),this.prevClockState=this.clockInp.value),this.output.value!=this.currentRandomNo&&(this.output.value=this.currentRandomNo,f.simulationQueue.add(this.output)),this.setOutputsUpstream(!0)}customSave(){var t={nodes:{clockInp:tt(this.clockInp),maxValue:tt(this.maxValue),output:tt(this.output)},constructorParamaters:[this.direction,this.bitWidth]};return t}customDraw(){var t=f.context;t.fillStyle=ht.fill,t.strokeStyle=ht.stroke,t.beginPath();var n=this.x,r=this.y;t.font="20px Raleway",t.fillStyle=ht.input_text,t.textAlign="center",Ut(t,this.currentRandomNo.toString(10),this.x,this.y+5),t.fill(),t.beginPath(),se(t,-20,5,n,r,this.direction),Ct(t,-15,10,n,r,this.direction),Ct(t,-20,15,n,r,this.direction),t.stroke()}subcircuitDraw(t=0,n=0){var r=f.context,h=this.subcircuitMetadata.x+t,c=this.subcircuitMetadata.y+n;r.beginPath(),r.font="20px Raleway",r.fillStyle="green",r.textAlign="center",Ut(r,this.currentRandomNo.toString(16),h+10,c+17),r.fill(),r.beginPath(),r.lineWidth=Rt(1),Ee(r,0,0,20,20,h,c,this.direction),r.stroke(),(this.hover&&!f.shiftDown||f.lastSelected==this||f.multipleObjectSelections.contains(this))&&(r.fillStyle="rgba(255, 255, 32,0.6)",r.fill())}static moduleVerilog(){return`
      module Random(val, clk, max);
        parameter WIDTH = 1;
        output reg [WIDTH-1:0] val;
        input clk;
        input [WIDTH-1:0] max;
      
        always @ (posedge clk)
          if (^max === 1'bX)
            val = $urandom_range(0, {WIDTH{1'b1}});
          else
            val = $urandom_range(0, max);
      endmodule
      `}}Gr.prototype.tooltipText="Random ToolTip : Random Selected.";Gr.prototype.helplink="https://docs.circuitverse.org/#/chapter4/2input?id=random";Gr.prototype.objectType="Random";Gr.prototype.canShowInSubcircuit=!0;Gr.prototype.layoutProperties={rightDimensionX:20,leftDimensionX:0,upDimensionY:0,downDimensionY:20};class Ji extends Ht{constructor(t,n,r=globalScope,{rows:h=8,columns:c=8,ledSize:g=2,showGrid:v=!0,colors:w=[]}={}){super(t,n,r,"RIGHT",8),this.fixedBitWidth=!0,this.directionFixed=!0,this.rectangleObject=!0,this.alwaysResolve=!0,this.labelDirection="UP",this.leftDimensionX=0,this.upDimensionY=0,this.rowEnableNodes=[],this.columnEnableNodes=[],this.columnColorNodes=[],this.colorNode=new U(0,-10,NODE_INPUT,this,24,"COLOR"),this.rowNode=new U(0,0,NODE_INPUT,this,1,"ROW"),this.columnNode=new U(0,10,NODE_INPUT,this,1,"COLUMN"),this.colors=w,this.showGrid=v,this.changeSize(h,c,g,!1)}toggleGrid(){this.showGrid=!this.showGrid}changeRows(t){this.changeSize(t,this.columns,this.ledSize,!0)}changeColumns(t){this.changeSize(this.rows,t,this.ledSize,!0)}changeLedSize(t){this.changeSize(this.rows,this.columns,t,!0)}changeSize(t,n,r,h){if(t=parseInt(t,10),!(isNaN(t)||t<0||t>this.maxRows)&&(n=parseInt(n,10),!(isNaN(n)||n<0||n>this.maxColumns)&&(r=parseInt(r,10),!(isNaN(r)||r<0||r>this.maxLedSize)))){var c=10*r,g=10*r,v=c*n,w=g*t,D=r%2?5:10,T=v/2+D,R=w/2+D;h&&(this.x-=this.leftDimensionX-T,this.y-=this.upDimensionY-R),this.setDimensions(T,R);var W=[10,20,20][r-1],L=W-T,E=W-R,V=r!=this.ledSize;for(this.rowEnableNodes.splice(V?0:t).forEach(A=>A.delete()),this.rowEnableNodes.forEach((A,q)=>{A.x=A.leftx=-T,A.y=A.lefty=q*g+E});this.rowEnableNodes.length<t;)this.rowEnableNodes.push(new U(-T,this.rowEnableNodes.length*g+E,NODE_INPUT,this,1,"R"+this.rowEnableNodes.length));for(this.columnEnableNodes.splice(V?0:n).forEach(A=>A.delete()),this.columnEnableNodes.forEach((A,q)=>{A.x=A.leftx=q*c+L,A.y=A.lefty=R});this.columnEnableNodes.length<n;)this.columnEnableNodes.push(new U(this.columnEnableNodes.length*c+L,R,NODE_INPUT,this,1,"C"+this.columnEnableNodes.length));for(this.columnColorNodes.splice(V?0:n).forEach(A=>A.delete()),this.columnColorNodes.forEach((A,q)=>{A.x=A.leftx=q*c+L,A.y=A.lefty=-R});this.columnColorNodes.length<n;)this.columnColorNodes.push(new U(this.columnColorNodes.length*c+L,-R,NODE_INPUT,this,24,"CLR"+this.columnColorNodes.length));for(this.colors.splice(t),this.colors.forEach(A=>A.splice(n));this.colors.length<t;)this.colors.push([]);this.rowNode.bitWidth=Math.ceil(Math.log2(t)),this.rowNode.label="ROW ("+this.rowNode.bitWidth+" bits)",this.columnNode.bitWidth=Math.ceil(Math.log2(n)),this.columnNode.label="COLUMN ("+this.columnNode.bitWidth+" bits)";var at=t>1?E:E-10,H=t<=2?10:g;return[this.colorNode,this.rowNode,this.columnNode].forEach((A,q)=>{A.x=A.leftx=T,A.y=A.lefty=q*H+at}),this.rows=t,this.columns=n,this.ledSize=r,this}}customSave(){return{constructorParamaters:[{rows:this.rows,columns:this.columns,ledSize:this.ledSize,showGrid:this.showGrid,colors:this.colors}],nodes:{rowEnableNodes:this.rowEnableNodes.map(tt),columnEnableNodes:this.columnEnableNodes.map(tt),columnColorNodes:this.columnColorNodes.map(tt),colorNode:tt(this.colorNode),rowNode:tt(this.rowNode),columnNode:tt(this.columnNode)}}}resolve(){for(var t=this.colorNode.value,n=t!=null,r=this.rows,h=this.columns,c=this.rowEnableNodes,g=this.columnEnableNodes,v=this.columnColorNodes,w=this.colors,D=0;D<r;D++)if(c[D].value===1)for(var T=0;T<h;T++){var R=v[T].value;R!==void 0&&(w[D][T]=R),n&&g[T].value===1&&(w[D][T]=t)}var W=this.rowNode.value!=null||r==1,L=this.columnNode.value!=null||h==1;if(n&&W&&L){var E=this.rowNode.value||0,V=this.columnNode.value||0;E<r&&V<h&&(w[E][V]=t)}this.setOutputsUpstream(!0)}customDraw(){for(var t=f.context,n=this.rows,r=this.columns,h=this.colors,c=this.x,g=this.y,v=this.direction,w=10*this.ledSize,D=10*this.ledSize,T=this.rowEnableNodes[0].y-D/2,R=this.columnColorNodes[0].x-w/2,W=this.columns*w,L=this.rows*D,E=T+L,V=R+W,[at,H]=Ti(w*globalScope.scale,D*globalScope.scale,v),A=Math.round(globalScope.ox+c*globalScope.scale),q=Math.round(globalScope.oy+g*globalScope.scale),F=0;F<n;F++)for(var J=0;J<r;J++){var St=h[F][J]||0;t.beginPath(),t.fillStyle="rgb("+((St&16711680)>>16)+","+((St&65280)>>8)+","+(St&255)+")";let wt,Tt;[wt,Tt]=Ti(R+J*w,T+F*D,v),wt=wt*globalScope.scale,Tt=Tt*globalScope.scale,t.rect(A+wt,q+Tt,at,H),t.fill()}if(this.showGrid){t.beginPath(),t.strokeStyle="#323232",t.lineWidth=Rt(1),Ee(t,R,T,W,L,c,g,v);for(var ot=R+w;ot<V;ot+=w)se(t,ot,T,c,g,v),Ct(t,ot,E,c,g,v);for(var st=T+D;st<E;st+=D)se(t,R,st,c,g,v),Ct(t,V,st,c,g,v);t.stroke()}}}Ji.prototype.tooltipText="RGB Led Matrix";Ji.prototype.maxRows=128;Ji.prototype.maxColumns=128;Ji.prototype.maxLedSize=3;Ji.prototype.mutableProperties={rows:{name:"Rows",type:"number",max:Ji.prototype.maxRows,min:1,func:"changeRows"},columns:{name:"Columns",type:"number",max:Ji.prototype.maxColumns,min:1,func:"changeColumns"},ledSize:{name:"LED Size",type:"number",max:Ji.prototype.maxLedSize,min:1,func:"changeLedSize"},showGrid:{name:"Toggle Grid",type:"button",max:Ji.prototype.maxLedSize,min:1,func:"toggleGrid"}};Ji.prototype.objectType="RGBLedMatrix";class al extends Ht{constructor(t,n,r=globalScope,h="RIGHT"){super(t,n,r,h,1),this.directionFixed=!0,this.fixedBitWidth=!0,this.setDimensions(20,20),this.rectangleObject=!0,this.clockInp=new U(-20,10,0,this,1,"Clock"),this.dInp=new U(-20,-10,0,this,this.bitWidth,"T"),this.qOutput=new U(20,-10,1,this,this.bitWidth,"Q"),this.qInvOutput=new U(20,10,1,this,this.bitWidth,"Q Inverse"),this.reset=new U(10,20,0,this,1,"Asynchronous Reset"),this.preset=new U(0,20,0,this,this.bitWidth,"Preset"),this.en=new U(-10,20,0,this,1,"Enable"),this.masterState=0,this.slaveState=0,this.prevClockState=0}isResolvable(){return this.reset.value==1||this.clockInp.value!=null&&this.dInp.value!=null}newBitWidth(t){this.bitWidth=t,this.dInp.bitWidth=t,this.qOutput.bitWidth=t,this.qInvOutput.bitWidth=t,this.preset.bitWidth=t}resolve(){this.reset.value==1?this.masterState=this.slaveState=this.preset.value||0:this.en.value==0?this.prevClockState=this.clockInp.value:(this.en.value==1||this.en.connections.length==0)&&(this.clockInp.value==this.prevClockState?this.clockInp.value==0&&this.dInp.value!=null&&(this.masterState=this.dInp.value^this.slaveState):this.clockInp.value!=null&&(this.clockInp.value==1?this.slaveState=this.masterState:this.clockInp.value==0&&this.dInp.value!=null&&(this.masterState=this.dInp.value^this.slaveState),this.prevClockState=this.clockInp.value)),this.qOutput.value!=this.slaveState&&(this.qOutput.value=this.slaveState,this.qInvOutput.value=this.flipBits(this.slaveState),f.simulationQueue.add(this.qOutput),f.simulationQueue.add(this.qInvOutput)),this.setOutputsUpstream(!0)}customSave(){var t={nodes:{clockInp:tt(this.clockInp),dInp:tt(this.dInp),qOutput:tt(this.qOutput),qInvOutput:tt(this.qInvOutput),reset:tt(this.reset),preset:tt(this.preset),en:tt(this.en)},constructorParamaters:[this.direction,this.bitWidth]};return t}customDraw(){var t=f.context;t.strokeStyle=ht.stroke,t.fillStyle=ht.fill,t.beginPath(),t.lineWidth=Rt(3);var n=this.x,r=this.y;se(t,-20,5,n,r,this.direction),Ct(t,-15,10,n,r,this.direction),Ct(t,-20,15,n,r,this.direction),t.stroke(),t.beginPath(),t.font="20px Raleway",t.fillStyle=ht.input_text,t.textAlign="center",Ut(t,this.slaveState.toString(16),n,r+5),t.fill()}static moduleVerilog(){return`
        module TflipFlop(q, q_inv, clk, t, a_rst, pre, en);
          parameter WIDTH = 1;
          output reg [WIDTH-1:0] q, q_inv;
          input clk, a_rst, pre, en;
          input [WIDTH-1:0] t;
        
          always @ (posedge clk or posedge a_rst)
            if (a_rst) begin
              q <= 'b0;
              q_inv <= 'b1;
            end else if (en == 0) ;
            else if (t) begin
              q <= q ^ t;
              q_inv <= ~q ^ t;
            end
        endmodule
        `}}al.prototype.tooltipText="T FlipFlop ToolTip :  Changes state / Toggles whenever the clock input is strobed.";al.prototype.helplink="https://docs.circuitverse.org/#/chapter4/6sequentialelements?id=t-flip-flop";al.prototype.objectType="TflipFlop";class na extends Ht{constructor(t,n,r=globalScope,h="RIGHT",c=1){super(t,n,r,h,c),this.directionFixed=!0,this.setDimensions(20,20),this.rectangleObject=!0,this.clockInp=new U(-20,10,0,this,1,"Clock"),this.dInp=new U(-20,-10,0,this,this.bitWidth,"D"),this.qOutput=new U(20,-10,1,this,this.bitWidth,"Q"),this.qInvOutput=new U(20,10,1,this,this.bitWidth,"Q Inverse"),this.reset=new U(10,20,0,this,1,"Asynchronous Reset"),this.preset=new U(0,20,0,this,this.bitWidth,"Preset"),this.en=new U(-10,20,0,this,1,"Enable"),this.masterState=0,this.slaveState=0,this.prevClockState=0,this.wasClicked=!1}isResolvable(){return!0}newBitWidth(t){this.bitWidth=t,this.dInp.bitWidth=t,this.qOutput.bitWidth=t,this.qInvOutput.bitWidth=t,this.preset.bitWidth=t}resolve(){this.reset.value==1?this.masterState=this.slaveState=this.preset.value||0:this.en.value==0?this.prevClockState=this.clockInp.value:(this.en.value==1||this.en.connections.length==0)&&(this.clockInp.value==this.prevClockState?this.clockInp.value==0&&this.dInp.value!=null&&(this.masterState=this.dInp.value):this.clockInp.value!=null&&(this.clockInp.value==1?this.slaveState=this.masterState:this.clockInp.value==0&&this.dInp.value!=null&&(this.masterState=this.dInp.value),this.prevClockState=this.clockInp.value)),this.qOutput.value!=this.slaveState&&(this.qOutput.value=this.slaveState,this.qInvOutput.value=this.flipBits(this.slaveState),f.simulationQueue.add(this.qOutput),f.simulationQueue.add(this.qInvOutput)),this.setOutputsUpstream(!0)}customSave(){var t={nodes:{clockInp:tt(this.clockInp),dInp:tt(this.dInp),qOutput:tt(this.qOutput),qInvOutput:tt(this.qInvOutput),reset:tt(this.reset),preset:tt(this.preset),en:tt(this.en)},constructorParamaters:[this.direction,this.bitWidth]};return t}customDraw(){var t=f.context;t.strokeStyle=ht.stroke,t.fillStyle=ht.fill,t.beginPath(),t.lineWidth=Rt(3);var n=this.x,r=this.y;se(t,-20,5,n,r,this.direction),Ct(t,-15,10,n,r,this.direction),Ct(t,-20,15,n,r,this.direction),t.stroke(),t.beginPath(),t.font="20px Raleway",t.fillStyle=ht.input_text,t.textAlign="center",Ut(t,this.slaveState.toString(16),n,r+5),t.fill()}static moduleVerilog(){return`
module DflipFlop(q, q_inv, clk, d, a_rst, pre, en);
    parameter WIDTH = 1;
    output reg [WIDTH-1:0] q, q_inv;
    input clk, a_rst, pre, en;
    input [WIDTH-1:0] d;

    always @ (posedge clk or posedge a_rst)
    if (a_rst) begin
        q <= 'b0;
        q_inv <= 'b1;
    end else if (en == 0) ;
    else begin
        q <= d;
        q_inv <= ~d;
    end
endmodule
    `}}na.prototype.tooltipText="D FlipFlop ToolTip : Introduces delay in timing circuit.";na.prototype.helplink="https://docs.circuitverse.org/#/chapter4/6sequentialelements?id=d-flip-flop";na.prototype.objectType="DflipFlop";class ll extends Ht{constructor(t,n,r=globalScope,h="RIGHT",c=1){super(t,n,r,h,c),this.directionFixed=!0,this.setDimensions(20,20),this.rectangleObject=!0,this.clockInp=new U(-20,10,0,this,1,"Clock"),this.dInp=new U(-20,-10,0,this,this.bitWidth,"D"),this.qOutput=new U(20,-10,1,this,this.bitWidth,"Q"),this.qInvOutput=new U(20,10,1,this,this.bitWidth,"Q Inverse"),this.state=0,this.prevClockState=0,this.wasClicked=!1}isResolvable(){return this.clockInp.value!=null&&this.dInp.value!=null}newBitWidth(t){this.bitWidth=t,this.dInp.bitWidth=t,this.qOutput.bitWidth=t,this.qInvOutput.bitWidth=t}resolve(){this.clockInp.value==1&&this.dInp.value!=null&&(this.state=this.dInp.value),this.qOutput.value!=this.state&&(this.qOutput.value=this.state,this.qInvOutput.value=this.flipBits(this.state),f.simulationQueue.add(this.qOutput),f.simulationQueue.add(this.qInvOutput)),this.setOutputsUpstream(!0)}customSave(){var t={nodes:{clockInp:tt(this.clockInp),dInp:tt(this.dInp),qOutput:tt(this.qOutput),qInvOutput:tt(this.qInvOutput)},constructorParamaters:[this.direction,this.bitWidth]};return t}customDraw(){var t=f.context;t.strokeStyle=ht.stroke,t.fillStyle=ht.fill,t.beginPath(),t.lineWidth=Rt(3);var n=this.x,r=this.y;se(t,-20,5,n,r,this.direction),Ct(t,-15,10,n,r,this.direction),Ct(t,-20,15,n,r,this.direction),t.stroke(),t.beginPath(),t.font="20px Raleway",t.fillStyle=ht.input_text,t.textAlign="center",Ut(t,this.state.toString(16),n,r+5),t.fill()}}ll.prototype.tooltipText="D Latch : Single input Flip flop or D FlipFlop";ll.prototype.helplink="https://docs.circuitverse.org/#/chapter4/6sequentialelements?id=d-latch";ll.prototype.objectType="Dlatch";class hl extends Ht{constructor(t,n,r=globalScope,h="RIGHT"){super(t,n,r,h,1),this.directionFixed=!0,this.fixedBitWidth=!0,this.setDimensions(20,20),this.rectangleObject=!0,this.R=new U(-20,10,0,this,1,"R"),this.S=new U(-20,-10,0,this,1,"S"),this.qOutput=new U(20,-10,1,this,1,"Q"),this.qInvOutput=new U(20,10,1,this,1,"Q Inverse"),this.reset=new U(10,20,0,this,1,"Asynchronous Reset"),this.preset=new U(0,20,0,this,1,"Preset"),this.en=new U(-10,20,0,this,1,"Enable"),this.state=0}newBitWidth(t){this.bitWidth=t,this.dInp.bitWidth=t,this.qOutput.bitWidth=t,this.qInvOutput.bitWidth=t,this.preset.bitWidth=t}isResolvable(){return!0}resolve(){this.reset.value==1?this.state=this.preset.value||0:(this.en.value==1||this.en.connections==0)&&this.S.value^this.R.value&&(this.state=this.S.value),this.qOutput.value!=this.state&&(this.qOutput.value=this.state,this.qInvOutput.value=this.flipBits(this.state),f.simulationQueue.add(this.qOutput),f.simulationQueue.add(this.qInvOutput)),this.setOutputsUpstream(!0)}customSave(){var t={nodes:{S:tt(this.S),R:tt(this.R),qOutput:tt(this.qOutput),qInvOutput:tt(this.qInvOutput),reset:tt(this.reset),preset:tt(this.preset),en:tt(this.en)},constructorParamaters:[this.direction]};return t}customDraw(){var t=f.context;t.strokeStyle=ht.stroke,t.fillStyle=ht.fill,t.beginPath(),t.lineWidth=Rt(3);var n=this.x,r=this.y;t.stroke(),t.beginPath(),t.font="20px Raleway",t.fillStyle=ht.input_text,t.textAlign="center",this.state?Ut(t,this.state.toString(16),n,r+5):Ut(t,"0",n,r+5),t.fill()}}hl.prototype.tooltipText="SR FlipFlop ToolTip : SR FlipFlop Selected.";hl.prototype.helplink="https://docs.circuitverse.org/#/chapter4/6sequentialelements?id=sr-flip-flop";hl.prototype.objectType="SRflipFlop";class ul extends Ht{constructor(t,n,r=globalScope,h="RIGHT"){super(t,n,r,h,1),this.directionFixed=!0,this.fixedBitWidth=!0,this.setDimensions(20,20),this.rectangleObject=!0,this.J=new U(-20,-10,0,this,1,"J"),this.K=new U(-20,0,0,this,1,"K"),this.clockInp=new U(-20,10,0,this,1,"Clock"),this.qOutput=new U(20,-10,1,this,1,"Q"),this.qInvOutput=new U(20,10,1,this,1,"Q Inverse"),this.reset=new U(10,20,0,this,1,"Asynchronous Reset"),this.preset=new U(0,20,0,this,1,"Preset"),this.en=new U(-10,20,0,this,1,"Enable"),this.state=0,this.slaveState=0,this.masterState=0,this.prevClockState=0}isResolvable(){return this.reset.value==1||this.clockInp.value!=null&&this.J.value!=null&&this.K.value!=null}newBitWidth(t){this.bitWidth=t,this.dInp.bitWidth=t,this.qOutput.bitWidth=t,this.qInvOutput.bitWidth=t,this.preset.bitWidth=t}resolve(){this.reset.value==1?this.masterState=this.slaveState=this.preset.value||0:this.en.value==0?this.prevClockState=this.clockInp.value:(this.en.value==1||this.en.connections.length==0)&&(this.clockInp.value==this.prevClockState?this.clockInp.value==0&&this.J.value!=null&&this.K.value!=null&&(this.J.value&&this.K.value?this.masterState=1^this.slaveState:this.J.value^this.K.value&&(this.masterState=this.J.value)):this.clockInp.value!=null&&(this.clockInp.value==1?this.slaveState=this.masterState:this.clockInp.value==0&&this.J.value!=null&&this.K.value!=null&&(this.J.value&&this.K.value?this.masterState=1^this.slaveState:this.J.value^this.K.value&&(this.masterState=this.J.value)),this.prevClockState=this.clockInp.value)),this.qOutput.value!=this.slaveState&&(this.qOutput.value=this.slaveState,this.qInvOutput.value=this.flipBits(this.slaveState),f.simulationQueue.add(this.qOutput),f.simulationQueue.add(this.qInvOutput)),this.setOutputsUpstream(!0)}customSave(){var t={nodes:{J:tt(this.J),K:tt(this.K),clockInp:tt(this.clockInp),qOutput:tt(this.qOutput),qInvOutput:tt(this.qInvOutput),reset:tt(this.reset),preset:tt(this.preset),en:tt(this.en)},constructorParamaters:[this.direction]};return t}customDraw(){var t=f.context;t.strokeStyle=ht.stroke,t.fillStyle=ht.fill,t.beginPath(),t.lineWidth=Rt(3);var n=this.x,r=this.y;se(t,-20,5,n,r,this.direction),Ct(t,-15,10,n,r,this.direction),Ct(t,-20,15,n,r,this.direction),t.stroke(),t.beginPath(),t.font="20px Raleway",t.fillStyle=ht.input_text,t.textAlign="center",Ut(t,this.slaveState.toString(16),n,r+5),t.fill()}}ul.prototype.tooltipText="JK FlipFlop ToolTip : gated SR flip-flop with the addition of a clock input.";ul.prototype.helplink="https://docs.circuitverse.org/#/chapter4/6sequentialelements?id=jk-flip-flop";ul.prototype.objectType="JKflipFlop";class as extends Ht{constructor(t,n,r=globalScope,h=3,c=32){super(t,n,r,"RIGHT",1),this.directionFixed=!0,this.fixedBitWidth=!0,this.cols=c||parseInt(prompt("Enter cols:")),this.rows=h||parseInt(prompt("Enter rows:")),this.elementWidth=Math.max(40,Math.ceil(this.cols/2)*20),this.elementHeight=Math.max(40,Math.ceil(this.rows*15/20)*20),this.setWidth(this.elementWidth/2),this.setHeight(this.elementHeight/2),this.clockInp=new U(-this.elementWidth/2,this.elementHeight/2-10,0,this,1,"Clock"),this.asciiInp=new U(-this.elementWidth/2,this.elementHeight/2-30,0,this,7,"Ascii Input"),this.reset=new U(30-this.elementWidth/2,this.elementHeight/2,0,this,1,"Reset"),this.en=new U(10-this.elementWidth/2,this.elementHeight/2,0,this,1,"Enable"),this.prevClockState=0,this.data="",this.buffer=""}changeRowSize(t){if(!(t==null||t<1||t>10)&&this.rows!=t){var n=new as(this.x,this.y,this.scope,t,this.cols);return this.delete(),f.lastSelected=n,n}}changeColSize(t){if(!(t==null||t<20||t>100)&&this.cols!=t){var n=new as(this.x,this.y,this.scope,this.rows,t);return this.delete(),f.lastSelected=n,n}}isResolvable(){return this.reset.value==1?!0:this.en.value==0||this.en.connections.length&&this.en.value==null||this.clockInp.value==null?!1:this.asciiInp.value!=null}resolve(){if(this.reset.value==1){this.data="";return}if(this.en.value==0){this.buffer="";return}this.clockInp.value==this.prevClockState?this.clockInp.value==0&&(this.buffer=String.fromCharCode(this.asciiInp.value)):this.clockInp.value!=null&&(this.clockInp.value==1?(this.data+=this.buffer,this.data.length>this.cols*this.rows&&(this.data=this.data.slice(1))):this.clockInp.value==0&&(this.buffer=String.fromCharCode(this.asciiInp.value)),this.prevClockState=this.clockInp.value)}customSave(){var t={nodes:{clockInp:tt(this.clockInp),asciiInp:tt(this.asciiInp),reset:tt(this.reset),en:tt(this.en)},constructorParamaters:[this.rows,this.cols]};return t}customDraw(){var t=f.context;t.strokeStyle=ht.stroke,t.fillStyle=ht.fill,t.beginPath(),t.lineWidth=Rt(3);var n=this.x,r=this.y;se(t,-this.elementWidth/2,this.elementHeight/2-15,n,r,this.direction),Ct(t,5-this.elementWidth/2,this.elementHeight/2-10,n,r,this.direction),Ct(t,-this.elementWidth/2,this.elementHeight/2-5,n,r,this.direction),t.stroke(),t.beginPath(),t.fillStyle=ht.input_text,t.textAlign="center";for(var h=-7.5*this.rows+3,c=0;c<this.data.length;c+=this.cols){var g=this.data.slice(c,c+this.cols);g+=" ".repeat(this.cols-g.length),Os(t,g,0,h+c/this.cols*15+9,n,r,15,"Courier New","center")}t.fill()}}as.prototype.tooltipText="TTY ToolTip : Tele typewriter selected.";as.prototype.helplink="https://docs.circuitverse.org/#/chapter4/6sequentialelements?id=tty";as.prototype.mutableProperties={cols:{name:"Columns",type:"number",max:"100",min:"20",func:"changeColSize"},rows:{name:"Rows",type:"number",max:"10",min:"1",func:"changeRowSize"}};as.prototype.objectType="TTY";class Qs extends Ht{constructor(t,n,r=globalScope,h=32){super(t,n,r,"RIGHT",1),this.directionFixed=!0,this.fixedBitWidth=!0,this.bufferSize=h||parseInt(prompt("Enter buffer size:")),this.elementWidth=Math.max(80,Math.ceil(this.bufferSize/2)*20),this.elementHeight=40,this.setWidth(this.elementWidth/2),this.setHeight(this.elementHeight/2),this.clockInp=new U(-this.elementWidth/2,this.elementHeight/2-10,0,this,1,"Clock"),this.asciiOutput=new U(30,this.elementHeight/2,1,this,7,"Ascii Output"),this.available=new U(10,this.elementHeight/2,1,this,1,"Available"),this.reset=new U(-10,this.elementHeight/2,0,this,1,"Reset"),this.en=new U(-30,this.elementHeight/2,0,this,1,"Enable"),this.prevClockState=0,this.buffer="",this.bufferOutValue=void 0}changeBufferSize(t){if(!(t==null||t<20||t>100)&&this.bufferSize!=t){var n=new Qs(this.x,this.y,this.scope,t);return this.delete(),f.lastSelected=n,n}}keyDown(t){t.length==1&&(this.buffer+=t,this.buffer.length>this.bufferSize&&(this.buffer=this.buffer.slice(1)))}isResolvable(){return this.reset.value==1?!0:this.en.value==0||this.en.connections.length&&this.en.value==null?!1:this.clockInp.value!=null}resolve(){if(this.reset.value==1){this.buffer="";return}this.en.value!=0&&(this.available.value!=0&&(this.available.value=0,f.simulationQueue.add(this.available)),this.clockInp.value==this.prevClockState?this.clockInp.value==0&&(this.buffer.length?this.bufferOutValue=this.buffer[0].charCodeAt(0):this.bufferOutValue=void 0):this.clockInp.value!=null&&(this.clockInp.value==1&&this.buffer.length?this.bufferOutValue==this.buffer[0].charCodeAt(0)&&(this.buffer=this.buffer.slice(1)):this.buffer.length?this.bufferOutValue=this.buffer[0].charCodeAt(0):this.bufferOutValue=void 0,this.prevClockState=this.clockInp.value),this.asciiOutput.value!=this.bufferOutValue&&(this.asciiOutput.value=this.bufferOutValue,f.simulationQueue.add(this.asciiOutput)),this.bufferOutValue!==void 0&&this.available.value!=1&&(this.available.value=1,f.simulationQueue.add(this.available)),this.asciiOutput.value!==void 0?this.asciiOutput.isValueUpstream=!0:this.asciiOutput.isValueUpstream=!1)}customSave(){var t={nodes:{clockInp:tt(this.clockInp),asciiOutput:tt(this.asciiOutput),available:tt(this.available),reset:tt(this.reset),en:tt(this.en)},constructorParamaters:[this.bufferSize]};return t}customDraw(){var t=f.context;t.strokeStyle=ht.stroke,t.fillStyle=ht.fill,t.beginPath(),t.lineWidth=Rt(3);var n=this.x,r=this.y;se(t,-this.elementWidth/2,this.elementHeight/2-15,n,r,this.direction),Ct(t,5-this.elementWidth/2,this.elementHeight/2-10,n,r,this.direction),Ct(t,-this.elementWidth/2,this.elementHeight/2-5,n,r,this.direction),t.stroke(),t.beginPath(),t.fillStyle=ht.input_text,t.textAlign="center";var h=this.buffer+" ".repeat(this.bufferSize-this.buffer.length);Os(t,h,0,5,n,r,15,"Courier New","center"),t.fill()}}Qs.prototype.tooltipText="Keyboard";Qs.prototype.helplink="https://docs.circuitverse.org/#/chapter4/6sequentialelements?id=keyboard";Qs.prototype.mutableProperties={bufferSize:{name:"Buffer Size",type:"number",max:"100",min:"20",func:"changeBufferSize"}};Qs.prototype.objectType="Keyboard";class vn extends Ht{constructor(t,n,r=globalScope,h="RIGHT"){super(t,n,r,h,1),this.fixedBitWidth=!0,this.output1=new U(10,0,1,this,1),this.state=0,this.output1.value=this.state,this.wasClicked=!1,this.interval=null}customSave(){var t={nodes:{output1:tt(this.output1)},constructorParamaters:[this.direction]};return t}resolve(){this.output1.value=this.state,f.simulationQueue.add(this.output1),this.setOutputsUpstream(!0)}toggleState(){this.state=(this.state+1)%2,this.output1.value=this.state}customDraw(){var t=f.context;t.strokeStyle=ht.stroke,t.fillStyle=ht.fill,t.lineWidth=Rt(3);var n=this.x,r=this.y;t.beginPath(),t.strokeStyle=[ht.color_wire_con,ht.color_wire_pow][this.state],t.lineWidth=Rt(2),this.state==0?(se(t,-6,0,n,r,"RIGHT"),Ct(t,-6,5,n,r,"RIGHT"),Ct(t,0,5,n,r,"RIGHT"),Ct(t,0,-5,n,r,"RIGHT"),Ct(t,6,-5,n,r,"RIGHT"),Ct(t,6,0,n,r,"RIGHT")):(se(t,-6,0,n,r,"RIGHT"),Ct(t,-6,-5,n,r,"RIGHT"),Ct(t,0,-5,n,r,"RIGHT"),Ct(t,0,5,n,r,"RIGHT"),Ct(t,6,5,n,r,"RIGHT"),Ct(t,6,0,n,r,"RIGHT")),t.stroke()}static verilogInstructions(){return`Clock - Use a single global clock
`}}vn.prototype.tooltipText="Clock";vn.prototype.helplink="https://docs.circuitverse.org/#/chapter4/6sequentialelements?id=clock";vn.prototype.click=vn.prototype.toggleState;vn.prototype.objectType="Clock";vn.prototype.propagationDelay=0;vn.prototype.propagationDelayFixed=!0;class gn extends Ht{constructor(t,n,r=globalScope,h="RIGHT",c=8,g=10){super(t,n,r,h,Math.min(Math.max(1,c),32)),this.setDimensions(60,40),this.directionFixed=!0,this.labelDirection="UP",this.addressWidth=Math.min(Math.max(1,g),this.maxAddressWidth),this.address=new U(-this.leftDimensionX,-20,0,this,this.addressWidth,"ADDRESS"),this.dataIn=new U(-this.leftDimensionX,0,0,this,this.bitWidth,"DATA IN"),this.write=new U(-this.leftDimensionX,20,0,this,1,"WRITE"),this.reset=new U(0,this.downDimensionY,0,this,1,"RESET"),this.coreDump=new U(-20,this.downDimensionY,0,this,1,"CORE DUMP"),this.dataOut=new U(this.rightDimensionX,0,1,this,this.bitWidth,"DATA OUT"),this.prevCoreDumpValue=void 0,this.clearData()}customSave(){return{constructorParamaters:[this.direction,this.bitWidth,this.addressWidth],nodes:{address:tt(this.address),dataIn:tt(this.dataIn),write:tt(this.write),reset:tt(this.reset),coreDump:tt(this.coreDump),dataOut:tt(this.dataOut)}}}newBitWidth(t){t=parseInt(t),!isNaN(t)&&this.bitWidth!=t&&t>=1&&t<=32&&(this.bitWidth=t,this.dataIn.bitWidth=t,this.dataOut.bitWidth=t,this.clearData())}changeAddressWidth(t){t=parseInt(t),!isNaN(t)&&this.addressWidth!=t&&t>=1&&t<=this.maxAddressWidth&&(this.addressWidth=t,this.address.bitWidth=t,this.clearData())}clearData(){this.data=new Array(Math.pow(2,this.addressWidth)),this.tooltipText=`${this.memSizeString()} ${this.shortName}`}isResolvable(){return this.address.value!==void 0||this.reset.value!==void 0||this.coreDump.value!==void 0}resolve(){this.write.value==1&&(this.data[this.address.value]=this.dataIn.value),this.reset.value==1&&this.clearData(),this.coreDump.value&&this.prevCoreDumpValue!=this.coreDump.value&&this.dump(),this.prevCoreDumpValue=this.coreDump.value,this.dataOut.value=this.data[this.address.value]||0,f.simulationQueue.add(this.dataOut),this.setOutputsUpstream(!0)}customDraw(){var t=f.context,n=this.x,r=this.y;t.beginPath(),t.strokeStyle="gray",t.fillStyle=this.write.value?"red":"lightgreen",t.lineWidth=Rt(1),$i(t,50,-30,3,n,r,this.direction),t.fill(),t.stroke(),t.beginPath(),t.textAlign="center",t.fillStyle="black",cn(t,this.memSizeString(),0,-10,n,r,this.direction,12),cn(t,this.shortName,0,10,n,r,this.direction,12),Oo(t,"A",this.address.x+12,this.address.y,n,r,this.direction),Oo(t,"DI",this.dataIn.x+12,this.dataIn.y,n,r,this.direction),Oo(t,"W",this.write.x+12,this.write.y,n,r,this.direction),Oo(t,"DO",this.dataOut.x-15,this.dataOut.y,n,r,this.direction),t.fill()}memSizeString(){for(var t=["","K","M"],n=this.bitWidth==8?"B":this.bitWidth==1?"b":` x ${this.bitWidth}b`,r=Math.pow(2,this.addressWidth),h=0;r>=1024&&h<t.length-1;)r/=1024,h++;return r+t[h]+n}dump(){var t=console.group&&this.label;t&&console.group(this.label),Ce("Data dumped to developer Console"),console.log(JSON.stringify(this.data)),t&&console.groupEnd()}dblclick(){this.promptData()}promptData(){var t=prompt("Enter Data (separated by space, comma, tab or newline) (data can be in hex, binary, octal or decimal)");if(!t){li("No data entered.");return}var n=this.data;try{var r=1<<this.addressWidth,h=1<<this.bitWidth;if(this.clearData(),t=t.split(/[, \n\t]/),t=t.filter(v=>v.length),t.length>r)throw`Capacity: ${r}. But ${t.length} data cells found`;for(var c=0;c<t.length;c++){var g=rb(t[c]);if(isNaN(g))throw`Address ${c}: ${t[c]} is not a number`;if(g<0)throw`Address ${c}: ${t[c]} is negative`;if(g>=h)throw`Address ${c}: ${t[c]} is too large`;this.data[c]=g}Ce(`${t.length} data cells loaded`)}catch(v){this.data=n,li(v)}}static moduleVerilog(){return`
    module RAM(dout, addr, din, we, dmp, rst);
        parameter WIDTH = 8;
        parameter ADDR = 10;
        output [WIDTH-1:0] dout;
        input [ADDR-1:0] addr;
        input [WIDTH-1:0] din;
        input we;
        input dmp;
        input rst;
        reg [WIDTH-1:0] mem [2**ADDR-1:0];
    
        assign dout = mem[addr];
    
        always @ (*) begin
        if (!we)
            mem[addr] = din;
        end
    endmodule
    `}}gn.prototype.tooltipText="Random Access Memory";gn.prototype.shortName="RAM";gn.prototype.maxAddressWidth=20;gn.prototype.mutableProperties={addressWidth:{name:"Address Width",type:"number",max:"20",min:"1",func:"changeAddressWidth"},dump:{name:"Core Dump",type:"button",func:"dump"},load:{name:"Load Data",type:"button",func:"promptData"},reset:{name:"Reset",type:"button",func:"clearData"}};gn.prototype.objectType="RAM";function wd(i,t,n,r,h,c,g,v,w,D){for(var T=0;T<D;T++)v[T]!=null&&v[T]==!0,w[T]!=null&&w[T]==!0,v[T]==null&&w[T]==null?t[T].value!=null&&(n[T].value=t[T].value,f.simulationQueue.add(n[T])):v[T]==null&&w[T]!=null?(en_value[T]==null||r[T].value==w[T])&&t[T].value!=null&&(n[T].value=t[T].value,f.simulationQueue.add(n[T])):v[T]!=null&&w[T]==null?(i[T].value==g[T]?i[T].value==0&&t[T].value!=null&&(h[T]=t[T].value):i[T].value!=null&&(i[T].value==1?c[T]=h[T]:i[T].value==0&&t[T].value!=null&&(h[T]=t[T].value),g[T]=i[T].value),n[T].value!=c[T]&&(n[T].value=c[T],f.simulationQueue.add(n[T]))):(r[T].value==0?g[T]=i[T].value:(r[T].value==1||r[T].connections.length==0)&&(i[T].value==g[T]?i[T].value==0&&t[T].value!=null&&(h[T]=t[T].value):i[T].value!=null&&(i[T].value==1?c[T]=h[T]:i[T].value==0&&t[T].value!=null&&(h[T]=t[T].value),g[T]=i[T].value)),n[T].value!=c[T]&&(n[T].value=c[T],f.simulationQueue.add(n[T])))}class Zs extends Ht{constructor(t,n,r=globalScope,h="RIGHT",c=8,g=10,v,w,D,T,R,W){super(t,n,r,h,Math.min(Math.max(1,c),32)),this.setDimensions(60,40),this.directionFixed=!0,this.labelDirection="UP",this.addressWidth=Math.min(Math.max(1,g),this.maxAddressWidth),this.readAddress=[];for(var L=0;L<D;L++)this.readAddress.push(new U(-this.leftDimensionX,-20,0,this,this.addressWidth,"READ_ADDRESS"+L.toString()));this.writeAddress=[];for(var L=0;L<T;L++)this.writeAddress.push(new U(-this.leftDimensionX,-20,0,this,this.addressWidth,"WRITE_ADDRESS"+L.toString()));this.writeDataIn=[],this.writeEnable=[],this.writeDffClock=[],this.writeDffDInp=[],this.writeDffQOutput=[],this.writeDffEn=[],this.writeDffMasterState=[],this.writeDffSlaveState=[],this.writeDffprevClockState=[],this.writeDffClockPolarity=[],this.writeDffEnPolarity=[];for(var L=0;L<T;L++){var E=new U(-this.leftDimensionX,0,0,this,this.bitWidth,"DATA IN"+L.toString()),V=new U(-20,10,0,this,1,"Clock"),at=new U(-20,-10,0,this,this.bitWidth,"D"),H=new U(20,-10,1,this,this.bitWidth,"Q"),A=new U(-10,20,0,this,1,"Enable"),q=0,F=0,J=0,St=W[L].clock_polarity,ot=W[L].enable_polarity;ot==null&&(ot=!0),E.connect(at),this.writeDffClock.push(V),this.writeDffDInp.push(at),this.writeDffQOutput.push(H),this.writeDffEn.push(A),this.writeDffMasterState.push(q),this.writeDffSlaveState.push(F),this.writeDffprevClockState.push(J),this.writeDffClockPolarity.push(St),this.writeDffEnPolarity.push(ot),this.writeDataIn.push(E),this.writeEnable.push(new U(-this.leftDimensionX,20,0,this,1,"WRITE_ENABLE"+L.toString()))}this.reset=new U(0,this.downDimensionY,0,this,1,"RESET"),this.coreDump=new U(-20,this.downDimensionY,0,this,1,"CORE DUMP"),this.dataOut=[],this.readDffClock=[],this.readDffDInp=[],this.readDffQOutput=[],this.readDffEn=[],this.readDffMasterState=[],this.readDffSlaveState=[],this.readDffprevClockState=[],this.readDffClockPolarity=[],this.readDffEnPolarity=[];for(var L=0;L<D;L++){var st=new U(this.rightDimensionX,0,1,this,this.bitWidth,"DATA OUT"+L.toString()),V=new U(-20,10,0,this,1,"Clock"),at=new U(-20,-10,0,this,this.bitWidth,"D"),H=new U(20,-10,1,this,this.bitWidth,"Q"),A=new U(-10,20,0,this,1,"Enable"),q=0,F=0,J=0,St=R[L].clock_polarity,ot=R[L].enable_polarity;this.readDffClock.push(V),this.readDffDInp.push(at),this.readDffQOutput.push(H),this.readDffEn.push(A),this.readDffMasterState.push(q),this.readDffSlaveState.push(F),this.readDffprevClockState.push(J),this.readDffClockPolarity.push(St),this.readDffEnPolarity.push(ot),st.connect(at),this.dataOut.push(st)}this.prevCoreDumpValue=void 0,this.words=w,this.numRead=D,this.numWrite=T,this.memData=v,this.rdports=R,this.wrports=W,this.clearData(),this.fillData(v)}fillData(t){for(var n=0;n<this.words;n++)this.data[n]=0;for(var r=t.length,h=0,n=0;n<r;n++)if(Number.isInteger(t[n])){var c=t[n+1];if(c.startsWith("x")){h+=t[n];continue}for(var g=0,v=1,w=this.bitWidth-1;w>=0;w--)c[w]=="1"&&(g+=v),v*=2;for(var w=0;w<t[n];w++)this.data[h++]=g;n++}else{var c=t[n];if(c.startsWith("x")){h++;continue}for(var g=0,v=1,w=this.bitWidth-1;w>=0;w--)c[w]=="1"&&(g+=v),v*=2;this.data[h++]=g}}customSave(){return this.dataOut.map(tt),{constructorParamaters:[this.direction,this.bitWidth,this.addressWidth,this.memData,this.words,this.numRead,this.numWrite,this.rdports,this.wrports],nodes:{readAddress:this.readAddress.map(tt),writeAddress:this.writeAddress.map(tt),writeDataIn:this.writeDataIn.map(tt),writeEnable:this.writeEnable.map(tt),dataOut:this.dataOut.map(tt),reset:tt(this.reset),coreDump:tt(this.coreDump),readDffClock:this.readDffClock.map(tt),readDffDInp:this.readDffDInp.map(tt),readDffQOutput:this.readDffQOutput.map(tt),readDffEn:this.readDffEn.map(tt),writeDffClock:this.writeDffClock.map(tt),writeDffDInp:this.writeDffDInp.map(tt),writeDffQOutput:this.writeDffQOutput.map(tt),writeDffEn:this.writeDffEn.map(tt)}}}newBitWidth(t){}changeAddressWidth(t){}clearData(){this.data=new Array(this.words),this.tooltipText=`${this.memSizeString()} ${this.shortName}`}isResolvable(){for(var t=0;t<this.numRead;t++)if(this.readAddress[t]!=null)return!0;return this.reset.value!=null||this.coreDump.value!=null}resolve(){wd(this.writeDffClock,this.writeDffDInp,this.writeDffQOutput,this.writeDffEn,this.writeDffMasterState,this.writeDffSlaveState,this.writeDffprevClockState,this.writeDffClockPolarity,this.writeDffEnPolarity,this.numWrite);for(var t=0;t<this.numWrite;t++)this.writeEnable[t].value==1&&(this.data[this.writeAddress[t].value]=this.writeDffQOutput[t].value);this.reset.value==1&&this.clearData(),this.coreDump.value&&this.prevCoreDumpValue!=this.coreDump.value&&this.dump(),this.prevCoreDumpValue=this.coreDump.value;for(var t=0;t<this.numRead;t++)this.dataOut[t].value=this.data[this.readAddress[t].value]||0,f.simulationQueue.add(this.dataOut[t]);wd(this.readDffClock,this.readDffDInp,this.readDffQOutput,this.readDffEn,this.readDffMasterState,this.readDffSlaveState,this.readDffprevClockState,this.readDffClockPolarity,this.readDffEnPolarity,this.numRead),this.setOutputsUpstream(!0)}customDraw(){}memSizeString(){for(var t=["","K","M"],n=this.bitWidth==8?"B":this.bitWidth==1?"b":` x ${this.bitWidth}b`,r=Math.pow(2,this.addressWidth),h=0;r>=1024&&h<t.length-1;)r/=1024,h++;return r+t[h]+n}dump(){var t=console.group&&this.label;t&&console.group(this.label),console.log(this.data),t&&console.groupEnd()}}Zs.prototype.tooltipText="Random Access Memory";Zs.prototype.shortName="verilogRAM";Zs.prototype.maxAddressWidth=20;Zs.prototype.mutableProperties={addressWidth:{name:"Address Width",type:"number",max:"20",min:"1",func:"changeAddressWidth"},dump:{name:"Core Dump",type:"button",func:"dump"},reset:{name:"Reset",type:"button",func:"clearData"}};Zs.prototype.objectType="verilogRAM";class Xr extends gn{constructor(t,n,r=globalScope,h="RIGHT",c=8,g=8,v=null){super(t,n,r,h,c,g),this.data=v||this.data}clearData(){super.clearData();for(var t=0;t<this.data.length;t++)this.data[t]=this.data[t]||0}customSave(){var t=super.customSave(this),{data:n}=this;return t.constructorParamaters.push(n),t}static moduleVerilog(){return`
    module EEPROM(dout, addr, din, we, dmp, rst);
        parameter WIDTH = 8;
        parameter ADDR = 10;
        output [WIDTH-1:0] dout;
        input [ADDR-1:0] addr;
        input [WIDTH-1:0] din;
        input we;
        input dmp;
        input rst;
        reg [WIDTH-1:0] mem[2**ADDR-1:0];
        integer j;
    
        assign dout = mem[addr];
    
        always @ (*) begin
        if (!rst)
            for (j=0; j < 2**ADDR-1; j=j+1) begin
                mem[j] = 0;
            end
        if (!we)
            mem[addr] = din;
        dout = mem[addr];
        end
    endmodule
    `}}Xr.prototype.tooltipText="Electrically Erasable Programmable Read-Only Memory";Xr.prototype.shortName="EEPROM";Xr.prototype.maxAddressWidth=10;Xr.prototype.mutableProperties={addressWidth:{name:"Address Width",type:"number",max:"10",min:"1",func:"changeAddressWidth"},dump:gn.prototype.mutableProperties.dump,load:gn.prototype.mutableProperties.load,reset:gn.prototype.mutableProperties.reset};Xr.prototype.objectType="EEPROM";class fn extends Ht{constructor(t,n,r=globalScope,h=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]){super(t,n,r,"RIGHT",1),this.fixedBitWidth=!0,this.directionFixed=!0,this.rectangleObject=!1,this.setDimensions(80,50),this.memAddr=new U(-80,0,0,this,4,"Address"),this.en=new U(0,50,0,this,1,"Enable"),this.dataOut=new U(80,0,1,this,8,"DataOut"),this.data=h||prompt("Enter data").split(" ").map(c=>parseInt(c,16))}isResolvable(){return(this.en.value===1||this.en.connections.length===0)&&this.memAddr.value!==void 0}customSave(){return{constructorParamaters:[this.data],nodes:{memAddr:tt(this.memAddr),dataOut:tt(this.dataOut),en:tt(this.en)}}}findPos(){const t=Math.floor((f.mouseX-this.x+35)/20),n=Math.floor((f.mouseY-this.y+35)/16);if(!(t<0||n<0||t>3||n>3))return n*4+t}click(){this.selectedIndex=this.findPos()}keyDown(t){t==="Backspace"&&this.delete(),this.selectedIndex!==void 0&&(t=t.toLowerCase(),~"1234567890abcdef".indexOf(t)&&(this.data[this.selectedIndex]=(this.data[this.selectedIndex]*16+parseInt(t,16))%256))}customDraw(){const t=f.context,n=this.x,r=this.y,h=this.findPos();t.strokeStyle=ht.stroke,t.fillStyle=ht.fill,t.lineWidth=Rt(3),t.beginPath(),Ee(t,-this.leftDimensionX,-this.upDimensionY,this.leftDimensionX+this.rightDimensionX,this.upDimensionY+this.downDimensionY,this.x,this.y,[this.direction,"RIGHT"][+this.directionFixed]),h===void 0&&(!f.shiftDown&&this.hover||f.lastSelected===this||f.multipleObjectSelections.contains(this))&&(t.fillStyle=ht.hover_select),t.fill(),t.stroke(),t.strokeStyle="black",t.fillStyle="#fafafa",t.lineWidth=Rt(1),t.beginPath();for(let c=0;c<16;c+=4)for(let g=c;g<c+4;g++)Ee(t,g%4*20,c*4,20,16,n-35,r-35);t.fill(),t.stroke(),h!==void 0&&(t.beginPath(),t.fillStyle="yellow",Ee(t,h%4*20,Math.floor(h/4)*16,20,16,n-35,r-35),t.fill(),t.stroke()),this.selectedIndex!==void 0&&(t.beginPath(),t.fillStyle="lightgreen",Ee(t,this.selectedIndex%4*20,Math.floor(this.selectedIndex/4)*16,20,16,n-35,r-35),t.fill(),t.stroke()),this.memAddr.value!==void 0&&(t.beginPath(),t.fillStyle=ht.input_text,Ee(t,this.memAddr.value%4*20,Math.floor(this.memAddr.value/4)*16,20,16,n-35,r-35),t.fill(),t.stroke()),t.beginPath(),t.fillStyle="Black",Os(t,"A",-65,5,n,r,16,"Raleway","right"),Os(t,"D",75,5,n,r,16,"Raleway","right"),Os(t,"En",5,47,n,r,16,"Raleway","right"),t.fill(),t.beginPath(),t.fillStyle="Black";for(let c=0;c<16;c+=4)for(let g=c;g<c+4;g++){let v=this.data[g].toString(16);v.length<2&&(v=`0${v}`),Os(t,v,g%4*20,c*4,n-35+10,r-35+12,14,"Raleway","center")}t.fill(),t.beginPath(),t.fillStyle="Black";for(let c=0;c<16;c+=4){let g=c.toString(16);g.length<2&&(g=`0${g}`),Os(t,g,0,c*4,n-40,r-35+12,14,"Raleway","right")}t.fill()}resolve(){this.isResolvable()!==!1&&(this.dataOut.value=this.data[this.memAddr.value],f.simulationQueue.add(this.dataOut),this.setOutputsUpstream(!0))}verilogBaseType(){return this.verilogName()+(fn.selSizes.length-1)}generateVerilog(){return fn.selSizes.push(this.data),Ht.prototype.generateVerilog.call(this)}static moduleVerilog(){for(var t="",n=0;n<fn.selSizes.length;n++){t+=`
    module Rom${n}(dout, addr, en);
    parameter WIDTH = 8;
    parameter ADDR = 4;
    output reg [WIDTH-1:0] dout;
    input [ADDR-1:0] addr;
    input en;

    always @ (*) begin
        if (en == 0)
        dout = {WIDTH{1'bz}};
        else
        case (addr)
    `;for(var r=0;r<16;r++)t+="        "+r+" : dout = "+fn.selSizes[n][r]+`;
`;t+=`      endcase
    end
    endmodule
    `}return t}static resetVerilog(){fn.selSizes=[]}}fn.prototype.tooltipText="Read-only memory";fn.prototype.helplink="https://docs.circuitverse.org/#/chapter4/6sequentialelements?id=rom";fn.prototype.objectType="Rom";class Ur extends Ht{constructor(t,n,r=globalScope,h="RIGHT",c,g){super(t,n,r,h,1),this.objectType="TB_Input",this.scope.TB_Input.push(this),this.setIdentifier(c||"Test1"),this.testData=g||{inputs:[],outputs:[],n:0},this.clockInp=new U(0,20,0,this,1),this.outputs=[],this.running=!1,this.iteration=0,this.setup()}dblclick(){this.testData=JSON.parse(prompt("Enter TestBench Json")),this.setup()}setDimensions(){this.leftDimensionX=0,this.rightDimensionX=120,this.upDimensionY=0,this.downDimensionY=40+this.testData.inputs.length*20}setup(){this.iteration=0,this.running=!1,this.nodeList.clean(this.clockInp),this.deleteNodes(),this.nodeList=[],this.nodeList.push(this.clockInp),this.testData=this.testData||{inputs:[],outputs:[],n:0},this.setDimensions(),this.prevClockState=0,this.outputs=[];for(var t=0;t<this.testData.inputs.length;t++)this.outputs.push(new U(this.rightDimensionX,30+t*20,1,this,this.testData.inputs[t].bitWidth,this.testData.inputs[t].label));for(var t=0;t<this.scope.TB_Output.length;t++)this.scope.TB_Output[t].identifier==this.identifier&&this.scope.TB_Output[t].setup()}toggleState(){this.running=!this.running,this.prevClockState=0}resetIterations(){this.iteration=0,this.prevClockState=0}resolve(){if(this.clockInp.value!=this.prevClockState&&(this.prevClockState=this.clockInp.value,this.clockInp.value==1&&this.running&&(this.iteration<this.testData.n?this.iteration++:this.running=!1)),this.running&&this.iteration)for(var t=0;t<this.testData.inputs.length;t++)this.outputs[t].value=parseInt(this.testData.inputs[t].values[this.iteration-1],2),f.simulationQueue.add(this.outputs[t])}setPlotValue(){}customSave(){var t={constructorParamaters:[this.direction,this.identifier,this.testData],nodes:{outputs:this.outputs.map(tt),clockInp:tt(this.clockInp)}};return t}setIdentifier(t=""){if(!(t.length==0||t==this.identifier)){for(var n=0;n<this.scope.TB_Output.length;n++)this.scope.TB_Output[n].checkPairing();for(var n=0;n<this.scope.TB_Output.length;n++)this.scope.TB_Output[n].identifier==this.identifier&&(this.scope.TB_Output[n].identifier=t);this.identifier=t,this.checkPaired()}}checkPaired(){for(var t=0;t<this.scope.TB_Output.length;t++)this.scope.TB_Output[t].identifier==this.identifier&&this.scope.TB_Output[t].checkPairing()}delete(){super.delete(),this.checkPaired()}customDraw(){var t=f.context;t.beginPath(),t.strokeStyle="grey",t.fillStyle="#fcfcfc",t.lineWidth=Rt(1);var r=this.x,h=this.y;this.direction=="LEFT"||(this.direction=="RIGHT"?120-this.xSize:this.direction=="UP"?60-this.xSize/2:60-this.xSize/2),t.beginPath(),t.textAlign="center",t.fillStyle="black",Ut(t,`${this.identifier} [INPUT]`,r+this.rightDimensionX/2,h+14,10),Ut(t,["Not Running","Running"][+this.running],r+this.rightDimensionX/2,h+14+10+20*this.testData.inputs.length,10),Ut(t,`Case: ${this.iteration}`,r+this.rightDimensionX/2,h+14+20+20*this.testData.inputs.length,10),t.fill(),t.font="30px Raleway",t.textAlign="right",t.fillStyle="blue",t.beginPath();for(var n=0;n<this.testData.inputs.length;n++)Ut(t,this.testData.inputs[n].label,this.rightDimensionX-5+r,30+n*20+h+4,10);if(t.fill(),this.running&&this.iteration){t.font="30px Raleway",t.textAlign="left",t.fillStyle="blue",t.beginPath();for(var n=0;n<this.testData.inputs.length;n++)Ut(t,this.testData.inputs[n].values[this.iteration-1],5+r,30+n*20+h+4,10);t.fill()}t.beginPath(),t.strokeStyle="rgba(0,0,0,1)",t.lineWidth=Rt(3);var r=this.x,h=this.y;se(t,0,15,r,h,this.direction),Ct(t,5,20,r,h,this.direction),Ct(t,0,25,r,h,this.direction),t.stroke()}}Ur.prototype.tooltipText="Test Bench Input Selected";Ur.prototype.centerElement=!0;Ur.prototype.helplink="https://docs.circuitverse.org/#/chapter7/3testcircuits";Ur.prototype.mutableProperties={identifier:{name:"TestBench Name:",type:"text",maxlength:"10",func:"setIdentifier"},iteration:{name:"Reset Iterations",type:"button",func:"resetIterations"},toggleState:{name:"Toggle State",type:"button",func:"toggleState"}};Ur.prototype.objectType="TB_Input";function Vm(i,t=void 0){var n=i.toString(2);return t==null?n:"0".repeat(t-n.length)+n}class Yr extends Ht{constructor(t,n,r=globalScope,h="RIGHT",c){super(t,n,r,h,1),this.objectType="TB_Output",this.scope.TB_Output.push(this),this.setIdentifier(c||"Test1"),this.inputs=[],this.testBenchInput=void 0,this.setup()}setDimensions(){this.leftDimensionX=0,this.rightDimensionX=160,this.upDimensionY=0,this.downDimensionY=40,this.testBenchInput&&(this.downDimensionY=40+this.testBenchInput.testData.outputs.length*20)}setup(){this.deleteNodes(),this.nodeList=[],this.inputs=[],this.testBenchInput=void 0;for(var t=0;t<this.scope.TB_Input.length;t++)if(this.scope.TB_Input[t].identifier==this.identifier){this.testBenchInput=this.scope.TB_Input[t];break}if(this.setDimensions(),this.testBenchInput)for(var t=0;t<this.testBenchInput.testData.outputs.length;t++)this.inputs.push(new U(0,30+t*20,NODE_INPUT,this,this.testBenchInput.testData.outputs[t].bitWidth,this.testBenchInput.testData.outputs[t].label))}customSave(){var t={constructorParamaters:[this.direction,this.identifier],nodes:{inputs:this.inputs.map(tt)}};return t}setIdentifier(t=""){t.length==0||t==this.identifier||(this.identifier=t,this.setup())}checkPairing(t=""){this.testBenchInput?(this.testBenchInput.deleted||this.testBenchInput.identifier!=this.identifier)&&this.setup():this.setup()}customDraw(){var t=f.context;t.beginPath(),t.strokeStyle="grey",t.fillStyle="#fcfcfc",t.lineWidth=Rt(1);var n=this.x,r=this.y;if(this.direction=="LEFT"||(this.direction=="RIGHT"?120-this.xSize:this.direction=="UP"?60-this.xSize/2:60-this.xSize/2),t.beginPath(),t.textAlign="center",t.fillStyle="black",Ut(t,`${this.identifier} [OUTPUT]`,n+this.rightDimensionX/2,r+14,10),Ut(t,["Unpaired","Paired"][+(this.testBenchInput!=null)],n+this.rightDimensionX/2,r+this.downDimensionY-5,10),t.fill(),this.testBenchInput){t.beginPath(),t.font="30px Raleway",t.textAlign="left",t.fillStyle="blue";for(var h=0;h<this.testBenchInput.testData.outputs.length;h++)Ut(t,this.testBenchInput.testData.outputs[h].label,5+n,30+h*20+r+4,10);if(t.fill(),this.testBenchInput.running&&this.testBenchInput.iteration){t.beginPath(),t.font="30px Raleway",t.textAlign="right",t.fillStyle="blue",t.beginPath();for(var h=0;h<this.testBenchInput.testData.outputs.length;h++)Ut(t,this.testBenchInput.testData.outputs[h].values[this.testBenchInput.iteration-1],n+this.rightDimensionX-5,30+h*20+r+4,10);t.fill()}if(this.testBenchInput.running&&this.testBenchInput.iteration){t.beginPath(),t.font="30px Raleway",t.textAlign="center",t.fillStyle="blue";for(var h=0;h<this.testBenchInput.testData.outputs.length;h++)this.inputs[h].value!=null?(t.beginPath(),this.testBenchInput.testData.outputs[h].values[this.testBenchInput.iteration-1]=="x"||parseInt(this.testBenchInput.testData.outputs[h].values[this.testBenchInput.iteration-1],2)==this.inputs[h].value?t.fillStyle="green":t.fillStyle="red",Ut(t,Vm(this.inputs[h].value,this.inputs[h].bitWidth),n+this.rightDimensionX/2,30+h*20+r+4,10),t.fill()):(t.beginPath(),this.testBenchInput.testData.outputs[h].values[this.testBenchInput.iteration-1]=="x"?t.fillStyle="green":t.fillStyle="red",Ut(t,"X",n+this.rightDimensionX/2,30+h*20+r+4,10),t.fill())}}}}Yr.prototype.tooltipText="Test Bench Output Selected";Yr.prototype.helplink="https://docs.circuitverse.org/#/chapter7/3testcircuits";Yr.prototype.centerElement=!0;Yr.prototype.mutableProperties={identifier:{name:"TestBench Name:",type:"text",maxlength:"10",func:"setIdentifier"}};Yr.prototype.objectType="TB_Output";class Uh extends Ht{constructor(t,n,r=globalScope,h="RIGHT",c=1){super(t,n,r,h,c),this.setDimensions(20,10),this.objectType="ForceGate",this.scope.ForceGate.push(this),this.inp1=new U(-20,0,0,this),this.inp2=new U(0,0,0,this),this.output1=new U(20,0,1,this)}isResolvable(){return this.inp1.value!==void 0||this.inp2.value!==void 0}customSave(){return{constructorParamaters:[this.direction,this.bitWidth],nodes:{output1:tt(this.output1),inp1:tt(this.inp1),inp2:tt(this.inp2)}}}resolve(){this.inp2.value!==void 0?this.output1.value=this.inp2.value:this.output1.value=this.inp1.value,f.simulationQueue.add(this.output1)}customDraw(){var t=f.context;const n=this.x,r=this.y;t.beginPath(),t.fillStyle="Black",t.textAlign="center",cn(t,"I",-10,0,n,r,this.direction,10),cn(t,"O",10,0,n,r,this.direction,10),t.fill()}}Uh.prototype.tooltipText="Force Gate ToolTip : ForceGate Selected.";Uh.prototype.objectType="ForceGate";function Yh(i){if(Number.isInteger(i))return i;var t=1;for(var n in i)t=Math.max(t,i[n]);return t}class si{constructor(t){this.bitWidth=1,t.bits&&(this.bitWidth=Yh(t.bits))}getPort(t){if(t=="in")return this.input;if(t=="out")return this.output}}class Km extends si{constructor(t){super(t),t.net=="clk"||t.net=="clock"?this.element=new vn(0,0):this.element=new us(0,0,void 0,void 0,this.bitWidth),this.output=this.element.output1,this.element.label=t.net}}class Qm extends si{constructor(t){super(t),this.element=new os(0,0,void 0,void 0,this.bitWidth),this.input=this.element.inp1,this.element.label=t.net}}class Zm extends si{constructor(t){super(t),this.element=new vn(0,0),this.output=this.element.output1}}class Jm extends si{constructor(t){super(t),this.element=new Ri(0,0),this.output=this.element.output1}}class tv extends si{constructor(t){super(t),this.element=new Vs(0,0),this.input=this.element.inp1}}class ev extends si{constructor(t){super(t),this.element=new Oi(0,0,void 0,void 0,this.bitWidth),this.input=this.element.inp1,this.output=this.element.output1}}class iv extends si{constructor(t){super(t),this.element=new Uo(0,0,void 0,void 0,this.bitWidth),this.input=this.element.inp1,this.output=this.element.output1}}class nv extends si{constructor(t){super(t),this.bitWidth=t.constant.length,this.state=t.constant,this.state[0]=="x"&&(this.state=void 0),this.element=new Ze(0,0,void 0,void 0,this.bitWidth,this.state),this.input=this.element.inp1,this.output=this.element.output1}}class sv extends si{constructor(t){super(t),this.bitWidthSplit=[];for(var n=0;n<this.bitWidth;n++)this.bitWidthSplit.push(1);this.splitter=new xe(0,0,void 0,void 0,this.bitWidth,this.bitWidthSplit),this.andGate=new en(0,0,void 0,void 0,this.bitWidth,1);for(var n=0;n<this.bitWidth;n++)this.splitter.outputs[n].connect(this.andGate.inp[n]);this.input=this.splitter.inp1,this.output=this.andGate.output1}}class rv extends si{constructor(t){super(t),this.bitWidthSplit=[];for(var n=0;n<this.bitWidth;n++)this.bitWidthSplit.push(1);this.splitter=new xe(0,0,void 0,void 0,this.bitWidth,this.bitWidthSplit),this.nandGate=new bn(0,0,void 0,void 0,this.bitWidth,1);for(var n=0;n<this.bitWidth;n++)this.splitter.outputs[n].connect(this.nandGate.inp[n]);this.input=this.splitter.inp1,this.output=this.nandGate.output1}}class ov extends si{constructor(t){super(t),this.bitWidthSplit=[];for(var n=0;n<this.bitWidth;n++)this.bitWidthSplit.push(1);this.splitter=new xe(0,0,void 0,void 0,this.bitWidth,this.bitWidthSplit),this.orGate=new yn(0,0,void 0,void 0,this.bitWidth,1);for(var n=0;n<this.bitWidth;n++)this.splitter.outputs[n].connect(this.orGate.inp[n]);this.input=this.splitter.inp1,this.output=this.orGate.output1}}class av extends si{constructor(t){super(t),this.bitWidthSplit=[];for(var n=0;n<this.bitWidth;n++)this.bitWidthSplit.push(1);this.splitter=new xe(0,0,void 0,void 0,this.bitWidth,this.bitWidthSplit),this.norGate=new Hn(0,0,void 0,void 0,this.bitWidth,1);for(var n=0;n<this.bitWidth;n++)this.splitter.outputs[n].connect(this.norGate.inp[n]);this.input=this.splitter.inp1,this.output=this.norGate.output1}}class lv extends si{constructor(t){super(t),this.bitWidthSplit=[];for(var n=0;n<this.bitWidth;n++)this.bitWidthSplit.push(1);this.splitter=new xe(0,0,void 0,void 0,this.bitWidth,this.bitWidthSplit),this.xorGate=new Bn(0,0,void 0,void 0,this.bitWidth,1);for(var n=0;n<this.bitWidth;n++)this.splitter.outputs[n].connect(this.xorGate.inp[n]);this.input=this.splitter.inp1,this.output=this.xorGate.output1}}class hv extends si{constructor(t){super(t),this.bitWidthSplit=[];for(var n=0;n<this.bitWidth;n++)this.bitWidthSplit.push(1);this.splitter=new xe(0,0,void 0,void 0,this.bitWidth,this.bitWidthSplit),this.xnorGate=new nn(0,0,void 0,void 0,this.bitWidth,1);for(var n=0;n<this.bitWidth;n++)this.splitter.outputs[n].connect(this.xnorGate.inp[n]);this.input=this.splitter.inp1,this.output=this.xnorGate.output1}}class uv extends si{constructor(t){super(t),this.bitWidth=t.slice.total,this.start=t.slice.first,this.count=t.slice.count,this.start==0?(this.count==this.bitWidth?this.splitter=new xe(0,0,void 0,void 0,this.bitWidth,[this.bitWidth]):this.splitter=new xe(0,0,void 0,void 0,this.bitWidth,[this.count,this.bitWidth-this.count]),this.input=this.splitter.inp1,this.output=this.splitter.outputs[0]):(this.start+this.count==this.bitWidth?this.splitter=new xe(0,0,void 0,void 0,this.bitWidth,[this.start,this.count]):this.splitter=new xe(0,0,void 0,void 0,this.bitWidth,[this.start,this.count,this.bitWidth-this.start-this.count]),this.input=this.splitter.inp1,this.output=this.splitter.outputs[1])}}class cv extends si{constructor(t){super(t),this.inputBitWidth=t.extend.input,this.outputBitWidth=t.extend.output;for(var n=this.outputBitWidth-this.inputBitWidth,r="",h=0;h<n;h++)r+="0";this.zeroConstant=new Ze(0,0,void 0,void 0,n,r),this.splitter=new xe(0,0,void 0,void 0,this.outputBitWidth,[this.inputBitWidth,n]),this.zeroConstant.output1.connect(this.splitter.outputs[1]),this.input=this.splitter.outputs[0],this.output=this.splitter.inp1}}class dv extends si{constructor(t){if(super(t),this.inputBitWidth=t.bits.in,this.notGate=new Oi(400,0,void 0,void 0,this.bitWidth),this.adder=new qs(300,0,void 0,void 0,this.bitWidth),this.inputBitWidth!=this.bitWidth){var n=this.bitWidth-this.inputBitWidth;this.splitter=new xe(600,600,void 0,void 0,this.bitWidth,[this.inputBitWidth,n]);for(var r="",h=0;h<n;h++)r+="0";this.zeroConstant=new Ze(550,550,void 0,void 0,n,r),this.zeroConstant.output1.connect(this.splitter.outputs[1]),this.splitter.inp1.connect(this.notGate.inp1),this.input=this.splitter.outputs[0]}else this.input=this.notGate.inp1;for(var c="",h=0;h<this.bitWidth-1;h++)c+="0";c+="1",this.oneConstant=new Ze(0,0,void 0,void 0,this.bitWidth,c),this.notGate.output1.connect(this.adder.inpA),this.oneConstant.output1.connect(this.adder.inpB),this.output=this.adder.sum}}class Js{constructor(t){this.bitWidth=1,t.bits&&(this.bitWidth=Yh(t.bits))}getPort(t){if(t=="in1")return this.input[0];if(t=="in2")return this.input[1];if(t=="out")return this.output}}class fv extends Js{constructor(t){super(t),this.element=new en(0,0,void 0,void 0,void 0,this.bitWidth),this.input=[this.element.inp[0],this.element.inp[1]],this.output=this.element.output1}}class pv extends Js{constructor(t){super(t),this.element=new bn(0,0,void 0,void 0,void 0,this.bitWidth),this.input=[this.element.inp[0],this.element.inp[1]],this.output=this.element.output1}}class gv extends Js{constructor(t){super(t),this.element=new yn(0,0,void 0,void 0,void 0,this.bitWidth),this.input=[this.element.inp[0],this.element.inp[1]],this.output=this.element.output1}}class mv extends Js{constructor(t){super(t),this.element=new Hn(0,0,void 0,void 0,void 0,this.bitWidth),this.input=[this.element.inp[0],this.element.inp[1]],this.output=this.element.output1}}class vv extends Js{constructor(t){super(t),this.element=new Bn(0,0,void 0,void 0,void 0,this.bitWidth),this.input=[this.element.inp[0],this.element.inp[1]],this.output=this.element.output1}}class bv extends Js{constructor(t){super(t),this.element=new nn(0,0,void 0,void 0,void 0,this.bitWidth),this.input=[this.element.inp[0],this.element.inp[1]],this.output=this.element.output1}}class _i extends Js{constructor(t,n){super(t),this.bitWidth=Math.max(t.bits.in1,t.bits.in2),n&&(this.bitWidth=Math.max(t.bits.out,this.bitWidth)),Number.isInteger(t.bits)||(this.in1BitWidth=t.bits.in1,this.in2BitWidth=t.bits.in2),this.input=[];var c=this.bitWidth-this.in1BitWidth;if(c!=0){this.in1Splitter=new xe(0,0,void 0,void 0,this.bitWidth,[this.in1BitWidth,c]);for(var r="",h=0;h<c;h++)r+="0";this.in1ZeroConstant=new Ze(0,0,void 0,void 0,c,r),this.in1ZeroConstant.output1.connect(this.in1Splitter.outputs[1])}else this.in1Splitter=new xe(0,0,void 0,void 0,this.bitWidth,[this.bitWidth]);var c=this.bitWidth-this.in2BitWidth;if(c!=0){this.in2Splitter=new xe(0,0,void 0,void 0,this.bitWidth,[this.in2BitWidth,c]);for(var r="",h=0;h<c;h++)r+="0";this.in2ZeroConstant=new Ze(0,0,void 0,void 0,c,r),this.in2ZeroConstant.output1.connect(this.in2Splitter.outputs[1])}else this.in2Splitter=new xe(0,0,void 0,void 0,this.bitWidth,[this.bitWidth]);this.input=[this.in1Splitter.outputs[0],this.in2Splitter.outputs[0]]}}class yv extends _i{constructor(t){super(t,!1);for(var n=[],r=0;r<this.bitWidth;r++)n.push(1);this.xnorGate=new nn(0,0,void 0,void 0,void 0,this.bitWidth),this.splitter=new xe(0,0,void 0,void 0,this.bitWidth,n),this.andGate=new en(0,0,void 0,void 0,this.bitWidth),this.in1Splitter.inp1.connect(this.xnorGate.inp[0]),this.in2Splitter.inp1.connect(this.xnorGate.inp[1]),this.xnorGate.output1.connect(this.splitter.inp1);for(var r=0;r<this.bitWidth;r++)this.splitter.outputs[r].connect(this.andGate.inp[r]);this.output=this.andGate.output1}}class wv extends _i{constructor(t){super(t,!1);for(var n=[],r=0;r<this.bitWidth;r++)n.push(1);this.xnorGate=new nn(0,0,void 0,void 0,void 0,this.bitWidth),this.splitter=new xe(0,0,void 0,void 0,this.bitWidth,n),this.nandGate=new bn(0,0,void 0,void 0,this.bitWidth),this.in1Splitter.inp1.connect(this.xnorGate.inp[0]),this.in2Splitter.inp1.connect(this.xnorGate.inp[1]),this.xnorGate.output1.connect(this.splitter.inp1);for(var r=0;r<this.bitWidth;r++)this.splitter.outputs[r].connect(this.nandGate.inp[r]);this.output=this.nandGate.output1}}class Sv extends _i{constructor(t){super(t,!1),this.constant7=new Ze(0,0,void 0,void 0,3,"111"),this.alu=new $n(0,0,void 0,void 0,this.bitWidth),this.splitter=new xe(0,0,void 0,void 0,this.bitWidth,[1]),this.in1Splitter.inp1.connect(this.alu.inp1),this.in2Splitter.inp1.connect(this.alu.inp2),this.constant7.output1.connect(this.alu.controlSignalInput),this.alu.output.connect(this.splitter.inp1),this.output=this.splitter.outputs[0]}}class xv extends _i{constructor(t){super(t,!1),this.constant7=new Ze(0,0,void 0,void 0,3,"111"),this.alu=new $n(0,0,void 0,void 0,this.bitWidth),this.splitter=new xe(0,0,void 0,void 0,this.bitWidth,[1]),this.in1Splitter.inp1.connect(this.alu.inp1),this.in2Splitter.inp1.connect(this.alu.inp2),this.constant7.output1.connect(this.alu.controlSignalInput),this.alu.output.connect(this.splitter.inp1),this.output=this.splitter.outputs[0]}}class kv extends _i{constructor(t){super(t,!1),this.constant7=new Ze(0,0,void 0,void 0,3,"111"),this.alu=new $n(0,0,void 0,void 0,this.bitWidth),this.splitter=new xe(0,0,void 0,void 0,this.bitWidth,[1]),this.notGate=new Oi(0,0),this.in1Splitter.inp1.connect(this.alu.inp1),this.in2Splitter.inp1.connect(this.alu.inp2),this.constant7.output1.connect(this.alu.controlSignalInput),this.alu.output.connect(this.splitter.inp1),this.splitter.outputs[0].connect(this.notGate.inp1),this.output=this.notGate.output1}}class Cv extends _i{constructor(t){super(t,!1),this.constant7=new Ze(0,0,void 0,void 0,3,"111"),this.alu=new $n(0,0,void 0,void 0,this.bitWidth),this.splitter=new xe(0,0,void 0,void 0,this.bitWidth,[1]),this.notGate=new Oi(0,0),this.in1Splitter.inp1.connect(this.alu.inp1),this.in2Splitter.inp1.connect(this.alu.inp2),this.constant7.output1.connect(this.alu.controlSignalInput),this.alu.output.connect(this.splitter.inp1),this.splitter.outputs[0].connect(this.notGate.inp1),this.output=this.notGate.output1}}class Dv extends _i{constructor(t){super(t,!1),this.outBitWidth=t.bits.out,this.adder=new qs(0,0,void 0,void 0,this.bitWidth),this.in1Splitter.inp1.connect(this.adder.inpA),this.in2Splitter.inp1.connect(this.adder.inpB),this.outBitWidth==this.bitWidth?this.output=this.adder.sum:this.outBitWidth==this.bitWidth+1&&(this.outputSplitter=new xe(0,0,void 0,void 0,this.outBitWidth,[this.bitWidth,1]),this.adder.sum.connect(this.outputSplitter.outputs[0]),this.adder.carryOut.connect(this.outputSplitter.outputs[1]),this.output=this.outputSplitter.inp1)}}class Tv extends _i{constructor(t){super(t),this.outBitWidth=t.bits.out,this.verilogMultiplier=new Yo(300,300,void 0,void 0,this.bitWidth,this.outBitWidth),this.in1Splitter.inp1.connect(this.verilogMultiplier.inpA),this.in2Splitter.inp1.connect(this.verilogMultiplier.inpB),this.output=this.verilogMultiplier.product}}class _v extends _i{constructor(t){super(t),this.outBitWidth=t.bits.out,this.verilogDivider=new Hr(300,300,void 0,void 0,this.bitWidth,this.outBitWidth),this.in1Splitter.inp1.connect(this.verilogDivider.inpA),this.in2Splitter.inp1.connect(this.verilogDivider.inpB),this.output=this.verilogDivider.quotient}}class Pv extends _i{constructor(t){super(t),this.outBitWidth=t.bits.out,this.verilogPower=new qo(300,300,void 0,void 0,this.bitWidth,this.outBitWidth),this.in1Splitter.inp1.connect(this.verilogPower.inpA),this.in2Splitter.inp1.connect(this.verilogPower.inpB),this.output=this.verilogPower.answer}}class Iv extends _i{constructor(t){super(t),this.outBitWidth=t.bits.out,this.verilogDivider=new Hr(300,300,void 0,void 0,this.bitWidth,this.outBitWidth),this.in1Splitter.inp1.connect(this.verilogDivider.inpA),this.in2Splitter.inp1.connect(this.verilogDivider.inpB),this.output=this.verilogDivider.remainder}}class Lv extends _i{constructor(t){super(t),this.outBitWidth=t.bits.out,this.verilogShiftLeft=new Vo(300,300,void 0,void 0,this.bitWidth,this.outBitWidth),this.in1Splitter.inp1.connect(this.verilogShiftLeft.inp1),this.in2Splitter.inp1.connect(this.verilogShiftLeft.shiftInp),this.output=this.verilogShiftLeft.output1}}class Ov extends _i{constructor(t){super(t),this.outBitWidth=t.bits.out,this.verilogShiftRight=new Ko(300,300,void 0,void 0,this.bitWidth,this.outBitWidth),this.in1Splitter.inp1.connect(this.verilogShiftRight.inp1),this.in2Splitter.inp1.connect(this.verilogShiftRight.shiftInp),this.output=this.verilogShiftRight.output1}}class Ev extends _i{constructor(t){super(t,!0),this.alu=new $n(0,0,void 0,void 0,this.bitWidth),this.controlConstant=new Ze(0,0,void 0,void 0,3,"110"),this.alu.controlSignalInput.connect(this.controlConstant.output1),this.in1Splitter.inp1.connect(this.alu.inp1),this.in2Splitter.inp1.connect(this.alu.inp2),this.output=this.alu.output}}class Wv{constructor(t){this.bitWidth=1,t.bits&&(this.bitWidth=Yh(t.bits)),this.dff=new na(0,0,void 0,void 0,this.bitWidth),this.clockInput=this.dff.clockInp,this.arstInput=this.dff.reset,this.enableInput=this.dff.en,this.clockPolarity=!0,this.arstPolarity=!0,this.enablePolarity=!0,t.polarity.clock!=null&&(this.clockPolarity=t.polarity.clock),this.clockPolarity==!1&&(this.notGateClock=new Oi(0,0),this.notGateClock.output1.connect(this.dff.clockInp),this.clockInput=this.notGateClock.inp1),t.polarity.enable!=null&&(this.enablePolarity=t.polarity.enable),this.enablePolarity==!1&&(this.notGateEnable=new Oi(0,0),this.notGateEnable.output1.connect(this.dff.en),this.enableInput=this.notGateEnable.inp1),t.polarity.arst!=null&&(this.arstPolarity=t.polarity.arst),this.arstPolarity==!1&&(this.notGateArst=new Oi(0,0),this.notGateArst.output1.connect(this.dff.reset),this.arstInput=this.notGateArst.inp1),t.arst_value!=null&&(this.arst_value_constant=new Ze(0,0,void 0,void 0,this.bitWidth,t.arst_value),this.arst_value_constant.output1.connect(this.dff.preset)),this.dInput=this.dff.dInp,this.qOutput=this.dff.qOutput}getPort(t){if(t=="clk")return this.clockInput;if(t=="in")return this.dInput;if(t=="arst")return this.arstInput;if(t=="en")return this.enableInput;if(t=="out")return this.qOutput}}class Mv{constructor(t){this.bitWidth=1,this.selectBitWidth=void 0,t.bits.in!=null&&(this.bitWidth=t.bits.in),t.bits.sel!=null&&(this.selectBitWidth=t.bits.sel),this.multiplexer=new Ni(0,0,void 0,void 0,this.bitWidth,this.selectBitWidth),this.input=this.multiplexer.inp,this.selectInput=this.multiplexer.controlSignalInput,this.output=this.multiplexer.output1}getPort(t){if(t=="sel")return this.selectInput;if(t=="out")return this.output;var n=t.length,r=parseInt(t.substring(2,n));return this.input[r]}}class Av{constructor(t){this.bitWidth=1,this.selectBitWidth=void 0,t.bits.in!=null&&(this.bitWidth=t.bits.in),t.bits.sel!=null&&(this.selectBitWidth=t.bits.sel),this.multiplexer=new Ni(0,0,void 0,void 0,this.bitWidth,this.selectBitWidth),this.lsb=new ea(0,0,void 0,void 0,this.selectBitWidth),this.adder=new qs(0,0,void 0,void 0,this.selectBitWidth);for(var n="",r=0;r<this.selectBitWidth-1;r++)n+="0";this.zeroPadEnable=new Ze(0,0,void 0,void 0,this.selectBitWidth-1,n),this.enbaleSplitter=new xe(0,0,void 0,void 0,this.selectBitWidth,[1,this.selectBitWidth-1]),this.lsb.enable.connect(this.enbaleSplitter.outputs[0]),this.zeroPadEnable.output1.connect(this.enbaleSplitter.outputs[1]),this.adder.inpA.connect(this.lsb.output1),this.adder.inpB.connect(this.enbaleSplitter.inp1),this.adder.sum.connect(this.multiplexer.controlSignalInput),this.input=this.multiplexer.inp,this.selectInput=this.lsb.inp1,this.output=this.multiplexer.output1}getPort(t){if(t=="sel")return this.selectInput;if(t=="out")return this.output;var n=t.length,r=parseInt(t.substring(2,n));return this.input[r]}}class Nv{constructor(t){this.bitWidth=0,this.bitWidthSplit=t.groups;for(var n=0;n<this.bitWidthSplit.length;n++)this.bitWidth+=this.bitWidthSplit[n];this.splitter=new xe(0,0,void 0,void 0,this.bitWidth,this.bitWidthSplit),this.input=this.splitter.outputs,this.output=this.splitter.inp1}getPort(t){if(t=="out")return this.output;var n=t.length,r=parseInt(t.substring(2,n));return this.input[r]}}class Rv{constructor(t){this.bitWidth=0,this.bitWidthSplit=t.groups;for(var n=0;n<this.bitWidthSplit.length;n++)this.bitWidth+=this.bitWidthSplit[n];this.splitter=new xe(0,0,void 0,void 0,this.bitWidth,this.bitWidthSplit),this.input=this.splitter.inp1,this.output=this.splitter.outputs}getPort(t){if(t=="in")return this.input;var n=t.length,r=parseInt(t.substring(3,n));return this.output[r]}}class Bv{constructor(t){this.memData=t.memdata,this.dataBitWidth=t.bits,this.addressBitWidth=t.abits,this.words=t.words,this.numRead=t.rdports.length,this.numWrite=t.wrports.length,this.verilogRAM=new Zs(0,0,void 0,void 0,this.dataBitWidth,this.addressBitWidth,this.memData,this.words,this.numRead,this.numWrite,t.rdports,t.wrports),this.writeAddressInput=this.verilogRAM.writeAddress,this.readAddressInput=this.verilogRAM.readAddress,this.writeDataInput=this.verilogRAM.writeDataIn,this.writeEnableInput=this.verilogRAM.writeEnable,this.readDataOutput=this.verilogRAM.dataOut,this.readDffOut=this.verilogRAM.readDff;for(var n=0;n<this.numWrite;n++){var r=new us(0,0,void 0,void 0,1,void 0);r.label="en"+n.toString(),r.output1.connect(this.verilogRAM.writeEnable[n])}}getPort(t){var n=t.length,r=t.slice(n-4,n)=="addr",h=t.slice(n-4,n)=="data",c=t.slice(n-3,n)=="clk",g=t.slice(n-2,n)=="en";if(t.startsWith("rd")){if(r){var v=t.slice(2,n-4);return v=parseInt(v),this.readAddressInput[v]}if(h){var v=t.slice(2,n-4);return v=parseInt(v),this.verilogRAM.readDffQOutput[v]}if(c){var v=t.slice(2,n-3);return v=parseInt(v),this.verilogRAM.readDffClock[v]}if(g){var v=t.slice(2,n-2);return v=parseInt(v),this.verilogRAM.readDffEn[v]}}else{if(r){var v=t.slice(2,n-4);return v=parseInt(v),this.writeAddressInput[v]}if(h){var v=t.slice(2,n-4);return v=parseInt(v),this.writeDataInput[v]}if(c){var v=t.slice(2,n-3);return v=parseInt(v),this.verilogRAM.writeDffClock[v]}if(g){var v=t.slice(2,n-2);return v=parseInt(v),this.verilogRAM.writeDffEn[v]}}}}let ce={};ce.Not=ev;ce.Repeater=iv;ce.And=fv;ce.Nand=pv;ce.Or=gv;ce.Nor=mv;ce.Xor=vv;ce.Xnor=bv;ce.Constant=nv;ce.Input=Km;ce.Output=Qm;ce.AndReduce=sv;ce.NandReduce=rv;ce.OrReduce=ov;ce.NorReduce=av;ce.XorReduce=lv;ce.XnorReduce=hv;ce.Eq=yv;ce.Ne=wv;ce.Lt=Sv;ce.Le=Cv;ce.Ge=kv;ce.Gt=xv;ce.ZeroExtend=cv;ce.Negation=dv;ce.Dff=Wv;ce.Mux=Mv;ce.Mux1Hot=Av;ce.BusSlice=uv;ce.BusGroup=Nv;ce.BusUngroup=Rv;ce.Addition=Dv;ce.Subtraction=Ev;ce.Multiplication=Tv;ce.Division=_v;ce.Modulo=Iv;ce.Power=Pv;ce.ShiftLeft=Lv;ce.ShiftRight=Ov;ce.Clock=Zm;ce.Lamp=tv;ce.Button=Jm;ce.Memory=Bv;var Es,Th=!1;function Hv(){ds(void 0,void 0,!0,!0),Ar(!0)}function $v(){var i=Es.getValue();globalScope.verilogMetadata.code=i,jv(i)}function zv(){var i=document.getElementById("selectVerilogTheme"),t=i.options[i.selectedIndex].innerHTML;localStorage.setItem("verilog-theme",t),Es.setOption("theme",t)}function ff(){Es.setValue(globalScope.verilogMetadata.code)}function Ns(){return Th}function Ar(i){i!=Th&&(Th=i,i?($("#code-window").show(),$(".elementPanel").hide(),$(".timing-diagram-panel").hide(),$(".quick-btn").hide(),$("#verilogEditorPanel").show(),embed||(simulationArea.lastSelected=globalScope.root,Rn(void 0),Rn(simulationArea.lastSelected)),ff()):($("#code-window").hide(),$(".elementPanel").show(),$(".timing-diagram-panel").show(),$(".quick-btn").show(),$("#verilogEditorPanel").hide()))}class Fv{constructor(t){this.circuit=t}getPort(t){for(var n=this.circuit.inputNodes.length,r=this.circuit.outputNodes.length,h=0;h<n;h++)if(this.circuit.data.Input[h].label==t)return this.circuit.inputNodes[h];for(var h=0;h<r;h++)if(this.circuit.data.Output[h].label==t)return this.circuit.outputNodes[h]}}function pf(i,t=globalScope,n="verilogCircuit",r={},h=!1){var c=t.id,g;h?g=t:g=ds(n,void 0,!0,!1);var v={};for(var w in i.subcircuits){var D=pf(i.subcircuits[w],g,w,r);r[w]=D.id}for(var T in i.devices){var R=i.devices[T].type;if(R=="Subcircuit"){var w=i.devices[T].celltype;v[T]=new Fv(new Xo(500,500,void 0,r[w]))}else v[T]=new ce[R](i.devices[T])}for(var W in i.connectors){var L=i.connectors[W].from.id,E=i.connectors[W].from.port,V=i.connectors[W].to.id,at=i.connectors[W].to.port,H=v[L],A=v[V],q=H.getPort(E),F=A.getPort(at);q.connect(F)}if(!h)return Vr(c),g}function jv(i,t=globalScope){const n="/simulator/verilogcv";var r={code:i};$.ajax({url:n,type:"POST",beforeSend:function(h){h.setRequestHeader("X-CSRF-Token",$('meta[name="csrf-token"]').attr("content"))},data:r,success:function(h){var c=h;t.initialize();for(var g in t.verilogMetadata.subCircuitScopeIds)delete scopeList[g];t.verilogMetadata.subCircuitScopeIds=[],t.verilogMetadata.code=i;var v={};pf(c,globalScope,"verilogCircuit",v,!0),Nf(c.name),Ce("Verilog Circuit Successfully Created"),$("#verilogOutput").empty()},error:function(h,c,g){var v=h.status;if(v==500)li("Could not connect to Yosys");else{li("There is some issue with the code");var w=h.responseJSON;$("#verilogOutput").html(w.message)}},failure:function(h){}})}function Gv(){var i=document.getElementById("codeTextArea");if(Xa.commands.autocomplete=function(t){t.showHint({hint:Xa.hint.anyword})},Es=Xa.fromTextArea(i,{mode:"verilog",autoRefresh:!0,styleActiveLine:!0,lineNumbers:!0,autoCloseBrackets:!0,smartIndent:!0,indentWithTabs:!0,extraKeys:{"Ctrl-Space":"autocomplete"}}),!localStorage.getItem("verilog-theme"))localStorage.setItem("verilog-theme","default");else{const t=localStorage.getItem("verilog-theme");Es.setOption("theme",t)}Es.setValue("// Write Some Verilog Code Here!"),setTimeout(function(){Es.refresh()},1)}var gf={exports:{}};(function(i){(function(t){var n=q(),r=F(),h=J(),c=St(),g={imagePlaceholder:void 0,cacheBust:!1},v={toSvg:w,toPng:T,toJpeg:R,toBlob:W,toPixelData:D,impl:{fontFaces:h,images:c,util:n,inliner:r,options:{}}};i.exports=v;function w(ot,st){return st=st||{},L(st),Promise.resolve(ot).then(function(Tt){return V(Tt,st.filter,!0)}).then(at).then(H).then(wt).then(function(Tt){return A(Tt,st.width||n.width(ot),st.height||n.height(ot))});function wt(Tt){return st.bgcolor&&(Tt.style.backgroundColor=st.bgcolor),st.width&&(Tt.style.width=st.width+"px"),st.height&&(Tt.style.height=st.height+"px"),st.style&&Object.keys(st.style).forEach(function(At){Tt.style[At]=st.style[At]}),Tt}}function D(ot,st){return E(ot,st||{}).then(function(wt){return wt.getContext("2d").getImageData(0,0,n.width(ot),n.height(ot)).data})}function T(ot,st){return E(ot,st||{}).then(function(wt){return wt.toDataURL()})}function R(ot,st){return st=st||{},E(ot,st).then(function(wt){return wt.toDataURL("image/jpeg",st.quality||1)})}function W(ot,st){return E(ot,st||{}).then(n.canvasToBlob)}function L(ot){typeof ot.imagePlaceholder>"u"?v.impl.options.imagePlaceholder=g.imagePlaceholder:v.impl.options.imagePlaceholder=ot.imagePlaceholder,typeof ot.cacheBust>"u"?v.impl.options.cacheBust=g.cacheBust:v.impl.options.cacheBust=ot.cacheBust}function E(ot,st){return w(ot,st).then(n.makeImage).then(n.delay(100)).then(function(Tt){var At=wt(ot);return At.getContext("2d").drawImage(Tt,0,0),At});function wt(Tt){var At=document.createElement("canvas");if(At.width=st.width||n.width(Tt),At.height=st.height||n.height(Tt),st.bgcolor){var Pt=At.getContext("2d");Pt.fillStyle=st.bgcolor,Pt.fillRect(0,0,At.width,At.height)}return At}}function V(ot,st,wt){if(!wt&&st&&!st(ot))return Promise.resolve();return Promise.resolve(ot).then(Tt).then(function(K){return At(ot,K,st)}).then(function(K){return Pt(ot,K)});function Tt(K){return K instanceof HTMLCanvasElement?n.makeImage(K.toDataURL()):K.cloneNode(!1)}function At(K,lt,z){var oe=K.childNodes;if(oe.length===0)return Promise.resolve(lt);return Zt(lt,n.asArray(oe),z).then(function(){return lt});function Zt(ee,jt,Nt){var Vt=Promise.resolve();return jt.forEach(function(de){Vt=Vt.then(function(){return V(de,Nt)}).then(function(ae){ae&&ee.appendChild(ae)})}),Vt}}function Pt(K,lt){if(!(lt instanceof Element))return lt;return Promise.resolve().then(z).then(oe).then(Zt).then(ee).then(function(){return lt});function z(){jt(window.getComputedStyle(K),lt.style);function jt(Nt,Vt){Nt.cssText?Vt.cssText=Nt.cssText:de(Nt,Vt);function de(ae,me){n.asArray(ae).forEach(function(rt){me.setProperty(rt,ae.getPropertyValue(rt),ae.getPropertyPriority(rt))})}}}function oe(){[":before",":after"].forEach(function(Nt){jt(Nt)});function jt(Nt){var Vt=window.getComputedStyle(K,Nt),de=Vt.getPropertyValue("content");if(de===""||de==="none")return;var ae=n.uid();lt.className=lt.className+" "+ae;var me=document.createElement("style");me.appendChild(rt(ae,Nt,Vt)),lt.appendChild(me);function rt(Q,nt,N){var Y="."+Q+":"+nt,vt=N.cssText?pt(N):Lt(N);return document.createTextNode(Y+"{"+vt+"}");function pt(Yt){var Xt=Yt.getPropertyValue("content");return Yt.cssText+" content: "+Xt+";"}function Lt(Yt){return n.asArray(Yt).map(Xt).join("; ")+";";function Xt(he){return he+": "+Yt.getPropertyValue(he)+(Yt.getPropertyPriority(he)?" !important":"")}}}}}function Zt(){K instanceof HTMLTextAreaElement&&(lt.innerHTML=K.value),K instanceof HTMLInputElement&&lt.setAttribute("value",K.value)}function ee(){lt instanceof SVGElement&&(lt.setAttribute("xmlns","http://www.w3.org/2000/svg"),lt instanceof SVGRectElement&&["width","height"].forEach(function(jt){var Nt=lt.getAttribute(jt);Nt&&lt.style.setProperty(jt,Nt)}))}}}function at(ot){return h.resolveAll().then(function(st){var wt=document.createElement("style");return ot.appendChild(wt),wt.appendChild(document.createTextNode(st)),ot})}function H(ot){return c.inlineAll(ot).then(function(){return ot})}function A(ot,st,wt){return Promise.resolve(ot).then(function(Tt){return Tt.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),new XMLSerializer().serializeToString(Tt)}).then(n.escapeXhtml).then(function(Tt){return'<foreignObject x="0" y="0" width="100%" height="100%">'+Tt+"</foreignObject>"}).then(function(Tt){return'<svg xmlns="http://www.w3.org/2000/svg" width="'+st+'" height="'+wt+'">'+Tt+"</svg>"}).then(function(Tt){return"data:image/svg+xml;charset=utf-8,"+Tt})}function q(){return{escape:ee,parseExtension:st,mimeType:wt,dataAsUrl:Zt,isDataUrl:Tt,canvasToBlob:Pt,resolveUrl:K,getAndEncode:oe,uid:lt(),delay:jt,asArray:Nt,escapeXhtml:Vt,makeImage:z,width:de,height:ae};function ot(){var rt="application/font-woff",Q="image/jpeg";return{woff:rt,woff2:rt,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:Q,jpeg:Q,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"}}function st(rt){var Q=/\.([^\.\/]*?)$/g.exec(rt);return Q?Q[1]:""}function wt(rt){var Q=st(rt).toLowerCase();return ot()[Q]||""}function Tt(rt){return rt.search(/^(data:)/)!==-1}function At(rt){return new Promise(function(Q){for(var nt=window.atob(rt.toDataURL().split(",")[1]),N=nt.length,Y=new Uint8Array(N),vt=0;vt<N;vt++)Y[vt]=nt.charCodeAt(vt);Q(new Blob([Y],{type:"image/png"}))})}function Pt(rt){return rt.toBlob?new Promise(function(Q){rt.toBlob(Q)}):At(rt)}function K(rt,Q){var nt=document.implementation.createHTMLDocument(),N=nt.createElement("base");nt.head.appendChild(N);var Y=nt.createElement("a");return nt.body.appendChild(Y),N.href=Q,Y.href=rt,Y.href}function lt(){var rt=0;return function(){return"u"+Q()+rt++;function Q(){return("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)}}}function z(rt){return new Promise(function(Q,nt){var N=new Image;N.onload=function(){Q(N)},N.onerror=nt,N.src=rt})}function oe(rt){var Q=3e4;return v.impl.options.cacheBust&&(rt+=(/\?/.test(rt)?"&":"?")+new Date().getTime()),new Promise(function(nt){var N=new XMLHttpRequest;N.onreadystatechange=pt,N.ontimeout=Lt,N.responseType="blob",N.timeout=Q,N.open("GET",rt,!0),N.send();var Y;if(v.impl.options.imagePlaceholder){var vt=v.impl.options.imagePlaceholder.split(/,/);vt&&vt[1]&&(Y=vt[1])}function pt(){if(N.readyState===4){if(N.status!==200){Y?nt(Y):Yt("cannot fetch resource: "+rt+", status: "+N.status);return}var Xt=new FileReader;Xt.onloadend=function(){var he=Xt.result.split(/,/)[1];nt(he)},Xt.readAsDataURL(N.response)}}function Lt(){Y?nt(Y):Yt("timeout of "+Q+"ms occured while fetching resource: "+rt)}function Yt(Xt){console.error(Xt),nt("")}})}function Zt(rt,Q){return"data:"+Q+";base64,"+rt}function ee(rt){return rt.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")}function jt(rt){return function(Q){return new Promise(function(nt){setTimeout(function(){nt(Q)},rt)})}}function Nt(rt){for(var Q=[],nt=rt.length,N=0;N<nt;N++)Q.push(rt[N]);return Q}function Vt(rt){return rt.replace(/#/g,"%23").replace(/\n/g,"%0A")}function de(rt){var Q=me(rt,"border-left-width"),nt=me(rt,"border-right-width");return rt.scrollWidth+Q+nt}function ae(rt){var Q=me(rt,"border-top-width"),nt=me(rt,"border-bottom-width");return rt.scrollHeight+Q+nt}function me(rt,Q){var nt=window.getComputedStyle(rt).getPropertyValue(Q);return parseFloat(nt.replace("px",""))}}function F(){var ot=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:At,shouldProcess:st,impl:{readUrls:wt,inline:Tt}};function st(Pt){return Pt.search(ot)!==-1}function wt(Pt){for(var K=[],lt;(lt=ot.exec(Pt))!==null;)K.push(lt[1]);return K.filter(function(z){return!n.isDataUrl(z)})}function Tt(Pt,K,lt,z){return Promise.resolve(K).then(function(Zt){return lt?n.resolveUrl(Zt,lt):Zt}).then(z||n.getAndEncode).then(function(Zt){return n.dataAsUrl(Zt,n.mimeType(K))}).then(function(Zt){return Pt.replace(oe(K),"$1"+Zt+"$3")});function oe(Zt){return new RegExp(`(url\\(['"]?)(`+n.escape(Zt)+`)(['"]?\\))`,"g")}}function At(Pt,K,lt){if(z())return Promise.resolve(Pt);return Promise.resolve(Pt).then(wt).then(function(oe){var Zt=Promise.resolve(Pt);return oe.forEach(function(ee){Zt=Zt.then(function(jt){return Tt(jt,ee,K,lt)})}),Zt});function z(){return!st(Pt)}}}function J(){return{resolveAll:ot,impl:{readAll:st}};function ot(){return st().then(function(wt){return Promise.all(wt.map(function(Tt){return Tt.resolve()}))}).then(function(wt){return wt.join(`
`)})}function st(){return Promise.resolve(n.asArray(document.styleSheets)).then(Tt).then(wt).then(function(Pt){return Pt.map(At)});function wt(Pt){return Pt.filter(function(K){return K.type===CSSRule.FONT_FACE_RULE}).filter(function(K){return r.shouldProcess(K.style.getPropertyValue("src"))})}function Tt(Pt){var K=[];return Pt.forEach(function(lt){try{n.asArray(lt.cssRules||[]).forEach(K.push.bind(K))}catch(z){console.log("Error while reading CSS rules from "+lt.href,z.toString())}}),K}function At(Pt){return{resolve:function(){var lt=(Pt.parentStyleSheet||{}).href;return r.inlineAll(Pt.cssText,lt)},src:function(){return Pt.style.getPropertyValue("src")}}}}}function St(){return{inlineAll:st,impl:{newImage:ot}};function ot(wt){return{inline:Tt};function Tt(At){return n.isDataUrl(wt.src)?Promise.resolve():Promise.resolve(wt.src).then(At||n.getAndEncode).then(function(Pt){return n.dataAsUrl(Pt,n.mimeType(wt.src))}).then(function(Pt){return new Promise(function(K,lt){wt.onload=K,wt.onerror=lt,wt.src=Pt})})}}function st(wt){if(!(wt instanceof Element))return Promise.resolve(wt);return Tt(wt).then(function(){return wt instanceof HTMLImageElement?ot(wt).inline():Promise.all(n.asArray(wt.childNodes).map(function(At){return st(At)}))});function Tt(At){var Pt=At.style.getPropertyValue("background");return Pt?r.inlineAll(Pt).then(function(K){At.style.setProperty("background",K,At.style.getPropertyPriority("background"))}).then(function(){return At}):Promise.resolve(At)}}}})()})(gf);var Xv=gf.exports;const Uv=Nh(Xv);/*!!
 *  Canvas 2 Svg v1.0.19
 *  A low level canvas to SVG converter. Uses a mock canvas context to build an SVG document.
 *
 *  Licensed under the MIT license:
 *  http://www.opensource.org/licenses/mit-license.php
 *
 *  Author:
 *  Kerry Liu
 *
 *  Copyright (c) 2014 Gliffy Inc.
 */var Nr,re,sa,qh,_h;function vi(i,t){var n=Object.keys(t),r;for(r=0;r<n.length;r++)i=i.replace(new RegExp("\\{"+n[r]+"\\}","gi"),t[n[r]]);return i}function cl(i){var t,n,r;if(!i)throw new Error("cannot create a random attribute name for an undefined object");t="ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",n="";do for(n="",r=0;r<12;r++)n+=t[Math.floor(Math.random()*t.length)];while(i[n]);return n}function Yv(i,t){var n,r,h={},c;for(i=i.split(","),t=t||10,n=0;n<i.length;n+=2)r="&"+i[n+1]+";",c=parseInt(i[n],t),h[r]="&#"+c+";";return h["\\xa0"]="&#160;",h}function qv(i){var t={left:"start",right:"end",center:"middle",start:"start",end:"end"};return t[i]||t.start}function Vv(i){var t={alphabetic:"alphabetic",hanging:"hanging",top:"text-before-edge",bottom:"text-after-edge",middle:"central"};return t[i]||t.alphabetic}_h=Yv("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32);Nr={strokeStyle:{svgAttr:"stroke",canvas:"#000000",svg:"none",apply:"stroke"},fillStyle:{svgAttr:"fill",canvas:"#000000",svg:null,apply:"fill"},lineCap:{svgAttr:"stroke-linecap",canvas:"butt",svg:"butt",apply:"stroke"},lineJoin:{svgAttr:"stroke-linejoin",canvas:"miter",svg:"miter",apply:"stroke"},miterLimit:{svgAttr:"stroke-miterlimit",canvas:10,svg:4,apply:"stroke"},lineWidth:{svgAttr:"stroke-width",canvas:1,svg:1,apply:"stroke"},globalAlpha:{svgAttr:"opacity",canvas:1,svg:1,apply:"fill stroke"},font:{canvas:"10px sans-serif"},shadowColor:{canvas:"#000000"},shadowOffsetX:{canvas:0},shadowOffsetY:{canvas:0},shadowBlur:{canvas:0},textAlign:{canvas:"start"},textBaseline:{canvas:"alphabetic"},lineDash:{svgAttr:"stroke-dasharray",canvas:[],svg:null,apply:"stroke"}};sa=function(i,t){this.__root=i,this.__ctx=t};sa.prototype.addColorStop=function(i,t){var n=this.__ctx.__createElement("stop"),r,h;n.setAttribute("offset",i),t.indexOf("rgba")!==-1?(r=/rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi,h=r.exec(t),n.setAttribute("stop-color",vi("rgb({r},{g},{b})",{r:h[1],g:h[2],b:h[3]})),n.setAttribute("stop-opacity",h[4])):n.setAttribute("stop-color",t),this.__root.appendChild(n)};qh=function(i,t){this.__root=i,this.__ctx=t};re=function(i){var t={width:500,height:500,enableMirroring:!1},n;if(arguments.length>1?(n=t,n.width=arguments[0],n.height=arguments[1]):i?n=i:n=t,!(this instanceof re))return new re(n);this.width=n.width||t.width,this.height=n.height||t.height,this.enableMirroring=n.enableMirroring!==void 0?n.enableMirroring:t.enableMirroring,this.canvas=this,this.__document=n.document||document,n.ctx?this.__ctx=n.ctx:(this.__canvas=this.__document.createElement("canvas"),this.__ctx=this.__canvas.getContext("2d")),this.__setDefaultStyles(),this.__stack=[this.__getStyleState()],this.__groupStack=[],this.__root=this.__document.createElementNS("http://www.w3.org/2000/svg","svg"),this.__root.setAttribute("version",1.1),this.__root.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.__root.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),this.__root.setAttribute("width",this.width),this.__root.setAttribute("height",this.height),this.__ids={},this.__defs=this.__document.createElementNS("http://www.w3.org/2000/svg","defs"),this.__root.appendChild(this.__defs),this.__currentElement=this.__document.createElementNS("http://www.w3.org/2000/svg","g"),this.__root.appendChild(this.__currentElement)};re.prototype.__createElement=function(i,t,n){typeof t>"u"&&(t={});var r=this.__document.createElementNS("http://www.w3.org/2000/svg",i),h=Object.keys(t),c,g;for(n&&(r.setAttribute("fill","none"),r.setAttribute("stroke","none")),c=0;c<h.length;c++)g=h[c],r.setAttribute(g,t[g]);return r};re.prototype.__setDefaultStyles=function(){var i=Object.keys(Nr),t,n;for(t=0;t<i.length;t++)n=i[t],this[n]=Nr[n].canvas};re.prototype.__applyStyleState=function(i){var t=Object.keys(i),n,r;for(n=0;n<t.length;n++)r=t[n],this[r]=i[r]};re.prototype.__getStyleState=function(){var i,t={},n=Object.keys(Nr),r;for(i=0;i<n.length;i++)r=n[i],t[r]=this[r];return t};re.prototype.__applyStyleToCurrentElement=function(i){var t=this.__currentElement,n=this.__currentElementsToStyle;n&&(t.setAttribute(i,""),t=n.element,n.children.forEach(function(L){L.setAttribute(i,"")}));var r=Object.keys(Nr),h,c,g,v,w,D;for(h=0;h<r.length;h++)if(c=Nr[r[h]],g=this[r[h]],c.apply){if(g instanceof qh){if(g.__ctx)for(;g.__ctx.__defs.childNodes.length;)v=g.__ctx.__defs.childNodes[0].getAttribute("id"),this.__ids[v]=v,this.__defs.appendChild(g.__ctx.__defs.childNodes[0]);t.setAttribute(c.apply,vi("url(#{id})",{id:g.__root.getAttribute("id")}))}else if(g instanceof sa)t.setAttribute(c.apply,vi("url(#{id})",{id:g.__root.getAttribute("id")}));else if(c.apply.indexOf(i)!==-1&&c.svg!==g)if((c.svgAttr==="stroke"||c.svgAttr==="fill")&&g.indexOf("rgba")!==-1){w=/rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi,D=w.exec(g),t.setAttribute(c.svgAttr,vi("rgb({r},{g},{b})",{r:D[1],g:D[2],b:D[3]}));var T=D[4],R=this.globalAlpha;R!=null&&(T*=R),t.setAttribute(c.svgAttr+"-opacity",T)}else{var W=c.svgAttr;if(r[h]==="globalAlpha"&&(W=i+"-"+c.svgAttr,t.getAttribute(W)))continue;t.setAttribute(W,g)}}};re.prototype.__closestGroupOrSvg=function(i){return i=i||this.__currentElement,i.nodeName==="g"||i.nodeName==="svg"?i:this.__closestGroupOrSvg(i.parentNode)};re.prototype.getSerializedSvg=function(i){var t=new XMLSerializer().serializeToString(this.__root),n,r,h,c,g,v;if(v=/xmlns="http:\/\/www\.w3\.org\/2000\/svg".+xmlns="http:\/\/www\.w3\.org\/2000\/svg/gi,v.test(t)&&(t=t.replace('xmlns="http://www.w3.org/2000/svg','xmlns:xlink="http://www.w3.org/1999/xlink')),i)for(n=Object.keys(_h),r=0;r<n.length;r++)h=n[r],c=_h[h],g=new RegExp(h,"gi"),g.test(t)&&(t=t.replace(g,c));return t};re.prototype.getSvg=function(){return this.__root};re.prototype.save=function(){var i=this.__createElement("g"),t=this.__closestGroupOrSvg();this.__groupStack.push(t),t.appendChild(i),this.__currentElement=i,this.__stack.push(this.__getStyleState())};re.prototype.restore=function(){this.__currentElement=this.__groupStack.pop(),this.__currentElementsToStyle=null,this.__currentElement||(this.__currentElement=this.__root.childNodes[1]);var i=this.__stack.pop();this.__applyStyleState(i)};re.prototype.__addTransform=function(i){var t=this.__closestGroupOrSvg();if(t.childNodes.length>0){this.__currentElement.nodeName==="path"&&(this.__currentElementsToStyle||(this.__currentElementsToStyle={element:t,children:[]}),this.__currentElementsToStyle.children.push(this.__currentElement),this.__applyCurrentDefaultPath());var n=this.__createElement("g");t.appendChild(n),this.__currentElement=n}var r=this.__currentElement.getAttribute("transform");r?r+=" ":r="",r+=i,this.__currentElement.setAttribute("transform",r)};re.prototype.scale=function(i,t){t===void 0&&(t=i),this.__addTransform(vi("scale({x},{y})",{x:i,y:t}))};re.prototype.rotate=function(i){var t=i*180/Math.PI;this.__addTransform(vi("rotate({angle},{cx},{cy})",{angle:t,cx:0,cy:0}))};re.prototype.translate=function(i,t){this.__addTransform(vi("translate({x},{y})",{x:i,y:t}))};re.prototype.transform=function(i,t,n,r,h,c){this.__addTransform(vi("matrix({a},{b},{c},{d},{e},{f})",{a:i,b:t,c:n,d:r,e:h,f:c}))};re.prototype.beginPath=function(){var i,t;this.__currentDefaultPath="",this.__currentPosition={},i=this.__createElement("path",{},!0),t=this.__closestGroupOrSvg(),t.appendChild(i),this.__currentElement=i};re.prototype.__applyCurrentDefaultPath=function(){var i=this.__currentElement;i.nodeName==="path"?i.setAttribute("d",this.__currentDefaultPath):console.error("Attempted to apply path command to node",i.nodeName)};re.prototype.__addPathCommand=function(i){this.__currentDefaultPath+=" ",this.__currentDefaultPath+=i};re.prototype.moveTo=function(i,t){this.__currentElement.nodeName!=="path"&&this.beginPath(),this.__currentPosition={x:i,y:t},this.__addPathCommand(vi("M {x} {y}",{x:i,y:t}))};re.prototype.closePath=function(){this.__currentDefaultPath&&this.__addPathCommand("Z")};re.prototype.lineTo=function(i,t){this.__currentPosition={x:i,y:t},this.__currentDefaultPath.indexOf("M")>-1?this.__addPathCommand(vi("L {x} {y}",{x:i,y:t})):this.__addPathCommand(vi("M {x} {y}",{x:i,y:t}))};re.prototype.bezierCurveTo=function(i,t,n,r,h,c){this.__currentPosition={x:h,y:c},this.__addPathCommand(vi("C {cp1x} {cp1y} {cp2x} {cp2y} {x} {y}",{cp1x:i,cp1y:t,cp2x:n,cp2y:r,x:h,y:c}))};re.prototype.quadraticCurveTo=function(i,t,n,r){this.__currentPosition={x:n,y:r},this.__addPathCommand(vi("Q {cpx} {cpy} {x} {y}",{cpx:i,cpy:t,x:n,y:r}))};var ph=function(i){var t=Math.sqrt(i[0]*i[0]+i[1]*i[1]);return[i[0]/t,i[1]/t]};re.prototype.arcTo=function(i,t,n,r,h){var c=this.__currentPosition&&this.__currentPosition.x,g=this.__currentPosition&&this.__currentPosition.y;if(!(typeof c>"u"||typeof g>"u")){if(h<0)throw new Error("IndexSizeError: The radius provided ("+h+") is negative.");if(c===i&&g===t||i===n&&t===r||h===0){this.lineTo(i,t);return}var v=ph([c-i,g-t]),w=ph([n-i,r-t]);if(v[0]*w[1]===v[1]*w[0]){this.lineTo(i,t);return}var D=v[0]*w[0]+v[1]*w[1],T=Math.acos(Math.abs(D)),R=ph([v[0]+w[0],v[1]+w[1]]),W=h/Math.sin(T/2),L=i+W*R[0],E=t+W*R[1],V=[-v[1],v[0]],at=[w[1],-w[0]],H=function(F){var J=F[0],St=F[1];return St>=0?Math.acos(J):-Math.acos(J)},A=H(V),q=H(at);this.lineTo(L+V[0]*h,E+V[1]*h),this.arc(L,E,h,A,q)}};re.prototype.stroke=function(){this.__currentElement.nodeName==="path"&&this.__currentElement.setAttribute("paint-order","fill stroke markers"),this.__applyCurrentDefaultPath(),this.__applyStyleToCurrentElement("stroke")};re.prototype.fill=function(){this.__currentElement.nodeName==="path"&&this.__currentElement.setAttribute("paint-order","stroke fill markers"),this.__applyCurrentDefaultPath(),this.__applyStyleToCurrentElement("fill")};re.prototype.rect=function(i,t,n,r){this.__currentElement.nodeName!=="path"&&this.beginPath(),this.moveTo(i,t),this.lineTo(i+n,t),this.lineTo(i+n,t+r),this.lineTo(i,t+r),this.lineTo(i,t),this.closePath()};re.prototype.fillRect=function(i,t,n,r){var h,c;h=this.__createElement("rect",{x:i,y:t,width:n,height:r},!0),c=this.__closestGroupOrSvg(),c.appendChild(h),this.__currentElement=h,this.__applyStyleToCurrentElement("fill")};re.prototype.strokeRect=function(i,t,n,r){var h,c;h=this.__createElement("rect",{x:i,y:t,width:n,height:r},!0),c=this.__closestGroupOrSvg(),c.appendChild(h),this.__currentElement=h,this.__applyStyleToCurrentElement("stroke")};re.prototype.__clearCanvas=function(){for(var i=this.__closestGroupOrSvg(),t=i.getAttribute("transform"),n=this.__root.childNodes[1],r=n.childNodes,h=r.length-1;h>=0;h--)r[h]&&n.removeChild(r[h]);this.__currentElement=n,this.__groupStack=[],t&&this.__addTransform(t)};re.prototype.clearRect=function(i,t,n,r){if(i===0&&t===0&&n===this.width&&r===this.height){this.__clearCanvas();return}var h,c=this.__closestGroupOrSvg();h=this.__createElement("rect",{x:i,y:t,width:n,height:r,fill:"#FFFFFF"},!0),c.appendChild(h)};re.prototype.createLinearGradient=function(i,t,n,r){var h=this.__createElement("linearGradient",{id:cl(this.__ids),x1:i+"px",x2:n+"px",y1:t+"px",y2:r+"px",gradientUnits:"userSpaceOnUse"},!1);return this.__defs.appendChild(h),new sa(h,this)};re.prototype.createRadialGradient=function(i,t,n,r,h,c){var g=this.__createElement("radialGradient",{id:cl(this.__ids),cx:r+"px",cy:h+"px",r:c+"px",fx:i+"px",fy:t+"px",gradientUnits:"userSpaceOnUse"},!1);return this.__defs.appendChild(g),new sa(g,this)};re.prototype.__parseFont=function(){var i=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-,\'\"\sa-z0-9]+?)\s*$/i,t=i.exec(this.font),n={style:t[1]||"normal",size:t[4]||"10px",family:t[6]||"sans-serif",weight:t[3]||"normal",decoration:t[2]||"normal",href:null};return this.__fontUnderline==="underline"&&(n.decoration="underline"),this.__fontHref&&(n.href=this.__fontHref),n};re.prototype.__wrapTextLink=function(i,t){if(i.href){var n=this.__createElement("a");return n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i.href),n.appendChild(t),n}return t};re.prototype.__applyText=function(i,t,n,r){var h=this.__parseFont(),c=this.__closestGroupOrSvg(),g=this.__createElement("text",{"font-family":h.family,"font-size":h.size,"font-style":h.style,"font-weight":h.weight,"text-decoration":h.decoration,x:t,y:n,"text-anchor":qv(this.textAlign),"dominant-baseline":Vv(this.textBaseline)},!0);g.appendChild(this.__document.createTextNode(i)),this.__currentElement=g,this.__applyStyleToCurrentElement(r),c.appendChild(this.__wrapTextLink(h,g))};re.prototype.fillText=function(i,t,n){this.__applyText(i,t,n,"fill")};re.prototype.strokeText=function(i,t,n){this.__applyText(i,t,n,"stroke")};re.prototype.measureText=function(i){return this.__ctx.font=this.font,this.__ctx.measureText(i)};re.prototype.arc=function(i,t,n,r,h,c){if(r!==h){r=r%(2*Math.PI),h=h%(2*Math.PI),r===h&&(h=(h+2*Math.PI-.001*(c?-1:1))%(2*Math.PI));var g=i+n*Math.cos(h),v=t+n*Math.sin(h),w=i+n*Math.cos(r),D=t+n*Math.sin(r),T=c?0:1,R=0,W=h-r;W<0&&(W+=2*Math.PI),c?R=W>Math.PI?0:1:R=W>Math.PI?1:0,this.lineTo(w,D),this.__addPathCommand(vi("A {rx} {ry} {xAxisRotation} {largeArcFlag} {sweepFlag} {endX} {endY}",{rx:n,ry:n,xAxisRotation:0,largeArcFlag:R,sweepFlag:T,endX:g,endY:v})),this.__currentPosition={x:g,y:v}}};re.prototype.clip=function(){var i=this.__closestGroupOrSvg(),t=this.__createElement("clipPath"),n=cl(this.__ids),r=this.__createElement("g");this.__applyCurrentDefaultPath(),i.removeChild(this.__currentElement),t.setAttribute("id",n),t.appendChild(this.__currentElement),this.__defs.appendChild(t),i.setAttribute("clip-path",vi("url(#{id})",{id:n})),i.appendChild(r),this.__currentElement=r};re.prototype.drawImage=function(){var i=Array.prototype.slice.call(arguments),t=i[0],n,r,h,c,g=0,v=0,w,D,T,R,W,L,E,V,at,H;if(i.length===3)n=i[1],r=i[2],w=t.width,D=t.height,h=w,c=D;else if(i.length===5)n=i[1],r=i[2],h=i[3],c=i[4],w=t.width,D=t.height;else if(i.length===9)g=i[1],v=i[2],w=i[3],D=i[4],n=i[5],r=i[6],h=i[7],c=i[8];else throw new Error("Inavlid number of arguments passed to drawImage: "+arguments.length);T=this.__closestGroupOrSvg(),this.__currentElement;var A="translate("+n+", "+r+")";if(t instanceof re){if(R=t.getSvg().cloneNode(!0),R.childNodes&&R.childNodes.length>1){for(W=R.childNodes[0];W.childNodes.length;)H=W.childNodes[0].getAttribute("id"),this.__ids[H]=H,this.__defs.appendChild(W.childNodes[0]);if(L=R.childNodes[1],L){var q=L.getAttribute("transform"),F;q?F=q+" "+A:F=A,L.setAttribute("transform",F),T.appendChild(L)}}}else(t.nodeName==="CANVAS"||t.nodeName==="IMG")&&(E=this.__createElement("image"),E.setAttribute("width",h),E.setAttribute("height",c),E.setAttribute("preserveAspectRatio","none"),(g||v||w!==t.width||D!==t.height)&&(V=this.__document.createElement("canvas"),V.width=h,V.height=c,at=V.getContext("2d"),at.drawImage(t,g,v,w,D,0,0,h,c),t=V),E.setAttribute("transform",A),E.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t.nodeName==="CANVAS"?t.toDataURL():t.getAttribute("src")),T.appendChild(E))};re.prototype.createPattern=function(i,t){var n=this.__document.createElementNS("http://www.w3.org/2000/svg","pattern"),r=cl(this.__ids),h;return n.setAttribute("id",r),n.setAttribute("width",i.width),n.setAttribute("height",i.height),i.nodeName==="CANVAS"||i.nodeName==="IMG"?(h=this.__document.createElementNS("http://www.w3.org/2000/svg","image"),h.setAttribute("width",i.width),h.setAttribute("height",i.height),h.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i.nodeName==="CANVAS"?i.toDataURL():i.getAttribute("src")),n.appendChild(h),this.__defs.appendChild(n)):i instanceof re&&(n.appendChild(i.__root.childNodes[1]),this.__defs.appendChild(n)),new qh(n,this)};re.prototype.setLineDash=function(i){i&&i.length>0?this.lineDash=i.join(","):this.lineDash=null};re.prototype.drawFocusRing=function(){};re.prototype.createImageData=function(){};re.prototype.getImageData=function(){};re.prototype.putImageData=function(){};re.prototype.globalCompositeOperation=function(){};re.prototype.setTransform=function(){};const Kv=re;var mf=void 0;function Ro(i){if(i==null){$("#projectName").html("Untitled");return}i=Rr(i),mf=i,$("#projectName").html(i)}function Rs(){return mf}function Qv(i,t){const n=f.canvas.toDataURL(`image/${t}`),r=document.createElement("a");r.href=n,r.download=`${i}.${t}`,r.click()}function Zv(){var i=$("#tabsBar").children().not("button"),t=[];for(let n=0;n<i.length;n++)t.push(i[n].id);return t}function qr(i,t=!0){data={},i=Rs()||i||prompt("Enter Project Name:")||"Untitled",data.name=Rr(i),t&&Ro(data.name),data.timePeriod=f.timePeriod,data.clockEnabled=f.clockEnabled,data.projectId=projectId,data.focussedCircuit=globalScope.id,data.orderedTabs=Zv(),data.scopes=[];const n={},r={};for(id in le)n[id]=le[id].getDependencies();function h(c){if(!r[c]){for(let g=0;g<n[c].length;g++)h(n[c][g]);r[c]=!0,fs(le[c],!0),data.scopes.push(No(le[c]))}}for(let c in le)h(c);return data=JSON.stringify(data),data}function vf(i,t){var n=document.createElement("a");if(n.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),n.setAttribute("download",i),document.createEvent){var r=document.createEvent("MouseEvents");r.initEvent("click",!0,!0),n.dispatchEvent(r)}else n.click()}function Vh(i,t,n,r,h=!0){const c=globalScope.ox,g=globalScope.oy,v=width,w=height,D=globalScope.scale,T=ai.context,R=f.context;ai.context=f.context,globalScope.ox*=1/D,globalScope.oy*=1/D,i==="svg"?(f.context=new Kv(width,height),r=1):i!=="png"&&(n=!1),globalScope.scale=r;const W=globalScope;if(t==="full"){Br();const E=f.minWidth,V=f.minHeight,at=f.maxWidth,H=f.maxHeight;width=(at-E+100)*r,height=(H-V+100)*r,globalScope.ox=(-E+50)*r,globalScope.oy=(-V+50)*r}else globalScope.ox*=r,globalScope.oy*=r,width=width*r/D,height=height*r/D;globalScope.ox=Math.round(globalScope.ox),globalScope.oy=Math.round(globalScope.oy),f.canvas.width=width,f.canvas.height=height,ai.canvas.width=width,ai.canvas.height=height,ai.context=f.context,f.clear(),n||(f.context.fillStyle=ht.canvas_fill,f.context.rect(0,0,width,height),f.context.fill());for(let E=0;E<renderOrder.length;E++)for(let V=0;V<W[renderOrder[E]].length;V++)W[renderOrder[E]][V].draw();let L;if(h)if(i==="svg"){const E=f.context.getSerializedSvg();vf(`${globalScope.name}.svg`,E)}else Qv(globalScope.name,i);else L=f.canvas.toDataURL(`image/${i}`);if(width=v,height=w,f.canvas.width=width,f.canvas.height=height,ai.canvas.width=width,ai.canvas.height=height,globalScope.scale=D,ai.context=T,f.context=R,globalScope.ox=c,globalScope.oy=g,er(),!h)return L}async function Jv(i,t,n){var r=document.createElement("CANVAS");r.width=t,r.height=n;var h=r.getContext("2d"),c,g=new Image;return new Promise(function(v,w){g.src=i,g.onload=()=>{h.drawImage(g,0,0,t,n,0,0,t,n),h.save(),c=r.toDataURL("image/jpeg"),v(c)}})}async function t0(){var i=1.6;if(Ns()){var t=document.getElementsByClassName("CodeMirror")[0],n=$(t).css("height"),r=$(t).css("width"),h=500,c=Math.round(h/i);$(t).css("height",c),$(t).css("width",h);var g=await Uv.toJpeg(t);return $(t).css("width",r),$(t).css("height",n),g=await Jv(g,h,c),g}f.lastSelected=void 0,width>height*i?height=width/i:width=height*1.6,globalScope.centerFocus();const v=Math.min(700/(f.maxWidth-f.minWidth),440/(f.maxHeight-f.minHeight));return g=Vh("jpeg","current",!1,v,!1),globalScope.centerFocus(!1),g}async function Kh(){_e()&&Kr(),wf(!0),$(".loadingIcon").fadeIn();const i=qr(),t=Rs();var n=await t0();if(!userSignedIn)localStorage.setItem("recover_login",i),confirm("You have to login to save the project, you will be redirected to the login page.")?window.location.href="/users/sign_in":$(".loadingIcon").fadeOut();else if(__logix_project_id=="0"){const r=$("<form/>",{action:"/simulator/create_data",method:"post"});r.append($("<input>",{type:"hidden",name:"authenticity_token",value:$('meta[name="csrf-token"]').attr("content")})),r.append($("<input>",{type:"text",name:"data",value:i})),r.append($("<input>",{type:"text",name:"image",value:n})),r.append($("<input>",{type:"text",name:"name",value:t})),$("body").append(r),r.submit()}else $.ajax({url:"/simulator/update_data",type:"POST",contentType:"application/json",beforeSend(r){r.setRequestHeader("X-CSRF-Token",$('meta[name="csrf-token"]').attr("content"))},data:JSON.stringify({data:i,id:__logix_project_id,image:n,name:t}),success(r){Ce(`We have saved your project: ${t} in our servers.`),$(".loadingIcon").fadeOut(),localStorage.removeItem("recover")},failure(r){Ce("There was an error, we couldn't save to our servers"),$(".loadingIcon").fadeOut()}});er()}const e0=["layout","verilogMetadata","allNodes","id","name","restrictedCircuitElementsUsed","nodes"],i0=["name","timePeriod","clockEnabled","projectId","focussedCircuit","orderedTabs","scopes"],n0=()=>'<div><label for="CircuitDataFile">Choose file</label><div id="message-box"><i class="fas fa-plus"></i><br/>Browse files or Drag & Drop files here<div id="message">No file chosen!!</div><input style="background:none;" type="file" id="CircuitDataFile"/></div></div>',bf=()=>{$("#ImportCircuitFilesDialog").empty(),$("#ImportCircuitFilesDialog").append(n0()),$("#ImportCircuitFilesDialog").dialog({resizable:!1,close(){},buttons:[{text:"Close",click(){$(this).dialog("close")}}]}),$("#ImportCircuitFilesDialog").focus();function i(n){try{const r=JSON.parse(n);if(JSON.stringify(Object.keys(r))!==JSON.stringify(i0))throw new Error("Invalid JSON data");return r.scopes.forEach(h=>{const c=Object.keys(h);e0.forEach(g=>{if(!c.includes(g))throw new Error("Invalid Scope data")})}),Nn(r),!0}catch{return $("#message").text("Invalid file format"),!1}}function t(n){const r=JSON.parse(qr(pl($("#projectName").text()).trim(),!1));i(n.target.result)?$("#ImportCircuitFilesDialog").dialog("close"):Nn(r)}$("#CircuitDataFile").on("change",n=>{var r=n.target.files[0],h=new FileReader;h.onload=t,h.readAsText(r)})};function Sd(i){const t=`Would you like to recover: ${i.name}`;confirm(t)&&Nn(i),localStorage.removeItem("recover"),localStorage.removeItem("autosave")}function s0(){const i=localStorage.getItem("recover"),t=localStorage.getItem("autosave");if(i){const n=JSON.parse(i);Sd(n)}else if(t){const n=JSON.parse(t);Sd(n)}else li("No recover project found")}function yf(){$("#openProjectDialog").empty();const i=JSON.parse(localStorage.getItem("projectList"));let t=!0;for(id in i)t=!1,$("#openProjectDialog").append(`<label class="option custom-radio"><input type="radio" name="projectId" value="${id}" />${i[id]}<span></span><i class="fa fa-trash deleteOfflineProject" onclick="deleteOfflineProject('${id}')"></i></label>`);t&&$("#openProjectDialog").append("<p>Looks like no circuit has been saved yet. Create or upload a new one and save it!</p>"),$("#openProjectDialog").dialog({resizable:!1,width:"auto",buttons:t?[{text:"Open CV File",click(){$(this).dialog("close"),bf()}}]:[{id:"Open_offline_btn",text:"Open Project",click(){$("input[name=projectId]:checked").val()&&(Nn(JSON.parse(localStorage.getItem($("input[name=projectId]:checked").val()))),window.projectId=$("input[name=projectId]:checked").val(),$(this).dialog("close"))}}]})}var Qh=!0;function wf(i){Qh=i}function Sf(){const i=qr();localStorage.setItem(projectId,i);const t=JSON.parse(localStorage.getItem("projectList"))||{};t[projectId]=Rs(),localStorage.setItem("projectList",JSON.stringify(t)),Ce(`We have saved your project: ${Rs()} in your browser's localStorage`)}function xf(){let i=!1;for(id in le)i|=Cf(le[id]);return i}window.onbeforeunload=function(){if(Qh||embed||!xf())return;alert("You have unsaved changes on this page. Do you want to leave this page and discard your changes or stay on this page?");const i=qr("Untitled");return localStorage.setItem("recover",i),"Are u sure u want to leave? Any unsaved changes may not be recoverable"};function kf(){confirm("Would you like to clear the project?")&&(globalScope=void 0,Wf(),$(".circuits").remove(),ds("main"),Ce("Your project is as good as new!"))}function r0(i){(i||Qh||!xf()||confirm("What you like to start a new project? Any unsaved changes will be lost."))&&(kf(),localStorage.removeItem("recover"),window.location="/simulator",Ro(void 0),projectId=hs(),Ce("New Project has been created!"))}function xd(i){return i.saveObject()}function Cf(i){for(let t=0;t<updateOrder.length;t++)if(i[updateOrder[t]].length)return!0;return!1}function No(i=globalScope){for(let n=0;n<i.SubCircuit.length;n++)i.SubCircuit[n].removeConnections();var t={};t.layout=i.layout,t.verilogMetadata=i.verilogMetadata,t.allNodes=i.allNodes.map(xd),t.testbenchData=i.testbenchData,t.id=i.id,t.name=i.name;for(let n=0;n<moduleList.length;n++)i[moduleList[n]].length&&(t[moduleList[n]]=i[moduleList[n]].map(xd));t.restrictedCircuitElementsUsed=i.restrictedCircuitElementsUsed,t.nodes=[];for(let n=0;n<i.nodes.length;n++)t.nodes.push(i.allNodes.indexOf(i.nodes[n]));for(let n=0;n<i.SubCircuit.length;n++)i.SubCircuit[n].makeConnections();return t}function Bs(i=globalScope){var t=JSON.stringify(No(i));return(i.backups.length===0||i.backups[i.backups.length-1]!==t)&&(i.backups.push(t),i.history=[],i.timeStamp=new Date().getTime(),wf(!1)),t}function Ua(i=globalScope){if(_e()||i.history.length===0)return;const t=globalScope.ox,n=globalScope.oy,r=globalScope.scale;globalScope.ox=0,globalScope.oy=0;const h=new Hs(i.name);loading=!0;const c=i.history.pop();i.backups.push(c),rs(h,JSON.parse(c)),h.backups=i.backups,h.history=i.history,h.id=i.id,h.name=i.name,h.testbenchData=i.testbenchData,le[i.id]=h,globalScope=h,globalScope.ox=t,globalScope.oy=n,globalScope.scale=r,loading=!1,Ei(!0),Ws()}function dl(i=globalScope){$("#saveImageDialog").dialog({resizable:!1,width:"auto",buttons:[{text:"Render Circuit Image",click(){Vh($("input[name=imgType]:checked").val(),$("input[name=view]:checked").val(),$("input[name=transparent]:checked").val(),$("input[name=resolution]:checked").val()),$(this).dialog("close")},class:"render-btn"}]}),$("input[name=imgType]").change(()=>{$("input[name=resolution]").prop("disabled",!1),$("input[name=transparent]").prop("disabled",!1);const t=$("input[name=imgType]:checked").val();t=="svg"?$(".btn-group-toggle, .download-dialog-section-3").addClass("disable"):$(".btn-group-toggle, .download-dialog-section-3, .cb-inner").removeClass("disable"),t==="svg"?($("input[name=resolution][value=1]").trigger("click"),$('input[name=view][value="full"]').trigger("click"),$("input[name=resolution]").prop("disabled",!0),$("input[name=view]").prop("disabled",!0)):t!=="png"?($("input[name=transparent]").attr("checked",!1),$("input[name=transparent]").prop("disabled",!0),$("input[name=view]").prop("disabled",!1),$(".cb-inner").addClass("disable")):($("input[name=view]").prop("disabled",!1),$(".cb-inner").removeClass("disable"))})}function Zh(i,t,n=[]){var r;Object.defineProperties(this,{minTerms:{value:t,enumerable:!1,writable:!1,configurable:!0},dontCares:{value:n,enumerable:!1,writable:!1,configurable:!0},numVars:{value:i,enumerable:!1,writable:!1,configurable:!0},result:{enumerable:!0,configurable:!0,get:function(){return r===void 0&&(r=Zh.prototype.solve.call(this)),r},set:function(){throw new Error("result cannot be assigned a value")}}})}Zh.prototype.solve=function(){function i(g){for(var v=g.toString(2);v.length!=this.numVars;)v="0"+v;return v}function t(g){var v=0;for(let w=0;w<g.length;++w)g[w]==="1"&&v++;return v}function n(g){for(var v=[],w=new Set,D;;){for(let T=0;T<=this.numVars;++T)v[T]=new Set;for(let T=0;T<g.length;++T)v[t(g[T])].add(g[T]);g=[],D=new Set;for(let T=0;T<v.length-1;++T)for(let R of v[T])for(let W of v[T+1]){let L=-1;for(let E=0;E<this.numVars;++E)if(R[E]!=W[E])if(L===-1)L=E;else{L=-1;break}L!==-1&&(g.push(R.slice(0,L)+"-"+R.slice(L+1)),D.add(R),D.add(W))}for(let T of v)for(let R of T)D.has(R)||w.add(R);if(!D.size)break}return w}function r(g,v){var w=[],D;function T(H,A){for(let q=0;q<A.length;++q)if(A[q]!=="-"&&H[q]!==A[q])return!1;return!0}function R(H){var A=H.length;for(let q of H)for(let F=0;F<q.length;++F)q[F]!=="-"&&(A++,q[F]==="0"&&A++);return A}function W(H,A){for(let q of H)if(!A.has(q))return!1;return!0}for(let H of v){D=[];for(let A=0;A<g.length;++A)T(H,g[A])&&D.push(A);w.push(D)}var L=[],E;for(let H of w[0])L.push(new Set([H]));for(let H=1;H<w.length;++H){E=[];for(let A of L){for(let q of w[H]){let F=new Set(A);F.add(q);let J=!0;for(let St=E.length-1;St>=0;--St)W(F,E[St])?E.splice(St,1):J=!1;J&&E.push(F)}L=E}}var V,at=1e9;for(let H of L){let A=[];for(let F of H)A.push(g[F]);let q=R(A);q<at&&(V=A,at=q)}return V}var h=this.minTerms.map(i.bind(this)),c=this.dontCares.map(i.bind(this));return r.call(this,Array.from(n.call(this,h.concat(c))),h)};const o0=(i,t,n,r=globalScope)=>{var h=Rr(i).split(","),c=Rr(t).split(","),g=n;h=h.map(T=>T.trim()),h=h.filter(T=>T),c=c.map(T=>T.trim()),c=c.filter(T=>T),g=g.replace(/ /g,""),g=g.toUpperCase();for(var v=[],w=0;w<g.length;w++)g[w]>="A"&&g[w]<="Z"&&g.indexOf(g[w])==w&&v.push(g[w]);if(v.sort(),h.length>0&&c.length>0&&v.length==0)kd(h,c,null,r);else if(v.length>0&&h.length==0&&c.length==0){var D=h0(v,g);D!=null&&kd(v,g,D,r)}else(h.length==0||c.length==0)&&v==0?alert("Enter Input / Output Variable(s) OR Boolean Function!"):alert("Use Either Combinational Analysis Or Boolean Function To Generate Circuit!")},a0=(i,t,n,r,h=globalScope)=>{var c=l0(i),g=[];let v=t.length;for(const w in c){let D=c[w][1].length,T=c[w][0].length;if(D==0)g.push(["-".repeat(v)+"0"]);else if(T==0)g.push(["-".repeat(v)+"1"]);else{const R=new Zh(t.length,c[w][1].map(Number),c[w].x.map(Number));g.push(R.result)}}n==null?Cd(g,t,r,h):Cd(g,t,[`${r}`],h)};function Df(i=globalScope){Bs(),$("#combinationalAnalysis").empty(),$("#combinationalAnalysis").append("<p>Enter Input names separated by commas: <input id='inputNameList' type='text'  placeHolder='eg. In A, In B'></p>"),$("#combinationalAnalysis").append("<p>Enter Output names separated by commas: <input id='outputNameList' type='text'  placeHolder='eg. Out X, Out Y'></p>"),$("#combinationalAnalysis").append("<p style='text-align:center;'>OR</p>"),$("#combinationalAnalysis").append("<p>Enter Boolean Function: <input class='truth_table_input' autofocus id='booleanExpression' placeholder='Example: (AB)' type='text'></p>"),$("#combinationalAnalysis").append("<label class='cb-checkbox'>I need a decimal column.<input id='decimalColumnBox' type='checkbox'></label>"),$("#combinationalAnalysis").dialog({resizable:!1,width:"auto",buttons:[{style:"padding: 5px",text:"Next",click(){o0($("#inputNameList").val(),$("#outputNameList").val(),$("#booleanExpression").val())}}]}),$("#combinationalAnalysis").checkBo()}function kd(h,c,n,r=globalScope){var h=h||prompt("Enter inputs separated by commas").split(","),c=c||prompt("Enter outputs separated by commas").split(","),g=[];if(n==null)for(var v=0;v<c.length;v++)g[v]=7*v+13;else g=[13];var w='<table  class="content-table">';w+='<tbody style="display:block; max-height:70vh; overflow-y:scroll" >',w+="<tr>",$("#decimalColumnBox").is(":checked")&&(w+="<th>dec</th>");for(var v=0;v<h.length;v++)w+=`<th>${h[v]}</th>`;if(n==null)for(var v=0;v<c.length;v++)w+=`<th>${c[v]}</th>`;else w+=`<th>${c}</th>`;w+="</tr>";for(var D=[],v=0;v<h.length;v++)D[v]=new Array(1<<h.length);for(var v=0;v<h.length;v++)for(var T=0;T<1<<h.length;T++)D[v][T]=+((T&1<<h.length-v-1)!=0);for(var T=0;T<1<<h.length;T++){w+="<tr>",$("#decimalColumnBox").is(":checked")&&(w+=`<td>${T}</td>`);for(var v=0;v<h.length;v++)w+=`<td>${D[v][T]}</td>`;for(var v=0;v<g.length;v++)n==null&&(w+=`<td class ="output ${g[v]}" id="${T}">x</td>`);n!=null&&(w+=`<td class="${g[0]}" id="${T}">${n[T]}</td>`),w+="</tr>"}w+="</tbody>",w+="</table>",$("#combinationalAnalysis").empty(),$("#combinationalAnalysis").append(w),$("#combinationalAnalysis").dialog({resizable:!1,width:"auto",buttons:[{style:"padding: 6px",text:"Generate Circuit",click(){$(this).dialog("close"),a0(g,h,n,c)}},{style:"padding: 6px",text:"Print Truth Table",click(){var R=document.getElementById("combinationalAnalysis").innerHTML,W="<style> table {font: 20px Calibri;} table, th, td {border: solid 1px #DDD;border-collapse: collapse;} padding: 2px 3px;text-align: center;} </style>",L=window.open("","","height=700,width=700"),E=`
                      <html><head>                      <title>Boolean Logic Table</title>                      ${W}                      </head>                      <body>                      <center>${R}</center>                      </body></html>
                    `;L.document.write(E),L.document.close(),L.print()}}]}),$(".output").on("click",function(){var R=$(this).html();R==0?R=$(this).html(1):R==1?R=$(this).html("x"):R=="x"&&(R=$(this).html(0))})}function l0(i){for(var t={},n=0;n<i.length;n++){t[i[n]]={x:[],1:[],0:[]};var r=$(`.${i[n]}`);for(let h=0;h<r.length;h++)t[i[n]][r[h].innerHTML].push(r[h].id)}return t}function Cd(i,t,n,r=globalScope){Br(r);for(var h=t.length,c=0,g=0;g<i.length;g++)c=Math.max(c,i[g].length);var v=200,w=200,D=300;f.maxWidth&&f.maxHeight&&(f.maxHeight+D>f.maxWidth?v+=f.maxWidth:(w+=f.maxHeight,D+=f.maxHeight));for(var T=v+h*40+40+40,R=T+Math.floor(c/2)*10+80,W=R+60,L=[],E=[],g=0;g<=h;g++){g<h?(L.push(new us(v+g*40,w,r,"DOWN",1)),L[g].setLabel(t[g])):(L.push(new Ze(v+g*40,w,r,"DOWN",1,"1")),L[g].setLabel("_C_")),L[g].newLabelDirection("UP");var V=new U(v+g*40,w+20,2,r.root);L[g].output1.connect(V);var at=new U(v+g*40+20,w+20,2,r.root);V.connect(at);var H=new Oi(v+g*40+20,w+40,r,"DOWN",1);H.inp1.connect(at),E.push(V),E.push(H.output1)}function A(Zt){for(var ee=0,jt=0;jt<Zt.length;jt++)Zt[jt]!=="-"&&ee++;return ee}for(var g=0;g<i.length;g++){for(var q=[],F=0;F<i[g].length;F++){var J=A(i[g][F]);if(J>1){var St=new en(T,D,r,"RIGHT",J,1);q.push(St.output1);for(var ot=0,st=0;st<i[g][F].length;st++){if(i[g][F][st]=="-"){ot++;continue}var wt=2*st+(i[g][F][st]==0),Tt=new U(E[wt].absX(),St.inp[st-ot].absY(),2,r.root);E[wt].connect(Tt),E[wt]=Tt,Tt.connect(St.inp[st-ot])}}else for(var st=0;st<i[g][F].length;st++)if(i[g][F][st]!="-"){var wt=2*st+(i[g][F][st]==0),At=new U(T,D,2,r.root),Tt=new U(E[wt].absX(),At.absY(),2,r.root);E[wt].connect(Tt),E[wt]=Tt,Tt.connect(At),q.push(At)}D+=J*10+30}var Pt=q.length,K=Math.floor(Pt/2),lt=(q[K].absY()+q[Math.floor((Pt-1)/2)].absY())/2;if(lt%10==5&&(lt+=5),Pt>1){var z=new yn(R,lt,r,"RIGHT",Pt,1);Pt%2==1&&q[K].connect(z.inp[K]);for(var F=0;F<K;F++){var Tt=new U(T+30+(K-F)*10,q[F].absY(),2,r.root);Tt.connect(q[F]);var at=new U(T+30+(K-F)*10,z.inp[F].absY(),2,r.root);at.connect(Tt),z.inp[F].connect(at);var Tt=new U(T+30+(K-F)*10,q[Pt-F-1].absY(),2,r.root);Tt.connect(q[Pt-F-1]);var at=new U(T+30+(K-F)*10,z.inp[Pt-F-1].absY(),2,r.root);at.connect(Tt),z.inp[Pt-F-1].connect(at)}var oe=new os(W,z.y,r,"LEFT",1);oe.inp1.connect(z.output1)}else{var oe=new os(W,q[0].absY(),r,"LEFT",1);oe.inp1.connect(q[0])}oe.setLabel(n[g]),oe.newLabelDirection("RIGHT")}for(var g=0;g<E.length;g++)if(E[g].absY()!=D){var Tt=new U(E[g].absX(),D,2,r.root);E[g].connect(Tt)}globalScope.centerFocus()}function h0(i,t){let n,r,h=[];if(t.match(/[^ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz01+'() ]/g)!=null){alert("One of the characters is not allowed.");return}if(i.length>8){alert("You can only have 8 variables at a time.");return}var c='<table  class="content-table">';for(c+='<tbody style="display:block; max-height:70vh; overflow-y:scroll" >',c+="<tr>",$("#decimalColumnBox").is(":checked")&&(c+="<th>dec</th>"),n=0;n<i.length;n++)c+=`<th>${i[n]}</th>`;c+=`<th>${t}</th>`,c+="</tr>";var g=[];for(n=0;n<i.length;n++)g[n]=new Array(i.length);for(n=0;n<i.length;n++)for(r=0;r<1<<i.length;r++)g[n][r]=+((r&1<<i.length-n-1)!=0);for(n=0;n<2**i.length;n++){const w=[];for(r=0;r<i.length;r++)w[r]=Math.floor(n/Math.pow(2,i.length-r-1))%2;let D=t;for(r=0;r<i.length;r++)D=D.replace(new RegExp(i[r],"g"),w[r]);h[n]=v(D)}for(r=0;r<1<<i.length;r++){for(c+="<tr>",$("#decimalColumnBox").is(":checked")&&(c+=`<td>${r}</td>`),n=0;n<i.length;n++)c+=`<td>${g[n][r]}</td>`;c+=`<td class="13" id="${r}">${h[r]}</td>`,c+="</tr>"}c+="</tbody>",c+="</table>";function v(w){for(;w.indexOf("(")!=-1;){const D=w.lastIndexOf("("),T=w.indexOf(")",D);D!=-1&&(w=w.substring(0,D)+v(w.substring(D+1,T))+w.substring(T+1))}w=w.replace(/''/g,""),w=w.replace(/0'/g,"1"),w=w.replace(/1'/g,"0");for(let D=0;D<w.length-1;D++)(w[D]=="0"||w[D]=="1")&&(w[D+1]=="0"||w[D+1]=="1")&&(w=w.substring(0,D+1)+"*"+w.substring(D+1,w.length));try{const T=(0,eval)(w);return T==0?0:T>0?1:""}catch{return""}}return h}var Tf={exports:{}};(function(i,t){(function(n,r){i.exports=r()})(window,function(){return function(n){var r={};function h(c){if(r[c])return r[c].exports;var g=r[c]={i:c,l:!1,exports:{}};return n[c].call(g.exports,g,g.exports,h),g.l=!0,g.exports}return h.m=n,h.c=r,h.d=function(c,g,v){h.o(c,g)||Object.defineProperty(c,g,{enumerable:!0,get:v})},h.r=function(c){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})},h.t=function(c,g){if(1&g&&(c=h(c)),8&g||4&g&&typeof c=="object"&&c&&c.__esModule)return c;var v=Object.create(null);if(h.r(v),Object.defineProperty(v,"default",{enumerable:!0,value:c}),2&g&&typeof c!="string")for(var w in c)h.d(v,w,(function(D){return c[D]}).bind(null,w));return v},h.n=function(c){var g=c&&c.__esModule?function(){return c.default}:function(){return c};return h.d(g,"a",g),g},h.o=function(c,g){return Object.prototype.hasOwnProperty.call(c,g)},h.p="/dist/",h(h.s=57)}([function(n,r,h){var c=h(2),g=h(11),v=h(4),w=h(13),D=h(22),T=function(R,W,L){var E,V,at,H,A=R&T.F,q=R&T.G,F=R&T.S,J=R&T.P,St=R&T.B,ot=q?c:F?c[W]||(c[W]={}):(c[W]||{}).prototype,st=q?g:g[W]||(g[W]={}),wt=st.prototype||(st.prototype={});for(E in q&&(L=W),L)at=((V=!A&&ot&&ot[E]!==void 0)?ot:L)[E],H=St&&V?D(at,c):J&&typeof at=="function"?D(Function.call,at):at,ot&&w(ot,E,at,R&T.U),st[E]!=at&&v(st,E,H),J&&wt[E]!=at&&(wt[E]=at)};c.core=g,T.F=1,T.G=2,T.S=4,T.P=8,T.B=16,T.W=32,T.U=64,T.R=128,n.exports=T},function(n,r,h){var c=h(17)("wks"),g=h(14),v=h(2).Symbol,w=typeof v=="function";(n.exports=function(D){return c[D]||(c[D]=w&&v[D]||(w?v:g)("Symbol."+D))}).store=c},function(n,r){var h=n.exports=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=h)},function(n,r){n.exports=function(h){return typeof h=="object"?h!==null:typeof h=="function"}},function(n,r,h){var c=h(5),g=h(16);n.exports=h(6)?function(v,w,D){return c.f(v,w,g(1,D))}:function(v,w,D){return v[w]=D,v}},function(n,r,h){var c=h(12),g=h(35),v=h(21),w=Object.defineProperty;r.f=h(6)?Object.defineProperty:function(D,T,R){if(c(D),T=v(T,!0),c(R),g)try{return w(D,T,R)}catch{}if("get"in R||"set"in R)throw TypeError("Accessors not supported!");return"value"in R&&(D[T]=R.value),D}},function(n,r,h){n.exports=!h(7)(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},function(n,r){n.exports=function(h){try{return!!h()}catch{return!0}}},function(n,r){var h={}.hasOwnProperty;n.exports=function(c,g){return h.call(c,g)}},function(n,r,h){var c=h(39),g=h(24);n.exports=function(v){return c(g(v))}},function(n,r,h){var c=h(0);c(c.S+c.F*!h(6),"Object",{defineProperty:h(5).f})},function(n,r){var h=n.exports={version:"2.6.9"};typeof __e=="number"&&(__e=h)},function(n,r,h){var c=h(3);n.exports=function(g){if(!c(g))throw TypeError(g+" is not an object!");return g}},function(n,r,h){var c=h(2),g=h(4),v=h(8),w=h(14)("src"),D=h(59),T=(""+D).split("toString");h(11).inspectSource=function(R){return D.call(R)},(n.exports=function(R,W,L,E){var V=typeof L=="function";V&&(v(L,"name")||g(L,"name",W)),R[W]!==L&&(V&&(v(L,w)||g(L,w,R[W]?""+R[W]:T.join(String(W)))),R===c?R[W]=L:E?R[W]?R[W]=L:g(R,W,L):(delete R[W],g(R,W,L)))})(Function.prototype,"toString",function(){return typeof this=="function"&&this[w]||D.call(this)})},function(n,r){var h=0,c=Math.random();n.exports=function(g){return"Symbol(".concat(g===void 0?"":g,")_",(++h+c).toString(36))}},function(n,r,h){var c=h(45),g=h(28);n.exports=Object.keys||function(v){return c(v,g)}},function(n,r){n.exports=function(h,c){return{enumerable:!(1&h),configurable:!(2&h),writable:!(4&h),value:c}}},function(n,r,h){var c=h(11),g=h(2),v=g["__core-js_shared__"]||(g["__core-js_shared__"]={});(n.exports=function(w,D){return v[w]||(v[w]=D!==void 0?D:{})})("versions",[]).push({version:c.version,mode:h(18)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(n,r){n.exports=!1},function(n,r,h){var c=h(24);n.exports=function(g){return Object(c(g))}},function(n,r,h){var c=h(2),g=h(8),v=h(6),w=h(0),D=h(13),T=h(62).KEY,R=h(7),W=h(17),L=h(26),E=h(14),V=h(1),at=h(43),H=h(44),A=h(63),q=h(42),F=h(12),J=h(3),St=h(19),ot=h(9),st=h(21),wt=h(16),Tt=h(30),At=h(67),Pt=h(49),K=h(47),lt=h(5),z=h(15),oe=Pt.f,Zt=lt.f,ee=At.f,jt=c.Symbol,Nt=c.JSON,Vt=Nt&&Nt.stringify,de=V("_hidden"),ae=V("toPrimitive"),me={}.propertyIsEnumerable,rt=W("symbol-registry"),Q=W("symbols"),nt=W("op-symbols"),N=Object.prototype,Y=typeof jt=="function"&&!!K.f,vt=c.QObject,pt=!vt||!vt.prototype||!vt.prototype.findChild,Lt=v&&R(function(){return Tt(Zt({},"a",{get:function(){return Zt(this,"a",{value:7}).a}})).a!=7})?function(_,O,B){var X=oe(N,O);X&&delete N[O],Zt(_,O,B),X&&_!==N&&Zt(N,O,X)}:Zt,Yt=function(_){var O=Q[_]=Tt(jt.prototype);return O._k=_,O},Xt=Y&&typeof jt.iterator=="symbol"?function(_){return typeof _=="symbol"}:function(_){return _ instanceof jt},he=function(_,O,B){return _===N&&he(nt,O,B),F(_),O=st(O,!0),F(B),g(Q,O)?(B.enumerable?(g(_,de)&&_[de][O]&&(_[de][O]=!1),B=Tt(B,{enumerable:wt(0,!1)})):(g(_,de)||Zt(_,de,wt(1,{})),_[de][O]=!0),Lt(_,O,B)):Zt(_,O,B)},gt=function(_,O){F(_);for(var B,X=A(O=ot(O)),it=0,dt=X.length;dt>it;)he(_,B=X[it++],O[B]);return _},Dt=function(_){var O=me.call(this,_=st(_,!0));return!(this===N&&g(Q,_)&&!g(nt,_))&&(!(O||!g(this,_)||!g(Q,_)||g(this,de)&&this[de][_])||O)},xt=function(_,O){if(_=ot(_),O=st(O,!0),_!==N||!g(Q,O)||g(nt,O)){var B=oe(_,O);return!B||!g(Q,O)||g(_,de)&&_[de][O]||(B.enumerable=!0),B}},qt=function(_){for(var O,B=ee(ot(_)),X=[],it=0;B.length>it;)g(Q,O=B[it++])||O==de||O==T||X.push(O);return X},Ft=function(_){for(var O,B=_===N,X=ee(B?nt:ot(_)),it=[],dt=0;X.length>dt;)!g(Q,O=X[dt++])||B&&!g(N,O)||it.push(Q[O]);return it};Y||(D((jt=function(){if(this instanceof jt)throw TypeError("Symbol is not a constructor!");var _=E(arguments.length>0?arguments[0]:void 0),O=function(B){this===N&&O.call(nt,B),g(this,de)&&g(this[de],_)&&(this[de][_]=!1),Lt(this,_,wt(1,B))};return v&&pt&&Lt(N,_,{configurable:!0,set:O}),Yt(_)}).prototype,"toString",function(){return this._k}),Pt.f=xt,lt.f=he,h(48).f=At.f=qt,h(29).f=Dt,K.f=Ft,v&&!h(18)&&D(N,"propertyIsEnumerable",Dt,!0),at.f=function(_){return Yt(V(_))}),w(w.G+w.W+w.F*!Y,{Symbol:jt});for(var o="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),d=0;o.length>d;)V(o[d++]);for(var p=z(V.store),b=0;p.length>b;)H(p[b++]);w(w.S+w.F*!Y,"Symbol",{for:function(_){return g(rt,_+="")?rt[_]:rt[_]=jt(_)},keyFor:function(_){if(!Xt(_))throw TypeError(_+" is not a symbol!");for(var O in rt)if(rt[O]===_)return O},useSetter:function(){pt=!0},useSimple:function(){pt=!1}}),w(w.S+w.F*!Y,"Object",{create:function(_,O){return O===void 0?Tt(_):gt(Tt(_),O)},defineProperty:he,defineProperties:gt,getOwnPropertyDescriptor:xt,getOwnPropertyNames:qt,getOwnPropertySymbols:Ft});var S=R(function(){K.f(1)});w(w.S+w.F*S,"Object",{getOwnPropertySymbols:function(_){return K.f(St(_))}}),Nt&&w(w.S+w.F*(!Y||R(function(){var _=jt();return Vt([_])!="[null]"||Vt({a:_})!="{}"||Vt(Object(_))!="{}"})),"JSON",{stringify:function(_){for(var O,B,X=[_],it=1;arguments.length>it;)X.push(arguments[it++]);if(B=O=X[1],(J(O)||_!==void 0)&&!Xt(_))return q(O)||(O=function(dt,ct){if(typeof B=="function"&&(ct=B.call(this,dt,ct)),!Xt(ct))return ct}),X[1]=O,Vt.apply(Nt,X)}}),jt.prototype[ae]||h(4)(jt.prototype,ae,jt.prototype.valueOf),L(jt,"Symbol"),L(Math,"Math",!0),L(c.JSON,"JSON",!0)},function(n,r,h){var c=h(3);n.exports=function(g,v){if(!c(g))return g;var w,D;if(v&&typeof(w=g.toString)=="function"&&!c(D=w.call(g))||typeof(w=g.valueOf)=="function"&&!c(D=w.call(g))||!v&&typeof(w=g.toString)=="function"&&!c(D=w.call(g)))return D;throw TypeError("Can't convert object to primitive value")}},function(n,r,h){var c=h(37);n.exports=function(g,v,w){if(c(g),v===void 0)return g;switch(w){case 1:return function(D){return g.call(v,D)};case 2:return function(D,T){return g.call(v,D,T)};case 3:return function(D,T,R){return g.call(v,D,T,R)}}return function(){return g.apply(v,arguments)}}},function(n,r){var h={}.toString;n.exports=function(c){return h.call(c).slice(8,-1)}},function(n,r){n.exports=function(h){if(h==null)throw TypeError("Can't call method on  "+h);return h}},function(n,r,h){var c=h(7);n.exports=function(g,v){return!!g&&c(function(){v?g.call(null,function(){},1):g.call(null)})}},function(n,r,h){var c=h(5).f,g=h(8),v=h(1)("toStringTag");n.exports=function(w,D,T){w&&!g(w=T?w:w.prototype,v)&&c(w,v,{configurable:!0,value:D})}},function(n,r,h){var c=h(17)("keys"),g=h(14);n.exports=function(v){return c[v]||(c[v]=g(v))}},function(n,r){n.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(n,r){r.f={}.propertyIsEnumerable},function(n,r,h){var c=h(12),g=h(65),v=h(28),w=h(27)("IE_PROTO"),D=function(){},T=function(){var R,W=h(36)("iframe"),L=v.length;for(W.style.display="none",h(66).appendChild(W),W.src="javascript:",(R=W.contentWindow.document).open(),R.write("<script>document.F=Object<\/script>"),R.close(),T=R.F;L--;)delete T.prototype[v[L]];return T()};n.exports=Object.create||function(R,W){var L;return R!==null?(D.prototype=c(R),L=new D,D.prototype=null,L[w]=R):L=T(),W===void 0?L:g(L,W)}},function(n,r,h){var c=h(68),g=h(69),v=h(32),w=h(9);n.exports=h(70)(Array,"Array",function(D,T){this._t=w(D),this._i=0,this._k=T},function(){var D=this._t,T=this._k,R=this._i++;return!D||R>=D.length?(this._t=void 0,g(1)):g(0,T=="keys"?R:T=="values"?D[R]:[R,D[R]])},"values"),v.Arguments=v.Array,c("keys"),c("values"),c("entries")},function(n,r){n.exports={}},function(n,r,h){h(44)("asyncIterator")},function(n,r,h){var c=h(0),g=h(38)(0),v=h(25)([].forEach,!0);c(c.P+c.F*!v,"Array",{forEach:function(w){return g(this,w,arguments[1])}})},function(n,r,h){n.exports=!h(6)&&!h(7)(function(){return Object.defineProperty(h(36)("div"),"a",{get:function(){return 7}}).a!=7})},function(n,r,h){var c=h(3),g=h(2).document,v=c(g)&&c(g.createElement);n.exports=function(w){return v?g.createElement(w):{}}},function(n,r){n.exports=function(h){if(typeof h!="function")throw TypeError(h+" is not a function!");return h}},function(n,r,h){var c=h(22),g=h(39),v=h(19),w=h(40),D=h(60);n.exports=function(T,R){var W=T==1,L=T==2,E=T==3,V=T==4,at=T==6,H=T==5||at,A=R||D;return function(q,F,J){for(var St,ot,st=v(q),wt=g(st),Tt=c(F,J,3),At=w(wt.length),Pt=0,K=W?A(q,At):L?A(q,0):void 0;At>Pt;Pt++)if((H||Pt in wt)&&(ot=Tt(St=wt[Pt],Pt,st),T)){if(W)K[Pt]=ot;else if(ot)switch(T){case 3:return!0;case 5:return St;case 6:return Pt;case 2:K.push(St)}else if(V)return!1}return at?-1:E||V?V:K}}},function(n,r,h){var c=h(23);n.exports=Object("z").propertyIsEnumerable(0)?Object:function(g){return c(g)=="String"?g.split(""):Object(g)}},function(n,r,h){var c=h(41),g=Math.min;n.exports=function(v){return v>0?g(c(v),9007199254740991):0}},function(n,r){var h=Math.ceil,c=Math.floor;n.exports=function(g){return isNaN(g=+g)?0:(g>0?c:h)(g)}},function(n,r,h){var c=h(23);n.exports=Array.isArray||function(g){return c(g)=="Array"}},function(n,r,h){r.f=h(1)},function(n,r,h){var c=h(2),g=h(11),v=h(18),w=h(43),D=h(5).f;n.exports=function(T){var R=g.Symbol||(g.Symbol=v?{}:c.Symbol||{});T.charAt(0)=="_"||T in R||D(R,T,{value:w.f(T)})}},function(n,r,h){var c=h(8),g=h(9),v=h(46)(!1),w=h(27)("IE_PROTO");n.exports=function(D,T){var R,W=g(D),L=0,E=[];for(R in W)R!=w&&c(W,R)&&E.push(R);for(;T.length>L;)c(W,R=T[L++])&&(~v(E,R)||E.push(R));return E}},function(n,r,h){var c=h(9),g=h(40),v=h(64);n.exports=function(w){return function(D,T,R){var W,L=c(D),E=g(L.length),V=v(R,E);if(w&&T!=T){for(;E>V;)if((W=L[V++])!=W)return!0}else for(;E>V;V++)if((w||V in L)&&L[V]===T)return w||V||0;return!w&&-1}}},function(n,r){r.f=Object.getOwnPropertySymbols},function(n,r,h){var c=h(45),g=h(28).concat("length","prototype");r.f=Object.getOwnPropertyNames||function(v){return c(v,g)}},function(n,r,h){var c=h(29),g=h(16),v=h(9),w=h(21),D=h(8),T=h(35),R=Object.getOwnPropertyDescriptor;r.f=h(6)?R:function(W,L){if(W=v(W),L=w(L,!0),T)try{return R(W,L)}catch{}if(D(W,L))return g(!c.f.call(W,L),W[L])}},function(n,r,h){for(var c=h(31),g=h(15),v=h(13),w=h(2),D=h(4),T=h(32),R=h(1),W=R("iterator"),L=R("toStringTag"),E=T.Array,V={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},at=g(V),H=0;H<at.length;H++){var A,q=at[H],F=V[q],J=w[q],St=J&&J.prototype;if(St&&(St[W]||D(St,W,E),St[L]||D(St,L,q),T[q]=E,F))for(A in c)St[A]||v(St,A,c[A],!0)}},function(n,r,h){var c=h(73),g={};g[h(1)("toStringTag")]="z",g+""!="[object z]"&&h(13)(Object.prototype,"toString",function(){return"[object "+c(this)+"]"},!0)},function(n,r,h){var c=h(19),g=h(15);h(74)("keys",function(){return function(v){return g(c(v))}})},function(n,r,h){var c=h(0),g=h(38)(2);c(c.P+c.F*!h(25)([].filter,!0),"Array",{filter:function(v){return g(this,v,arguments[1])}})},function(n,r,h){var c=h(0);c(c.P,"Function",{bind:h(75)})},function(n,r,h){var c=h(0);c(c.S,"Object",{create:h(30)})},function(n,r,h){var c=h(0);c(c.S,"Object",{setPrototypeOf:h(81).set})},function(n,r,h){h(58),n.exports=h(82)},function(n,r){},function(n,r,h){n.exports=h(17)("native-function-to-string",Function.toString)},function(n,r,h){var c=h(61);n.exports=function(g,v){return new(c(g))(v)}},function(n,r,h){var c=h(3),g=h(42),v=h(1)("species");n.exports=function(w){var D;return g(w)&&(typeof(D=w.constructor)!="function"||D!==Array&&!g(D.prototype)||(D=void 0),c(D)&&(D=D[v])===null&&(D=void 0)),D===void 0?Array:D}},function(n,r,h){var c=h(14)("meta"),g=h(3),v=h(8),w=h(5).f,D=0,T=Object.isExtensible||function(){return!0},R=!h(7)(function(){return T(Object.preventExtensions({}))}),W=function(E){w(E,c,{value:{i:"O"+ ++D,w:{}}})},L=n.exports={KEY:c,NEED:!1,fastKey:function(E,V){if(!g(E))return typeof E=="symbol"?E:(typeof E=="string"?"S":"P")+E;if(!v(E,c)){if(!T(E))return"F";if(!V)return"E";W(E)}return E[c].i},getWeak:function(E,V){if(!v(E,c)){if(!T(E))return!0;if(!V)return!1;W(E)}return E[c].w},onFreeze:function(E){return R&&L.NEED&&T(E)&&!v(E,c)&&W(E),E}}},function(n,r,h){var c=h(15),g=h(47),v=h(29);n.exports=function(w){var D=c(w),T=g.f;if(T)for(var R,W=T(w),L=v.f,E=0;W.length>E;)L.call(w,R=W[E++])&&D.push(R);return D}},function(n,r,h){var c=h(41),g=Math.max,v=Math.min;n.exports=function(w,D){return(w=c(w))<0?g(w+D,0):v(w,D)}},function(n,r,h){var c=h(5),g=h(12),v=h(15);n.exports=h(6)?Object.defineProperties:function(w,D){g(w);for(var T,R=v(D),W=R.length,L=0;W>L;)c.f(w,T=R[L++],D[T]);return w}},function(n,r,h){var c=h(2).document;n.exports=c&&c.documentElement},function(n,r,h){var c=h(9),g=h(48).f,v={}.toString,w=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];n.exports.f=function(D){return w&&v.call(D)=="[object Window]"?function(T){try{return g(T)}catch{return w.slice()}}(D):g(c(D))}},function(n,r,h){var c=h(1)("unscopables"),g=Array.prototype;g[c]==null&&h(4)(g,c,{}),n.exports=function(v){g[c][v]=!0}},function(n,r){n.exports=function(h,c){return{value:c,done:!!h}}},function(n,r,h){var c=h(18),g=h(0),v=h(13),w=h(4),D=h(32),T=h(71),R=h(26),W=h(72),L=h(1)("iterator"),E=!([].keys&&"next"in[].keys()),V=function(){return this};n.exports=function(at,H,A,q,F,J,St){T(A,H,q);var ot,st,wt,Tt=function(jt){if(!E&&jt in lt)return lt[jt];switch(jt){case"keys":case"values":return function(){return new A(this,jt)}}return function(){return new A(this,jt)}},At=H+" Iterator",Pt=F=="values",K=!1,lt=at.prototype,z=lt[L]||lt["@@iterator"]||F&&lt[F],oe=z||Tt(F),Zt=F?Pt?Tt("entries"):oe:void 0,ee=H=="Array"&&lt.entries||z;if(ee&&(wt=W(ee.call(new at)))!==Object.prototype&&wt.next&&(R(wt,At,!0),c||typeof wt[L]=="function"||w(wt,L,V)),Pt&&z&&z.name!=="values"&&(K=!0,oe=function(){return z.call(this)}),c&&!St||!E&&!K&&lt[L]||w(lt,L,oe),D[H]=oe,D[At]=V,F)if(ot={values:Pt?oe:Tt("values"),keys:J?oe:Tt("keys"),entries:Zt},St)for(st in ot)st in lt||v(lt,st,ot[st]);else g(g.P+g.F*(E||K),H,ot);return ot}},function(n,r,h){var c=h(30),g=h(16),v=h(26),w={};h(4)(w,h(1)("iterator"),function(){return this}),n.exports=function(D,T,R){D.prototype=c(w,{next:g(1,R)}),v(D,T+" Iterator")}},function(n,r,h){var c=h(8),g=h(19),v=h(27)("IE_PROTO"),w=Object.prototype;n.exports=Object.getPrototypeOf||function(D){return D=g(D),c(D,v)?D[v]:typeof D.constructor=="function"&&D instanceof D.constructor?D.constructor.prototype:D instanceof Object?w:null}},function(n,r,h){var c=h(23),g=h(1)("toStringTag"),v=c(function(){return arguments}())=="Arguments";n.exports=function(w){var D,T,R;return w===void 0?"Undefined":w===null?"Null":typeof(T=function(W,L){try{return W[L]}catch{}}(D=Object(w),g))=="string"?T:v?c(D):(R=c(D))=="Object"&&typeof D.callee=="function"?"Arguments":R}},function(n,r,h){var c=h(0),g=h(11),v=h(7);n.exports=function(w,D){var T=(g.Object||{})[w]||Object[w],R={};R[w]=D(T),c(c.S+c.F*v(function(){T(1)}),"Object",R)}},function(n,r,h){var c=h(37),g=h(3),v=h(76),w=[].slice,D={};n.exports=Function.bind||function(T){var R=c(this),W=w.call(arguments,1),L=function(){var E=W.concat(w.call(arguments));return this instanceof L?function(V,at,H){if(!(at in D)){for(var A=[],q=0;q<at;q++)A[q]="a["+q+"]";D[at]=Function("F,a","return new F("+A.join(",")+")")}return D[at](V,H)}(R,E.length,E):v(R,E,T)};return g(R.prototype)&&(L.prototype=R.prototype),L}},function(n,r){n.exports=function(h,c,g){var v=g===void 0;switch(c.length){case 0:return v?h():h.call(g);case 1:return v?h(c[0]):h.call(g,c[0]);case 2:return v?h(c[0],c[1]):h.call(g,c[0],c[1]);case 3:return v?h(c[0],c[1],c[2]):h.call(g,c[0],c[1],c[2]);case 4:return v?h(c[0],c[1],c[2],c[3]):h.call(g,c[0],c[1],c[2],c[3])}return h.apply(g,c)}},function(n,r,h){h(78)("trim",function(c){return function(){return c(this,3)}})},function(n,r,h){var c=h(0),g=h(24),v=h(7),w=h(79),D="["+w+"]",T=RegExp("^"+D+D+"*"),R=RegExp(D+D+"*$"),W=function(E,V,at){var H={},A=v(function(){return!!w[E]()||"​"[E]()!="​"}),q=H[E]=A?V(L):w[E];at&&(H[at]=q),c(c.P+c.F*A,"String",H)},L=W.trim=function(E,V){return E=String(g(E)),1&V&&(E=E.replace(T,"")),2&V&&(E=E.replace(R,"")),E};n.exports=W},function(n,r){n.exports=`	
\v\f\r   ᠎             　\u2028\u2029\uFEFF`},function(n,r,h){var c=h(0),g=h(46)(!1),v=[].indexOf,w=!!v&&1/[1].indexOf(1,-0)<0;c(c.P+c.F*(w||!h(25)(v)),"Array",{indexOf:function(D){return w?v.apply(this,arguments)||0:g(this,D,arguments[1])}})},function(n,r,h){var c=h(3),g=h(12),v=function(w,D){if(g(w),!c(D)&&D!==null)throw TypeError(D+": can't set as prototype!")};n.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(w,D,T){try{(T=h(22)(Function.call,h(49).f(Object.prototype,"__proto__").set,2))(w,[]),D=!(w instanceof Array)}catch{D=!0}return function(R,W){return v(R,W),D?R.__proto__=W:T(R,W),R}}({},!1):void 0),check:v}},function(n,r,h){h.r(r),h(34),h(20),h(50),h(31),h(51),h(52),h(10),h(53),h(54);var c=.75,g=10,v=!0,w=!0,D=!0,T=!1,R="driver-highlighted-element-stage",W='<div id="'.concat("driver-page-overlay",'"></div>'),L='<div id="'.concat(R,'"></div>');h(33),h(77);function E(rt){return(E=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Q){return typeof Q}:function(Q){return Q&&typeof Symbol=="function"&&Q.constructor===Symbol&&Q!==Symbol.prototype?"symbol":typeof Q})(rt)}var V=function(rt){var Q=document.createElement("div");return Q.innerHTML=rt.trim(),Q.firstChild},at=function rt(Q,nt){if(arguments.length>2&&arguments[2]!==void 0&&arguments[2]){for(var N=["","-webkit-","-ms-","moz-","-o-"],Y=0;Y<N.length;Y++){var vt=rt(Q,N[Y]+nt);if(vt)return vt}return""}var pt="";return Q.currentStyle?pt=Q.currentStyle[nt]:document.defaultView&&document.defaultView.getComputedStyle&&(pt=document.defaultView.getComputedStyle(Q,null).getPropertyValue(nt)),pt&&pt.toLowerCase?pt.toLowerCase():pt},H=function(rt){return rt&&E(rt)==="object"&&"nodeType"in rt};function A(rt,Q){for(var nt=0;nt<Q.length;nt++){var N=Q[nt];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(rt,N.key,N)}}var q=function(){function rt(N,Y,vt){(function(pt,Lt){if(!(pt instanceof Lt))throw new TypeError("Cannot call a class as a function")})(this,rt),this.options=N,this.highlightedElement=null,this.lastHighlightedElement=null,this.hideTimer=null,this.window=Y,this.document=vt,this.removeNode=this.removeNode.bind(this)}var Q,nt;return Q=rt,(nt=[{key:"attachNode",value:function(){var N=this.document.getElementById("driver-page-overlay");N||(N=V(W),document.body.appendChild(N)),this.node=N,this.node.style.opacity="0",this.options.animate||this.node.parentElement&&this.node.parentElement.removeChild(this.node)}},{key:"highlight",value:function(N){N&&N.node?N.isSame(this.highlightedElement)||(this.window.clearTimeout(this.hideTimer),N.onHighlightStarted(),this.highlightedElement&&!this.highlightedElement.isSame(this.lastHighlightedElement)&&this.highlightedElement.onDeselected(),N.getCalculatedPosition().canHighlight()&&(this.lastHighlightedElement=this.highlightedElement,this.highlightedElement=N,this.show(),this.highlightedElement.onHighlighted())):console.warn("Invalid element to highlight. Must be an instance of `Element`")}},{key:"show",value:function(){var N=this;this.node&&this.node.parentElement||(this.attachNode(),window.setTimeout(function(){N.node.style.opacity="".concat(N.options.opacity),N.node.style.position="fixed",N.node.style.left="0",N.node.style.top="0",N.node.style.bottom="0",N.node.style.right="0"}))}},{key:"getHighlightedElement",value:function(){return this.highlightedElement}},{key:"getLastHighlightedElement",value:function(){return this.lastHighlightedElement}},{key:"clear",value:function(){var N=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this.options.onReset&&this.options.onReset(this.highlightedElement),this.highlightedElement&&this.highlightedElement.onDeselected(!0),this.highlightedElement=null,this.lastHighlightedElement=null,this.node&&(this.window.clearTimeout(this.hideTimer),this.options.animate&&!N?(this.node.style.opacity="0",this.hideTimer=this.window.setTimeout(this.removeNode,300)):this.removeNode())}},{key:"removeNode",value:function(){this.node&&this.node.parentElement&&this.node.parentElement.removeChild(this.node)}},{key:"refresh",value:function(){this.highlightedElement&&(this.highlightedElement.showPopover(),this.highlightedElement.showStage())}}])&&A(Q.prototype,nt),rt}();h(80);function F(rt,Q){for(var nt=0;nt<Q.length;nt++){var N=Q[nt];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(rt,N.key,N)}}var J=function(){function rt(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Y=N.left,vt=Y===void 0?0:Y,pt=N.top,Lt=pt===void 0?0:pt,Yt=N.right,Xt=Yt===void 0?0:Yt,he=N.bottom,gt=he===void 0?0:he;(function(Dt,xt){if(!(Dt instanceof xt))throw new TypeError("Cannot call a class as a function")})(this,rt),this.left=vt,this.right=Xt,this.top=Lt,this.bottom=gt}var Q,nt;return Q=rt,(nt=[{key:"canHighlight",value:function(){return this.left<this.right&&this.top<this.bottom}}])&&F(Q.prototype,nt),rt}();function St(rt,Q){for(var nt=0;nt<Q.length;nt++){var N=Q[nt];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(rt,N.key,N)}}var ot=function(){function rt(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Y=N.node,vt=N.options,pt=N.popover,Lt=N.stage,Yt=N.overlay,Xt=N.window,he=N.document;(function(gt,Dt){if(!(gt instanceof Dt))throw new TypeError("Cannot call a class as a function")})(this,rt),this.node=Y,this.document=he,this.window=Xt,this.options=vt,this.overlay=Yt,this.popover=pt,this.stage=Lt,this.animationTimeout=null}var Q,nt;return Q=rt,(nt=[{key:"isInView",value:function(){for(var N=this.node.offsetTop,Y=this.node.offsetLeft,vt=this.node.offsetWidth,pt=this.node.offsetHeight,Lt=this.node;Lt.offsetParent;)N+=(Lt=Lt.offsetParent).offsetTop,Y+=Lt.offsetLeft;return N>=this.window.pageYOffset&&Y>=this.window.pageXOffset&&N+pt<=this.window.pageYOffset+this.window.innerHeight&&Y+vt<=this.window.pageXOffset+this.window.innerWidth}},{key:"scrollManually",value:function(){var N=this.node.getBoundingClientRect().top+this.window.pageYOffset-this.window.innerHeight/2;this.window.scrollTo(0,N)}},{key:"bringInView",value:function(){if(this.node&&!this.isInView())if(this.node.scrollIntoView)try{this.node.scrollIntoView(this.options.scrollIntoViewOptions||{behavior:"instant",block:"center"})}catch{this.scrollManually()}else this.scrollManually()}},{key:"getCalculatedPosition",value:function(){var N=this.document.body,Y=this.document.documentElement,vt=this.window,pt=this.window.pageYOffset||Y.scrollTop||N.scrollTop,Lt=vt.pageXOffset||Y.scrollLeft||N.scrollLeft,Yt=this.node.getBoundingClientRect();return new J({top:Yt.top+pt,left:Yt.left+Lt,right:Yt.left+Lt+Yt.width,bottom:Yt.top+pt+Yt.height})}},{key:"getPopover",value:function(){return this.popover}},{key:"onDeselected",value:function(){var N=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this.hidePopover(),N&&this.hideStage(),this.removeHighlightClasses(),this.window.clearTimeout(this.animationTimeout),this.options.onDeselected&&this.options.onDeselected(this)}},{key:"isSame",value:function(N){return!(!N||!N.node)&&N.node===this.node}},{key:"onHighlightStarted",value:function(){this.options.onHighlightStarted&&this.options.onHighlightStarted(this)}},{key:"onHighlighted",value:function(){this.isInView()||this.bringInView(),this.showPopover(),this.showStage(),this.addHighlightClasses(),this.options.onHighlighted&&this.options.onHighlighted(this)}},{key:"removeHighlightClasses",value:function(){this.node.classList.remove("driver-highlighted-element"),this.node.classList.remove("driver-position-relative");for(var N=this.document.querySelectorAll(".".concat("driver-fix-stacking")),Y=0;Y<N.length;Y++)N[Y].classList.remove("driver-fix-stacking")}},{key:"addHighlightClasses",value:function(){this.node.classList.add("driver-highlighted-element"),this.canMakeRelative()&&this.node.classList.add("driver-position-relative"),this.fixStackingContext()}},{key:"fixStackingContext",value:function(){for(var N=this.node.parentNode;N&&N.tagName&&N.tagName.toLowerCase()!=="body";){var Y=at(N,"z-index"),vt=parseFloat(at(N,"opacity")),pt=at(N,"transform",!0),Lt=at(N,"transform-style",!0),Yt=at(N,"transform-box",!0),Xt=at(N,"filter",!0),he=at(N,"perspective",!0);(/[0-9]+/.test(Y)||vt<1||pt&&pt!=="none"||Lt&&Lt!=="flat"||Yt&&Yt!=="border-box"||Xt&&Xt!=="none"||he&&he!=="none")&&N.classList.add("driver-fix-stacking"),N=N.parentNode}}},{key:"canMakeRelative",value:function(){var N=this.getStyleProperty("position");return["absolute","fixed","relative"].indexOf(N)===-1}},{key:"getStyleProperty",value:function(N){return at(this.node,N)}},{key:"showStage",value:function(){this.stage.show(this.getCalculatedPosition())}},{key:"getNode",value:function(){return this.node}},{key:"hideStage",value:function(){this.stage.hide()}},{key:"hidePopover",value:function(){this.popover&&this.popover.hide()}},{key:"showPopover",value:function(){var N=this;if(this.popover){var Y=this.getCalculatedPosition(),vt=300;this.options.animate&&this.overlay.lastHighlightedElement||(vt=0),this.animationTimeout=this.window.setTimeout(function(){N.popover.show(Y)},vt)}}},{key:"getFullPageSize",value:function(){var N=this.document.body,Y=this.document.documentElement;return{height:Math.max(N.scrollHeight,N.offsetHeight,Y.scrollHeight,Y.offsetHeight),width:Math.max(N.scrollWidth,N.offsetWidth,Y.scrollWidth,Y.offsetWidth)}}},{key:"getSize",value:function(){return{height:Math.max(this.node.scrollHeight,this.node.offsetHeight),width:Math.max(this.node.scrollWidth,this.node.offsetWidth)}}}])&&St(Q.prototype,nt),rt}();h(55),h(56);function st(rt){return(st=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Q){return typeof Q}:function(Q){return Q&&typeof Symbol=="function"&&Q.constructor===Symbol&&Q!==Symbol.prototype?"symbol":typeof Q})(rt)}function wt(rt,Q,nt){return Q in rt?Object.defineProperty(rt,Q,{value:nt,enumerable:!0,configurable:!0,writable:!0}):rt[Q]=nt,rt}function Tt(rt,Q){for(var nt=0;nt<Q.length;nt++){var N=Q[nt];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(rt,N.key,N)}}function At(rt,Q){return!Q||st(Q)!=="object"&&typeof Q!="function"?function(nt){if(nt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return nt}(rt):Q}function Pt(rt){return(Pt=Object.setPrototypeOf?Object.getPrototypeOf:function(Q){return Q.__proto__||Object.getPrototypeOf(Q)})(rt)}function K(rt,Q){return(K=Object.setPrototypeOf||function(nt,N){return nt.__proto__=N,nt})(rt,Q)}var lt=function(rt){function Q(Y,vt,pt){var Lt;return function(Yt,Xt){if(!(Yt instanceof Xt))throw new TypeError("Cannot call a class as a function")}(this,Q),(Lt=At(this,Pt(Q).call(this))).options=function(Yt){for(var Xt=1;Xt<arguments.length;Xt++){var he=arguments[Xt]!=null?arguments[Xt]:{},gt=Object.keys(he);typeof Object.getOwnPropertySymbols=="function"&&(gt=gt.concat(Object.getOwnPropertySymbols(he).filter(function(Dt){return Object.getOwnPropertyDescriptor(he,Dt).enumerable}))),gt.forEach(function(Dt){wt(Yt,Dt,he[Dt])})}return Yt}({isFirst:!0,isLast:!0,totalCount:1,currentIndex:0,offset:0,showButtons:!0,closeBtnText:"Close",doneBtnText:"Done",startBtnText:"Next &rarr;",nextBtnText:"Next &rarr;",prevBtnText:"&larr; Previous"},Y),Lt.window=vt,Lt.document=pt,Lt}var nt,N;return function(Y,vt){if(typeof vt!="function"&&vt!==null)throw new TypeError("Super expression must either be null or a function");Y.prototype=Object.create(vt&&vt.prototype,{constructor:{value:Y,writable:!0,configurable:!0}}),vt&&K(Y,vt)}(Q,ot),nt=Q,(N=[{key:"attachNode",value:function(){var Y=this.document.getElementById("driver-popover-item");Y&&Y.parentElement.removeChild(Y),Y=V(function(){var vt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return`
  <div id="`.concat("driver-popover-item",'" class="').concat(vt,`">
    <div class="`).concat("driver-popover-tip",`"></div>
    <div class="`).concat("driver-popover-title",`">Popover Title</div>
    <div class="`).concat("driver-popover-description",`">Popover Description</div>
    <div class="driver-clearfix `).concat("driver-popover-footer",`">
      <button class="`).concat("driver-close-btn",`">Close</button>
      <span class="driver-btn-group `).concat("driver-navigation-btns",`">
        <button class="`).concat("driver-prev-btn",`">&larr; Previous</button>
        <button class="`).concat("driver-next-btn",`">Next &rarr;</button>
      </span>
    </div>
  </div>`)}(this.options.className)),document.body.appendChild(Y),this.node=Y,this.tipNode=Y.querySelector(".".concat("driver-popover-tip")),this.titleNode=Y.querySelector(".".concat("driver-popover-title")),this.descriptionNode=Y.querySelector(".".concat("driver-popover-description")),this.footerNode=Y.querySelector(".".concat("driver-popover-footer")),this.nextBtnNode=Y.querySelector(".".concat("driver-next-btn")),this.prevBtnNode=Y.querySelector(".".concat("driver-prev-btn")),this.closeBtnNode=Y.querySelector(".".concat("driver-close-btn"))}},{key:"getTitleNode",value:function(){return this.titleNode}},{key:"getDescriptionNode",value:function(){return this.descriptionNode}},{key:"hide",value:function(){this.node&&(this.node.style.display="none")}},{key:"setInitialState",value:function(){this.node.style.display="block",this.node.style.left="0",this.node.style.top="0",this.node.style.bottom="",this.node.style.right="",this.node.querySelector(".".concat("driver-popover-tip")).className="driver-popover-tip"}},{key:"show",value:function(Y){switch(this.attachNode(),this.setInitialState(),this.titleNode.innerHTML=this.options.title,this.descriptionNode.innerHTML=this.options.description||"",this.renderFooter(),this.options.position){case"left":case"left-top":this.positionOnLeft(Y);break;case"left-center":this.positionOnLeftCenter(Y);break;case"left-bottom":this.positionOnLeftBottom(Y);break;case"right":case"right-top":this.positionOnRight(Y);break;case"right-center":this.positionOnRightCenter(Y);break;case"right-bottom":this.positionOnRightBottom(Y);break;case"top":case"top-left":this.positionOnTop(Y);break;case"top-center":this.positionOnTopCenter(Y);break;case"top-right":this.positionOnTopRight(Y);break;case"bottom":case"bottom-left":this.positionOnBottom(Y);break;case"bottom-center":this.positionOnBottomCenter(Y);break;case"bottom-right":this.positionOnBottomRight(Y);break;case"mid-center":this.positionOnMidCenter(Y);break;case"auto":default:this.autoPosition(Y)}this.bringInView()}},{key:"renderFooter",value:function(){this.nextBtnNode.innerHTML=this.options.nextBtnText,this.prevBtnNode.innerHTML=this.options.prevBtnText,this.closeBtnNode.innerHTML=this.options.closeBtnText;var Y=this.options.totalCount&&this.options.totalCount!==1;this.options.showButtons?(Y?(this.nextBtnNode.style.display="inline-block",this.prevBtnNode.style.display="inline-block",this.closeBtnNode.classList.remove("driver-close-only-btn")):(this.nextBtnNode.style.display="none",this.prevBtnNode.style.display="none",this.closeBtnNode.classList.add("driver-close-only-btn")),this.footerNode.style.display="block",this.options.isFirst?(this.prevBtnNode.classList.add("driver-disabled"),this.nextBtnNode.innerHTML=this.options.startBtnText):this.prevBtnNode.classList.remove("driver-disabled"),this.options.isLast?this.nextBtnNode.innerHTML=this.options.doneBtnText:this.nextBtnNode.innerHTML=this.options.nextBtnText):this.footerNode.style.display="none"}},{key:"positionOnLeft",value:function(Y){var vt=this.getSize().width,pt=this.options.padding+10;this.node.style.left="".concat(Y.left-vt-pt,"px"),this.node.style.top="".concat(Y.top+this.options.offset-this.options.padding,"px"),this.node.style.right="",this.node.style.bottom="",this.tipNode.classList.add("right")}},{key:"positionOnLeftBottom",value:function(Y){var vt=this.getSize(),pt=vt.width,Lt=this.options.padding+10;this.node.style.left="".concat(Y.left-pt-Lt,"px"),this.node.style.top="".concat(Y.bottom+this.options.padding+this.options.offset-vt.height,"px"),this.node.style.bottom="",this.node.style.right="",this.tipNode.classList.add("right","position-bottom")}},{key:"positionOnLeftCenter",value:function(Y){var vt=this.getSize(),pt=vt.width,Lt=vt.height/2,Yt=this.options.padding+10,Xt=(Y.bottom-Y.top)/2,he=Y.top-Lt+Xt+this.options.offset;this.node.style.left="".concat(Y.left-pt-Yt,"px"),this.node.style.top="".concat(he,"px"),this.node.style.right="",this.node.style.bottom="",this.tipNode.classList.add("right","position-center")}},{key:"positionOnRight",value:function(Y){var vt=this.options.padding+10;this.node.style.left="".concat(Y.right+vt,"px"),this.node.style.top="".concat(Y.top+this.options.offset-this.options.padding,"px"),this.node.style.right="",this.node.style.bottom="",this.tipNode.classList.add("left")}},{key:"positionOnRightCenter",value:function(Y){var vt=this.getSize(),pt=this.options.padding+10,Lt=vt.height/2,Yt=(Y.bottom-Y.top)/2,Xt=Y.top-Lt+Yt+this.options.offset;this.node.style.left="".concat(Y.right+pt,"px"),this.node.style.top="".concat(Xt,"px"),this.node.style.right="",this.node.style.bottom="",this.tipNode.classList.add("left","position-center")}},{key:"positionOnRightBottom",value:function(Y){var vt=this.options.padding+10,pt=this.getSize();this.node.style.left="".concat(Y.right+vt,"px"),this.node.style.top="".concat(Y.bottom+this.options.padding+this.options.offset-pt.height,"px"),this.node.style.bottom="",this.node.style.right="",this.tipNode.classList.add("left","position-bottom")}},{key:"positionOnTop",value:function(Y){var vt=this.getSize().height,pt=this.options.padding+10;this.node.style.top="".concat(Y.top-vt-pt,"px"),this.node.style.left="".concat(Y.left-this.options.padding+this.options.offset,"px"),this.node.style.right="",this.node.style.bottom="",this.tipNode.classList.add("bottom")}},{key:"positionOnTopCenter",value:function(Y){var vt=this.getSize(),pt=vt.height,Lt=vt.width/2,Yt=this.options.padding+10,Xt=this.options.offset+Y.left+(Y.right-Y.left)/2;this.node.style.top="".concat(Y.top-pt-Yt,"px"),this.node.style.left="".concat(Xt-Lt-this.options.padding,"px"),this.node.style.right="",this.node.style.bottom="",this.tipNode.classList.add("bottom","position-center")}},{key:"positionOnTopRight",value:function(Y){var vt=this.getSize(),pt=vt.height,Lt=this.options.padding+10;this.node.style.top="".concat(Y.top-pt-Lt,"px"),this.node.style.left="".concat(Y.right+this.options.padding+this.options.offset-vt.width,"px"),this.node.style.right="",this.node.style.bottom="",this.tipNode.classList.add("bottom","position-right")}},{key:"positionOnBottom",value:function(Y){var vt=this.options.padding+10;this.node.style.top="".concat(Y.bottom+vt,"px"),this.node.style.left="".concat(Y.left-this.options.padding+this.options.offset,"px"),this.node.style.right="",this.node.style.bottom="",this.tipNode.classList.add("top")}},{key:"positionOnBottomCenter",value:function(Y){var vt=this.getSize().width/2,pt=this.options.padding+10,Lt=this.options.offset+Y.left+(Y.right-Y.left)/2;this.node.style.top="".concat(Y.bottom+pt,"px"),this.node.style.left="".concat(Lt-vt-this.options.padding,"px"),this.node.style.right="",this.node.style.bottom="",this.tipNode.classList.add("top","position-center")}},{key:"positionOnBottomRight",value:function(Y){var vt=this.getSize(),pt=this.options.padding+10;this.node.style.top="".concat(Y.bottom+pt,"px"),this.node.style.left="".concat(Y.right+this.options.padding+this.options.offset-vt.width,"px"),this.node.style.right="",this.node.style.bottom="",this.tipNode.classList.add("top","position-right")}},{key:"positionOnMidCenter",value:function(Y){var vt=this.getSize(),pt=vt.height,Lt=vt.width/2,Yt=pt/2,Xt=(Y.bottom-Y.top)/2,he=Y.top-Yt+Xt+this.options.offset,gt=this.options.offset+Y.left+(Y.right-Y.left)/2;this.node.style.top="".concat(he,"px"),this.node.style.left="".concat(gt-Lt-this.options.padding,"px"),this.node.style.right="",this.node.style.bottom="",this.tipNode.classList.add("mid-center")}},{key:"autoPosition",value:function(Y){var vt=this.getFullPageSize(),pt=this.getSize(),Lt=vt.height,Yt=pt.height,Xt=this.options.padding+10;Y.bottom+Yt+Xt>=Lt?this.positionOnTop(Y):this.positionOnBottom(Y)}}])&&Tt(nt.prototype,N),Q}();function z(rt){return(z=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Q){return typeof Q}:function(Q){return Q&&typeof Symbol=="function"&&Q.constructor===Symbol&&Q!==Symbol.prototype?"symbol":typeof Q})(rt)}function oe(rt,Q){for(var nt=0;nt<Q.length;nt++){var N=Q[nt];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(rt,N.key,N)}}function Zt(rt,Q){return!Q||z(Q)!=="object"&&typeof Q!="function"?function(nt){if(nt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return nt}(rt):Q}function ee(rt){return(ee=Object.setPrototypeOf?Object.getPrototypeOf:function(Q){return Q.__proto__||Object.getPrototypeOf(Q)})(rt)}function jt(rt,Q){return(jt=Object.setPrototypeOf||function(nt,N){return nt.__proto__=N,nt})(rt,Q)}var Nt=function(rt){function Q(Y,vt,pt){var Lt;return function(Yt,Xt){if(!(Yt instanceof Xt))throw new TypeError("Cannot call a class as a function")}(this,Q),(Lt=Zt(this,ee(Q).call(this))).options=Y,Lt.window=vt,Lt.document=pt,Lt}var nt,N;return function(Y,vt){if(typeof vt!="function"&&vt!==null)throw new TypeError("Super expression must either be null or a function");Y.prototype=Object.create(vt&&vt.prototype,{constructor:{value:Y,writable:!0,configurable:!0}}),vt&&jt(Y,vt)}(Q,ot),nt=Q,(N=[{key:"attachNode",value:function(){var Y=this.document.getElementById(R);Y||(Y=V(L),document.body.appendChild(Y)),this.node=Y,this.options.animate?this.node.classList.remove("driver-stage-no-animation"):this.node.classList.add("driver-stage-no-animation")}},{key:"hide",value:function(){this.node&&this.node.parentElement&&this.node.parentElement.removeChild(this.node)}},{key:"setInitialStyle",value:function(){this.node.style.display="block",this.node.style.left="0",this.node.style.top="0",this.node.style.bottom="",this.node.style.right=""}},{key:"show",value:function(Y){this.attachNode(),this.setInitialStyle();var vt=2*this.options.padding,pt=Y.right-Y.left+vt,Lt=Y.bottom-Y.top+vt;this.node.style.display="block",this.node.style.position="absolute",this.node.style.width="".concat(pt,"px"),this.node.style.height="".concat(Lt,"px"),this.node.style.top="".concat(Y.top-vt/2,"px"),this.node.style.left="".concat(Y.left-vt/2,"px"),this.node.style.backgroundColor=this.options.stageBackground}}])&&oe(nt.prototype,N),Q}();function Vt(rt){for(var Q=1;Q<arguments.length;Q++){var nt=arguments[Q]!=null?arguments[Q]:{},N=Object.keys(nt);typeof Object.getOwnPropertySymbols=="function"&&(N=N.concat(Object.getOwnPropertySymbols(nt).filter(function(Y){return Object.getOwnPropertyDescriptor(nt,Y).enumerable}))),N.forEach(function(Y){de(rt,Y,nt[Y])})}return rt}function de(rt,Q,nt){return Q in rt?Object.defineProperty(rt,Q,{value:nt,enumerable:!0,configurable:!0,writable:!0}):rt[Q]=nt,rt}function ae(rt,Q){for(var nt=0;nt<Q.length;nt++){var N=Q[nt];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(rt,N.key,N)}}h.d(r,"default",function(){return me});var me=function(){function rt(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(function(Y,vt){if(!(Y instanceof vt))throw new TypeError("Cannot call a class as a function")})(this,rt),this.options=Vt({animate:v,opacity:c,padding:g,scrollIntoViewOptions:null,allowClose:w,keyboardControl:D,overlayClickNext:T,stageBackground:"#ffffff",onHighlightStarted:function(){return null},onHighlighted:function(){return null},onDeselected:function(){return null},onReset:function(){return null},onNext:function(){return null},onPrevious:function(){return null}},N),this.document=document,this.window=window,this.isActivated=!1,this.steps=[],this.currentStep=0,this.currentMovePrevented=!1,this.overlay=new q(this.options,window,document),this.onResize=this.onResize.bind(this),this.onKeyUp=this.onKeyUp.bind(this),this.onClick=this.onClick.bind(this),this.moveNext=this.moveNext.bind(this),this.movePrevious=this.movePrevious.bind(this),this.preventMove=this.preventMove.bind(this),this.bind()}var Q,nt;return Q=rt,(nt=[{key:"getSteps",value:function(){return this.steps}},{key:"setSteps",value:function(N){this.steps=N}},{key:"bind",value:function(){this.window.addEventListener("resize",this.onResize,!1),this.window.addEventListener("keyup",this.onKeyUp,!1),"ontouchstart"in document.documentElement?this.window.addEventListener("touchstart",this.onClick,!1):this.window.addEventListener("click",this.onClick,!1)}},{key:"onClick",value:function(N){if(this.isActivated&&this.hasHighlightedElement()){N.stopPropagation();var Y=this.overlay.getHighlightedElement(),vt=this.document.getElementById("driver-popover-item"),pt=Y.node.contains(N.target),Lt=vt&&vt.contains(N.target);if(pt||Lt||!this.options.overlayClickNext)if(pt||Lt||!this.options.allowClose){var Yt=N.target.classList.contains("driver-next-btn"),Xt=N.target.classList.contains("driver-prev-btn");N.target.classList.contains("driver-close-btn")?this.reset():Yt?this.handleNext():Xt&&this.handlePrevious()}else this.reset();else this.handleNext()}}},{key:"onResize",value:function(){this.isActivated&&this.refresh()}},{key:"refresh",value:function(){this.overlay.refresh()}},{key:"onKeyUp",value:function(N){if(this.isActivated&&this.options.keyboardControl)if(N.keyCode!==27){var Y=this.getHighlightedElement();Y&&Y.popover&&(N.keyCode===39?this.handleNext():N.keyCode===37&&this.handlePrevious())}else this.reset()}},{key:"movePrevious",value:function(){var N=this.steps[this.currentStep-1];N?(this.overlay.highlight(N),this.currentStep-=1):this.reset()}},{key:"preventMove",value:function(){this.currentMovePrevented=!0}},{key:"handleNext",value:function(){this.currentMovePrevented=!1;var N=this.steps[this.currentStep];N&&N.options&&N.options.onNext&&N.options.onNext(this.overlay.highlightedElement),this.currentMovePrevented||this.moveNext()}},{key:"handlePrevious",value:function(){this.currentMovePrevented=!1;var N=this.steps[this.currentStep];N&&N.options&&N.options.onPrevious&&N.options.onPrevious(this.overlay.highlightedElement),this.currentMovePrevented||this.movePrevious()}},{key:"moveNext",value:function(){var N=this.steps[this.currentStep+1];N?(this.overlay.highlight(N),this.currentStep+=1):this.reset()}},{key:"hasNextStep",value:function(){return!!this.steps[this.currentStep+1]}},{key:"hasPreviousStep",value:function(){return!!this.steps[this.currentStep-1]}},{key:"reset",value:function(){var N=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this.currentStep=0,this.isActivated=!1,this.overlay.clear(N)}},{key:"hasHighlightedElement",value:function(){var N=this.overlay.getHighlightedElement();return N&&N.node}},{key:"getHighlightedElement",value:function(){return this.overlay.getHighlightedElement()}},{key:"getLastHighlightedElement",value:function(){return this.overlay.getLastHighlightedElement()}},{key:"defineSteps",value:function(N){this.steps=[];for(var Y=0;Y<N.length;Y++){var vt=this.prepareElementFromStep(N[Y],N,Y);vt&&this.steps.push(vt)}}},{key:"prepareElementFromStep",value:function(N){var Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],vt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,pt=Vt({},this.options),Lt=N,Yt=typeof N!="string"&&!H(N);if(!N||Yt&&!N.element)throw new Error("Element is required in step ".concat(vt));Yt&&(Lt=N.element,pt=Vt({},this.options,N));var Xt=H(Lt)?Lt:this.document.querySelector(Lt);if(!Xt)return console.warn("Element to highlight ".concat(Lt," not found")),null;var he=null;if(pt.popover&&pt.popover.title){var gt=[this.options.className,pt.popover.className].filter(function(Ft){return Ft}).join(" "),Dt=Vt({},pt,pt.popover,{className:gt,totalCount:Y.length,currentIndex:vt,isFirst:vt===0,isLast:Y.length===0||vt===Y.length-1});he=new lt(Dt,this.window,this.document)}var xt=Vt({},pt),qt=new Nt(xt,this.window,this.document);return new ot({node:Xt,options:pt,popover:he,stage:qt,overlay:this.overlay,window:this.window,document:this.document})}},{key:"start",value:function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;if(!this.steps||this.steps.length===0)throw new Error("There are no steps defined to iterate");this.isActivated=!0,this.currentStep=N,this.overlay.highlight(this.steps[N])}},{key:"highlight",value:function(N){this.isActivated=!0;var Y=this.prepareElementFromStep(N);Y&&this.overlay.highlight(Y)}}])&&ae(Q.prototype,nt),rt}()}]).default})})(Tf);var u0=Tf.exports;const c0=Nh(u0),d0=[{element:"#guide_1",className:"guide_1",popover:{className:"",title:"Circuit Elements panel",description:"This is where you can find all the circuit elements that are offered to build amazing circuits.",position:"right",offset:160}},{element:".guide_2",popover:{title:"Properties Panel",description:"This panel lets you change element properties as they are selected. When no elements are selected, the panel displays project properties.",position:"left",offset:200}},{element:".quick-btn",popover:{title:"Quick Access Panel",description:"This movable panel offers to perform some actions like Save Online, Open, Download quickly. Hover over the icons and see for yourself",position:"bottom"}},{element:"#tabsBar",popover:{title:"Circuit Tabs",description:"This section displays all the circuits you have in your project. You can easily add and delete circuits.",position:"bottom",offset:250}},{element:".timing-diagram-panel",popover:{title:"Timing Diagram Panel (Waveform)",description:"This panel displays the waveform created by circuits and can be used for resolving race conditions and debugging circuits.",position:"bottom",offset:0}},{element:".testbench-manual-panel",popover:{title:"Test Bench Panel",description:"This panel helps you test your circuit correctness by observing how your circuit responds under different test cases, ensuring a thorough and effective validation process.",position:"right",offset:0}},{element:".fa-bug",popover:{className:"bug-guide",title:"Report System",description:"You can report any issues/bugs you face through this issue reporting button there and then quickly.",position:"left",offset:-105}},{element:".tour-help",popover:{className:"tourHelpStep",title:"Restart tutorial anytime",description:'You can restart this tutorial anytime by clicking on "Tutorial Guide" under this dropdown.',position:"right",offset:0}}],f0=[{element:"#touchMenu",className:"touchMenuIcon",popover:{className:"",title:"Menu Buttons",description:"This are the button help you to access the following tools 1.CircuitElement 2.PropertiesPanel 3.TimeDiagram 4.QuickMenu",position:"left",offset:50}},{element:"#liveMenu",className:"liveMenuIcon",popover:{className:"",title:"Quick Tools",description:"This are Quick Tools 1.Fit to screen 2.Delete 3.Undo",position:"down",offset:1}},{element:"#tabsBar",popover:{title:"Circuit Tabs",description:"This section displays all the circuits you have in your project. You can easily add and delete circuits.",position:"bottom",offset:250}},{element:"#smallNavbarMenu-btn",className:"",popover:{className:"",title:"Navmenu Button",description:"This button is use to access Navmenu",position:"left",offset:0}}],gh=new c0({animate:!0,opacity:.8,padding:5,showButtons:!0});function _f(){$(".draggable-panel .maximize").trigger("click"),window.screen.width>1e3?gh.defineSteps(d0):gh.defineSteps(f0),gh.start(),localStorage.setItem("tutorials_tour_done",!0)}var Eo;function p0(){var i=$("#verilog-export-code-window-div"),t=m0.exportVerilog();Eo.setValue(t),$("#verilog-export-code-window-div .CodeMirror").css("height",$(window).height()-200),i.dialog({resizable:!1,width:"90%",height:"auto",position:{my:"center",at:"center",of:window},buttons:[{text:"Download Verilog File",click(){var n=Rs()||"Untitled";ib(n+".v",Eo.getValue())}},{text:"Copy to Clipboard",click(){zd(Eo.getValue()),Ce("Code has been copied")}},{text:"Try in EDA Playground",click(){zd(Eo.getValue()),nb("https://www.edaplayground.com/x/XZpY")}}]})}function g0(){var i=document.getElementById("verilog-export-code-window");Eo=Xa.fromTextArea(i,{mode:"verilog",autoRefresh:!0,styleActiveLine:!0,lineNumbers:!0,autoCloseBrackets:!0,smartIndent:!0,indentWithTabs:!0,extraKeys:{"Ctrl-Space":"autocomplete"}})}var m0={exportVerilog:function(i=void 0){var t={};for(var n in ki)ki[n].resetVerilog&&ki[n].resetVerilog();var r=[],h=new Set;for(id in le){t[id]=le[id].getDependencies();for(var c=0;c<le[id].SubCircuit.length;c++)h.add(le[id].SubCircuit[c].id)}for(id in le)h.has(id)||r.push(le[id]);var g={},v={},w="";if(i)w+=this.exportVerilogScope(i.id,g,t,v);else for(id in le)w+=this.exportVerilogScope(id,g,t,v);for(var D in v)ki[D]&&ki[D].moduleVerilog&&(w+=ki[D].moduleVerilog());var T=this.generateReport(v)+`
`,R=this.generateTestBenchCode(r);return T+R+w},generateReport:function(i){var t="";t+=`/**
`,t+=` * This is an autogenerated netlist code from CircuitVerse. Verilog Code can be
`,t+=` * tested on https://www.edaplayground.com/ using Icarus Verilog 0.9.7. This is an
`,t+=` * experimental module and some manual changes make need to be done in order for
`,t+=` * this to work.
`,t+=` *
`,t+=` * If you have any ideas/suggestions or bug fixes, raise an issue
`,t+=` * on https://github.com/CircuitVerse/CircuitVerse/issues/new/choose
`,t+=` */
`,t+=`
`,t+=`/*
`,t+=Te(1)+`Element Usage Report
`;for(var n in i)n!="Node"&&(t+=`${Te(2)}${n} - ${i[n]} times
`);t+=`*/
`,t+=`
`;var r="";t+=`/*
`,t+=Te(1)+`Usage Instructions and Tips
`,r+=Te(2)+`Labels - Ensure unique label names and avoid using verilog keywords
`,r+=Te(2)+`Warnings - Connect all optional inputs to remove warnings
`;for(var n in i)ki[n]&&ki[n].verilogInstructions&&(r+=v0(2,ki[n].verilogInstructions()));return t+=r,t+=`*/
`,t},generateTestBenchCode:function(i){if(i.length==0)return"";var t=`// Sample Testbench Code - Uncomment to use
`;t+=`
/*
`,t+=`module TestBench();
`;for(var n={},r={},h=1;h<=32;h++)n[h]=new Set;for(var h=1;h<=32;h++)r[h]=new Set;for(var c=new Set,g=new Set,v=new Set,w="",h=0;h<i.length;h++){for(var D=i[h],T=0;T<D.Input.length;T++){var R=D.Input[T];n[R.bitWidth].add(R.label),g.add(R.label)}for(var T=0;T<D.Output.length;T++){var W=D.Output[T];r[W.bitWidth].add(W.label),v.add(W.label)}for(var T=0;T<D.Clock.length;T++){var R=D.Clock[T];n[1].add(R.label),c.add(R.label)}var L=hn(D.name),E=this.generateHeaderHelper(D);w+=`${Te(1)}${L} DUT${h}${E}
`}t+=`
`;for(var V=1;V<=32;V++)if(n[V].size!=0){var at=[...n[V]];V==1?t+=`${Te(1)}reg ${at.join(", ")};
`:t+=`${Te(1)}reg [${V-1}:0] ${at.join(", ")};
`}t+=`
`;for(var V=1;V<=32;V++)if(r[V].size!=0){var H=[...r[V]];V==1?t+=`${Te(1)}wire ${H.join(", ")};
`:t+=`${Te(1)}wire [${V-1}:0] ${H.join(", ")};
`}if(t+=`
`,t+=w,c.size){t+=`${Te(1)}always begin
`,t+=`${Te(2)}#10
`;for(var A of c)t+=`${Te(2)}${A} = 0;
`;t+=`${Te(2)}#10
`;for(var A of c)t+=`${Te(2)}${A} = 1;
`;t+=`${Te(1)}end
`,t+=`
`}t+=`${Te(1)}initial begin
`;for(var R of g)t+=`${Te(2)}${R} = 0;
`;t+=`
`,t+=`${Te(2)}#15
`;for(var W of v)t+=`${Te(2)}$display("${W} = %b", ${W});
`;t+=`
`,t+=`${Te(2)}#10
`;for(var W of v)t+=`${Te(2)}$display("${W} = %b", ${W});
`;return t+=`
`,t+=`${Te(2)}$finish;

`,t+=`${Te(1)}end
`,t+=`endmodule
`,t+=`
*/
`,t},exportVerilogScope:function(i,t,n,r){if(t[i])return"";t[i]=!0;for(var h="",c=0;c<n[i].length;c++)h+=this.exportVerilogScope(n[i][c],t,n,r)+`
`;var g=le[i];this.resetLabels(g),this.setLabels(g),h+=this.generateHeader(g),h+=this.generateOutputList(g),h+=this.generateInputList(g);for(var v=this.processGraph(g,r),w=1;w<=32;w++){var D=g.verilogWireList[w];D=D.filter(T=>!T.includes("[")),D.length!=0&&(w==1?h+="  wire "+D.join(", ")+`;
`:h+="  wire ["+(w-1)+":0] "+D.join(", ")+`;
`)}return h+=v,h+=`endmodule
`,h},processGraph:function(i,t){var n="";i.stack=[],i.verilogWireList=[];for(var r=0;r<=32;r++)i.verilogWireList.push(new Array);for(var h=new Set,r=0;r<inputList.length;r++)for(var c=0;c<i[inputList[r]].length;c++)i.stack.push(i[inputList[r]][c]);for(;i.stack.length;){if(qf())return;var g=i.stack.pop();h.has(g)||(g.processVerilog(),g.objectType!="Node"&&(t[g.objectType]?t[g.objectType]++:t[g.objectType]=1),g.objectType!="Node"&&g.objectType!="Input"&&g.objectType!="Clock"&&h.add(g))}for(var g of h)n+="  "+g.generateVerilog()+`
`;return n},resetLabels:function(i){for(var t=0;t<i.allNodes.length;t++)i.allNodes[t].verilogLabel=""},setLabels:function(i=globalScope){for(var t=0;t<i.Input.length;t++)i.Input[t].label==""?i.Input[t].label="inp_"+t:i.Input[t].label=hn(i.Input[t].label),i.Input[t].output1.verilogLabel=i.Input[t].label;for(var t=0;t<i.ConstantVal.length;t++)i.ConstantVal[t].label==""?i.ConstantVal[t].label="const_"+t:i.ConstantVal[t].label=hn(i.ConstantVal[t].label),i.ConstantVal[t].output1.verilogLabel=i.ConstantVal[t].label;for(var t=0;t<i.Clock.length;t++)i.Clock[t].label==""?i.Clock[t].label="clk_"+t:i.Clock[t].label=hn(i.Clock[t].label),i.Clock[t].output1.verilogLabel=i.Clock[t].label;for(var t=0;t<i.Output.length;t++)i.Output[t].label==""?i.Output[t].label="out_"+t:i.Output[t].label=hn(i.Output[t].label);for(var t=0;t<i.SubCircuit.length;t++)i.SubCircuit[t].label==""?i.SubCircuit[t].label=i.SubCircuit[t].data.name+"_"+t:i.SubCircuit[t].label=hn(i.SubCircuit[t].label);for(var t=0;t<moduleList.length;t++)for(var n=moduleList[t],r=0;r<i[n].length;r++)i[n][r].verilogLabel=hn(i[n][r].label)||i[n][r].verilogName()+"_"+r},generateHeader:function(i=globalScope){var t=`
module `+hn(i.name);return t+=this.generateHeaderHelper(i),t},generateHeaderHelper:function(i=globalScope){for(var t="(",n=[],r=0;r<i.Output.length;r++)n.push(i.Output[r].label);for(var r=0;r<i.Clock.length;r++)n.push(i.Clock[r].label);for(var r=0;r<i.Input.length;r++)n.push(i.Input[r].label);return t+=n.join(", "),t+=`);
`,t},generateInputList:function(i=globalScope){for(var t={},n=1;n<=32;n++)t[n]=[];for(var n=0;n<i.Input.length;n++)t[i.Input[n].bitWidth].push(i.Input[n].label);for(var n=0;n<i.Clock.length;n++)t[i.Clock[n].bitWidth].push(i.Clock[n].label);var r="";for(var h in t)t[h].length!=0&&(h==1?r+="  input "+t[1].join(", ")+`;
`:r+="  input ["+(h-1)+":0] "+t[h].join(", ")+`;
`);return r},generateOutputList:function(i=globalScope){for(var t={},n=0;n<i.Output.length;n++)t[i.Output[n].bitWidth]?t[i.Output[n].bitWidth].push(i.Output[n].label):t[i.Output[n].bitWidth]=[i.Output[n].label];var r="";for(var h in t)h==1?r+="  output "+t[1].join(",  ")+`;
`:r+="  output ["+(h-1)+":0] "+t[h].join(", ")+`;
`;return r}};function Te(i){return" ".repeat(i*2)}function v0(i,t){var n=t.split(`
`);return n[n.length-1]==""?(n.pop(),n=n.map(r=>Te(i)+r).join(`
`),n+=`
`,n):n.map(r=>Te(i)+r).join(`
`)}const b0=()=>{const i=`${$("#projectName").text().trim()}.cv`,t=document.createElement("input");t.type="text",t.name="fileName",t.setAttribute("placeholder",i),t.id="filename",t.defaultValue=i;const n=document.createElement("label");n.setAttribute("for","filename"),n.textContent="File Name";const r=document.createElement("div");return r.appendChild(n),r.appendChild(t),r},y0=()=>{$("#ExportCircuitFilesDialog").empty(),$("#ExportCircuitFilesDialog").append(b0()),$("#ExportCircuitFilesDialog").dialog({resizable:!1,buttons:[{text:"Save",click(){var i=pl($("#filename").val())||"untitled";const t=qr(i.split(".")[0],!1);i=`${i.split(".")[0]}.cv`,vf(i,t),$(this).dialog("close")}}]}),$("#ExportCircuitFilesDialog").focus()};function w0(){setTimeout(()=>{_f()},100)}const pe={};pe.save=Kh;pe.load=Nn;pe.createSaveAsImgPrompt=dl;pe.clearProject=kf;pe.newProject=r0;pe.saveOffline=Sf;pe.newCircuit=ds;pe.createOpenLocalPrompt=yf;pe.recoverProject=s0;pe.createSubCircuitPrompt=df;pe.createCombinationalAnalysisPrompt=Df;pe.fullViewOption=zf;pe.colorThemes=um;pe.showTourGuide=w0;pe.deleteSelected=Ho;pe.newVerilogModule=Hv;pe.saveVerilogCode=$v;pe.resetVerilogCode=ff;pe.generateVerilog=p0;pe.bitconverter=sb;pe.createNewCircuitScope=Af;pe.ExportCircuitFiles=y0;pe.ImportCircuitFiles=bf;const Di=10;let Er;const Ds={x:0,y:0};var _n={modulePropertyInner:"",PlotAreaId:"",plotID:"",tdLog:""},Ha=0,Lo=0,Ts=0,Dd=0,Td=0,S0,_d=0,Jh,tu,Ph,Ih,Pd,Ya,Ai,Lh=!1;function Pr(i,t){Jh=i.touches[0].clientX-t.offsetLeft,tu=i.touches[0].clientY-t.offsetTop}function Ir(i,t){Ih=i.touches[0].clientY-tu,Ph=i.touches[0].clientX-Jh,t.style.left=Ph+"px",t.style.top=Ih+"px"}function Lr(){Jh=Ph,tu=Ih}function Pf(i){be(!0),f.lastSelected&&f.lastSelected.dblclick!==void 0?f.lastSelected.dblclick():f.shiftDown||(f.multipleObjectSelections=[]),ge(2),i.preventDefault()}function x0(i){const t=new Date().getTime(),n=t-_d;clearTimeout(S0),n<500&&n>0&&Pf(i),Wo(-1),_d=t,i.preventDefault()}const mh=navigator.userAgent.toLowerCase().indexOf("msie")!=-1||navigator.userAgent.toLowerCase().indexOf("trident")!=-1;function fl(i){return f.touch?(Ds.x=i.touches[0].clientX,Ds.y=i.touches[0].clientY,Ds):(f.touch||(Ds.x=i.clientX,Ds.y=i.clientY),Ds)}function If(i,t){i.preventDefault(),bi(!0),ge(),ze(!0),mn(!0),be(!0),Lo=Math.sqrt((i.touches[1].clientX-i.touches[0].clientX)**2,(i.touches[1].clientY-i.touches[0].clientY)**2),Lo>=Ha?(Ts+=.02,Ha=Lo):Ha>=Lo&&(Ts-=.02,Ha=Lo),Ts>=2?Ts=2:Ts<=.5&&(Ts=.5);const n=t.scale;t.scale=Math.max(.5,Math.min(4*DPR,Ts*3)),t.scale=Math.round(t.scale*10)/10,Dd=(i.touches[0].clientX+i.touches[1].clientX)/2,Td=(i.touches[0].clientY+i.touches[1].clientY)/2;const r=f.canvas.getBoundingClientRect(),h=(Dd-r.left)*DPR,c=(Td-r.top)*DPR,g=Math.round((h-t.ox)/t.scale/Di),v=Math.round((c-t.ox)/t.scale/Di),w=Math.round(g/Di)*Di,D=Math.round(v/Di)*Di;t.ox=Math.round(w*(t.scale-n)),t.oy=Math.round(D*(t.scale-n)),bi(!0),ge(1)}function Id(i){Er=fl(i),f.mouseDown=!0,document.activeElement instanceof HTMLElement&&document.activeElement.blur(),ls(!1),ze(!0),mn(!0),be(!0),f.lastSelected=void 0,f.selected=!1,f.hover=void 0;const t=f.canvas.getBoundingClientRect();f.mouseDownRawX=(Er.x-t.left)*DPR,f.mouseDownRawY=(Er.y-t.top)*DPR,f.mouseDownX=Math.round((f.mouseDownRawX-globalScope.ox)/globalScope.scale/Di)*Di,f.mouseDownY=Math.round((f.mouseDownRawY-globalScope.oy)/globalScope.scale/Di)*Di,f.touch&&(f.mouseX=f.mouseDownX,f.mouseY=f.mouseDownY),f.oldx=globalScope.ox,f.oldy=globalScope.oy,i.preventDefault(),Bs(),ge(1),$(".dropdown.open").removeClass("open")}function Ld(i){if(!f.touch||i.touches.length===1){Er=fl(i);const t=f.canvas.getBoundingClientRect();if(f.mouseRawX=(Er.x-t.left)*DPR,f.mouseRawY=(Er.y-t.top)*DPR,f.mouseXf=(f.mouseRawX-globalScope.ox)/globalScope.scale,f.mouseYf=(f.mouseRawY-globalScope.oy)/globalScope.scale,f.mouseX=Math.round(f.mouseXf/Di)*Di,f.mouseY=Math.round(f.mouseYf/Di)*Di,be(!0),f.lastSelected&&(f.mouseDown||f.lastSelected.newElement)){be(!0);let n;f.lastSelected==globalScope.root?n=function(){hu()}:n=function(){f.lastSelected&&f.lastSelected.update()},ge(0,20,n)}else ge(0,200)}f.touch&&i.touches.length===2&&If(i,globalScope)}function Od(i){f.mouseDown=!1,lightMode||(of(),setTimeout(Rh,2e3)),ls(!1),ze(!0),mn(!0),be(!0),bi(!0),Hi(1),ge(1),f.mouseDown=!1;for(let t=0;t<2;t++)mn(!0),Hi(1),fs();ls(!1),ze(!0),mn(!0),be(!0),bi(!0),Hi(1),ge(1),f.mouseRawX<0||f.mouseRawY<0||f.mouseRawX>width||f.mouseRawY>height||(ts.smartDropXX=f.mouseX+100,ts.smartDropYY=f.mouseY-50),f.touch&&(Lh||(Br(globalScope),f.mouseX=100+f.maxWidth||0,f.mouseY=f.minHeight||0,x0(i)))}function k0(){$("#deleteSelected").on("click",()=>{Ho()}),$("#zoomIn").on("click",()=>{On(.2,"zoomButton","zoomButton",2)}),$("#zoomOut").on("click",()=>{On(-.2,"zoomButton","zoomButton",2)}),$("#undoButton").on("click",()=>{Za()}),$("#redoButton").on("click",()=>{Ua()}),$("#viewButton").on("click",()=>{zf()}),$(document).on("keyup",L=>{L.key==="Escape"&&$f()}),$("#projectName").on("click",()=>{f.lastSelected=globalScope.root,setTimeout(()=>{document.getElementById("projname").select()},100)}),$("#tabsBar").sortable({containment:"parent",items:"> div",revert:!1,opacity:.5,tolerance:"pointer",placeholder:"placeholder",forcePlaceholderSize:!0}),document.getElementById("simulationArea").addEventListener("mousedown",L=>{f.touch=!1,Id(L)}),document.getElementById("simulationArea").addEventListener("mouseup",()=>{f.lastSelected&&(f.lastSelected.newElement=!1),f.lastSelected&&restrictedElements.includes(f.lastSelected.objectType)&&!globalScope.restrictedCircuitElementsUsed.includes(f.lastSelected.objectType)&&(globalScope.restrictedCircuitElementsUsed.push(f.lastSelected.objectType),Bh()),!f.shiftDown&&f.multipleObjectSelections.length>0&&(f.multipleObjectSelections.includes(f.lastSelected)||(f.multipleObjectSelections=[]))}),document.getElementById("simulationArea").addEventListener("mousemove",L=>{f.touch=!1,Ld(L)}),document.getElementById("simulationArea").addEventListener("mouseup",L=>{f.touch=!1,Od(L)}),document.getElementById("simulationArea").addEventListener("touchstart",L=>{f.touch=!0,Id(L)}),document.getElementById("simulationArea").addEventListener("touchmove",L=>{f.touch=!0,Ld(L)}),document.getElementById("simulationArea").addEventListener("touchend",L=>{f.touch=!0,Od(L)}),window.addEventListener("keyup",L=>{ge(1),f.shiftDown=L.shiftKey,L.keyCode==16&&(f.shiftDown=!1),(L.key=="Meta"||L.key=="Control")&&(f.controlDown=!1)}),window.addEventListener("keydown",L=>{if(document.activeElement.tagName!="INPUT"&&document.activeElement==document.body){if(f.shiftDown=L.shiftKey,(L.key=="Meta"||L.key=="Control")&&(f.controlDown=!0),f.controlDown&&L.key.charCodeAt(0)==122&&!f.shiftDown&&Za(),f.controlDown&&L.key.charCodeAt(0)==122&&f.shiftDown&&Ua(),f.controlDown&&L.key.charCodeAt(0)==121&&!f.shiftDown&&Ua(),listenToSimulator){if(document.activeElement.tagName=="INPUT"||f.mouseRawX<0||f.mouseRawY<0||f.mouseRawX>width||f.mouseRawY>height||(document.activeElement.type=="number"&&(ou(),showProperties(f.lastSelected)),ls(!1),ze(!0),mn(!0),f.shiftDown=L.shiftKey,(L.key=="Meta"||L.key=="Control")&&(f.controlDown=!0),(f.controlDown&&(L.keyCode==187||L.keyCode==171)||L.keyCode==107)&&(L.preventDefault(),iu()),(f.controlDown&&(L.keyCode==189||L.keyCode==173)||L.keyCode==109)&&(L.preventDefault(),nu()),f.mouseRawX<0||f.mouseRawY<0||f.mouseRawX>width||f.mouseRawY>height))return;if(ge(1),be(!0),Hi(1),f.controlDown&&(L.key=="C"||L.key=="c"),f.lastSelected&&f.lastSelected.keyDown&&(L.key.toString().length==1||L.key.toString()=="Backspace"||L.key.toString()=="Enter")){f.lastSelected.keyDown(L.key.toString()),L.cancelBubble=!0,L.returnValue=!1,L.stopPropagation&&(L.stopPropagation(),L.preventDefault());return}if(f.lastSelected&&f.lastSelected.keyDown2&&L.key.toString().length==1){f.lastSelected.keyDown2(L.key.toString());return}if(f.lastSelected&&f.lastSelected.keyDown3&&L.key.toString()!="Backspace"&&L.key.toString()!="Delete"){f.lastSelected.keyDown3(L.key.toString());return}L.keyCode==16&&(f.shiftDown=!0,f.lastSelected&&!f.lastSelected.keyDown&&f.lastSelected.objectType!="Wire"&&f.lastSelected.objectType!="CircuitElement"&&!f.multipleObjectSelections.contains(f.lastSelected)&&f.multipleObjectSelections.push(f.lastSelected)),f.controlDown&&L.keyCode==83&&f.shiftDown&&(saveOffline(),L.preventDefault()),f.controlDown&&(L.keyCode==65||L.keyCode==97)&&(jm(),L.preventDefault()),L.keyCode==27&&(f.multipleObjectSelections=[],f.lastSelected=void 0,L.preventDefault()),(L.keyCode==113||L.keyCode==81)&&f.lastSelected!=null&&f.lastSelected.bitWidth!==void 0&&f.lastSelected.newBitWidth(parseInt(prompt("Enter new bitWidth"),10)),f.controlDown&&(L.key=="T"||L.key=="t")&&f.changeClockTime(prompt("Enter Time:"))}(L.keyCode==8||L.key=="Delete")&&Ho()}},!0),document.getElementById("simulationArea").addEventListener("dblclick",L=>{Pf(L)});function i(L){be(!0),L.preventDefault();var E=L.wheelDelta?L.wheelDelta:-L.detail;L.preventDefault();var E=L.wheelDelta?L.wheelDelta:-L.detail;const V=E>0?1:-1;eu(V),be(!0),bi(!0),_e()?Gf():fs()}document.getElementById("simulationArea").addEventListener("mousewheel",i),document.getElementById("simulationArea").addEventListener("DOMMouseScroll",i),document.addEventListener("cut",L=>{if(!Ns()&&document.activeElement.tagName!="INPUT"&&document.activeElement.tagName=="BODY"&&listenToSimulator){f.copyList=f.multipleObjectSelections.slice(),f.lastSelected&&f.lastSelected!==f.root&&!f.copyList.contains(f.lastSelected)&&f.copyList.push(f.lastSelected);const E=Dh(f.copyList,!0);if(Ws(),localStorage.setItem("clipboardData",E),L.preventDefault(),E==null)return;mh?window.clipboardData.setData("Text",E):L.clipboardData.setData("text/plain",E)}}),document.addEventListener("copy",L=>{if(!Ns()&&document.activeElement.tagName!="INPUT"&&document.activeElement.tagName=="BODY"&&listenToSimulator){f.copyList=f.multipleObjectSelections.slice(),f.lastSelected&&f.lastSelected!==f.root&&!f.copyList.contains(f.lastSelected)&&f.copyList.push(f.lastSelected);const E=Dh(f.copyList);if(Ws(),localStorage.setItem("clipboardData",E),L.preventDefault(),E==null)return;mh?window.clipboardData.setData("Text",E):L.clipboardData.setData("text/plain",E)}}),document.addEventListener("paste",L=>{if(document.activeElement.tagName!="INPUT"&&document.activeElement.tagName=="BODY"&&listenToSimulator){let E;mh?E=window.clipboardData.getData("Text"):E=L.clipboardData.getData("text/plain"),sl(E),Ws(),L.preventDefault()}}),$("#subcircuitMenu").on("dragstop",".draggableSubcircuitElement",function(L,E){const V=$("#guide_1")[0].clientWidth;let at;if(E.position.top>10&&E.position.left>V){at=globalScope[this.dataset.elementName][this.dataset.elementId],at.x=E.position.left-V,at.y=E.position.top;for(const H of at.nodeList)H.x=E.position.left-V,H.y=E.position.top;yt.subElements.push(at),this.parentElement.removeChild(this)}}),restrictedElements.forEach(L=>{$(`#${L}`).mouseover(()=>{mm()}),$(`#${L}`).mouseout(()=>{vm()})}),$(".search-input").on("keyup",function(){const L=$(this).parent().parent(),E=$(".search-close",L),V=$(".search-input",L),at=$(".search-results",L),H=$(".accordion",L);at.css("display","block"),E.css("display","block"),H.css("display","none");const A=$(this).val().toLowerCase();if(E.on("click",()=>{V.val(""),H.css("display","block"),at.css("display","none"),E.css("display","none")}),A.length===0){H.css("display","block"),at.css("display","none"),E.css("display","none");return}let q="";const F=elementPanelList.filter(St=>St.toLowerCase().includes(A));var J=[];for(const St in F)if(Object.prototype.hasOwnProperty.call(F,St)){for(const ot in elementHierarchy)if(Object.prototype.hasOwnProperty.call(elementHierarchy,ot)){const st=elementHierarchy[ot];for(let wt=0;wt<st.length;wt++)F[St]==st[wt].label&&J.push(st[wt])}}J.length?(J.forEach(St=>q+=t(St)),at.html(q),$(".filterElements").mousedown(Bf)):at.text("No elements found ...")});function t(L){return`<div class="${L.name} icon logixModules filterElements" id="${L.name}" title="${L.label}">
            <img  src= "/img/${L.name}.svg" alt="element's image" >
        </div>`}C0(),K0(),embed||L0();const n=document.getElementById("moduleProperty"),r=document.querySelector("#moduleProperty"),h=document.getElementById("guide_1"),c=document.querySelector("#guide_1"),g=document.getElementById("quick-btn-id"),v=document.querySelector("#quick-btn-id"),w=document.getElementById("time-Diagram"),D=document.querySelector("#time-Diagram"),T=document.getElementById("layoutDialog"),R=document.querySelector("#layoutDialog"),W=document.getElementsByClassName("layoutElementPanel")[0];r.addEventListener("touchstart",L=>{Pr(L,n)}),r.addEventListener("touchmove",L=>{Ir(L,n)}),r.addEventListener("touchend",()=>{Lr()}),c.addEventListener("touchstart",L=>{Pr(L,h)}),c.addEventListener("touchmove",L=>{Ir(L,h)}),c.addEventListener("touchend",()=>{Lr()}),v.addEventListener("touchstart",L=>{Pr(L,v)}),v.addEventListener("touchmove",L=>{Ir(L,g)}),v.addEventListener("touchend",()=>{Lr()}),D.addEventListener("touchstart",L=>{$(".timing-diagram-panel").draggable().draggable("enable"),w.style.position="absolute",Pr(L,w)}),D.addEventListener("touchmove",L=>{Ir(L,w)}),D.addEventListener("touchend",()=>{Lr()}),R.addEventListener("touchstart",L=>{$(".timing-diagram-panel").draggable().draggable("enable"),w.style.position="absolute",Pr(L,T)}),R.addEventListener("touchmove",L=>{Ir(L,T)}),R.addEventListener("touchend",()=>{Lr()}),W.addEventListener("touchstart",L=>{$(".timing-diagram-panel").draggable().draggable("enable"),w.style.position="absolute",Pr(L,W)}),W.addEventListener("touchmove",L=>{Ir(L,W)}),W.addEventListener("touchend",()=>{Lr()})}function Lf(){const i=$("body").width(),t=$(".side").width(),n=i-t;$("#tabsBar div").each(function(){$(this).css({"max-width":n-30})})}window.addEventListener("resize",Lf);Lf();$(()=>{$('[data-bs-toggle="tooltip"]').tooltip()});function eu(i){(globalScope.scale>.5*DPR||globalScope.scale<4*DPR)&&On(i*.1*DPR),bi(!0),ge()}function iu(){eu(1)}function nu(){eu(-1)}function C0(){document.getElementById("customRange1").value=5,document.getElementById("simulationArea").addEventListener("DOMMouseScroll",t),document.getElementById("simulationArea").addEventListener("mousewheel",t);let i=document.getElementById("customRange1").value;$(document).on("input change","#customRange1",function(){const F=$(this).val(),J=F-i;be(!0),On(J*.1,"zoomButton","zoomButton",3),bi(!0),i=F});function t(F){let J=document.getElementById("customRange1").value;((F.wheelDelta?F.wheelDelta:-F.detail)>0?1:-1)>0?J++:J--,J>=45?(J=45,document.getElementById("customRange1").value=45):J<=0?(J=0,document.getElementById("customRange1").value=0):(document.getElementById("customRange1").value=J,i=J)}function n(F){const J=$("#customRange1");let St=parseInt(J.val(),10);F===-1?St--:St++,J.val(St).change()}$("#decrement").click(()=>{n(-1)}),$("#increment").click(()=>{n(1)});var r="var(--touch-menu)";Ai=document.getElementById("smallNavbarMenu-btn");function h(F,J){F.style.backgroundColor===J?F.style.backgroundColor="":F.style.backgroundColor=J}Ai.addEventListener("touchstart",F=>{h(Ai,r),Ai.classList.toggle("active"),F.preventDefault()}),Ai.addEventListener("touchend",F=>{h(Ai,""),c(),F.preventDefault()}),Ai.addEventListener("mousedown",F=>{h(Ai,r),Ai.classList.toggle("active"),F.preventDefault()}),Ai.addEventListener("mouseup",F=>{h(Ai,""),c(),F.preventDefault()});function c(){Pd=document.getElementsByClassName("smallscreen-navbar")[0].offsetHeight,Ya=document.getElementsByClassName("smallscreen-navbar"),Pd===0?Ya[0].style.height="100%":Ya[0].style.height="0";var F=document.getElementById("ProjectID"),J=pl(Rs())||"Untitled";F.innerHTML=`<p>${J}<p>`}var g=document.getElementsByClassName("smallscreen-navbar-inner"),v=document.getElementsByClassName("smallNavbar-navbar-ul"),w=document.getElementsByClassName("ulicon");function D(F){for(var J=0;J<v.length-1;J++)J!==F&&(w[J].classList.remove("active"),g[J].style.height="0%");g[F].style.height==="100%"?(g[F].style.height="0%",w[F].classList.remove("active")):(g[F].style.height="100%",w[F].classList.toggle("active"))}for(var T=0;T<v.length;T++)(function(F){v[F].addEventListener("click",()=>{D(F)})})(T);for(var R=document.getElementsByClassName("SmallScreen-Navbar-li"),W=0;W<R.length;W++)(function(F){R[F].addEventListener("click",J=>{Li(R,F,"#A0937D"),T0(F),setTimeout(()=>{Li(R,F,"")},100),J.preventDefault()})})(W);for(var L=document.getElementsByClassName("touchMenuIcon"),E=document.getElementsByClassName("panelclose"),V=0;V<L.length;V++)(function(F){L[F].addEventListener("touchstart",J=>{Li(L,F,r),Wo(F),J.preventDefault()}),L[F].addEventListener("mousedown",J=>{Li(L,F,r),Wo(F),J.preventDefault()}),E[F].addEventListener("touchstart",J=>{Li(L,F,r),Wo(F),J.preventDefault()}),E[F].addEventListener("mousedown",J=>{Li(L,F,r),Wo(F),J.preventDefault()})})(V);for(var at=document.getElementsByClassName("quicMenu-align"),H=0;H<at.length-2;H++)(function(F){at[F].addEventListener("click",J=>{Li(at,F,r),D0(F),setTimeout(()=>{Li(at,F,"")},100),J.preventDefault()})})(H);at[6].addEventListener("click",F=>{Li(at,6,r),f.shiftDown==!1?f.shiftDown=!0:(f.shiftDown=!1,F.preventDefault())});for(var A=document.getElementsByClassName("liveMenuIcon"),q=0;q<A.length;q++)(function(F){A[F].addEventListener("touchstart",J=>{Li(A,F,r),J.preventDefault()}),A[F].addEventListener("touchend",J=>{Li(A,F,""),Wd(F),J.preventDefault()}),A[F].addEventListener("mousedown",J=>{Li(A,F,r),J.preventDefault()}),A[F].addEventListener("mouseup",J=>{Li(A,F,""),Wd(F),J.preventDefault()})})(q)}function Of(){return window.screen.width>1e3?(_n.modulePropertyInner="#moduleProperty-inner",_n.PlotAreaId="plotArea",_n.plotID="plot",_n.tdLog="#timing-diagram-log"):(_n.modulePropertyInner="#moduleProperty-inner-2",_n.PlotAreaId="plotArea-touchpanel",_n.plotID="plot-touchpanel",_n.tdLog="#touch-timing-diagram-log"),_n}function Ed(i){switch(i){case 0:return document.getElementById("TouchCe-panel");case 1:return document.getElementById("touchElement-property");case 2:return document.getElementById("touchtD-popover");case 3:return document.getElementById("quickmenu-Popover")}return 0}function Wo(i){if(i!=-1){$("#Help").removeClass("show");var t=Ed(i);t.style.visibility==="visible"?t.style.visibility="hidden":t.style.visibility="visible"}for(var n=0;n<4;n++)if(n!==i){var r=Ed(n);r.style.visibility="hidden"}}function Li(i,t,n){i[t].style.backgroundColor===n?i[t].style.backgroundColor="":i[t].style.backgroundColor=n;for(var r=0;r<i.length;r++)r!=t&&(i[r].style.backgroundColor="")}function Wd(i){switch(i){case 0:globalScope.centerFocus(!1),be(!0),bi(!0);break;case 1:Ho();break;case 2:Za();break;case 3:Ua();break}}function D0(i){switch(i){case 0:pe.save();break;case 1:pe.saveOffline();break;case 2:pe.createOpenLocalPrompt();break;case 3:dl();break;case 4:document.execCommand("copy"),f.shiftDown=!1,Lh=!0;break;case 5:sl(localStorage.getItem("clipboardData")),Lh=!1;break}}function T0(i){switch(i){case 0:pe.newProject(),xi();break;case 1:pe.save();break;case 2:pe.saveOffline();break;case 3:pe.createOpenLocalPrompt(),xi();break;case 4:pe.clearProject(),xi();break;case 5:pe.recoverProject(),xi();break;case 6:pe.newCircuit(),xi();break;case 7:pe.newVerilogModule(),xi();break;case 8:pe.createSubCircuitPrompt(),xi();break;case 9:pe.createCombinationalAnalysisPrompt(),xi();break;case 10:pe.bitconverter(),xi();break;case 11:dl(),xi();break;case 12:pe.colorThemes(),xi();break;case 13:pe.generateVerilog(),xi();break;case 14:pe.showTourGuide(),xi();break;case 15:window.open("https://docs.circuitverse.org");break;case 16:window.open("https://learn.circuitverse.org");break;case 17:window.open("https://circuitverse.org/forum");break;default:xi();break}}function xi(){Ya[0].style.height="0",Ai.classList.remove("active")}var _0=window.devicePixelRatio||1;function Oe(i){return i*_0}var Oh=100,In=Oe(20),su=Oe(2),dn=Oe(20),ru=Oe(5),qa=dn-2*ru,Eh=Oe(75),An=Oe(30),P0="black",Md="#eee",vh="black",I0="cyan",Qi=Eh+su,mi=Of();function Ef(i){return In+(dn+su)*i}function Ad(i){return Ef(i)+su}function Pn(i){return Qi+(i-Qt.cycleOffset)*An}function Nd(i){dn+=i?5:-5,i?dn=Math.min(Oe(60),dn):dn=Math.max(Oe(20),dn),qa=dn-2*ru,Qt.resize()}const Qt={cycleOffset:0,DPR:window.devicePixelRatio||1,canvas:document.getElementById(mi.PlotAreaId),cycleCount:0,cycleTime:0,executionStartTime:0,autoScroll:!0,width:0,height:0,unitUsed:0,cycleUnit:1e3,mouseDown:!1,mouseX:0,mouseDownX:0,mouseDownTime:0,reset(){this.cycleCount=0,this.cycleTime=new Date().getTime();for(var i=0;i<globalScope.Flag.length;i++)globalScope.Flag[i].plotValues=[[0,globalScope.Flag[i].inp1.value]],globalScope.Flag[i].cachedIndex=0;this.unitUsed=0,this.resume(),this.resize()},resume(){this.autoScroll=!0},pause(){this.autoScroll=!1,Qt.scrollAcc=0},nextCycle(){this.cycleCount++,this.cycleTime=new Date().getTime()},setExecutionTime(){this.executionStartTime=new Date().getTime()},zoomIn(){An+=Oe(2)},zoomOut(){An-=Oe(2)},download(){var i=this.canvas.toDataURL("image/png");const t=document.createElement("a");t.href=i,t.download="waveform.png",t.click()},resize(){var i=this.height,t=this.width;this.width=document.getElementById(mi.plotID).clientWidth*this.DPR,this.height=Ef(globalScope.Flag.length),!(i==this.height&&t==this.width)&&(this.canvas.width=this.width,this.canvas.height=this.height,document.getElementById(mi.PlotAreaId).style.height=this.canvas.height/this.DPR,document.getElementById(mi.PlotAreaId).style.width=this.canvas.width/this.DPR,this.plot())},setup(){this.canvas=document.getElementById(mi.PlotAreaId),embed||(this.ctx=this.canvas.getContext("2d")),this.timeOutPlot=setInterval(()=>{Qt.plot()},Oh),this.reset()},getPlotTime(i){var t=this.cycleCount;t+=i/this.cycleUnit;var n=f.timePeriod,r=this.executionStartTime-this.cycleTime,h=r/n;return t+=h,t},calibrate(){var i=Math.max(20,Math.round(this.unitUsed*3));this.cycleUnit=i,$("#timing-diagram-units").val(i),this.reset()},getCurrentTime(){var i=this.cycleCount,t=f.timePeriod,n=new Date().getTime()-this.cycleTime,r=n/t;return i+=r,i},update(){this.resize();var i="#dc5656",t="#42b983";this.unitUsed=Math.max(this.unitUsed,f.simulationQueue.time);var n=this.unitUsed,r=this.cycleUnit,h=Math.round(n*1e4/r)/100;if($(mi.tdLog).html(`Utilization: ${Math.round(n)} Units (${h}%)`),h>=90||h<=10){var c=Math.max(20,Math.round(n*3));if($(mi.tdLog).append(` Recommended Units: ${c}`),$(mi.tdLog).css("background-color",i),h>=100){this.clear();return}}else $(mi.tdLog).css("background-color",t);var g=this.width,v=this.getCurrentTime();this.autoScroll?this.cycleOffset=Math.max(0,v-(g-Qi)/An):Qt.mouseDown||(this.cycleOffset-=Qt.scrollAcc,Qt.scrollAcc*=.95,this.cycleOffset<0&&(Qt.scrollAcc=this.cycleOffset/5),Math.abs(this.cycleOffset)<.01&&(this.cycleOffset=0))},render(){var{width:i,height:t}=this;this.canvas.height=t,this.canvas.width=i;var n=this.getCurrentTime();this.clear();var r=this.ctx;r.fillStyle=P0,r.fillRect(0,0,i,t),r.lineWidth=Oe(1),r.font=`${Oe(15)}px Raleway`,r.textAlign="left",r.fillStyle=Md,r.fillRect(Qi,0,this.canvas.width,In),r.fillRect(0,0,Eh,In),r.fillStyle=vh,r.fillText("Time",Oe(5),In*.7),r.font=`${Oe(10)}px Times New Roman`,r.strokeStyle=vh,r.textAlign="center";for(var h=Math.floor(Qt.cycleOffset);Pn(h)<=i;h++){var c=Pn(h);c>=Qi&&(r.fillText(`${h}`,c,In-Oe(15)/2),r.beginPath(),r.moveTo(c,In-Oe(5)),r.lineTo(c,In),r.stroke());for(var g=1;g<5;g++){var v=c+Math.round(g*An/5);v>=Qi&&(r.beginPath(),r.moveTo(v,In-Oe(2)),r.lineTo(v,In),r.stroke())}}r.textAlign="left";for(var h=0;h<globalScope.Flag.length;h++){var w=Ad(h);r.fillStyle=Md,r.fillRect(0,w,Eh,dn),r.fillStyle=vh,r.fillText(globalScope.Flag[h].identifier,Oe(5),w+dn*.7)}const D=0,T=1,R=3;r.strokeStyle=I0,r.textAlign="center";for(var W=Math.min(Pn(n),i),h=0;h<globalScope.Flag.length;h++){var L=globalScope.Flag[h].plotValues,w=Ad(h)+ru,E=w,V=w+qa/2,at=w+qa,H=D,A,g=0;for(globalScope.Flag[h].cachedIndex&&(g=globalScope.Flag[h].cachedIndex);g+1<L.length&&Pn(L[g][0])<Qi;)g++;for(;g>0&&Pn(L[g][0])>Qi;)g--;for(globalScope.Flag[h].cachedIndex=g;g<L.length;g++){var c=Pn(L[g][0]);if(c<Qi){if(g+1!=L.length){var v=Pn(L[g+1][0]);if(v<Qi)continue}c=Qi}var q=L[g][1];if(q===void 0){H==T&&r.stroke(),H=D;continue}if(globalScope.Flag[h].bitWidth==1){if(c>W)break;var F=q==1?E:at;H==D?(H=T,r.beginPath(),r.moveTo(c,F)):(r.lineTo(c,A),r.lineTo(c,F)),A=F}else{var W;g+1==L.length?W=Pn(n):W=Pn(L[g+1][0]);var J=qa/2;r.beginPath(),r.moveTo(W,V),r.lineTo(W-J,E),r.lineTo(c+J,E),r.lineTo(c,V),r.lineTo(c+J,at),r.lineTo(W-J,at),r.closePath(),r.stroke();var v=Math.max(c,Qi),St=Math.min(W,i),ot=(v+St)/2;r.font=`${Oe(9)}px Times New Roman`,r.fillStyle="white",r.fillText(Ao.dec2hex(q),ot,V+Oe(3))}if(c>i){H=R,r.stroke();break}}H==T&&(globalScope.Flag[h].bitWidth==1&&r.lineTo(W,A),r.stroke())}},plot(){if(!embed){if(globalScope.Flag.length===0){this.canvas.width=0,this.canvas.height=0;return}this.update(),this.render()}},clear(){this.ctx.clearRect(0,0,Qt.canvas.width,Qt.canvas.height)}};function L0(){$(".timing-diagram-smaller").on("click",()=>{$("#plot").width(Math.max($("#plot").width()-20,560)),Qt.resize()}),$(".timing-diagram-larger").on("click",()=>{$("#plot").width($("#plot").width()+20),Qt.resize()}),$(".timing-diagram-small-height").on("click",()=>{Nd(0)}),$(".timing-diagram-large-height").on("click",()=>{Nd(1)}),$(".timing-diagram-reset").on("click",()=>{Qt.reset()}),$(".timing-diagram-calibrate").on("click",()=>{Qt.calibrate()}),$(".timing-diagram-resume").on("click",()=>{Qt.resume()}),$(".timing-diagram-pause").on("click",()=>{Qt.pause()}),$(".timing-diagram-download").on("click",()=>{Qt.download()}),$(".timing-diagram-zoom-in").on("click",()=>{Qt.zoomIn()}),$(".timing-diagram-zoom-out").on("click",()=>{Qt.zoomOut()}),$("#timing-diagram-units").on("change paste keyup",function(){var i=parseInt($(this).val(),10);isNaN(i)||i<1||(Qt.cycleUnit=i)}),document.getElementById(mi.PlotAreaId).addEventListener("mousedown",i=>{var t=Qt.canvas.getBoundingClientRect(),n=Oe(i.clientX-t.left);Qt.scrollAcc=0,Qt.autoScroll=!1,Qt.mouseDown=!0,Qt.mouseX=n,Qt.mouseDownX=n,Qt.mouseDownTime=new Date().getTime()}),document.getElementById(mi.PlotAreaId).addEventListener("mouseup",i=>{Qt.mouseDown=!1;var t=new Date().getTime()-Qt.mouseDownTime,n=(Qt.mouseX-Qt.mouseDownX)/An;Qt.scrollAcc=n*Oh/t}),document.getElementById(mi.PlotAreaId).addEventListener("mousemove",i=>{var t=Qt.canvas.getBoundingClientRect(),n=Oe(i.clientX-t.left);Qt.mouseDown?(Qt.cycleOffset-=(n-Qt.mouseX)/An,Qt.mouseX=n):Qt.mouseDown=!1}),document.getElementById(mi.PlotAreaId).addEventListener("touchstart",i=>{var t=Qt.canvas.getBoundingClientRect(),n=Oe(i.touches[0].clientX-t.left);Qt.scrollAcc=0,Qt.autoScroll=!1,Qt.mouseDown=!0,Qt.mouseX=n,Qt.mouseDownX=n,Qt.mouseDownTime=new Date().getTime()}),document.getElementById(mi.PlotAreaId).addEventListener("touchend",i=>{Qt.mouseDown=!1;var t=new Date().getTime()-Qt.mouseDownTime,n=(Qt.mouseX-Qt.mouseDownX)/An;Qt.scrollAcc=n*Oh/t}),document.getElementById(mi.PlotAreaId).addEventListener("touchmove",i=>{var t=Qt.canvas.getBoundingClientRect(),n=Oe(i.touches[0].clientX-t.left);Qt.mouseDown?(Qt.cycleOffset-=(n-Qt.mouseX)/An,Qt.mouseX=n):Qt.mouseDown=!1})}const Wr={toggleLayoutMode:Kr,setProjectName:Ro,changeCircuitName:Nf,changeClockTime:om,deleteCurrentCircuit:Mf,changeClockEnable:As,changeInputSize:Fs,changeLightMode:Z0};var le={};function Wf(){le={}}function Vr(i){_e()&&Kr(),Ns()&&Ar(!1),Bs(),i!==globalScope.id&&($(".circuits").removeClass("current"),f.lastSelected=void 0,f.multipleObjectSelections=[],f.copyList=[],globalScope=le[i],globalScope.verilogMetadata.isVerilogCircuit&&Ar(!0),globalScope.isVisible()&&$(`#${i}`).addClass("current"),ze(!0),gl(!0),Ei(!0),tn(!1),f.lastSelected=globalScope.root,embed||(Rn(f.lastSelected),Go(),Qt.reset()),be(!0),ge(),Bh())}function Mf(i=globalScope.id){const t=le[i];if(Object.keys(le).length<=1){li("At least 2 circuits need to be there in order to delete a circuit.");return}let n="";for(h in le)h!=t.id&&le[h].checkDependency(t.id)&&(n===""?n=le[h].name:n+=`, ${le[h].name}`);if(n){n=`
The following circuits are depending on '${t.name}': ${n}
Delete subcircuits of ${t.name} before trying to delete ${t.name}`,alert(n);return}if(confirm(`Are you sure want to close: ${t.name}
This cannot be undone.`)){if(t.verilogMetadata.isVerilogCircuit){t.initialize();for(var h in t.verilogMetadata.subCircuitScopeIds)delete le[h]}$(`#${t.id}`).remove(),delete le[t.id],Vr(Object.keys(le)[0]),Ce("Circuit was successfully closed")}else Ce("Circuit was not closed")}function Af(){f.lastSelected=void 0,ds(),embed||(Rn(f.lastSelected),Go(),Qt.reset())}function ds(i,t,n=!1,r=!1){if(_e()&&Kr(),Ns()&&Ar(!1),i=i||prompt("Enter circuit name:","Untitled-Circuit"),i=zs(Rr(i)),!i)return;const h=new Hs(i);if(t&&(h.id=t),le[h.id]=h,n&&(h.verilogMetadata.isVerilogCircuit=!0,h.verilogMetadata.isMainCircuit=r),globalScope=h,$(".circuits").removeClass("current"),!n||r){if(embed){var c=`<div style='' class='circuits toolbarButton current' draggable='true' id='${h.id}'><span class='circuitName noSelect'>${Ah(i,18)}</span></div>`;$("#tabsBar").append(c),$("#tabsBar").addClass("embed-tabs")}else{var c=`<div style='' class='circuits toolbarButton current' draggable='true' id='${h.id}'><span class='circuitName noSelect'>${Ah(i,18)}</span><span class ='tabsCloseButton' id='${h.id}'  >x</span></div>`;$("#tabsBar").children().last().before(c)}$(".circuits").off("click"),$(".circuitName").off("click"),$(".tabsCloseButton").off("click"),$(".circuits").on("click",function(){Vr(this.id)}),$(".circuitName").on("click",g=>{f.lastSelected=globalScope.root,setTimeout(()=>{document.getElementById("circname").select()},100)}),$(".tabsCloseButton").on("click",function(g){g.stopPropagation(),Mf(this.id)}),embed||Rn(h.root),tn(!1)}return h}function Nf(i,t=globalScope.id){i=i||"Untitled",i=zs(Rr(i)),$(`#${t} .circuitName`).html(`${Ah(i,18)}`),le[t].name=i}class Hs{constructor(t="localScope",n=void 0){this.restrictedCircuitElementsUsed=[],this.id=n||Math.floor(Math.random()*1e11+1),this.CircuitElement=[],this.name=t,this.root=new Ht(0,0,this,"RIGHT",1),this.backups=[],this.history=[],this.timeStamp=new Date().getTime(),this.verilogMetadata={isVerilogCircuit:!1,isMainCircuit:!1,code:"// Write Some Verilog Code Here!",subCircuitScopeIds:[]},this.ox=0,this.oy=0,this.scale=DPR,this.stack=[],this.initialize(),this.layout={width:100,height:40,title_x:50,title_y:13,titleEnabled:!0}}isVisible(){return this.verilogMetadata.isVerilogCircuit?this.verilogMetadata.isMainCircuit:!0}initialize(){this.tunnelList={},this.pending=[],this.nodes=[],this.allNodes=[],this.wires=[];for(let t=0;t<moduleList.length;t++)this[moduleList[t]]=[]}reset(){for(let t=0;t<this.allNodes.length;t++)this.allNodes[t].reset();for(let t=0;t<this.Splitter.length;t++)this.Splitter[t].reset();for(let t=0;t<this.SubCircuit.length;t++)this.SubCircuit[t].reset()}addInputs(){for(let n=0;n<inputList.length;n++)for(var t=0;t<this[inputList[n]].length;t++)f.simulationQueue.add(this[inputList[n]][t],0);for(let n=0;n<this.SubCircuit.length;n++)this.SubCircuit[n].addInputs()}clockTick(){for(let t=0;t<this.Clock.length;t++)this.Clock[t].toggleState();for(let t=0;t<this.SubCircuit.length;t++)this.SubCircuit[t].localScope.clockTick()}checkDependency(t){if(t===this.id)return!0;for(let n=0;n<this.SubCircuit.length;n++)if(this.SubCircuit[n].id===t)return!0;for(let n=0;n<this.SubCircuit.length;n++)if(le[this.SubCircuit[n].id].checkDependency(t))return!0;return!1}getDependencies(){var t=[];for(let n=0;n<this.SubCircuit.length;n++)t.push(this.SubCircuit[n].id),t.extend(le[this.SubCircuit[n].id].getDependencies());return eb(t)}fixLayout(){var t=20;for(let n=0;n<this.Input.length;n++)t=Math.max(this.Input[n].layoutProperties.y,t);for(let n=0;n<this.Output.length;n++)t=Math.max(this.Output[n].layoutProperties.y,t);t!==this.layout.height&&(this.layout.height=t+10)}centerFocus(t=!0){if(!_e()){Br(this);var n=embed?0:60*DPR,r=f.minWidth||0,h=f.minHeight||0,c=f.maxWidth||0,g=f.maxHeight||0,v=c-r+75*DPR,w=g-h+75*DPR;this.scale=Math.min(width/v,(height-n)/w),t||(this.scale=Math.min(this.scale,DPR)),this.scale=Math.max(this.scale,DPR/10),this.ox=-r*this.scale+(width-(c-r)*this.scale)/2,this.oy=-h*this.scale+(height-n-(g-h)*this.scale)/2}}loadCircuit(t){t?Nn(t):alert("Invalid data")}previous(){const t=localStorage.getItem("autosave");if(t){const n=JSON.parse(t);Nn(n),localStorage.removeItem("autosave")}}detectCycle(){const t={},n=[];for(let D=0;D<globalScope.allNodes.length;D++){const T=globalScope.allNodes[D].id;for(let R=0;R<globalScope.allNodes[D].connections.length;R++){const W=globalScope.allNodes[D].connections[R].id;t[T]?t[T].push(W):t[T]=[W]}}const r=[],h=[];for(const D in t)if(t[D].length===1&&h.push(D),!c(r.flat(),D)){const R=[D];g(t,D,r.flat(),R),r.push(R)}for(let D=0;D<h.length-1;D++)for(let T=D+1;T<h.length;T++)if(v(r,h[D],h[T])){const R=this.findNodeIndexById(h[D]),W=this.findNodeIndexById(h[T]);globalScope.allNodes[R].parent===globalScope.allNodes[W].parent&&n.push(w(t,h[D],h[T]))}function c(D,T){return D.includes(T)}function g(D,T,R,W){if(R.push(T),D[T])for(let L=0;L<D[T].length;L++){const E=D[T][L];c(R,E)||(W.push(E),g(D,E,R,W))}}function v(D,T,R){for(const W of D)if(W.includes(T)&&W.includes(R))return!0;return!1}function w(D,T,R,W=[]){if(T===R)return W.push(R),W;W.push(T);for(const L of D[T])if(!W.includes(L)){const E=w(D,L,R,W);if(E)return E}return W.pop(),[]}return n.length?(this.highlightNodes(n),n):"No cycle found"}highlightNodes(t){const n=[];t.forEach(r=>{const h=r.map(c=>this.findNodeIndexById(c));n.push(h)}),n.forEach(r=>{r.forEach(h=>{globalScope.allNodes[h].highlighted=!0})})}findNodeIndexById(t){for(let n=0;n<globalScope.allNodes.length;n++)if(globalScope.allNodes[n].id===t)return n;return"Not found"}getCurrentlySelectedComponent(){return f.lastSelected}getAllSelectedComponents(){return f.multipleObjectSelections}modifyCurrentlySelectedComponent(t,n){const r=globalScope.getCurrentlySelectedComponent();if(r.objectType==="Node"){const h=r.id,c=this.findNodeIndexById(h);globalScope.allNodes[c][t]=n;return}for(const h in globalScope){const c=globalScope[h];Array.isArray(c)&&c.length&&c.forEach((g,v)=>{g===r&&(c[v][t]=n)})}}}function Za(i=globalScope){if(_e()||i.backups.length<2)return;const t=globalScope.ox,n=globalScope.oy,r=globalScope.scale;globalScope.ox=0,globalScope.oy=0;const h=new Hs(i.name);loading=!0;const c=i.backups.pop();i.history.push(c),i.backups.length!==0&&rs(h,JSON.parse(i.backups[i.backups.length-1])),h.backups=i.backups,h.history=i.history,h.id=i.id,h.name=i.name,h.testbenchData=i.testbenchData,le[i.id]=h,globalScope=h,globalScope.ox=t,globalScope.oy=n,globalScope.scale=r,loading=!1,Ei(!0),Ws()}const ts={smartDropXX:50,smartDropYY:80};ts.smartDropXX=50;ts.smartDropYY=80;var Ae={x:0,y:0,visible:!1};function Rf(){var i=document.getElementById("contextMenu");i.style="opacity:0;",setTimeout(()=>{i.style="visibility:hidden;",Ae.visible=!1},200)}function O0(){if(_e())return!1;$("#contextMenu").css({visibility:"visible",opacity:1});var i=$("#simulationArea").height()-$("#contextMenu").height()-10,t=$("#simulationArea").width()-$("#contextMenu").width()-10,n,r,h,c;return Ae.y>i&&Ae.x<=t?(r=Ae.x,c=$(window).height()-Ae.y,$("#contextMenu").css({left:`${r}px`,bottom:`${c}px`,right:"auto",top:"auto"})):Ae.y>i&&Ae.x>t?(c=$(window).height()-Ae.y,h=$(window).width()-Ae.x,$("#contextMenu").css({left:"auto",bottom:`${c}px`,right:`${h}px`,top:"auto"})):Ae.y<=i&&Ae.x<=t?(r=Ae.x,n=Ae.y,$("#contextMenu").css({left:`${r}px`,bottom:"auto",right:"auto",top:`${n}px`})):(h=$(window).width()-Ae.x,n=Ae.y,$("#contextMenu").css({left:"auto",bottom:"auto",right:`${h}px`,top:`${n}px`})),Ae.visible=!0,!1}function E0(i,t=""){Rf(),i===0?document.execCommand("copy"):i===1?document.execCommand("cut"):i===2?sl(localStorage.getItem("clipboardData")):i===3?Ho():i===4?Za():i===5?Af():i===6?pe.createSubCircuitPrompt():i===7&&globalScope.centerFocus(!1)}window.menuItemClicked=E0;function W0(){var i=document.getElementById("contextMenu");document.addEventListener("mousedown",t=>{!(t.clientX>=Ae.x&&t.clientX<=Ae.x+i.offsetWidth&&t.clientY>=Ae.y&&t.clientY<=Ae.y+i.offsetHeight)&&Ae.visible&&t.which!==3&&Rf(),Ae.x=t.clientX,Ae.y=t.clientY}),document.getElementById("canvasArea").oncontextmenu=O0,$("#sideBar").resizable({handles:"e"}),$("#menu, #subcircuitMenu").accordion({collapsible:!0,active:!1,heightStyle:"content"}),$("#menu2, #subcircuitMenu").accordion({collapsible:!0,active:!1,heightStyle:"content"}),$(".logixModules").mousedown(Bf),$(".logixButton").on("click",function(){pe[this.id]()}),$(".applyTheme").on("change",function(){zv()}),$(".logixModules").hover(function(){var{tooltipText:t}=ki[this.id].prototype;t&&($("#Help").addClass("show"),$("#Help").empty(),$("#Help").append(t))}),$(".logixModules").mouseleave(()=>{$("#Help").removeClass("show")}),$("#report").on("click",function(){var t=$("#issuetext").val(),n=$("#emailtext").val();t+=`
Email:`+n,t+=`
URL: `+window.location.href,t+=`
User Id: ${window.user_id}`,A0(t),$("#issuetext").hide(),$("#emailtext").hide(),$("#report").hide(),$("#report-label").hide(),$("#email-label").hide()}),$(".issue").on("hide.bs.modal",function(t){listenToSimulator=!0,$("#result").html(""),$("#issuetext").show(),$("#emailtext").show(),$("#issuetext").val(""),$("#emailtext").val(""),$("#report").show(),$("#report-label").show(),$("#email-label").show()}),$("#reportIssue").on("click",function(){listenToSimulator=!1}),M0(),g0(),ob()}function Bf(){f.lastSelected&&f.lastSelected.newElement&&f.lastSelected.delete();var i=new ki[this.id];f.lastSelected=i,ts.smartDropXX+=70,ts.smartDropXX/globalScope.scale>width&&(ts.smartDropXX=50,ts.smartDropYY+=80)}var Hf;function Ja(i){Hf=i}function Bo(){return Hf}var De=Of();function Rn(i){if(i===Bo())return;if(ou(),Ja(i),_e()){if(f.lastSelected===void 0||["Wire","CircuitElement","Node"].indexOf(f.lastSelected.objectType)!==-1){$("#moduleProperty").hide(),$("#layoutDialog").show();return}if($("#moduleProperty").show(),$("#layoutDialog").hide(),$(De.modulePropertyInner).append("<div class='moduleProperty-header'>"+i.objectType+"</div>"),i.subcircuitMutableProperties&&i.canShowInSubcircuit){for(let c in i.subcircuitMutableProperties){var t=i.subcircuitMutableProperties[c];if(i.subcircuitMutableProperties[c].type=="number"){var n="<p>"+t.name+"<input class='objectPropertyAttribute' type='number'  name='"+t.func+"' min='"+(t.min||0)+"' max='"+(t.max||200)+"' value="+i[c]+"></p>";$(De.modulePropertyInner).append(n)}else if(i.subcircuitMutableProperties[c].type=="text"){var n="<p>"+t.name+"<input class='objectPropertyAttribute' type='text'  name='"+t.func+"' maxlength='"+(t.maxlength||200)+"' value="+i[c]+"></p>";$(De.modulePropertyInner).append(n)}else if(i.subcircuitMutableProperties[c].type=="checkbox"){var n="<p>"+t.name+"<label class='switch'> <input type='checkbox' "+["","checked"][i.subcircuitMetadata.showLabelInSubcircuit+0]+" class='objectPropertyAttributeChecked' name='"+t.func+"'> <span class='slider'></span> </label></p>";$(De.modulePropertyInner).append(n)}}if(!i.labelDirectionFixed){i.subcircuitMetadata.labelDirection||(i.subcircuitMetadata.labelDirection=i.labelDirection);var n=$("<select class='objectPropertyAttribute' name='newLabelDirection'><option value='RIGHT' "+["","selected"][+(i.subcircuitMetadata.labelDirection=="RIGHT")]+" >RIGHT</option><option value='DOWN' "+["","selected"][+(i.subcircuitMetadata.labelDirection=="DOWN")]+" >DOWN</option><option value='LEFT' <option value='RIGHT'"+["","selected"][+(i.subcircuitMetadata.labelDirection=="LEFT")]+" >LEFT</option><option value='UP' <option value='RIGHT'"+["","selected"][+(i.subcircuitMetadata.labelDirection=="UP")]+" >UP</option></select>");n.val(i.subcircuitMetadata.labelDirection),$(De.modulePropertyInner).append("<p>Label Direction: "+$(n).prop("outerHTML")+"</p>")}}}else if(f.lastSelected===void 0||["Wire","CircuitElement","Node"].indexOf(f.lastSelected.objectType)!==-1)$("#moduleProperty").show(),$(De.modulePropertyInner).append("<div class='moduleProperty-header'>Project Properties</div>"),$(De.modulePropertyInner).append(`<p><span>Project:</span> <input id='projname' class='objectPropertyAttribute' type='text' autocomplete='off' name='setProjectName'  value='${Rs()||"Untitled"}' aria-label='project'></p>`),$(De.modulePropertyInner).append(`<p><span>Circuit:</span> <input id='circname' class='objectPropertyAttribute' type='text' autocomplete='off' name='changeCircuitName'  value='${globalScope.name||"Untitled"}' aria-label='circuit'></p>`),$(De.modulePropertyInner).append(`<p><span>Clock Time (ms):</span> <input class='objectPropertyAttribute' min='50' type='number' style='width:100px' step='10' name='changeClockTime'  value='${f.timePeriod}' aria-label='clock time'></p>`),$(De.modulePropertyInner).append(`<p><span>Clock Enabled:</span> <label class='switch'> <input type='checkbox' ${["","checked"][f.clockEnabled+0]} class='objectPropertyAttributeChecked' name='changeClockEnable' aria-label='clock enabled'> <span class='slider'></span></label></p>`),$(De.modulePropertyInner).append(`<p><span>Lite Mode:</span> <label class='switch'> <input type='checkbox' ${["","checked"][lightMode+0]} class='objectPropertyAttributeChecked' name='changeLightMode' aria-label='lite mode'> <span class='slider'></span> </label></p>`),$(De.modulePropertyInner).append("<p><button type='button' class='objectPropertyAttributeChecked btn btn-xs custom-btn--primary' name='toggleLayoutMode' >Edit Layout</button><button type='button' class='objectPropertyAttributeChecked btn btn-xs custom-btn--tertiary' name='deleteCurrentCircuit' >Delete Circuit</button> </p>");else{$("#moduleProperty").show(),$(De.modulePropertyInner).append(`<div class='moduleProperty-header'>${i.objectType}</div>`),i.fixedBitWidth||$(De.modulePropertyInner).append(`<p><span>BitWidth:</span> <input class='objectPropertyAttribute' type='number'  name='newBitWidth' min='1' max='32' value=${i.bitWidth} aria-label='bitwidth'></p>`),i.changeInputSize&&$(De.modulePropertyInner).append(`<p><span>Input Size:</span> <input class='objectPropertyAttribute' type='number'  name='changeInputSize' min='2' max='10' value=${i.inputSize} aria-label='InputSize'></p>`),i.propagationDelayFixed||$(De.modulePropertyInner).append(`<p><span>Delay:</span> <input class='objectPropertyAttribute' type='number'  name='changePropagationDelay' min='0' max='100000' value=${i.propagationDelay} aria-label='propagation Delay'></p>`),i.disableLabel||$(De.modulePropertyInner).append(`<p><span>Label:</span> <input class='objectPropertyAttribute' type='text' name='setLabel' autocomplete='off' value='${pl(i.label)}' aria-label='label'></p>`);var n;if(i.labelDirectionFixed||(n=$(`<select class='objectPropertyAttribute' name='newLabelDirection'><option value='RIGHT' ${["","selected"][+(i.labelDirection==="RIGHT")]} >RIGHT</option><option value='DOWN' ${["","selected"][+(i.labelDirection==="DOWN")]} >DOWN</option><option value='LEFT' <option value='RIGHT'${["","selected"][+(i.labelDirection==="LEFT")]} >LEFT</option><option value='UP' <option value='RIGHT'${["","selected"][+(i.labelDirection==="UP")]} >UP</option></select>`),n.val(i.labelDirection),$(De.modulePropertyInner).append(`<p><span>Label Direction:</span> ${$(n).prop("outerHTML")}</p>`)),i.directionFixed?i.orientationFixed||(n=$(`<select class='objectPropertyAttribute' name='newDirection'><option value='RIGHT' ${["","selected"][+(i.direction==="RIGHT")]} >RIGHT</option><option value='DOWN' ${["","selected"][+(i.direction==="DOWN")]} >DOWN</option><option value='LEFT' <option value='RIGHT'${["","selected"][+(i.direction==="LEFT")]} >LEFT</option><option value='UP' <option value='RIGHT'${["","selected"][+(i.direction==="UP")]} >UP</option></select>`),$(De.modulePropertyInner).append(`<p><span>Orientation:</span> ${$(n).prop("outerHTML")}</p>`)):(n=$(`<select class='objectPropertyAttribute' name='newDirection'><option value='RIGHT' ${["","selected"][+(i.direction==="RIGHT")]} >RIGHT</option><option value='DOWN' ${["","selected"][+(i.direction==="DOWN")]} >DOWN</option><option value='LEFT' <option value='RIGHT'${["","selected"][+(i.direction==="LEFT")]} >LEFT</option><option value='UP' <option value='RIGHT'${["","selected"][+(i.direction==="UP")]} >UP</option></select>`),$(De.modulePropertyInner).append(`<p><span>Direction:</span> ${$(n).prop("outerHTML")}</p>`)),i.mutableProperties)for(const g in i.mutableProperties){var t=i.mutableProperties[g];i.mutableProperties[g].type==="number"?(n=`<p><span>${t.name}</span><input class='objectPropertyAttribute' type='number'  name='${t.func}' min='${t.min||0}' max='${t.max||200}' value=${i[g]}></p>`,$(De.modulePropertyInner).append(n)):i.mutableProperties[g].type==="text"?(n=`<p><span>${t.name}</span><input class='objectPropertyAttribute' type='text' autocomplete='off'  name='${t.func}' maxlength='${t.maxlength||200}' value=${i[g]}></p>`,$(De.modulePropertyInner).append(n)):i.mutableProperties[g].type==="button"?(n=`<p class='btn-parent'><button class='objectPropertyAttribute btn custom-btn--secondary' type='button'  name='${t.func}'>${t.name}</button></p>`,$(De.modulePropertyInner).append(n)):i.mutableProperties[g].type==="textarea"&&(n=`<p><span>${t.name}</span><textarea class='objectPropertyAttribute' type='text' autocomplete='off' rows="9" name='${t.func}'>${i[g]}</textarea></p>`,$(De.modulePropertyInner).append(n))}}var r=i&&i.helplink;r&&($(De.modulePropertyInner).append('<p class="btn-parent"><button id="HelpButton" class="btn btn-primary btn-xs" type="button" >&#9432 Help</button></p>'),$("#HelpButton").on("click",()=>{window.open(r)}));function h(){const c=$("[name='newBitWidth']");c===void 0||c.val()>32||c.val()<1||!$.isNumeric(c.val())?c.val(c.attr("old-val")):c.attr("old-val",c.val())}$(".objectPropertyAttribute").on("change keyup paste click",function(){h(),ge(),be(!0),Hi(1);let{value:c}=this;this.type==="number"&&(c=parseFloat(c)),f.lastSelected&&f.lastSelected[this.name]?f.lastSelected[this.name](c):Wr[this.name](c)}),$(".objectPropertyAttributeChecked").on("change keyup paste click",function(){this.name!=="toggleLabelInLayoutMode"&&(ge(),be(!0),Hi(1),f.lastSelected&&f.lastSelected[this.name]?f.lastSelected[this.name](this.value):Wr[this.name](this.checked))}),$(".objectPropertyAttributeChecked").on("click",function(){this.name==="toggleLabelInLayoutMode"&&(ge(),be(!0),Hi(1),f.lastSelected&&f.lastSelected[this.name]?f.lastSelected[this.name](this.value):Wr[this.name](this.checked))}),$(".moduleProperty input[type='number']").inputSpinner()}function ou(){$(De.modulePropertyInner).empty(),$("#moduleProperty").hide(),Ja(void 0),$(".objectPropertyAttribute").unbind("change keyup paste click")}function pl(i){return typeof i!="string"?"":i.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function Ho(){f.lastSelected&&!(f.lastSelected.objectType==="Node"&&f.lastSelected.type!==2)&&f.lastSelected.delete();for(var i=0;i<f.multipleObjectSelections.length;i++)f.multipleObjectSelections[i].objectType==="Node"&&f.multipleObjectSelections[i].type!==2||f.multipleObjectSelections[i].cleanDelete();f.multipleObjectSelections=[],f.lastSelected=void 0,Rn(f.lastSelected),be(!0),ge(),Ws()}function M0(){$("#dragQPanel").on("mousedown",()=>$(".quick-btn").draggable({disabled:!1,containment:"window"})).on("mouseup",()=>$(".quick-btn").draggable({disabled:!0})),_s(".elementPanel"),_s(".layoutElementPanel"),_s("#moduleProperty"),_s("#layoutDialog"),_s("#verilogEditorPanel"),_s(".timing-diagram-panel"),_s(".testbench-manual-panel"),$(".timing-diagram-panel .minimize").trigger("click"),Go(),$(".testbench-manual-panel .minimize").trigger("click"),$(".testbench-manual-panel .maximize").on("click",$h),$("#projectName").on("click",()=>{$("input[name='setProjectName']").focus().select()})}function _s(i){var t=`${i} .panel-header`,n=`${i} .minimize`,r=`${i} .maximize`,h=`${i} > .panel-body`;$(t).on("mousedown",()=>$(i).draggable({disabled:!1,containment:"window"})),$(t).on("mouseup",()=>$(i).draggable({disabled:!0})),$(i).on("mousedown",()=>{$(`.draggable-panel:not(${i})`).css("z-index","99"),$(i).css("z-index","100")});var c=!1;$(t).on("dblclick",()=>c?$(r).trigger("click"):$(n).trigger("click")),$(n).on("click",()=>{$(h).hide(),$(n).hide(),$(r).show(),c=!0}),$(r).on("click",()=>{$(h).show(),$(n).show(),$(r).hide(),c=!1})}function $f(){$(".navbar").show(),$(".modules").show(),$(".report-sidebar").show(),$("#tabsBar").show(),$("#exitViewBtn").remove(),$("#moduleProperty").show(),$(".timing-diagram-panel").show(),$(".testbench-manual-panel").show()}function zf(){const i="<button id='exitViewBtn' >Exit Full Preview</button>";$(".navbar").hide(),$(".modules").hide(),$(".report-sidebar").hide(),$("#tabsBar").hide(),$("#moduleProperty").hide(),$(".timing-diagram-panel").hide(),$(".testbench-manual-panel").hide(),$("#exitView").append(i),$("#exitViewBtn").on("click",$f)}function Ff(){$("#subcircuitMenu").empty();var i=!1;for(let t of circuitElementList){if(globalScope[t].length===0||!globalScope[t][0].canShowInSubcircuit)continue;let n="";n+=`<div class="panelHeader">${t}s</div>`,n+='<div class="panel">';let r=!1;for(let h=0;h<globalScope[t].length;h++)globalScope[t][h].subcircuitMetadata.showInSubcircuit||(n+=`<div class="icon subcircuitModule" id="${t}-${h}" data-element-id="${h}" data-element-name="${t}">`,n+=`<img src= "/img/${t}.svg">`,n+=`<p class="img__description">${globalScope[t][h].label!==""?globalScope[t][h].label:"unlabeled"}</p>`,n+="</div>",r=!0);n+="</div>",i=i||r,r&&$("#subcircuitMenu").append(n)}i?$("#subcircuitMenu").accordion("refresh"):$("#subcircuitMenu").append("<p>No layout elements available</p>"),$(".subcircuitModule").mousedown(function(){let t=this.dataset.elementName,n=this.dataset.elementId,r=globalScope[t][n];r.subcircuitMetadata.showInSubcircuit=!0,r.newElement=!0,f.lastSelected=r,this.parentElement.removeChild(this)})}async function A0(i){var t=Vh("jpeg","full",!1,1,!1).split(",")[1];let n;try{n=await $.ajax({url:"https://api.imgur.com/3/image",type:"POST",data:{image:t},dataType:"json",headers:{Authorization:"Client-ID 9a33b3b370f1054"}})}catch{console.error("Could not generate image, reporting anyway")}n&&(i+=`
`+n.data.link);let r;try{r=qr("Untitled")}catch(h){r=`Circuit data generation failed: ${h}`}$.ajax({url:"/simulator/post_issue",type:"POST",beforeSend:function(h){h.setRequestHeader("X-CSRF-Token",$('meta[name="csrf-token"]').attr("content"))},data:{text:i,circuit_data:r},success:function(h){$("#result").html("<i class='fa fa-check' style='color:green'></i> You've successfully submitted the issue. Thanks for improving our platform.")},failure:function(h){$("#result").html("<i class='fa fa-check' style='color:red'></i> There seems to be a network issue. Please reach out to us at support@ciruitverse.org")}})}var jf=!1;function Rd(i){jf=i}function _e(i){return jf}var yt;function Bd(i,t){return i===0?["left",5,5]:i===yt.layout.width?["right",-5,5]:t===0?["center",0,13]:["center",0,-6]}function N0(i=globalScope){!f.selected&&f.mouseDown?(f.selected=!0,f.lastSelected=i.root,f.hover=i.root):f.lastSelected===i.root&&f.mouseDown?(globalScope.ox=f.mouseRawX-f.mouseDownRawX+f.oldx,globalScope.oy=f.mouseRawY-f.mouseDownRawY+f.oldy,globalScope.ox=Math.round(globalScope.ox),globalScope.oy=Math.round(globalScope.oy),bi(!0),!embed&&!lightMode&&Ka.setup()):f.lastSelected===i.root&&(f.lastSelected=void 0,f.selected=!1,f.hover=void 0)}function R0(i=globalScope){if(_e()){var t=f.context;f.clear(),t.strokeStyle="black",t.fillStyle="white",t.lineWidth=Rt(3),t.beginPath(),Ee(t,0,0,yt.layout.width,yt.layout.height,0,0,"RIGHT"),t.fill(),t.stroke(),t.beginPath(),t.textAlign="center",t.fillStyle="black",yt.layout.titleEnabled&&Ut(t,i.name,yt.layout.title_x,yt.layout.title_y,11);var n;for(let r=0;r<yt.Input.length;r++)yt.Input[r].label&&(n=Bd(yt.Input[r].x,yt.Input[r].y),[t.textAlign]=n,Ut(t,yt.Input[r].label,yt.Input[r].x+n[1],yt.Input[r].y+n[2],12));for(let r=0;r<yt.Output.length;r++)yt.Output[r].label&&(n=Bd(yt.Output[r].x,yt.Output[r].y),[t.textAlign]=n,Ut(t,yt.Output[r].label,yt.Output[r].x+n[1],yt.Output[r].y+n[2],12));t.fill();for(let r=0;r<yt.Input.length;r++)yt.Input[r].draw();for(let r=0;r<yt.Output.length;r++)yt.Output[r].draw();Q0()&&tn();for(let r=0;r<yt.subElements.length;r++){yt.subElements[r].update();for(let h=0;h<yt.subElements[r].nodeList.length;h++)yt.subElements[r].nodeList[h].update()}!embed&&Bo()!=f.lastSelected&&f.lastSelected&&Rn(f.lastSelected);for(let r=0;r<circuitElementList.length;r++){if(globalScope[circuitElementList[r]].length===0||!globalScope[circuitElementList[r]][0].canShowInSubcircuit)continue;let h=circuitElementList[r];for(let c=0;c<globalScope[h].length;c++)globalScope[h][c].subcircuitMetadata.showInSubcircuit&&globalScope[h][c].drawLayoutMode()}}}function Gf(i=globalScope){if(_e()){au(!1);for(let t=0;t<yt.Input.length;t++)yt.Input[t].update();for(let t=0;t<yt.Output.length;t++)yt.Output[t].update();for(let t=0;t<circuitElementList.length;t++){if(globalScope[circuitElementList[t]].length===0||!globalScope[circuitElementList[t]][0].canShowInSubcircuit)continue;let n=circuitElementList[t];for(let r=0;r<globalScope[n].length;r++)globalScope[n][r].subcircuitMetadata.showInSubcircuit&&globalScope[n][r].layoutUpdate()}N0(i),R0(i)}}function B0(){yt.layout.width=100,yt.layout.height=Math.max(yt.Input.length,yt.Output.length)*20+20;for(let i=0;i<yt.Input.length;i++)yt.Input[i].x=0,yt.Input[i].y=i*20+20;for(let i=0;i<yt.Output.length;i++)yt.Output[i].x=yt.layout.width,yt.Output[i].y=i*20+20}function H0(){for(let i=0;i<yt.Input.length;i++)yt.Input[i].x===yt.layout.width&&(yt.Input[i].x+=10);for(let i=0;i<yt.Output.length;i++)yt.Output[i].x===yt.layout.width&&(yt.Output[i].x+=10);yt.layout.width+=10}function $0(){for(let i=0;i<yt.Input.length;i++)yt.Input[i].y===yt.layout.height&&(yt.Input[i].y+=10);for(let i=0;i<yt.Output.length;i++)yt.Output[i].y===yt.layout.height&&(yt.Output[i].y+=10);yt.layout.height+=10}function z0(){if(!(yt.layout.width<30)){for(let i=0;i<yt.Input.length;i++)if(yt.Input[i].x===yt.layout.width-10){Ce("No space. Move or delete some nodes to make space.");return}for(let i=0;i<yt.Output.length;i++)if(yt.Output[i].x===yt.layout.width-10){Ce("No space. Move or delete some nodes to make space.");return}for(let i=0;i<yt.Input.length;i++)yt.Input[i].x===yt.layout.width&&(yt.Input[i].x-=10);for(let i=0;i<yt.Output.length;i++)yt.Output[i].x===yt.layout.width&&(yt.Output[i].x-=10);yt.layout.width-=10}}function F0(){if(!(yt.layout.height<30)){for(let i=0;i<yt.Input.length;i++)if(yt.Input[i].y===yt.layout.height-10){Ce("No space. Move or delete some nodes to make space.");return}for(let i=0;i<yt.Output.length;i++)if(yt.Output[i].y===yt.layout.height-10){Ce("No space. Move or delete some nodes to make space.");return}for(let i=0;i<yt.Input.length;i++)yt.Input[i].y===yt.layout.height&&(yt.Input[i].y-=10);for(let i=0;i<yt.Output.length;i++)yt.Output[i].y===yt.layout.height&&(yt.Output[i].y-=10);yt.layout.height-=10}}function j0(){yt.layout.title_y-=5}function G0(){yt.layout.title_y+=5}function X0(){yt.layout.title_x+=5}function U0(){yt.layout.title_x-=5}function Y0(){yt.layout.titleEnabled=!yt.layout.titleEnabled}function q0(){_e()&&Kr()}function V0(){if(_e()){for(let i=0;i<yt.Input.length;i++)yt.Input[i].parent.layoutProperties.x=yt.Input[i].x,yt.Input[i].parent.layoutProperties.y=yt.Input[i].y;for(let i=0;i<yt.Output.length;i++)yt.Output[i].parent.layoutProperties.x=yt.Output[i].x,yt.Output[i].parent.layoutProperties.y=yt.Output[i].y;globalScope.layout={...yt.layout},Kr()}}function Kr(){ou(),_e()?(Rd(!1),$("#layoutDialog").fadeOut(),$(".layoutElementPanel").fadeOut(),$(".elementPanel").fadeIn(),$(".testbench-manual-panel").fadeIn(),window.screen.width>1e3||($(".ce-panel").fadeOut(),$("#touchMenu").fadeIn(),$(" #liveMenu").fadeIn(),$("#touchElement-property").fadeIn()),window.screen.width>1e3&&$(".timing-diagram-panel").fadeIn(),globalScope.centerFocus(!1),globalScope.verilogMetadata.isVerilogCircuit&&Ar(!0),tn()):(Rd(!0),Ar(!1),$("#layoutDialog").fadeIn(),$(".layoutElementPanel").fadeIn(),window.screen.width>1e3||($("#touchMenu").fadeOut(),$(" #liveMenu").fadeOut(),$("#touchElement-property").fadeOut()),$(".elementPanel").fadeOut(),$(".timing-diagram-panel").fadeOut(),$(".testbench-manual-panel").fadeOut(),Ff(),globalScope.ox=0,globalScope.oy=0,globalScope.scale=DPR*1.3,tn(),yt=new pm,$("#toggleLayoutTitle")[0].checked=yt.layout.titleEnabled),fs(globalScope,!0),ge()}function K0(){$("#decreaseLayoutWidth").on("click",()=>{z0()}),$("#increaseLayoutWidth").on("click",()=>{H0()}),$("#decreaseLayoutHeight").on("click",()=>{F0()}),$("#increaseLayoutHeight").on("click",()=>{$0()}),$("#layoutResetNodes").on("click",()=>{B0()}),$("#layoutTitleUp").on("click",()=>{j0()}),$("#layoutTitleDown").on("click",()=>{G0()}),$("#layoutTitleLeft").on("click",()=>{U0()}),$("#layoutTitleRight").on("click",()=>{X0()}),$("#toggleLayoutTitle").on("click",()=>{Y0()}),$("#saveLayout").on("click",()=>{V0()}),$("#cancelLayout").on("click",()=>{q0()}),$("#layoutDialog button").on("click",()=>{ge()}),$("#layoutDialog input").on("click",()=>{ge()})}var Mo=0;function Hi(i){Mo=i}var Xf=!1;function au(i){Xf=i}var tl=!1;function Hd(i){tl=i}var Wh=!0;function mn(i){Wh=i}var Uf=!0;function ze(i){Uf=i}var Mh=!0;function be(i){Mh=i}var lu=!0;function bi(i){lu=i}function Q0(){return lu}var Yf=!0;function Ei(i){Yf=i}var el=!1;function ls(i){el=i}function qf(){return el}var pn={x:void 0,y:void 0,string:void 0},Va=!0;function gl(i){return Va!=i?(Va=i,!0):(Va=i,!1)}function Z0(i){!i&&lightMode?(lightMode=!1,DPR=window.devicePixelRatio||1,globalScope.scale*=DPR):i&&!lightMode&&(lightMode=!0,globalScope.scale/=DPR,DPR=1,$("#miniMap").fadeOut("fast")),er()}function Vf(i){if(!(_e()||Ns())){var t=f.context;f.clear(),lu&&(bi(!1),tn()),pn={x:void 0,y:void 0,string:void 0};for(let r=0;r<renderOrder.length;r++)for(var n=0;n<i[renderOrder[r]].length;n++)i[renderOrder[r]][n].draw();pn.string!==void 0&&fm(t,pn.string,pn.x,pn.y),tl&&(t.beginPath(),t.lineWidth=2,t.strokeStyle="black",t.fillStyle="rgba(0,0,0,0.1)",Ee(t,f.mouseDownX,f.mouseDownY,f.mouseX-f.mouseDownX,f.mouseY-f.mouseDownY,0,0,"RIGHT"),t.stroke(),t.fill()),f.hover!==void 0?f.canvas.style.cursor="pointer":f.mouseDown?f.canvas.style.cursor="grabbing":f.canvas.style.cursor="default"}}function hu(i=globalScope){if(!f.selected&&f.mouseDown)f.selected=!0,f.lastSelected=i.root,f.hover=i.root,f.shiftDown?Hd(!0):embed||(Br(i),Ka.setup(),$("#miniMap").show());else if(f.lastSelected===i.root&&f.mouseDown)tl||(globalScope.ox=f.mouseRawX-f.mouseDownRawX+f.oldx,globalScope.oy=f.mouseRawY-f.mouseDownRawY+f.oldy,globalScope.ox=Math.round(globalScope.ox),globalScope.oy=Math.round(globalScope.oy),bi(!0),!embed&&!lightMode&&Ka.setup());else if(f.lastSelected===i.root&&(f.lastSelected=void 0,f.selected=!1,f.hover=void 0,tl)){Hd(!1);var t=f.mouseDownX,n=f.mouseX,r=f.mouseDownY,h=f.mouseY;if(t>n){const D=t;t=n,n=D}if(r>h){const D=r;r=h,h=D}for(let D=0;D<updateOrder.length;D++)for(var c=0;c<i[updateOrder[D]].length;c++){var g=i[updateOrder[D]][c];if(!f.multipleObjectSelections.contains(g)){var v,w;if(g.objectType==="Node")v=g.absX(),w=g.absY();else if(g.objectType!=="Wire")v=g.x,w=g.y;else continue;v>t&&v<n&&w>r&&w<h&&f.multipleObjectSelections.push(g)}}}}function $s(i=globalScope,t=!1){if(el||loading===!0)return;f.simulationQueue.reset(),Qt.setExecutionTime(),J0(i),(t||Yf)&&(i.reset(),f.simulationQueue.reset(),Ei(!1)),f.contentionPending=new ym,i.addInputs();let n=0,r;for(;!f.simulationQueue.isEmpty();){if(el){f.simulationQueue.reset();return}r=f.simulationQueue.pop(),r.resolve(),n++,n>1e6&&(li("Simulation Stack limit exceeded: maybe due to cyclic paths or contention"),Ei(!0))}if(f.contentionPending.size()>0){for(const[h,c]of f.contentionPending.nodes())h.highlighted=!0,c.highlighted=!0;Ei(!0),li("Contention Error: One or more bus contentions in the circuit (check highlighted nodes)")}}function J0(i){for(const t of i.allNodes)t.highlighted=!1}function ge(i=0,t=100,n){lightMode&&(t*=5);var r=_e()?Gf:fs;if(i){r();for(let h=0;h<i;h++)setTimeout(r,10+50*h)}Xf||(au(!0),setTimeout(n?()=>{n(),r()}:r,t))}function fs(i=globalScope,t=!1){if(au(!1),!(loading===!0||_e())){var n=!1;if(f.hover=void 0,Mo||t){Mo===2?Mo=0:Mo++;var r=i.wires.length;for(let h=0;h<i.wires.length;h++)i.wires[h].checkConnections(),i.wires.length!==r&&(r--,h--);ge()}if(Va||t){for(let h=0;h<i.SubCircuit.length;h++)i.SubCircuit[h].reset();gl(!1)}if(Wh||t)for(let h=0;h<updateOrder.length;h++)for(let c=0;c<i[updateOrder[h]].length;c++)n|=i[updateOrder[h]][c].update();(Wh||t)&&hu(i),!embed&&f.mouseDown&&f.lastSelected&&f.lastSelected!==globalScope.root&&(lightMode||$("#miniMap").fadeOut("fast")),Uf&&$s(),!embed&&Bo()!==f.lastSelected&&f.lastSelected&&f.lastSelected.objectType!=="Wire"&&(f.lastSelected.newElement&&(f.lastSelected.label=""),Rn(f.lastSelected)),Mh&&Vf(i),ze(!1),Mh=!1,mn(!1)}}window.globalScope=void 0;window.lightMode=!1;window.projectId=void 0;window.id=void 0;window.loading=!1;var bh,yh,wh;function hs(){for(var i="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<20;n++)i+=t.charAt(Math.floor(Math.random()*t.length));return i}function Rr(i=""){return i.replace(/(<([^>]+)>)/ig,"").trim()}function tb(){f.clockEnabled&&(qf()||_e()||(be(!0),globalScope.clockTick(),Qt.nextCycle(),$s(),ge(0,20)))}function li(i){if(ls(!0),i!==bh){wh&&clearTimeout(wh),$(".alert.alert-danger").fadeOut(()=>{$(this).remove()}),bh=i;var t=Math.floor(Math.random()*1e4);$("#MessageDiv").append(`<div class='alert alert-danger' role='alert' id='${t}'> ${i}</div>`),wh=setTimeout(()=>{bh=void 0,$(`#${t}`).fadeOut()},1500)}}function Ce(i){if(i!==yh){yh=i;var t=Math.floor(Math.random()*1e4);$("#MessageDiv").append(`<div class='alert alert-success' role='alert' id='${t}'> ${i}</div>`),setTimeout(()=>{yh=void 0,$(`#${t}`).fadeOut()},2500)}}function $d(i,t,n,r){return Math.sqrt((n-i)**2)+(r-t)**2}function eb(i){var t={};return i.filter(r=>t.hasOwnProperty(r)?!1:t[r]=!0)}function Qr(i,t=!1){for(var n=[],r=[],h=0;h<this.nodeList.length;h++)this.nodeList[h].type==NODE_INPUT?n.push(this.nodeList[h]):this.nodeList[h].connections.length>0?r.push(this.nodeList[h]):r.push("");var c="assign ";r.length==1?c+=r[0].verilogLabel:c+=`{${r.map(v=>v.verilogLabel).join(", ")}}`,c+=" = ";var g=n.map(v=>v.verilogLabel).join(` ${i} `);return t?c+=`~(${g});`:c+=g+";",c}function ib(i,t){var n=document.createElement("a");if(n.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),n.setAttribute("download",i),document.createEvent){var r=document.createEvent("MouseEvents");r.initEvent("click",!0,!0),n.dispatchEvent(r)}else n.click()}function nb(i){var t=window.open(i,"_blank");t.focus()}function zd(i){const t=document.createElement("textarea");t.style.cssText="position: absolute; left: -99999em",t.setAttribute("readonly",!0),document.body.appendChild(t),t.value=i;const n=document.getSelection().rangeCount>0?document.getSelection().getRangeAt(0):!1;if(navigator.userAgent.match(/ipad|ipod|iphone/i)){const r=t.contentEditable;t.contentEditable=!0;const h=document.createRange();h.selectNodeContents(t);const c=window.getSelection();c.removeAllRanges(),c.addRange(h),t.setSelectionRange(0,999999),t.contentEditable=r}else t.select();try{const r=document.execCommand("copy");return n&&(document.getSelection().removeAllRanges(),document.getSelection().addRange(n)),t.remove(),r}catch(r){return console.error(r),t.remove(),!1}}function Ah(i,t){return i.length<=t?i:i.slice(0,t)+"..."}function sb(){$("#bitconverterprompt").dialog({buttons:[{text:"Reset",click:function(){Ls(0)}}]})}var Ao={dec2bin:i=>"0b"+i.toString(2),dec2hex:i=>"0x"+i.toString(16),dec2octal:i=>"0"+i.toString(8),dec2bcd:i=>parseInt(i.toString(10),16).toString(2)};function Ls(i){isNaN(i)||($("#binaryInput").val(Ao.dec2bin(i)),$("#bcdInput").val(Ao.dec2bcd(i)),$("#octalInput").val(Ao.dec2octal(i)),$("#hexInput").val(Ao.dec2hex(i)),$("#decimalInput").val(i))}function rb(i){return i instanceof Number?i:i.slice(0,2).toLocaleLowerCase()=="0b"?parseInt(i.slice(2),2):i.slice(0,2).toLocaleLowerCase()=="0x"?parseInt(i.slice(2),16):i.slice(0,1).toLocaleLowerCase()=="0"?parseInt(i,8):parseInt(i)}function ob(){$("#decimalInput").on("keyup",function(){var i=parseInt($("#decimalInput").val(),10);Ls(i)}),$("#binaryInput").on("keyup",function(){var i=$("#binaryInput").val(),t;i.slice(0,2)=="0b"?t=parseInt(i.slice(2),2):t=parseInt(i,2),Ls(t)}),$("#bcdInput").on("keyup",function(){for(var i=$("#bcdInput").val(),t=0;i.length%4!==0;)i="0"+i;if(i!==0)for(var n=0;n<i.length/4;){if(parseInt(i.slice(4*n,4*(n+1)),2)<10)t=t*10+parseInt(i.slice(4*n,4*(n+1)),2);else return Ls(NaN);n++}return Ls(x)}),$("#hexInput").on("keyup",function(){var i=parseInt($("#hexInput").val(),16);Ls(i)}),$("#octalInput").on("keyup",function(){var i=parseInt($("#octalInput").val(),8);Ls(i)})}function ab(i,t){var n=document.createElement("input");return n.type="file",n.multiple=t,n.accept=i,new Promise(function(r){document.activeElement.onfocus=function(){document.activeElement.onfocus=null,setTimeout(r,500)},n.onchange=function(){var h=Array.from(n.files);r(h[0])},n.click()})}function zs(i){return i.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}const es=10;let Mr;function Fd(i){Mr=fl(i),ls(!1),ze(!0),mn(!0),be(!0),f.lastSelected=void 0,f.selected=!1,f.hover=void 0;const t=f.canvas.getBoundingClientRect();f.mouseDownRawX=(Mr.x-t.left)*DPR,f.mouseDownRawY=(Mr.y-t.top)*DPR,f.mouseDownX=Math.round((f.mouseDownRawX-globalScope.ox)/globalScope.scale/es)*es,f.mouseDownY=Math.round((f.mouseDownRawY-globalScope.oy)/globalScope.scale/es)*es,f.mouseDown=!0,f.oldx=globalScope.ox,f.oldy=globalScope.oy,i.preventDefault(),ge(1)}function jd(i){if(Mr=fl(i),!f.touch||i.touches.length===1){const t=f.canvas.getBoundingClientRect();if(f.mouseRawX=(Mr.x-t.left)*DPR,f.mouseRawY=(Mr.y-t.top)*DPR,f.mouseXf=(f.mouseRawX-globalScope.ox)/globalScope.scale,f.mouseYf=(f.mouseRawY-globalScope.oy)/globalScope.scale,f.mouseX=Math.round(f.mouseXf/es)*es,f.mouseY=Math.round(f.mouseYf/es)*es,be(!0),f.lastSelected==globalScope.root){be(!0);let n;n=function(){hu()},ge(0,20,n)}else ge(0,200)}f.touch&&i.touches.length===2&&If(i)}function Gd(){f.mouseDown=!1,ls(!1),ze(!0),mn(!0),be(!0),bi(!0),Hi(1),ge(1)}function Xd(){const i=document.getElementById("elementName");if(globalScope&&f&&f.objectList){let{objectList:t}=f;t=t.filter(n=>n!=="wires");for(let n=0;n<t.length;n++)for(let r=0;r<globalScope[t[n]].length;r++)if(globalScope[t[n]][r].isHover()){i.style.display="block",t[n]==="SubCircuit"?i.innerHTML=`Subcircuit: ${globalScope.SubCircuit[r].data.name}`:i.innerHTML=`CircuitElement: ${t[n]}`;return}}i.style.display="none",document.getElementById("elementName").innerHTML=""}function lb(){window.addEventListener("keyup",t=>{ge(1),t.keyCode==16&&(f.shiftDown=!1),(t.key=="Meta"||t.key=="Control")&&(f.controlDown=!1)}),document.getElementById("simulationArea").addEventListener("mousedown",t=>{f.touch=!1,Fd(t)}),document.getElementById("simulationArea").addEventListener("mousemove",()=>{f.touch=!1,Xd()}),document.getElementById("simulationArea").addEventListener("touchstart",t=>{f.touch=!0,Fd(t)}),document.getElementById("simulationArea").addEventListener("touchmove",t=>{f.touch=!0,Xd()}),window.addEventListener("mousemove",t=>{jd(t)}),window.addEventListener("touchmove",t=>{jd(t)}),window.addEventListener("mouseup",()=>{Gd()}),window.addEventListener("mousedown",function(){this.focus()}),window.addEventListener("touchend",()=>{Gd()}),window.addEventListener("touchstart",function(){this.focus()});function i(t){be(!0),t.preventDefault();const n=t.wheelDelta?t.wheelDelta:-t.detail,r=n<0,h=n>0;t.ctrlKey?(r&&globalScope.scale>.5*DPR&&On(-.1*DPR),h&&globalScope.scale<4*DPR&&On(.1*DPR)):(r&&globalScope.scale<4*DPR&&On(.1*DPR),h&&globalScope.scale>.5*DPR&&On(-.1*DPR)),be(!0),bi(!0),fs()}document.getElementById("simulationArea").addEventListener("mousewheel",i),document.getElementById("simulationArea").addEventListener("DOMMouseScroll",i),window.addEventListener("keydown",t=>{if(ls(!1),ze(!0),mn(!0),(t.key=="Meta"||t.key=="Control")&&(f.controlDown=!0),f.controlDown&&(t.keyCode==187||t.KeyCode==171)&&(t.preventDefault(),iu()),f.controlDown&&(t.keyCode==189||t.Keycode==173)&&(t.preventDefault(),nu()),!(f.mouseRawX<0||f.mouseRawY<0||f.mouseRawX>width||f.mouseRawY>height)){if(ge(1),be(!0),f.lastSelected&&f.lastSelected.keyDown&&(t.key.toString().length==1||t.key.toString()=="Backspace")){f.lastSelected.keyDown(t.key.toString());return}if(f.lastSelected&&f.lastSelected.keyDown2&&t.key.toString().length==1){f.lastSelected.keyDown2(t.key.toString());return}(t.key=="T"||t.key=="t")&&f.changeClockTime(prompt("Enter Time:"))}}),document.getElementById("simulationArea").addEventListener("dblclick",()=>{ge(2),f.lastSelected&&f.lastSelected.dblclick!==void 0&&f.lastSelected.dblclick()})}navigator.userAgent.toLowerCase().indexOf("msie")!=-1||navigator.userAgent.toLowerCase().indexOf("trident")!=-1;Wr.toggleFullScreen=hb;$(document).ready(()=>{const i=new URLSearchParams(window.location.search),t=i.get("fullscreen"),n=i.get("clock_time"),r=i.get("display_title"),h=i.get("zoom_in_out"),c=localStorage.getItem("theme");switch(i.get("theme")){case"default":Ci("Default Theme");break;case"night-sky":Ci("Night Sky");break;case"lite-born-spring":Ci("Lite-born Spring");break;case"g-and-w":Ci("G&W");break;case"high-contrast":Ci("High Contrast");break;case"color-blind":Ci("Color Blind");break;default:Ci(c)}t==="false"&&n==="false"&&$("#clockProperty").css("display","none"),t!=="false"&&$("#clockProperty").append("<input type='button' class='objectPropertyAttributeEmbed custom-btn--secondary embed-fullscreen-btn' name='toggleFullScreen' value='Full Screen'> </input>"),n!=="false"&&($("#clockProperty").append(`<div style='margin-top: 10px' ><label for='changeClockTime'>Time: </label><input class='objectPropertyAttributeEmbed' min='50' type='number' style='width:48px' step='10' name='changeClockTime' id='changeClockTime' value='${f.timePeriod}'></div>`),$("#clockProperty").append(`<div style='margin-top: 10px' ><label for='changeClockEnable'>Clock:</label><label class='switch'> <input type='checkbox' ${["","checked"][f.clockEnabled+0]} class='objectPropertyAttributeEmbedChecked' name='changeClockEnable' id='changeClockEnable'> <span class='slider'></span> </label><div>`)),h==="false"&&$("#zoom-in-out-embed").css("display","none"),r==="true"&&$("#bottom_right_circuit_heading").css("display","block"),$(".objectPropertyAttributeEmbed").on("change keyup paste click",function(){ge(),be(!0),Hi(1),f.lastSelected&&f.lastSelected[this.name]?Ja(f.lastSelected[this.name](this.value))||Bo():Wr[this.name](this.value)}),$(".objectPropertyAttributeEmbedChecked").on("change keyup paste click",function(){ge(),be(!0),Hi(1),f.lastSelected&&f.lastSelected[this.name]?Ja(f.lastSelected[this.name](this.value))||Bo():Wr[this.name](this.checked)}),$("#zoom-in-embed").on("click",()=>iu()),$("#zoom-out-embed").on("click",()=>nu())});function hb(i){db()?cb():ub(document.documentElement)}function $a(){setTimeout(()=>{Object.keys(le).forEach(i=>{le[i].centerFocus(!0)}),bi(!0),ge()},100)}function ub(i){i.requestFullscreen?i.requestFullscreen():i.mozRequestFullScreen?i.mozRequestFullScreen():i.webkitRequestFullscreen?i.webkitRequestFullscreen():i.msRequestFullscreen&&i.msRequestFullscreen()}function cb(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()}function db(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement}document.addEventListener&&(document.addEventListener("webkitfullscreenchange",$a,!1),document.addEventListener("mozfullscreenchange",$a,!1),document.addEventListener("fullscreenchange",$a,!1),document.addEventListener("MSFullscreenChange",$a,!1));class tr extends Ht{constructor(t,n,r=globalScope,h=15,c=20,g=""){super(t,n,r,"RIGHT",1),this.directionFixed=!0,this.fixedBitWidth=!0,this.imageUrl=g,this.cols=c||parseInt(prompt("Enter cols:"),10),this.rows=h||parseInt(prompt("Enter rows:"),10),this.setSize(),this.loadImage()}changeRowSize(t){if(!(t===void 0||t<5||t>1e3)&&this.rows!==t)return this.rows=parseInt(t,10),this.setSize(),this}changeColSize(t){if(!(t===void 0||t<5||t>1e3)&&this.cols!==t)return this.cols=parseInt(t,10),this.setSize(),this}keyDown3(t){t==="ArrowRight"&&this.changeColSize(this.cols+2),t==="ArrowLeft"&&this.changeColSize(this.cols-2),t==="ArrowDown"&&this.changeRowSize(this.rows+2),t==="ArrowUp"&&this.changeRowSize(this.rows-2)}customSave(){return{constructorParamaters:[this.rows,this.cols,this.imageUrl]}}customDraw(){var t=f.context;const n=this.x,r=this.y;var h=this.elementWidth,c=this.elementHeight;this.image&&this.image.complete?dm(t,this.image,n-h/2,r-c/2,h,c):(t.beginPath(),t.strokeStyle="rgba(0,0,0,1)",t.setLineDash([5*globalScope.scale,5*globalScope.scale]),t.lineWidth=Rt(1.5),zi(t,n-h/2,r-c/2,h,c),t.stroke(),(f.lastSelected===this||f.multipleObjectSelections.contains(this))&&(t.fillStyle="rgba(255, 255, 32,0.1)",t.fill()),t.beginPath(),t.textAlign="center",t.fillStyle=ht.text,Ut(t,"Double Click to Insert Image",n,r,10),t.fill(),t.setLineDash([]))}dblclick(){embed||this.uploadImage()}async uploadImage(){var t=await ab("image/*",!1),n="https://api.imgur.com/3/image",r="9a33b3b370f1054",h={crossDomain:!0,processData:!1,contentType:!1,type:"POST",url:n,headers:{Authorization:"Client-ID "+r,Accept:"application/json"},mimeType:"multipart/form-data"},c=new FormData;c.append("image",t),h.data=c,Ce("Uploading Image");var g=await $.ajax(h);Ce("Image Uploaded"),this.imageUrl=JSON.parse(g).data.link,this.loadImage()}async loadImage(){this.imageUrl&&(this.image=new Image,this.image.crossOrigin="anonymous",this.image.src=this.imageUrl)}setSize(){this.elementWidth=this.cols*10,this.elementHeight=this.rows*10,this.upDimensionY=this.elementHeight/2,this.downDimensionY=this.elementHeight/2,this.leftDimensionX=this.elementWidth/2,this.rightDimensionX=this.elementWidth/2}}tr.prototype.tooltipText="Image ToolTip: Embed an image in the circuit for annotation";tr.prototype.propagationDelayFixed=!0;tr.prototype.mutableProperties={cols:{name:"Columns",type:"number",max:"1000",min:"5",func:"changeColSize"},rows:{name:"Rows",type:"number",max:"1000",min:"5",func:"changeRowSize"}};tr.prototype.objectType="ImageAnnotation";tr.prototype.rectangleObject=!1;tr.prototype.mutableProperties={imageUrl:{name:"Upload Image",type:"button",func:"uploadImage"},cols:{name:"Columns",type:"number",max:"1000",min:"5",func:"changeColSize"},rows:{name:"Rows",type:"number",max:"1000",min:"5",func:"changeRowSize"}};function fb(){var i={AndGate:en,Random:Gr,NandGate:bn,Counter:Ks,Multiplexer:Ni,XorGate:Bn,XnorGate:nn,SevenSegDisplay:Gs,SixteenSegDisplay:Xs,HexDisplay:Us,OrGate:yn,Stepper:nl,NotGate:Oi,Text:Ys,TriState:rl,Buffer:Uo,ControlledInverter:Gh,Adder:qs,verilogMultiplier:Yo,verilogDivider:Hr,verilogPower:qo,verilogShiftLeft:Vo,verilogShiftRight:Ko,TwoComplement:Xh,Splitter:xe,Ground:Qo,Power:Zo,Input:us,Output:os,BitSelector:Jo,ConstantVal:Ze,NorGate:Hn,DigitalLed:Vs,VariableLed:$r,Button:Ri,RGBLed:ta,SquareRGBLed:cs,Demultiplexer:En,Decoder:Wn,Flag:zr,MSB:ol,LSB:ea,PriorityEncoder:Mn,Tunnel:Fr,ALU:$n,Rectangle:jr,Arrow:ia,ImageAnnotation:tr,RGBLedMatrix:Ji,TflipFlop:al,DflipFlop:na,Dlatch:ll,SRflipFlop:hl,JKflipFlop:ul,TTY:as,Keyboard:Qs,Clock:vn,Rom:fn,EEPROM:Xr,RAM:gn,verilogRAM:Zs,TB_Input:Ur,TB_Output:Yr,ForceGate:Uh};Object.assign(ki,i)}(function(i,t){(function(n){n(js())})(function(n){n.defineMode("javascript",function(r,h){var c=r.indentUnit,g=h.statementIndent,v=h.jsonld,w=h.json||v,D=h.trackScope!==!1,T=h.typescript,R=h.wordCharacters||/[\w$\xa1-\uffff]/,W=function(){function I(Ue){return{type:Ue,style:"keyword"}}var j=I("keyword a"),mt=I("keyword b"),_t=I("keyword c"),ut=I("keyword d"),Bt=I("operator"),ye={type:"atom",style:"atom"};return{if:I("if"),while:j,with:j,else:mt,do:mt,try:mt,finally:mt,return:ut,break:ut,continue:ut,new:I("new"),delete:_t,void:_t,throw:_t,debugger:I("debugger"),var:I("var"),const:I("var"),let:I("var"),function:I("function"),catch:I("catch"),for:I("for"),switch:I("switch"),case:I("case"),default:I("default"),in:Bt,typeof:Bt,instanceof:Bt,true:ye,false:ye,null:ye,undefined:ye,NaN:ye,Infinity:ye,this:I("this"),class:I("class"),super:I("atom"),yield:_t,export:I("export"),import:I("import"),extends:_t,await:_t}}(),L=/[+\-*&%=<>!?|~^@]/,E=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function V(I){for(var j=!1,mt,_t=!1;(mt=I.next())!=null;){if(!j){if(mt=="/"&&!_t)return;mt=="["?_t=!0:_t&&mt=="]"&&(_t=!1)}j=!j&&mt=="\\"}}var at,H;function A(I,j,mt){return at=I,H=mt,j}function q(I,j){var mt=I.next();if(mt=='"'||mt=="'")return j.tokenize=F(mt),j.tokenize(I,j);if(mt=="."&&I.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return A("number","number");if(mt=="."&&I.match(".."))return A("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(mt))return A(mt);if(mt=="="&&I.eat(">"))return A("=>","operator");if(mt=="0"&&I.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return A("number","number");if(/\d/.test(mt))return I.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),A("number","number");if(mt=="/")return I.eat("*")?(j.tokenize=J,J(I,j)):I.eat("/")?(I.skipToEnd(),A("comment","comment")):Pi(I,j,1)?(V(I),I.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),A("regexp","string-2")):(I.eat("="),A("operator","operator",I.current()));if(mt=="`")return j.tokenize=St,St(I,j);if(mt=="#"&&I.peek()=="!")return I.skipToEnd(),A("meta","meta");if(mt=="#"&&I.eatWhile(R))return A("variable","property");if(mt=="<"&&I.match("!--")||mt=="-"&&I.match("->")&&!/\S/.test(I.string.slice(0,I.start)))return I.skipToEnd(),A("comment","comment");if(L.test(mt))return(mt!=">"||!j.lexical||j.lexical.type!=">")&&(I.eat("=")?(mt=="!"||mt=="=")&&I.eat("="):/[<>*+\-|&?]/.test(mt)&&(I.eat(mt),mt==">"&&I.eat(mt))),mt=="?"&&I.eat(".")?A("."):A("operator","operator",I.current());if(R.test(mt)){I.eatWhile(R);var _t=I.current();if(j.lastType!="."){if(W.propertyIsEnumerable(_t)){var ut=W[_t];return A(ut.type,ut.style,_t)}if(_t=="async"&&I.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return A("async","keyword",_t)}return A("variable","variable",_t)}}function F(I){return function(j,mt){var _t=!1,ut;if(v&&j.peek()=="@"&&j.match(E))return mt.tokenize=q,A("jsonld-keyword","meta");for(;(ut=j.next())!=null&&!(ut==I&&!_t);)_t=!_t&&ut=="\\";return _t||(mt.tokenize=q),A("string","string")}}function J(I,j){for(var mt=!1,_t;_t=I.next();){if(_t=="/"&&mt){j.tokenize=q;break}mt=_t=="*"}return A("comment","comment")}function St(I,j){for(var mt=!1,_t;(_t=I.next())!=null;){if(!mt&&(_t=="`"||_t=="$"&&I.eat("{"))){j.tokenize=q;break}mt=!mt&&_t=="\\"}return A("quasi","string-2",I.current())}var ot="([{}])";function st(I,j){j.fatArrowAt&&(j.fatArrowAt=null);var mt=I.string.indexOf("=>",I.start);if(!(mt<0)){if(T){var _t=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(I.string.slice(I.start,mt));_t&&(mt=_t.index)}for(var ut=0,Bt=!1,ye=mt-1;ye>=0;--ye){var Ue=I.string.charAt(ye),hi=ot.indexOf(Ue);if(hi>=0&&hi<3){if(!ut){++ye;break}if(--ut==0){Ue=="("&&(Bt=!0);break}}else if(hi>=3&&hi<6)++ut;else if(R.test(Ue))Bt=!0;else if(/["'\/`]/.test(Ue))for(;;--ye){if(ye==0)return;var lr=I.string.charAt(ye-1);if(lr==Ue&&I.string.charAt(ye-2)!="\\"){ye--;break}}else if(Bt&&!ut){++ye;break}}Bt&&!ut&&(j.fatArrowAt=ye)}}var wt={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function Tt(I,j,mt,_t,ut,Bt){this.indented=I,this.column=j,this.type=mt,this.prev=ut,this.info=Bt,_t!=null&&(this.align=_t)}function At(I,j){if(!D)return!1;for(var mt=I.localVars;mt;mt=mt.next)if(mt.name==j)return!0;for(var _t=I.context;_t;_t=_t.prev)for(var mt=_t.vars;mt;mt=mt.next)if(mt.name==j)return!0}function Pt(I,j,mt,_t,ut){var Bt=I.cc;for(K.state=I,K.stream=ut,K.marked=null,K.cc=Bt,K.style=j,I.lexical.hasOwnProperty("align")||(I.lexical.align=!0);;){var ye=Bt.length?Bt.pop():w?pt:Y;if(ye(mt,_t)){for(;Bt.length&&Bt[Bt.length-1].lex;)Bt.pop()();return K.marked?K.marked:mt=="variable"&&At(I,_t)?"variable-2":j}}}var K={state:null,column:null,marked:null,cc:null};function lt(){for(var I=arguments.length-1;I>=0;I--)K.cc.push(arguments[I])}function z(){return lt.apply(null,arguments),!0}function oe(I,j){for(var mt=j;mt;mt=mt.next)if(mt.name==I)return!0;return!1}function Zt(I){var j=K.state;if(K.marked="def",!!D){if(j.context){if(j.lexical.info=="var"&&j.context&&j.context.block){var mt=ee(I,j.context);if(mt!=null){j.context=mt;return}}else if(!oe(I,j.localVars)){j.localVars=new Vt(I,j.localVars);return}}h.globalVars&&!oe(I,j.globalVars)&&(j.globalVars=new Vt(I,j.globalVars))}}function ee(I,j){if(j)if(j.block){var mt=ee(I,j.prev);return mt?mt==j.prev?j:new Nt(mt,j.vars,!0):null}else return oe(I,j.vars)?j:new Nt(j.prev,new Vt(I,j.vars),!1);else return null}function jt(I){return I=="public"||I=="private"||I=="protected"||I=="abstract"||I=="readonly"}function Nt(I,j,mt){this.prev=I,this.vars=j,this.block=mt}function Vt(I,j){this.name=I,this.next=j}var de=new Vt("this",new Vt("arguments",null));function ae(){K.state.context=new Nt(K.state.context,K.state.localVars,!1),K.state.localVars=de}function me(){K.state.context=new Nt(K.state.context,K.state.localVars,!0),K.state.localVars=null}ae.lex=me.lex=!0;function rt(){K.state.localVars=K.state.context.vars,K.state.context=K.state.context.prev}rt.lex=!0;function Q(I,j){var mt=function(){var _t=K.state,ut=_t.indented;if(_t.lexical.type=="stat")ut=_t.lexical.indented;else for(var Bt=_t.lexical;Bt&&Bt.type==")"&&Bt.align;Bt=Bt.prev)ut=Bt.indented;_t.lexical=new Tt(ut,K.stream.column(),I,null,_t.lexical,j)};return mt.lex=!0,mt}function nt(){var I=K.state;I.lexical.prev&&(I.lexical.type==")"&&(I.indented=I.lexical.indented),I.lexical=I.lexical.prev)}nt.lex=!0;function N(I){function j(mt){return mt==I?z():I==";"||mt=="}"||mt==")"||mt=="]"?lt():z(j)}return j}function Y(I,j){return I=="var"?z(Q("vardef",j),Fi,N(";"),nt):I=="keyword a"?z(Q("form"),Yt,Y,nt):I=="keyword b"?z(Q("form"),Y,nt):I=="keyword d"?K.stream.match(/^\s*$/,!1)?z():z(Q("stat"),he,N(";"),nt):I=="debugger"?z(N(";")):I=="{"?z(Q("}"),me,ct,nt,rt):I==";"?z():I=="if"?(K.state.lexical.info=="else"&&K.state.cc[K.state.cc.length-1]==nt&&K.state.cc.pop()(),z(Q("form"),Yt,Y,nt,ir)):I=="function"?z(Mi):I=="for"?z(Q("form"),me,ra,Y,rt,nt):I=="class"||T&&j=="interface"?(K.marked="keyword",z(Q("form",I=="class"?I:j),nr,nt)):I=="variable"?T&&j=="declare"?(K.marked="keyword",z(Y)):T&&(j=="module"||j=="enum"||j=="type")&&K.stream.match(/^\s*\w/,!1)?(K.marked="keyword",j=="enum"?z(Kt):j=="type"?z(oa,N("operator"),$t,N(";")):z(Q("form"),Xe,N("{"),Q("}"),ct,nt,nt)):T&&j=="namespace"?(K.marked="keyword",z(Q("form"),pt,Y,nt)):T&&j=="abstract"?(K.marked="keyword",z(Y)):z(Q("stat"),S):I=="switch"?z(Q("form"),Yt,N("{"),Q("}","switch"),me,ct,nt,nt,rt):I=="case"?z(pt,N(":")):I=="default"?z(N(":")):I=="catch"?z(Q("form"),ae,vt,Y,nt,rt):I=="export"?z(Q("stat"),sr,nt):I=="import"?z(Q("stat"),jn,nt):I=="async"?z(Y):j=="@"?z(pt,Y):lt(Q("stat"),pt,N(";"),nt)}function vt(I){if(I=="(")return z(Gi,N(")"))}function pt(I,j){return Xt(I,j,!1)}function Lt(I,j){return Xt(I,j,!0)}function Yt(I){return I!="("?lt():z(Q(")"),he,N(")"),nt)}function Xt(I,j,mt){if(K.state.fatArrowAt==K.stream.start){var _t=mt?o:Ft;if(I=="(")return z(ae,Q(")"),it(Gi,")"),nt,N("=>"),_t,rt);if(I=="variable")return lt(ae,Xe,N("=>"),_t,rt)}var ut=mt?Dt:gt;return wt.hasOwnProperty(I)?z(ut):I=="function"?z(Mi,ut):I=="class"||T&&j=="interface"?(K.marked="keyword",z(Q("form"),bl,nt)):I=="keyword c"||I=="async"?z(mt?Lt:pt):I=="("?z(Q(")"),he,N(")"),nt,ut):I=="operator"||I=="spread"?z(mt?Lt:pt):I=="["?z(Q("]"),We,nt,ut):I=="{"?dt(O,"}",null,ut):I=="quasi"?lt(xt,ut):I=="new"?z(d(mt)):z()}function he(I){return I.match(/[;\}\)\],]/)?lt():lt(pt)}function gt(I,j){return I==","?z(he):Dt(I,j,!1)}function Dt(I,j,mt){var _t=mt==!1?gt:Dt,ut=mt==!1?pt:Lt;if(I=="=>")return z(ae,mt?o:Ft,rt);if(I=="operator")return/\+\+|--/.test(j)||T&&j=="!"?z(_t):T&&j=="<"&&K.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?z(Q(">"),it($t,">"),nt,_t):j=="?"?z(pt,N(":"),ut):z(ut);if(I=="quasi")return lt(xt,_t);if(I!=";"){if(I=="(")return dt(Lt,")","call",_t);if(I==".")return z(_,_t);if(I=="[")return z(Q("]"),he,N("]"),nt,_t);if(T&&j=="as")return K.marked="keyword",z($t,_t);if(I=="regexp")return K.state.lastType=K.marked="operator",K.stream.backUp(K.stream.pos-K.stream.start-1),z(ut)}}function xt(I,j){return I!="quasi"?lt():j.slice(j.length-2)!="${"?z(xt):z(he,qt)}function qt(I){if(I=="}")return K.marked="string-2",K.state.tokenize=St,z(xt)}function Ft(I){return st(K.stream,K.state),lt(I=="{"?Y:pt)}function o(I){return st(K.stream,K.state),lt(I=="{"?Y:Lt)}function d(I){return function(j){return j=="."?z(I?b:p):j=="variable"&&T?z(Ge,I?Dt:gt):lt(I?Lt:pt)}}function p(I,j){if(j=="target")return K.marked="keyword",z(gt)}function b(I,j){if(j=="target")return K.marked="keyword",z(Dt)}function S(I){return I==":"?z(nt,Y):lt(gt,N(";"),nt)}function _(I){if(I=="variable")return K.marked="property",z()}function O(I,j){if(I=="async")return K.marked="property",z(O);if(I=="variable"||K.style=="keyword"){if(K.marked="property",j=="get"||j=="set")return z(B);var mt;return T&&K.state.fatArrowAt==K.stream.start&&(mt=K.stream.match(/^\s*:\s*/,!1))&&(K.state.fatArrowAt=K.stream.pos+mt[0].length),z(X)}else{if(I=="number"||I=="string")return K.marked=v?"property":K.style+" property",z(X);if(I=="jsonld-keyword")return z(X);if(T&&jt(j))return K.marked="keyword",z(O);if(I=="[")return z(pt,kt,N("]"),X);if(I=="spread")return z(Lt,X);if(j=="*")return K.marked="keyword",z(O);if(I==":")return lt(X)}}function B(I){return I!="variable"?lt(X):(K.marked="property",z(Mi))}function X(I){if(I==":")return z(Lt);if(I=="(")return lt(Mi)}function it(I,j,mt){function _t(ut,Bt){if(mt?mt.indexOf(ut)>-1:ut==","){var ye=K.state.lexical;return ye.info=="call"&&(ye.pos=(ye.pos||0)+1),z(function(Ue,hi){return Ue==j||hi==j?lt():lt(I)},_t)}return ut==j||Bt==j?z():mt&&mt.indexOf(";")>-1?lt(I):z(N(j))}return function(ut,Bt){return ut==j||Bt==j?z():lt(I,_t)}}function dt(I,j,mt){for(var _t=3;_t<arguments.length;_t++)K.cc.push(arguments[_t]);return z(Q(j,mt),it(I,j),nt)}function ct(I){return I=="}"?z():lt(Y,ct)}function kt(I,j){if(T){if(I==":")return z($t);if(j=="?")return z(kt)}}function Ot(I,j){if(T&&(I==":"||j=="in"))return z($t)}function ie(I){if(T&&I==":")return K.stream.match(/^\s*\w+\s+is\b/,!1)?z(pt,Jt,$t):z($t)}function Jt(I,j){if(j=="is")return K.marked="keyword",z()}function $t(I,j){if(j=="keyof"||j=="typeof"||j=="infer"||j=="readonly")return K.marked="keyword",z(j=="typeof"?Lt:$t);if(I=="variable"||j=="void")return K.marked="type",z(ei);if(j=="|"||j=="&")return z($t);if(I=="string"||I=="number"||I=="atom")return z(ei);if(I=="[")return z(Q("]"),it($t,"]",","),nt,ei);if(I=="{")return z(Q("}"),Et,nt,ei);if(I=="(")return z(it(ve,")"),Ne,ei);if(I=="<")return z(it($t,">"),$t);if(I=="quasi")return lt(je,ei)}function Ne(I){if(I=="=>")return z($t)}function Et(I){return I.match(/[\}\)\]]/)?z():I==","||I==";"?z(Et):lt(Wi,Et)}function Wi(I,j){if(I=="variable"||K.style=="keyword")return K.marked="property",z(Wi);if(j=="?"||I=="number"||I=="string")return z(Wi);if(I==":")return z($t);if(I=="[")return z(N("variable"),Ot,N("]"),Wi);if(I=="(")return lt(Fn,Wi);if(!I.match(/[;\}\)\],]/))return z()}function je(I,j){return I!="quasi"?lt():j.slice(j.length-2)!="${"?z(je):z($t,Pe)}function Pe(I){if(I=="}")return K.marked="string-2",K.state.tokenize=St,z(je)}function ve(I,j){return I=="variable"&&K.stream.match(/^\s*[?:]/,!1)||j=="?"?z(ve):I==":"?z($t):I=="spread"?z(ve):lt($t)}function ei(I,j){if(j=="<")return z(Q(">"),it($t,">"),nt,ei);if(j=="|"||I=="."||j=="&")return z($t);if(I=="[")return z($t,N("]"),ei);if(j=="extends"||j=="implements")return K.marked="keyword",z($t);if(j=="?")return z($t,N(":"),$t)}function Ge(I,j){if(j=="<")return z(Q(">"),it($t,">"),nt,ei)}function Je(){return lt($t,Be)}function Be(I,j){if(j=="=")return z($t)}function Fi(I,j){return j=="enum"?(K.marked="keyword",z(Kt)):lt(Xe,kt,ji,vl)}function Xe(I,j){if(T&&jt(j))return K.marked="keyword",z(Xe);if(I=="variable")return Zt(j),z();if(I=="spread")return z(Xe);if(I=="[")return dt(Zr,"]");if(I=="{")return dt(yi,"}")}function yi(I,j){return I=="variable"&&!K.stream.match(/^\s*:/,!1)?(Zt(j),z(ji)):(I=="variable"&&(K.marked="property"),I=="spread"?z(Xe):I=="}"?lt():I=="["?z(pt,N("]"),N(":"),yi):z(N(":"),Xe,ji))}function Zr(){return lt(Xe,ji)}function ji(I,j){if(j=="=")return z(Lt)}function vl(I){if(I==",")return z(Fi)}function ir(I,j){if(I=="keyword b"&&j=="else")return z(Q("form","else"),Y,nt)}function ra(I,j){if(j=="await")return z(ra);if(I=="(")return z(Q(")"),Jr,nt)}function Jr(I){return I=="var"?z(Fi,zn):I=="variable"?z(zn):lt(zn)}function zn(I,j){return I==")"?z():I==";"?z(zn):j=="in"||j=="of"?(K.marked="keyword",z(pt,zn)):lt(pt,zn)}function Mi(I,j){if(j=="*")return K.marked="keyword",z(Mi);if(I=="variable")return Zt(j),z(Mi);if(I=="(")return z(ae,Q(")"),it(Gi,")"),nt,ie,Y,rt);if(T&&j=="<")return z(Q(">"),it(Je,">"),nt,Mi)}function Fn(I,j){if(j=="*")return K.marked="keyword",z(Fn);if(I=="variable")return Zt(j),z(Fn);if(I=="(")return z(ae,Q(")"),it(Gi,")"),nt,ie,rt);if(T&&j=="<")return z(Q(">"),it(Je,">"),nt,Fn)}function oa(I,j){if(I=="keyword"||I=="variable")return K.marked="type",z(oa);if(j=="<")return z(Q(">"),it(Je,">"),nt)}function Gi(I,j){return j=="@"&&z(pt,Gi),I=="spread"?z(Gi):T&&jt(j)?(K.marked="keyword",z(Gi)):T&&I=="this"?z(kt,ji):lt(Xe,kt,ji)}function bl(I,j){return I=="variable"?nr(I,j):Xi(I,j)}function nr(I,j){if(I=="variable")return Zt(j),z(Xi)}function Xi(I,j){if(j=="<")return z(Q(">"),it(Je,">"),nt,Xi);if(j=="extends"||j=="implements"||T&&I==",")return j=="implements"&&(K.marked="keyword"),z(T?$t:pt,Xi);if(I=="{")return z(Q("}"),Ui,nt)}function Ui(I,j){if(I=="async"||I=="variable"&&(j=="static"||j=="get"||j=="set"||T&&jt(j))&&K.stream.match(/^\s+#?[\w$\xa1-\uffff]/,!1))return K.marked="keyword",z(Ui);if(I=="variable"||K.style=="keyword")return K.marked="property",z(ps,Ui);if(I=="number"||I=="string")return z(ps,Ui);if(I=="[")return z(pt,kt,N("]"),ps,Ui);if(j=="*")return K.marked="keyword",z(Ui);if(T&&I=="(")return lt(Fn,Ui);if(I==";"||I==",")return z(Ui);if(I=="}")return z();if(j=="@")return z(pt,Ui)}function ps(I,j){if(j=="!"||j=="?")return z(ps);if(I==":")return z($t,ji);if(j=="=")return z(Lt);var mt=K.state.lexical.prev,_t=mt&&mt.info=="interface";return lt(_t?Fn:Mi)}function sr(I,j){return j=="*"?(K.marked="keyword",z(ar,N(";"))):j=="default"?(K.marked="keyword",z(pt,N(";"))):I=="{"?z(it(rr,"}"),ar,N(";")):lt(Y)}function rr(I,j){if(j=="as")return K.marked="keyword",z(N("variable"));if(I=="variable")return lt(Lt,rr)}function jn(I){return I=="string"?z():I=="("?lt(pt):I=="."?lt(gt):lt(or,sn,ar)}function or(I,j){return I=="{"?dt(or,"}"):(I=="variable"&&Zt(j),j=="*"&&(K.marked="keyword"),z(to))}function sn(I){if(I==",")return z(or,sn)}function to(I,j){if(j=="as")return K.marked="keyword",z(or)}function ar(I,j){if(j=="from")return K.marked="keyword",z(pt)}function We(I){return I=="]"?z():lt(it(Lt,"]"))}function Kt(){return lt(Q("form"),Xe,N("{"),Q("}"),it(wn,"}"),nt,nt)}function wn(){return lt(Xe,ji)}function eo(I,j){return I.lastType=="operator"||I.lastType==","||L.test(j.charAt(0))||/[,.]/.test(j.charAt(0))}function Pi(I,j,mt){return j.tokenize==q&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(j.lastType)||j.lastType=="quasi"&&/\{\s*$/.test(I.string.slice(0,I.pos-(mt||0)))}return{startState:function(I){var j={tokenize:q,lastType:"sof",cc:[],lexical:new Tt((I||0)-c,0,"block",!1),localVars:h.localVars,context:h.localVars&&new Nt(null,null,!1),indented:I||0};return h.globalVars&&typeof h.globalVars=="object"&&(j.globalVars=h.globalVars),j},token:function(I,j){if(I.sol()&&(j.lexical.hasOwnProperty("align")||(j.lexical.align=!1),j.indented=I.indentation(),st(I,j)),j.tokenize!=J&&I.eatSpace())return null;var mt=j.tokenize(I,j);return at=="comment"?mt:(j.lastType=at=="operator"&&(H=="++"||H=="--")?"incdec":at,Pt(j,mt,at,H,I))},indent:function(I,j){if(I.tokenize==J||I.tokenize==St)return n.Pass;if(I.tokenize!=q)return 0;var mt=j&&j.charAt(0),_t=I.lexical,ut;if(!/^\s*else\b/.test(j))for(var Bt=I.cc.length-1;Bt>=0;--Bt){var ye=I.cc[Bt];if(ye==nt)_t=_t.prev;else if(ye!=ir&&ye!=rt)break}for(;(_t.type=="stat"||_t.type=="form")&&(mt=="}"||(ut=I.cc[I.cc.length-1])&&(ut==gt||ut==Dt)&&!/^[,\.=+\-*:?[\(]/.test(j));)_t=_t.prev;g&&_t.type==")"&&_t.prev.type=="stat"&&(_t=_t.prev);var Ue=_t.type,hi=mt==Ue;return Ue=="vardef"?_t.indented+(I.lastType=="operator"||I.lastType==","?_t.info.length+1:0):Ue=="form"&&mt=="{"?_t.indented:Ue=="form"?_t.indented+c:Ue=="stat"?_t.indented+(eo(I,j)?g||c:0):_t.info=="switch"&&!hi&&h.doubleIndentSwitch!=!1?_t.indented+(/^(?:case|default)\b/.test(j)?c:2*c):_t.align?_t.column+(hi?0:1):_t.indented+(hi?0:c)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:w?null:"/*",blockCommentEnd:w?null:"*/",blockCommentContinue:w?null:" * ",lineComment:w?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:w?"json":"javascript",jsonldMode:v,jsonMode:w,expressionAllowed:Pi,skipExpression:function(I){Pt(I,"atom","atom","true",new n.StringStream("",2,null))}}}),n.registerHelper("wordChars","javascript",/[\w$]/),n.defineMIME("text/javascript","javascript"),n.defineMIME("text/ecmascript","javascript"),n.defineMIME("application/javascript","javascript"),n.defineMIME("application/x-javascript","javascript"),n.defineMIME("application/ecmascript","javascript"),n.defineMIME("application/json",{name:"javascript",json:!0}),n.defineMIME("application/x-json",{name:"javascript",json:!0}),n.defineMIME("application/manifest+json",{name:"javascript",json:!0}),n.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),n.defineMIME("text/typescript",{name:"javascript",typescript:!0}),n.defineMIME("application/typescript",{name:"javascript",typescript:!0})})})();const $o={"New Circuit":"Shift + N","Save Online":"Ctrl + S","Save Offline":"Ctrl + Alt + S","Download as Image":"Ctrl + D","Open Offline":"Ctrl + O","Insert Sub-circuit":"Shift + C","Combinational Analysis":"Shift + A","Direction Up":"Up","Direction Down":"Down","Direction Left":"Left","Direction Right":"Right","Insert Label":"Ctrl + L","Label Direction Up":"Alt + Up","Label Direction Down":"Alt + Down","Label Direction Left":"Alt + Left","Label Direction Right":"Alt + Right","Move Element Up":"Shift + Up","Move Element Down":"Shift + Down","Move Element Left":"Shift + Left","Move Element Right":"Shift + Right","Hotkey Preference":"F8","Open Documentation":"F1"},Kf={all_shortcuts:{},add:function(i,t,n){var r={type:"keydown",propagate:!1,disable_in_input:!0,target:document,keycode:!1};if(!n)n=r;else for(var h in r)typeof n[h]>"u"&&(n[h]=r[h]);var c=n.target;typeof n.target=="string"&&(c=document.getElementById(n.target)),i=i.toLowerCase();var g=function(v){if(v=v||window.event,n.disable_in_input){var w;if(v.target?w=v.target:v.srcElement&&(w=v.srcElement),w.nodeType==3&&(w=w.parentNode),w.tagName=="INPUT"||w.tagName=="TEXTAREA")return}let D="";v.keyCode?D=v.keyCode:v.which&&(D=v.which);var T=String.fromCharCode(D).toLowerCase();D==188&&(T=","),D==190&&(T=".");var R=i.split("+"),W=0,L={"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":":","'":'"',",":"<",".":">","/":"?","\\":"|"},E={esc:27,escape:27,tab:9,space:32,return:13,enter:13,backspace:8,scrolllock:145,scroll_lock:145,scroll:145,capslock:20,caps_lock:20,caps:20,numlock:144,num_lock:144,num:144,pause:19,break:19,insert:45,home:36,delete:46,end:35,pageup:33,page_up:33,pu:33,pagedown:34,page_down:34,pd:34,left:37,up:38,right:39,down:40,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},V={shift:{wanted:!1,pressed:!1},ctrl:{wanted:!1,pressed:!1},alt:{wanted:!1,pressed:!1},meta:{wanted:!1,pressed:!1}};v.ctrlKey&&(V.ctrl.pressed=!0),v.shiftKey&&(V.shift.pressed=!0),v.altKey&&(V.alt.pressed=!0),v.metaKey&&(V.meta.pressed=!0);let at;for(var H=0;at=R[H],H<R.length;H++)at=="ctrl"||at=="control"?(W++,V.ctrl.wanted=!0):at=="shift"?(W++,V.shift.wanted=!0):at=="alt"?(W++,V.alt.wanted=!0):at=="meta"?(W++,V.meta.wanted=!0):at.length>1?E[at]==D&&W++:n.keycode?n.keycode==D&&W++:T==at?W++:L[T]&&v.shiftKey&&(T=L[T],T==at&&W++);if(W==R.length&&V.ctrl.pressed==V.ctrl.wanted&&V.shift.pressed==V.shift.wanted&&V.alt.pressed==V.alt.wanted&&V.meta.pressed==V.meta.wanted&&(t(v),!n.propagate))return v.cancelBubble=!0,v.returnValue=!1,v.stopPropagation&&(v.stopPropagation(),v.preventDefault()),!1};this.all_shortcuts[i]={callback:g,target:c,event:n.type},c.addEventListener?c.addEventListener(n.type,g,!1):c.attachEvent?c.attachEvent("on"+n.type,g):c["on"+n.type]=g},remove:function(i){i=i.toLowerCase();var t=this.all_shortcuts[i];if(delete this.all_shortcuts[i],!!t){var n=t.event,r=t.target,h=t.callback;r.detachEvent?r.detachEvent("on"+n,h):r.removeEventListener?r.removeEventListener(n,h,!1):r["on"+n]=!1}},removeAll:function(){for(let i in this.all_shortcuts)this.remove(i)}},Ud=(i,t)=>{let n;switch(t){case"New Circuit":n=yb;break;case"Save Online":n=Kh;break;case"Save Offline":n=Sf;break;case"Download as Image":n=dl;break;case"Open Offline":n=yf;break;case"Insert Sub-circuit":n=df;break;case"Combinational Analysis":n=Df;break;case"Direction Up":n=za("up");break;case"Direction Down":n=za("down");break;case"Direction Left":n=za("left");break;case"Direction Right":n=za("right");break;case"Insert Label":n=vb;break;case"Label Direction Up":n=Fa("up");break;case"Label Direction Down":n=Fa("down");break;case"Label Direction Left":n=Fa("left");break;case"Label Direction Right":n=Fa("right");break;case"Move Element Up":n=ja("up");break;case"Move Element Down":n=ja("down");break;case"Move Element Left":n=ja("left");break;case"Move Element Right":n=ja("right");break;case"Hotkey Preference":n=bb;break;case"Open Documentation":n=wb;break;default:n=()=>console.log("No shortcut found..");break}Kf.add(i,n,{type:"keydown",propagate:!1,target:document,disable_in_input:!0})};Storage.prototype.set=function(i,t){return this.setItem(i,JSON.stringify(t))};Storage.prototype.get=function(i){return JSON.parse(this.getItem(i))};Object.size=function(i){var t=0,n;for(n in i)i.hasOwnProperty(n)&&t++;return t};const Qf=()=>{let i="";return navigator.appVersion.indexOf("Win")!=-1&&(i="Windows"),navigator.appVersion.indexOf("Mac")!=-1&&(i="MacOS"),navigator.appVersion.indexOf("X11")!=-1&&(i="UNIX"),navigator.appVersion.indexOf("Linux")!=-1&&(i="Linux"),i},Yd=i=>{const t=["Ctrl + N","Ctrl + W","Ctrl + T","Ctrl + C","Ctrl + V","Ctrl + Delete","Ctrl + Backspace","Ctrl + /","Ctrl + \\","Ctrl + ]","Ctrl + '","Ctrl + `","Ctrl + [","Ctrl + ~","Ctrl + Num1","Ctrl + Num2","Ctrl + Num3","Ctrl + Num4","Ctrl + Num5","Ctrl + Num6","Ctrl + Num*","Ctrl + Num/","Ctrl + Num.","Ctrl + Num0"];return Qf=="macOS"&&t.forEach((n,r)=>{n.split(" + ")[0]=="Ctrl",t[r]=n.split(" + ")[0]=="Ctrl"?n.replace("Ctrl","Meta"):n}),t.includes(i)},uu=i=>{if(Kf.removeAll(),i==="user"){localStorage.removeItem("defaultKeys");let t=localStorage.get("userKeys");for(let n in t){let r=t[n];r=r.split(" ").join(""),Ud(r,n)}zo("user")}else if(i=="default"){localStorage.userKeys&&localStorage.removeItem("userKeys");let t=localStorage.get("defaultKeys");for(let n in t){let r=t[n];r=r.split(" ").join(""),Ud(r,n)}zo("default")}},pb=()=>{const i=localStorage.get("userKeys");if(Object.size(i)!==Object.size($o)){for(const[t,n]of Object.entries($o))Object.keys(i).includes(t)||(i[t]=n);localStorage.set("userKeys",i)}else return},gb=()=>{localStorage.defaultKeys&&localStorage.removeItem("defaultKeys");let i={},t=0;for(;$("#preference").children()[t];)i[$("#preference").children()[t].children[1].children[0].innerText]=$("#preference").children()[t].children[1].children[1].innerText,t++;localStorage.set("userKeys",i),uu("user")},qd=()=>{if(localStorage.userKeys&&localStorage.removeItem("userKeys"),Qf()==="MacOS"){const i={};for(let[t,n]of Object.entries($o))n.split(" + ")[0]=="Ctrl",i[t]=n.split(" + ")[0]=="Ctrl"?n.replace("Ctrl","Meta"):n,localStorage.set("defaultKeys",i)}else localStorage.set("defaultKeys",$o);uu("default")},mb=(i,t)=>{let n=0;for(;$("#preference").children()[n];){if($("#preference").children()[n].children[1].children[1].innerText===i&&$("#preference").children()[n].children[1].children[0].innerText!==t.previousElementSibling.innerText){const r=$("#preference").children()[n].children[1].children[0].innerText;$("#warning").text(`This key(s) is already assigned to: ${r}, press Enter to override.`),$("#edit").css("border","1.5px solid #dc5656");return}else $("#edit").css("border","none");n++}},za=i=>()=>{f.lastSelected&&(f.lastSelected.newDirection(i.toUpperCase()),$("select[name |= 'newDirection']").val(i.toUpperCase()),ml())},Fa=i=>()=>{f.lastSelected&&!f.lastSelected.labelDirectionFixed&&(f.lastSelected.labelDirection=i.toUpperCase(),$("select[name |= 'newLabelDirection']").val(i.toUpperCase()),ml())},vb=()=>{f.lastSelected&&($("input[name |= 'setLabel']").focus(),$("input[name |= 'setLabel']").val().length||$("input[name |= 'setLabel']").val("Untitled"),$("input[name |= 'setLabel']").select(),ml())},ja=i=>()=>{if(f.lastSelected){switch(i){case"up":f.lastSelected.y-=10;break;case"down":f.lastSelected.y+=10;break;case"left":f.lastSelected.x-=10;break;case"right":f.lastSelected.x+=10;break}ml()}},bb=()=>$("#customShortcut").trigger("click"),yb=()=>$("#newCircuit").trigger("click"),wb=()=>{f.lastSelected==null||f.lastSelected.helplink==null?window.open("https://docs.circuitverse.org/","_blank"):window.open(f.lastSelected.helplink,"_blank")};function ml(){be(!0),Hi(1),ge(1)}const Sb=i=>{let t="";return Object.entries(i).forEach(n=>{t+=`
        <div>
        <span id='edit-icon'></span>
        <div><span id='command'>${n[0]}</span>
        <span id='keyword'></span>
        </div>
    </div>
    `}),`<div id="preference" class="customScroll">${t}</div>`},xb=Sb($o),kb=`<div id="edit" tabindex="0">
<span style="font-size: 14px;">Press Desire Key Combination & press Enter or press ESC to cancel.</span>
<div id="pressedKeys"></div>
<div id="warning"></div>
</div>`,Cb=`<div id="heading">
  <span>Command</span>
  <span>Keymapping</span>
</div>`,zo=i=>{let t=0;if(i=="user"){const n=localStorage.get("userKeys");for(;$("#preference").children()[t];)$("#preference").children()[t].children[1].children[1].innerText=n[$("#preference").children()[t].children[1].children[0].innerText],t++}else if(i=="default")for(;$("#preference").children()[t];){const n=localStorage.get("defaultKeys");$("#preference").children()[t].children[1].children[1].innerText=n[$("#preference").children()[t].children[1].children[0].innerText],t++}},Db=i=>{let t=0;for(;$("#preference").children()[t];)$("#preference").children()[t].children[1].children[1].innerText===i&&($("#preference").children()[t].children[1].children[1].innerText=""),t++},Vd=()=>{$("#pressedKeys").text(""),$("#edit").css("display","none")},Tb=()=>{$("#edit").css("display","none"),gb(),zo("user")};/*
 * Library to normalize key codes across browsers.  This works with keydown
 * events; keypress events are not fired for all keys, and the codes are
 * different for them.  It returns an object with the following fields:
 * { int code, bool shift, bool alt, bool ctrl }.  The normalized keycodes
 * obey the following rules:
 *
 * For alphabetic characters, the ASCII code of the uppercase version
 *
 * For codes that are identical across all browsers (this includes all
 * modifiers, esc, delete, arrows, etc.), the common keycode
 *
 * For numeric keypad keys, the value returned by numkey().
 * (Usually 96 + the number)
 *
 * For symbols, the ASCII code of the character that appears when shift
 * is not held down, EXCEPT for '" => 222 (conflicts with right-arrow/pagedown),
 * .> => 190 (conflicts with Delete) and `~ => 126 (conflicts with Num0).
 *
 * Basic usage:
 * document.onkeydown = function(e) {
 *    do_something_with(KeyCode.translateEvent(e)
 * };
 *
 * The naming conventions for functions use 'code' to represent an integer
 * keycode, 'key' to represent a key description (specified above), and 'e'
 * to represent an event object.
 *
 * There's also functionality to track and detect which keys are currently
 * being held down: install 'key_up' and 'key_down' on their respective event
 * handlers, and then check with 'is_down'.
 *
 * @fileoverview
 * @author Jonathan Tang
 * @version 0.9
 * @license BSD
 */var Kd=["ctrl","alt","shift","meta"],is={},Zf={58:59,43:61,60:44,95:45,62:46,63:47,96:192,124:92,39:222,34:222,33:49,64:50,35:51,36:52,37:53,94:54,38:55,42:56,40:57,41:58,123:91,125:93};function _b(i){return i>=97&&i<=122}function Qd(i){return i.substr(0,1).toUpperCase()+i.substr(1).toLowerCase()}navigator.userAgent.indexOf("Gecko")!=-1;navigator.userAgent.indexOf("MSIE")!=-1;var Pb=navigator.platform.indexOf("Win")!=-1,Zd=window.opera&&window.opera.version()<9.5,Jf=navigator.vendor&&navigator.vendor.indexOf("KDE")!=-1,Ib=navigator.vendor&&navigator.vendor.indexOf("iCab")!=-1,Lb={186:59,187:61,188:44,109:95,107:61,189:95,190:62,191:47,192:126,219:91,220:92,221:93},Jd={};if(Zd&&Pb)is=Jd;else if(Zd||Jf||Ib){var Sh=[33,64,35,36,37,94,38,42,40,41,58,43,60,95,62,63,124,34];is=Jd;for(var Ga=0;Ga<Sh.length;++Ga)is[Sh[Ga]]=Zf[Sh[Ga]]}else is=Lb;Jf&&(is[0]=45,is[127]=46,is[45]=95);var il={32:"SPACE",13:"ENTER",9:"TAB",8:"BACKSPACE",16:"SHIFT",17:"CTRL",18:"ALT",20:"CAPS_LOCK",144:"NUM_LOCK",145:"SCROLL_LOCK",37:"LEFT",38:"UP",39:"RIGHT",40:"DOWN",33:"PAGE_UP",34:"PAGE_DOWN",36:"HOME",35:"END",45:"INSERT",46:"DELETE",27:"ESCAPE",19:"PAUSE",222:"'",91:"META"};function Ob(i){return i>=112&&i<=123?"F"+(i-111):!1}function Eb(i){if(i>=96&&i<106)return"Num"+(i-96);switch(i){case 106:return"Num*";case 111:return"Num/";case 110:return"Num.";default:return!1}}var Zi={codes:{},ctrl:!1,alt:!1,shift:!1,meta:!1};function tf(i){Zi.ctrl=i.ctrl,Zi.alt=i.alt,Zi.shift=i.shift,Zi.meta=i.meta}function ef(i,t){return i.ctrl===t.ctrl&&i.alt===t.alt&&i.shift===t.shift&&i.meta===t.meta}if(typeof window.KeyCode<"u")var Wb=window.KeyCode;const Ln={no_conflict:function(){return window.KeyCode=Wb,Ln},fkey:function(i){return 111+i},numkey:function(i){switch(i){case"*":return 106;case"/":return 111;case".":return 110;default:return 96+i}},key:function(i){var t=i.charCodeAt(0);return _b(t)?t-32:Zf[t]||t},key_equals:function(i,t){return i.code==t.code&&ef(i,t)},translate_key_code:function(i){return is[i]||i},translate_event:function(i){i=i||window.event;var t=i.which||i.keyCode;return{code:Ln.translate_key_code(t),shift:i.shiftKey,alt:i.altKey,ctrl:i.ctrlKey,meta:i.metaKey}},key_down:function(i){var t=Ln.translate_event(i);Zi.codes[t.code]=t.code,tf(t)},key_up:function(i){var t=Ln.translate_event(i);delete Zi.codes[t.code],tf(t)},is_down:function(i){var t=i.code;return t==Ln.CTRL?Zi.ctrl:t==Ln.ALT?Zi.alt:t==Ln.SHIFT?Zi.shift:Zi.codes[t]!==void 0&&ef(i,Zi)},hot_key:function(i){for(var t=[],n=0;n<Kd.length;++n){var r=Kd[n];i[r]&&r.toUpperCase()!=il[i.code]&&t.push(Qd(r))}var h=i.code,c=il[h]||Ob(h)||Eb(h)||String.fromCharCode(h);return t.push(Qd(c)),t.join("+")}};for(var nf in il)Ln[il[nf]]=nf;function Mb(){$("#customShortcutDialog").append(kb),$("#customShortcutDialog").append(Cb),$("#customShortcutDialog").append(xb),$("#customShortcut").on("click",()=>{Vd(),$("#customShortcutDialog").dialog({resizable:!1,buttons:[{text:"Reset to default",click:()=>{confirm("Remove all custom keys & set the default keys?")&&qd()},id:"resetDefault"},{text:"Save",click:()=>{Tb(),$("#customShortcutDialog").dialog("close")},id:"submitBtn"}]}),$("#customShortcutDialog").css("display","flex")});let i=null;$("#preference").on("click",t=>{$("#pressedKeys").text(""),$("#warning").text(""),$("#edit").css("border","none"),$("#edit").css("display","block"),$($("#edit")).focus(),[,i]=t.target.closest("div").children}),$("#edit").keydown(t=>{t=t||window.event,t.stopPropagation(),t.preventDefault();var n=Ln;let r=["CTRL","ALT","SHIFT","META"];if($("#edit").css("animation","none"),$("#warning").text(""),t.keyCode===27&&Vd(),t.keyCode===13){if($("#pressedKeys").text()===""){$("#warning").text("Please enter some key(s)"),$("#edit").css("animation","shake .3s linear");return}Yd($("#pressedKeys").text())?($("#warning").text("Please enter different key(s)."),$("#edit").css("animation","shake .3s linear"),$("#pressedKeys").text("")):(Db($("#pressedKeys").text()),i.innerText=$("#pressedKeys").text(),$("#pressedKeys").text(""),$("#edit").css("display","none"))}const h=n.hot_key(n.translate_event(t)).split("+").join(" + ")!=="Enter"?n.hot_key(n.translate_event(t)).split("+").join(" + "):"";$("#pressedKeys").text().split(" + ").length===2&&!r.includes(h)&&r.includes($("#pressedKeys").text().split(" + ")[1])?$("#pressedKeys").append(` + ${h}`):r.includes($("#pressedKeys").text())?(r=r.filter(c=>c===$("#pressedKeys").text()),r.includes(h)||$("#pressedKeys").append(` + ${h}`)):($("#pressedKeys").text(""),$("#pressedKeys").text(h)),$("#pressedKeys").text()||$("#pressedKeys").text(h),($("#pressedKeys").text().split(" + ").length===2&&["Ctrl","Meta"].includes($("#pressedKeys").text().split(" + ")[1])||$("#pressedKeys").text().split(" + ")[0]==="Alt"&&$("#pressedKeys").text().split(" + ")[1]==="Shift")&&$("#pressedKeys").text($("#pressedKeys").text().split(" + ").reverse().join(" + ")),mb($("#pressedKeys").text(),i),Yd($("#pressedKeys").text())&&$("#warning").text("The above combination is a system default shortcut & cannot be set.")}),$("div#customShortcutDialog").on("dialogclose",function(t){localStorage.userKeys?zo("user"):zo("default")}),localStorage.userKeys?(pb(),uu("user")):qd()}/*! jQuery UI - v1.13.1 - 2022-01-22
* http://jqueryui.com
* Includes: widget.js, position.js, data.js, disable-selection.js, focusable.js, form-reset-mixin.js, jquery-patch.js, keycode.js, labels.js, scroll-parent.js, tabbable.js, unique-id.js, widgets/draggable.js, widgets/resizable.js, widgets/sortable.js, widgets/accordion.js, widgets/button.js, widgets/checkboxradio.js, widgets/controlgroup.js, widgets/dialog.js, widgets/mouse.js, effect.js, effects/effect-blind.js, effects/effect-bounce.js, effects/effect-clip.js, effects/effect-drop.js, effects/effect-explode.js, effects/effect-fade.js, effects/effect-fold.js, effects/effect-highlight.js, effects/effect-puff.js, effects/effect-pulsate.js, effects/effect-scale.js, effects/effect-shake.js, effects/effect-size.js, effects/effect-slide.js, effects/effect-transfer.js
* Copyright jQuery Foundation and other contributors; Licensed MIT */(function(i){typeof define=="function"&&define.amd?define(["jquery"],i):i(jQuery)})(function(i){i.ui=i.ui||{},i.ui.version="1.13.1";var t,n=0,r=Array.prototype.hasOwnProperty,h=Array.prototype.slice;i.cleanData=(t=i.cleanData,function(o){for(var d,p,b=0;(p=o[b])!=null;b++)(d=i._data(p,"events"))&&d.remove&&i(p).triggerHandler("remove");t(o)}),i.widget=function(o,d,p){var b,S,_,O={},B=o.split(".")[0],X=B+"-"+(o=o.split(".")[1]);return p||(p=d,d=i.Widget),Array.isArray(p)&&(p=i.extend.apply(null,[{}].concat(p))),i.expr.pseudos[X.toLowerCase()]=function(it){return!!i.data(it,X)},i[B]=i[B]||{},b=i[B][o],S=i[B][o]=function(it,dt){if(!this||!this._createWidget)return new S(it,dt);arguments.length&&this._createWidget(it,dt)},i.extend(S,b,{version:p.version,_proto:i.extend({},p),_childConstructors:[]}),(_=new d).options=i.widget.extend({},_.options),i.each(p,function(it,dt){function ct(){return d.prototype[it].apply(this,arguments)}function kt(Ot){return d.prototype[it].apply(this,Ot)}O[it]=typeof dt=="function"?function(){var Ot,ie=this._super,Jt=this._superApply;return this._super=ct,this._superApply=kt,Ot=dt.apply(this,arguments),this._super=ie,this._superApply=Jt,Ot}:dt}),S.prototype=i.widget.extend(_,{widgetEventPrefix:b&&_.widgetEventPrefix||o},O,{constructor:S,namespace:B,widgetName:o,widgetFullName:X}),b?(i.each(b._childConstructors,function(it,dt){var ct=dt.prototype;i.widget(ct.namespace+"."+ct.widgetName,S,dt._proto)}),delete b._childConstructors):d._childConstructors.push(S),i.widget.bridge(o,S),S},i.widget.extend=function(o){for(var d,p,b=h.call(arguments,1),S=0,_=b.length;S<_;S++)for(d in b[S])p=b[S][d],r.call(b[S],d)&&p!==void 0&&(i.isPlainObject(p)?o[d]=i.isPlainObject(o[d])?i.widget.extend({},o[d],p):i.widget.extend({},p):o[d]=p);return o},i.widget.bridge=function(o,d){var p=d.prototype.widgetFullName||o;i.fn[o]=function(b){var S=typeof b=="string",_=h.call(arguments,1),O=this;return S?this.length||b!=="instance"?this.each(function(){var B,X=i.data(this,p);return b==="instance"?(O=X,!1):X?typeof X[b]!="function"||b.charAt(0)==="_"?i.error("no such method '"+b+"' for "+o+" widget instance"):(B=X[b].apply(X,_))!==X&&B!==void 0?(O=B&&B.jquery?O.pushStack(B.get()):B,!1):void 0:i.error("cannot call methods on "+o+" prior to initialization; attempted to call method '"+b+"'")}):O=void 0:(_.length&&(b=i.widget.extend.apply(null,[b].concat(_))),this.each(function(){var B=i.data(this,p);B?(B.option(b||{}),B._init&&B._init()):i.data(this,p,new d(b,this))})),O}},i.Widget=function(){},i.Widget._childConstructors=[],i.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(o,d){d=i(d||this.defaultElement||this)[0],this.element=i(d),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=i(),this.hoverable=i(),this.focusable=i(),this.classesElementLookup={},d!==this&&(i.data(d,this.widgetFullName,this),this._on(!0,this.element,{remove:function(p){p.target===d&&this.destroy()}}),this.document=i(d.style?d.ownerDocument:d.document||d),this.window=i(this.document[0].defaultView||this.document[0].parentWindow)),this.options=i.widget.extend({},this.options,this._getCreateOptions(),o),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:i.noop,_create:i.noop,_init:i.noop,destroy:function(){var o=this;this._destroy(),i.each(this.classesElementLookup,function(d,p){o._removeClass(p,d)}),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:i.noop,widget:function(){return this.element},option:function(o,d){var p,b,S,_=o;if(arguments.length===0)return i.widget.extend({},this.options);if(typeof o=="string")if(_={},o=(p=o.split(".")).shift(),p.length){for(b=_[o]=i.widget.extend({},this.options[o]),S=0;S<p.length-1;S++)b[p[S]]=b[p[S]]||{},b=b[p[S]];if(o=p.pop(),arguments.length===1)return b[o]===void 0?null:b[o];b[o]=d}else{if(arguments.length===1)return this.options[o]===void 0?null:this.options[o];_[o]=d}return this._setOptions(_),this},_setOptions:function(o){for(var d in o)this._setOption(d,o[d]);return this},_setOption:function(o,d){return o==="classes"&&this._setOptionClasses(d),this.options[o]=d,o==="disabled"&&this._setOptionDisabled(d),this},_setOptionClasses:function(o){var d,p,b;for(d in o)b=this.classesElementLookup[d],o[d]!==this.options.classes[d]&&b&&b.length&&(p=i(b.get()),this._removeClass(b,d),p.addClass(this._classes({element:p,keys:d,classes:o,add:!0})))},_setOptionDisabled:function(o){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!o),o&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(o){var d=[],p=this;function b(S,_){for(var O,B=0;B<S.length;B++)O=p.classesElementLookup[S[B]]||i(),O=o.add?(function(){var X=[];o.element.each(function(it,dt){i.map(p.classesElementLookup,function(ct){return ct}).some(function(ct){return ct.is(dt)})||X.push(dt)}),p._on(i(X),{remove:"_untrackClassesElement"})}(),i(i.uniqueSort(O.get().concat(o.element.get())))):i(O.not(o.element).get()),p.classesElementLookup[S[B]]=O,d.push(S[B]),_&&o.classes[S[B]]&&d.push(o.classes[S[B]])}return(o=i.extend({element:this.element,classes:this.options.classes||{}},o)).keys&&b(o.keys.match(/\S+/g)||[],!0),o.extra&&b(o.extra.match(/\S+/g)||[]),d.join(" ")},_untrackClassesElement:function(o){var d=this;i.each(d.classesElementLookup,function(p,b){i.inArray(o.target,b)!==-1&&(d.classesElementLookup[p]=i(b.not(o.target).get()))}),this._off(i(o.target))},_removeClass:function(o,d,p){return this._toggleClass(o,d,p,!1)},_addClass:function(o,d,p){return this._toggleClass(o,d,p,!0)},_toggleClass:function(o,d,_,b){var S=typeof o=="string"||o===null,_={extra:S?d:_,keys:S?o:d,element:S?this.element:o,add:b=typeof b=="boolean"?b:_};return _.element.toggleClass(this._classes(_),b),this},_on:function(o,d,p){var b,S=this;typeof o!="boolean"&&(p=d,d=o,o=!1),p?(d=b=i(d),this.bindings=this.bindings.add(d)):(p=d,d=this.element,b=this.widget()),i.each(p,function(X,O){function B(){if(o||S.options.disabled!==!0&&!i(this).hasClass("ui-state-disabled"))return(typeof O=="string"?S[O]:O).apply(S,arguments)}typeof O!="string"&&(B.guid=O.guid=O.guid||B.guid||i.guid++);var it=X.match(/^([\w:-]*)\s*(.*)$/),X=it[1]+S.eventNamespace,it=it[2];it?b.on(X,it,B):d.on(X,B)})},_off:function(o,d){d=(d||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,o.off(d),this.bindings=i(this.bindings.not(o).get()),this.focusable=i(this.focusable.not(o).get()),this.hoverable=i(this.hoverable.not(o).get())},_delay:function(o,d){var p=this;return setTimeout(function(){return(typeof o=="string"?p[o]:o).apply(p,arguments)},d||0)},_hoverable:function(o){this.hoverable=this.hoverable.add(o),this._on(o,{mouseenter:function(d){this._addClass(i(d.currentTarget),null,"ui-state-hover")},mouseleave:function(d){this._removeClass(i(d.currentTarget),null,"ui-state-hover")}})},_focusable:function(o){this.focusable=this.focusable.add(o),this._on(o,{focusin:function(d){this._addClass(i(d.currentTarget),null,"ui-state-focus")},focusout:function(d){this._removeClass(i(d.currentTarget),null,"ui-state-focus")}})},_trigger:function(o,d,p){var b,S,_=this.options[o];if(p=p||{},(d=i.Event(d)).type=(o===this.widgetEventPrefix?o:this.widgetEventPrefix+o).toLowerCase(),d.target=this.element[0],S=d.originalEvent)for(b in S)b in d||(d[b]=S[b]);return this.element.trigger(d,p),!(typeof _=="function"&&_.apply(this.element[0],[d].concat(p))===!1||d.isDefaultPrevented())}},i.each({show:"fadeIn",hide:"fadeOut"},function(o,d){i.Widget.prototype["_"+o]=function(p,b,S){var _,O=(b=typeof b=="string"?{effect:b}:b)?b!==!0&&typeof b!="number"&&b.effect||d:o;typeof(b=b||{})=="number"?b={duration:b}:b===!0&&(b={}),_=!i.isEmptyObject(b),b.complete=S,b.delay&&p.delay(b.delay),_&&i.effects&&i.effects.effect[O]?p[o](b):O!==o&&p[O]?p[O](b.duration,b.easing,S):p.queue(function(B){i(this)[o](),S&&S.call(p[0]),B()})}});var c,g,v,w,D,T,R,W,L;i.widget;function E(o,d,p){return[parseFloat(o[0])*(W.test(o[0])?d/100:1),parseFloat(o[1])*(W.test(o[1])?p/100:1)]}function V(o,d){return parseInt(i.css(o,d),10)||0}function at(o){return o!=null&&o===o.window}g=Math.max,v=Math.abs,w=/left|center|right/,D=/top|center|bottom/,T=/[\+\-]\d+(\.[\d]+)?%?/,R=/^\w+/,W=/%$/,L=i.fn.position,i.position={scrollbarWidth:function(){if(c!==void 0)return c;var o,d=i("<div style='display:block;position:absolute;width:200px;height:200px;overflow:hidden;'><div style='height:300px;width:auto;'></div></div>"),p=d.children()[0];return i("body").append(d),o=p.offsetWidth,d.css("overflow","scroll"),o===(p=p.offsetWidth)&&(p=d[0].clientWidth),d.remove(),c=o-p},getScrollInfo:function(o){var p=o.isWindow||o.isDocument?"":o.element.css("overflow-x"),d=o.isWindow||o.isDocument?"":o.element.css("overflow-y"),p=p==="scroll"||p==="auto"&&o.width<o.element[0].scrollWidth;return{width:d==="scroll"||d==="auto"&&o.height<o.element[0].scrollHeight?i.position.scrollbarWidth():0,height:p?i.position.scrollbarWidth():0}},getWithinInfo:function(o){var d=i(o||window),p=at(d[0]),b=!!d[0]&&d[0].nodeType===9;return{element:d,isWindow:p,isDocument:b,offset:!p&&!b?i(o).offset():{left:0,top:0},scrollLeft:d.scrollLeft(),scrollTop:d.scrollTop(),width:d.outerWidth(),height:d.outerHeight()}}},i.fn.position=function(o){if(!o||!o.of)return L.apply(this,arguments);var d,p,b,S,_,O,B=typeof(o=i.extend({},o)).of=="string"?i(document).find(o.of):i(o.of),X=i.position.getWithinInfo(o.within),it=i.position.getScrollInfo(X),dt=(o.collision||"flip").split(" "),ct={},kt=(O=(kt=B)[0]).nodeType===9?{width:kt.width(),height:kt.height(),offset:{top:0,left:0}}:at(O)?{width:kt.width(),height:kt.height(),offset:{top:kt.scrollTop(),left:kt.scrollLeft()}}:O.preventDefault?{width:0,height:0,offset:{top:O.pageY,left:O.pageX}}:{width:kt.outerWidth(),height:kt.outerHeight(),offset:kt.offset()};return B[0].preventDefault&&(o.at="left top"),p=kt.width,b=kt.height,_=i.extend({},S=kt.offset),i.each(["my","at"],function(){var Ot,ie,Jt=(o[this]||"").split(" ");(Jt=Jt.length===1?w.test(Jt[0])?Jt.concat(["center"]):D.test(Jt[0])?["center"].concat(Jt):["center","center"]:Jt)[0]=w.test(Jt[0])?Jt[0]:"center",Jt[1]=D.test(Jt[1])?Jt[1]:"center",Ot=T.exec(Jt[0]),ie=T.exec(Jt[1]),ct[this]=[Ot?Ot[0]:0,ie?ie[0]:0],o[this]=[R.exec(Jt[0])[0],R.exec(Jt[1])[0]]}),dt.length===1&&(dt[1]=dt[0]),o.at[0]==="right"?_.left+=p:o.at[0]==="center"&&(_.left+=p/2),o.at[1]==="bottom"?_.top+=b:o.at[1]==="center"&&(_.top+=b/2),d=E(ct.at,p,b),_.left+=d[0],_.top+=d[1],this.each(function(){var Ot,ie,Jt=i(this),$t=Jt.outerWidth(),Ne=Jt.outerHeight(),Et=V(this,"marginLeft"),Wi=V(this,"marginTop"),je=$t+Et+V(this,"marginRight")+it.width,Pe=Ne+Wi+V(this,"marginBottom")+it.height,ve=i.extend({},_),ei=E(ct.my,Jt.outerWidth(),Jt.outerHeight());o.my[0]==="right"?ve.left-=$t:o.my[0]==="center"&&(ve.left-=$t/2),o.my[1]==="bottom"?ve.top-=Ne:o.my[1]==="center"&&(ve.top-=Ne/2),ve.left+=ei[0],ve.top+=ei[1],Ot={marginLeft:Et,marginTop:Wi},i.each(["left","top"],function(Ge,Je){i.ui.position[dt[Ge]]&&i.ui.position[dt[Ge]][Je](ve,{targetWidth:p,targetHeight:b,elemWidth:$t,elemHeight:Ne,collisionPosition:Ot,collisionWidth:je,collisionHeight:Pe,offset:[d[0]+ei[0],d[1]+ei[1]],my:o.my,at:o.at,within:X,elem:Jt})}),o.using&&(ie=function(Ge){var Je=S.left-ve.left,Be=Je+p-$t,Fi=S.top-ve.top,Xe=Fi+b-Ne,yi={target:{element:B,left:S.left,top:S.top,width:p,height:b},element:{element:Jt,left:ve.left,top:ve.top,width:$t,height:Ne},horizontal:Be<0?"left":0<Je?"right":"center",vertical:Xe<0?"top":0<Fi?"bottom":"middle"};p<$t&&v(Je+Be)<p&&(yi.horizontal="center"),b<Ne&&v(Fi+Xe)<b&&(yi.vertical="middle"),g(v(Je),v(Be))>g(v(Fi),v(Xe))?yi.important="horizontal":yi.important="vertical",o.using.call(this,Ge,yi)}),Jt.offset(i.extend(ve,{using:ie}))})},i.ui.position={fit:{left:function(o,d){var p=d.within,b=p.isWindow?p.scrollLeft:p.offset.left,S=p.width,_=o.left-d.collisionPosition.marginLeft,O=b-_,B=_+d.collisionWidth-S-b;d.collisionWidth>S?0<O&&B<=0?(p=o.left+O+d.collisionWidth-S-b,o.left+=O-p):o.left=!(0<B&&O<=0)&&B<O?b+S-d.collisionWidth:b:0<O?o.left+=O:0<B?o.left-=B:o.left=g(o.left-_,o.left)},top:function(o,d){var p=d.within,b=p.isWindow?p.scrollTop:p.offset.top,S=d.within.height,_=o.top-d.collisionPosition.marginTop,O=b-_,B=_+d.collisionHeight-S-b;d.collisionHeight>S?0<O&&B<=0?(p=o.top+O+d.collisionHeight-S-b,o.top+=O-p):o.top=!(0<B&&O<=0)&&B<O?b+S-d.collisionHeight:b:0<O?o.top+=O:0<B?o.top-=B:o.top=g(o.top-_,o.top)}},flip:{left:function(o,d){var X=d.within,p=X.offset.left+X.scrollLeft,b=X.width,S=X.isWindow?X.scrollLeft:X.offset.left,it=o.left-d.collisionPosition.marginLeft,_=it-S,O=it+d.collisionWidth-b-S,B=d.my[0]==="left"?-d.elemWidth:d.my[0]==="right"?d.elemWidth:0,X=d.at[0]==="left"?d.targetWidth:d.at[0]==="right"?-d.targetWidth:0,it=-2*d.offset[0];_<0?((p=o.left+B+X+it+d.collisionWidth-b-p)<0||p<v(_))&&(o.left+=B+X+it):0<O&&(0<(S=o.left-d.collisionPosition.marginLeft+B+X+it-S)||v(S)<O)&&(o.left+=B+X+it)},top:function(o,d){var X=d.within,p=X.offset.top+X.scrollTop,b=X.height,S=X.isWindow?X.scrollTop:X.offset.top,it=o.top-d.collisionPosition.marginTop,_=it-S,O=it+d.collisionHeight-b-S,B=d.my[1]==="top"?-d.elemHeight:d.my[1]==="bottom"?d.elemHeight:0,X=d.at[1]==="top"?d.targetHeight:d.at[1]==="bottom"?-d.targetHeight:0,it=-2*d.offset[1];_<0?((p=o.top+B+X+it+d.collisionHeight-b-p)<0||p<v(_))&&(o.top+=B+X+it):0<O&&(0<(S=o.top-d.collisionPosition.marginTop+B+X+it-S)||v(S)<O)&&(o.top+=B+X+it)}},flipfit:{left:function(){i.ui.position.flip.left.apply(this,arguments),i.ui.position.fit.left.apply(this,arguments)},top:function(){i.ui.position.flip.top.apply(this,arguments),i.ui.position.fit.top.apply(this,arguments)}}};var H;i.ui.position,i.extend(i.expr.pseudos,{data:i.expr.createPseudo?i.expr.createPseudo(function(o){return function(d){return!!i.data(d,o)}}):function(o,d,p){return!!i.data(o,p[3])}}),i.fn.extend({disableSelection:(H="onselectstart"in document.createElement("div")?"selectstart":"mousedown",function(){return this.on(H+".ui-disableSelection",function(o){o.preventDefault()})}),enableSelection:function(){return this.off(".ui-disableSelection")}}),i.ui.focusable=function(o,d){var p,b,S,_,O=o.nodeName.toLowerCase();return O==="area"?(b=(p=o.parentNode).name,!(!o.href||!b||p.nodeName.toLowerCase()!=="map")&&0<(b=i("img[usemap='#"+b+"']")).length&&b.is(":visible")):(/^(input|select|textarea|button|object)$/.test(O)?(S=!o.disabled)&&(_=i(o).closest("fieldset")[0])&&(S=!_.disabled):S=O==="a"&&o.href||d,S&&i(o).is(":visible")&&function(B){for(var X=B.css("visibility");X==="inherit";)B=B.parent(),X=B.css("visibility");return X==="visible"}(i(o)))},i.extend(i.expr.pseudos,{focusable:function(o){return i.ui.focusable(o,i.attr(o,"tabindex")!=null)}});var A,q;i.ui.focusable,i.fn._form=function(){return typeof this[0].form=="string"?this.closest("form"):i(this[0].form)},i.ui.formResetMixin={_formResetHandler:function(){var o=i(this);setTimeout(function(){var d=o.data("ui-form-reset-instances");i.each(d,function(){this.refresh()})})},_bindFormResetHandler:function(){var o;this.form=this.element._form(),this.form.length&&((o=this.form.data("ui-form-reset-instances")||[]).length||this.form.on("reset.ui-form-reset",this._formResetHandler),o.push(this),this.form.data("ui-form-reset-instances",o))},_unbindFormResetHandler:function(){var o;this.form.length&&((o=this.form.data("ui-form-reset-instances")).splice(i.inArray(this,o),1),o.length?this.form.data("ui-form-reset-instances",o):this.form.removeData("ui-form-reset-instances").off("reset.ui-form-reset"))}},i.expr.pseudos||(i.expr.pseudos=i.expr[":"]),i.uniqueSort||(i.uniqueSort=i.unique),i.escapeSelector||(A=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g,q=function(o,d){return d?o==="\0"?"�":o.slice(0,-1)+"\\"+o.charCodeAt(o.length-1).toString(16)+" ":"\\"+o},i.escapeSelector=function(o){return(o+"").replace(A,q)}),i.fn.even&&i.fn.odd||i.fn.extend({even:function(){return this.filter(function(o){return o%2==0})},odd:function(){return this.filter(function(o){return o%2==1})}}),i.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38},i.fn.labels=function(){var o,d,p;return this.length?this[0].labels&&this[0].labels.length?this.pushStack(this[0].labels):(d=this.eq(0).parents("label"),(o=this.attr("id"))&&(p=(p=this.eq(0).parents().last()).add((p.length?p:this).siblings()),o="label[for='"+i.escapeSelector(o)+"']",d=d.add(p.find(o).addBack(o))),this.pushStack(d)):this.pushStack([])},i.fn.scrollParent=function(S){var d=this.css("position"),p=d==="absolute",b=S?/(auto|scroll|hidden)/:/(auto|scroll)/,S=this.parents().filter(function(){var _=i(this);return(!p||_.css("position")!=="static")&&b.test(_.css("overflow")+_.css("overflow-y")+_.css("overflow-x"))}).eq(0);return d!=="fixed"&&S.length?S:i(this[0].ownerDocument||document)},i.extend(i.expr.pseudos,{tabbable:function(o){var d=i.attr(o,"tabindex"),p=d!=null;return(!p||0<=d)&&i.ui.focusable(o,p)}}),i.fn.extend({uniqueId:(F=0,function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++F)})}),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&i(this).removeAttr("id")})}}),i.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());var F,J=!1;i(document).on("mouseup",function(){J=!1}),i.widget("ui.mouse",{version:"1.13.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var o=this;this.element.on("mousedown."+this.widgetName,function(d){return o._mouseDown(d)}).on("click."+this.widgetName,function(d){if(i.data(d.target,o.widgetName+".preventClickEvent")===!0)return i.removeData(d.target,o.widgetName+".preventClickEvent"),d.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(o){if(!J){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(o),this._mouseDownEvent=o;var d=this,p=o.which===1,b=!(typeof this.options.cancel!="string"||!o.target.nodeName)&&i(o.target).closest(this.options.cancel).length;return p&&!b&&this._mouseCapture(o)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){d.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(o)&&this._mouseDelayMet(o)&&(this._mouseStarted=this._mouseStart(o)!==!1,!this._mouseStarted)?(o.preventDefault(),!0):(i.data(o.target,this.widgetName+".preventClickEvent")===!0&&i.removeData(o.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(S){return d._mouseMove(S)},this._mouseUpDelegate=function(S){return d._mouseUp(S)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),o.preventDefault(),J=!0)):!0}},_mouseMove:function(o){if(this._mouseMoved){if(i.ui.ie&&(!document.documentMode||document.documentMode<9)&&!o.button)return this._mouseUp(o);if(!o.which){if(o.originalEvent.altKey||o.originalEvent.ctrlKey||o.originalEvent.metaKey||o.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(o)}}return(o.which||o.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(o),o.preventDefault()):(this._mouseDistanceMet(o)&&this._mouseDelayMet(o)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,o)!==!1,this._mouseStarted?this._mouseDrag(o):this._mouseUp(o)),!this._mouseStarted)},_mouseUp:function(o){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,o.target===this._mouseDownEvent.target&&i.data(o.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(o)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,J=!1,o.preventDefault()},_mouseDistanceMet:function(o){return Math.max(Math.abs(this._mouseDownEvent.pageX-o.pageX),Math.abs(this._mouseDownEvent.pageY-o.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),i.ui.plugin={add:function(o,d,p){var b,S=i.ui[o].prototype;for(b in p)S.plugins[b]=S.plugins[b]||[],S.plugins[b].push([d,p[b]])},call:function(o,d,p,b){var S,_=o.plugins[d];if(_&&(b||o.element[0].parentNode&&o.element[0].parentNode.nodeType!==11))for(S=0;S<_.length;S++)o.options[_[S][0]]&&_[S][1].apply(o.element,p)}},i.ui.safeActiveElement=function(o){var d;try{d=o.activeElement}catch{d=o.body}return d=(d=d||o.body).nodeName?d:o.body},i.ui.safeBlur=function(o){o&&o.nodeName.toLowerCase()!=="body"&&i(o).trigger("blur")},i.widget("ui.draggable",i.ui.mouse,{version:"1.13.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){this.options.helper==="original"&&this._setPositionRelative(),this.options.addClasses&&this._addClass("ui-draggable"),this._setHandleClassName(),this._mouseInit()},_setOption:function(o,d){this._super(o,d),o==="handle"&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){(this.helper||this.element).is(".ui-draggable-dragging")?this.destroyOnClear=!0:(this._removeHandleClassName(),this._mouseDestroy())},_mouseCapture:function(o){var d=this.options;return!(this.helper||d.disabled||0<i(o.target).closest(".ui-resizable-handle").length)&&(this.handle=this._getHandle(o),!!this.handle&&(this._blurActiveElement(o),this._blockFrames(d.iframeFix===!0?"iframe":d.iframeFix),!0))},_blockFrames:function(o){this.iframeBlocks=this.document.find(o).map(function(){var d=i(this);return i("<div>").css("position","absolute").appendTo(d.parent()).outerWidth(d.outerWidth()).outerHeight(d.outerHeight()).offset(d.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(o){var d=i.ui.safeActiveElement(this.document[0]);i(o.target).closest(d).length||i.ui.safeBlur(d)},_mouseStart:function(o){var d=this.options;return this.helper=this._createHelper(o),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),i.ui.ddmanager&&(i.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=0<this.helper.parents().filter(function(){return i(this).css("position")==="fixed"}).length,this.positionAbs=this.element.offset(),this._refreshOffsets(o),this.originalPosition=this.position=this._generatePosition(o,!1),this.originalPageX=o.pageX,this.originalPageY=o.pageY,d.cursorAt&&this._adjustOffsetFromHelper(d.cursorAt),this._setContainment(),this._trigger("start",o)===!1?(this._clear(),!1):(this._cacheHelperProportions(),i.ui.ddmanager&&!d.dropBehaviour&&i.ui.ddmanager.prepareOffsets(this,o),this._mouseDrag(o,!0),i.ui.ddmanager&&i.ui.ddmanager.dragStart(this,o),!0)},_refreshOffsets:function(o){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:o.pageX-this.offset.left,top:o.pageY-this.offset.top}},_mouseDrag:function(o,d){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(o,!0),this.positionAbs=this._convertPositionTo("absolute"),!d){if(d=this._uiHash(),this._trigger("drag",o,d)===!1)return this._mouseUp(new i.Event("mouseup",o)),!1;this.position=d.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",i.ui.ddmanager&&i.ui.ddmanager.drag(this,o),!1},_mouseStop:function(o){var d=this,p=!1;return i.ui.ddmanager&&!this.options.dropBehaviour&&(p=i.ui.ddmanager.drop(this,o)),this.dropped&&(p=this.dropped,this.dropped=!1),this.options.revert==="invalid"&&!p||this.options.revert==="valid"&&p||this.options.revert===!0||typeof this.options.revert=="function"&&this.options.revert.call(this.element,p)?i(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){d._trigger("stop",o)!==!1&&d._clear()}):this._trigger("stop",o)!==!1&&this._clear(),!1},_mouseUp:function(o){return this._unblockFrames(),i.ui.ddmanager&&i.ui.ddmanager.dragStop(this,o),this.handleElement.is(o.target)&&this.element.trigger("focus"),i.ui.mouse.prototype._mouseUp.call(this,o)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new i.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(o){return!this.options.handle||!!i(o.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(b){var d=this.options,p=typeof d.helper=="function",b=p?i(d.helper.apply(this.element[0],[b])):d.helper==="clone"?this.element.clone().removeAttr("id"):this.element;return b.parents("body").length||b.appendTo(d.appendTo==="parent"?this.element[0].parentNode:d.appendTo),p&&b[0]===this.element[0]&&this._setPositionRelative(),b[0]===this.element[0]||/(fixed|absolute)/.test(b.css("position"))||b.css("position","absolute"),b},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(o){typeof o=="string"&&(o=o.split(" ")),"left"in(o=Array.isArray(o)?{left:+o[0],top:+o[1]||0}:o)&&(this.offset.click.left=o.left+this.margins.left),"right"in o&&(this.offset.click.left=this.helperProportions.width-o.right+this.margins.left),"top"in o&&(this.offset.click.top=o.top+this.margins.top),"bottom"in o&&(this.offset.click.top=this.helperProportions.height-o.bottom+this.margins.top)},_isRootNode:function(o){return/(html|body)/i.test(o.tagName)||o===this.document[0]},_getParentOffset:function(){var o=this.offsetParent.offset(),d=this.document[0];return this.cssPosition==="absolute"&&this.scrollParent[0]!==d&&i.contains(this.scrollParent[0],this.offsetParent[0])&&(o.left+=this.scrollParent.scrollLeft(),o.top+=this.scrollParent.scrollTop()),{top:(o=this._isRootNode(this.offsetParent[0])?{top:0,left:0}:o).top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:o.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition!=="relative")return{top:0,left:0};var o=this.element.position(),d=this._isRootNode(this.scrollParent[0]);return{top:o.top-(parseInt(this.helper.css("top"),10)||0)+(d?0:this.scrollParent.scrollTop()),left:o.left-(parseInt(this.helper.css("left"),10)||0)+(d?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var o,d,p,b=this.options,S=this.document[0];this.relativeContainer=null,b.containment?b.containment!=="window"?b.containment!=="document"?b.containment.constructor!==Array?(b.containment==="parent"&&(b.containment=this.helper[0].parentNode),(p=(d=i(b.containment))[0])&&(o=/(scroll|auto)/.test(d.css("overflow")),this.containment=[(parseInt(d.css("borderLeftWidth"),10)||0)+(parseInt(d.css("paddingLeft"),10)||0),(parseInt(d.css("borderTopWidth"),10)||0)+(parseInt(d.css("paddingTop"),10)||0),(o?Math.max(p.scrollWidth,p.offsetWidth):p.offsetWidth)-(parseInt(d.css("borderRightWidth"),10)||0)-(parseInt(d.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(o?Math.max(p.scrollHeight,p.offsetHeight):p.offsetHeight)-(parseInt(d.css("borderBottomWidth"),10)||0)-(parseInt(d.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=d)):this.containment=b.containment:this.containment=[0,0,i(S).width()-this.helperProportions.width-this.margins.left,(i(S).height()||S.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=[i(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,i(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,i(window).scrollLeft()+i(window).width()-this.helperProportions.width-this.margins.left,i(window).scrollTop()+(i(window).height()||S.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=null},_convertPositionTo:function(b,d){d=d||this.position;var p=b==="absolute"?1:-1,b=this._isRootNode(this.scrollParent[0]);return{top:d.top+this.offset.relative.top*p+this.offset.parent.top*p-(this.cssPosition==="fixed"?-this.offset.scroll.top:b?0:this.offset.scroll.top)*p,left:d.left+this.offset.relative.left*p+this.offset.parent.left*p-(this.cssPosition==="fixed"?-this.offset.scroll.left:b?0:this.offset.scroll.left)*p}},_generatePosition:function(o,d){var p,b=this.options,S=this._isRootNode(this.scrollParent[0]),_=o.pageX,O=o.pageY;return S&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),d&&(this.containment&&(p=this.relativeContainer?(p=this.relativeContainer.offset(),[this.containment[0]+p.left,this.containment[1]+p.top,this.containment[2]+p.left,this.containment[3]+p.top]):this.containment,o.pageX-this.offset.click.left<p[0]&&(_=p[0]+this.offset.click.left),o.pageY-this.offset.click.top<p[1]&&(O=p[1]+this.offset.click.top),o.pageX-this.offset.click.left>p[2]&&(_=p[2]+this.offset.click.left),o.pageY-this.offset.click.top>p[3]&&(O=p[3]+this.offset.click.top)),b.grid&&(o=b.grid[1]?this.originalPageY+Math.round((O-this.originalPageY)/b.grid[1])*b.grid[1]:this.originalPageY,O=!p||o-this.offset.click.top>=p[1]||o-this.offset.click.top>p[3]?o:o-this.offset.click.top>=p[1]?o-b.grid[1]:o+b.grid[1],o=b.grid[0]?this.originalPageX+Math.round((_-this.originalPageX)/b.grid[0])*b.grid[0]:this.originalPageX,_=!p||o-this.offset.click.left>=p[0]||o-this.offset.click.left>p[2]?o:o-this.offset.click.left>=p[0]?o-b.grid[0]:o+b.grid[0]),b.axis==="y"&&(_=this.originalPageX),b.axis==="x"&&(O=this.originalPageY)),{top:O-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.offset.scroll.top:S?0:this.offset.scroll.top),left:_-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.offset.scroll.left:S?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(o,d,p){return p=p||this._uiHash(),i.ui.plugin.call(this,o,[d,p,this],!0),/^(drag|start|stop)/.test(o)&&(this.positionAbs=this._convertPositionTo("absolute"),p.offset=this.positionAbs),i.Widget.prototype._trigger.call(this,o,d,p)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),i.ui.plugin.add("draggable","connectToSortable",{start:function(o,d,p){var b=i.extend({},d,{item:p.element});p.sortables=[],i(p.options.connectToSortable).each(function(){var S=i(this).sortable("instance");S&&!S.options.disabled&&(p.sortables.push(S),S.refreshPositions(),S._trigger("activate",o,b))})},stop:function(o,d,p){var b=i.extend({},d,{item:p.element});p.cancelHelperRemoval=!1,i.each(p.sortables,function(){var S=this;S.isOver?(S.isOver=0,p.cancelHelperRemoval=!0,S.cancelHelperRemoval=!1,S._storedCSS={position:S.placeholder.css("position"),top:S.placeholder.css("top"),left:S.placeholder.css("left")},S._mouseStop(o),S.options.helper=S.options._helper):(S.cancelHelperRemoval=!0,S._trigger("deactivate",o,b))})},drag:function(o,d,p){i.each(p.sortables,function(){var b=!1,S=this;S.positionAbs=p.positionAbs,S.helperProportions=p.helperProportions,S.offset.click=p.offset.click,S._intersectsWith(S.containerCache)&&(b=!0,i.each(p.sortables,function(){return this.positionAbs=p.positionAbs,this.helperProportions=p.helperProportions,this.offset.click=p.offset.click,b=this!==S&&this._intersectsWith(this.containerCache)&&i.contains(S.element[0],this.element[0])?!1:b})),b?(S.isOver||(S.isOver=1,p._parent=d.helper.parent(),S.currentItem=d.helper.appendTo(S.element).data("ui-sortable-item",!0),S.options._helper=S.options.helper,S.options.helper=function(){return d.helper[0]},o.target=S.currentItem[0],S._mouseCapture(o,!0),S._mouseStart(o,!0,!0),S.offset.click.top=p.offset.click.top,S.offset.click.left=p.offset.click.left,S.offset.parent.left-=p.offset.parent.left-S.offset.parent.left,S.offset.parent.top-=p.offset.parent.top-S.offset.parent.top,p._trigger("toSortable",o),p.dropped=S.element,i.each(p.sortables,function(){this.refreshPositions()}),p.currentItem=p.element,S.fromOutside=p),S.currentItem&&(S._mouseDrag(o),d.position=S.position)):S.isOver&&(S.isOver=0,S.cancelHelperRemoval=!0,S.options._revert=S.options.revert,S.options.revert=!1,S._trigger("out",o,S._uiHash(S)),S._mouseStop(o,!0),S.options.revert=S.options._revert,S.options.helper=S.options._helper,S.placeholder&&S.placeholder.remove(),d.helper.appendTo(p._parent),p._refreshOffsets(o),d.position=p._generatePosition(o,!0),p._trigger("fromSortable",o),p.dropped=!1,i.each(p.sortables,function(){this.refreshPositions()}))})}}),i.ui.plugin.add("draggable","cursor",{start:function(o,d,S){var b=i("body"),S=S.options;b.css("cursor")&&(S._cursor=b.css("cursor")),b.css("cursor",S.cursor)},stop:function(o,d,p){p=p.options,p._cursor&&i("body").css("cursor",p._cursor)}}),i.ui.plugin.add("draggable","opacity",{start:function(o,d,p){d=i(d.helper),p=p.options,d.css("opacity")&&(p._opacity=d.css("opacity")),d.css("opacity",p.opacity)},stop:function(o,d,p){p=p.options,p._opacity&&i(d.helper).css("opacity",p._opacity)}}),i.ui.plugin.add("draggable","scroll",{start:function(o,d,p){p.scrollParentNotHidden||(p.scrollParentNotHidden=p.helper.scrollParent(!1)),p.scrollParentNotHidden[0]!==p.document[0]&&p.scrollParentNotHidden[0].tagName!=="HTML"&&(p.overflowOffset=p.scrollParentNotHidden.offset())},drag:function(o,d,p){var b=p.options,S=!1,_=p.scrollParentNotHidden[0],O=p.document[0];_!==O&&_.tagName!=="HTML"?(b.axis&&b.axis==="x"||(p.overflowOffset.top+_.offsetHeight-o.pageY<b.scrollSensitivity?_.scrollTop=S=_.scrollTop+b.scrollSpeed:o.pageY-p.overflowOffset.top<b.scrollSensitivity&&(_.scrollTop=S=_.scrollTop-b.scrollSpeed)),b.axis&&b.axis==="y"||(p.overflowOffset.left+_.offsetWidth-o.pageX<b.scrollSensitivity?_.scrollLeft=S=_.scrollLeft+b.scrollSpeed:o.pageX-p.overflowOffset.left<b.scrollSensitivity&&(_.scrollLeft=S=_.scrollLeft-b.scrollSpeed))):(b.axis&&b.axis==="x"||(o.pageY-i(O).scrollTop()<b.scrollSensitivity?S=i(O).scrollTop(i(O).scrollTop()-b.scrollSpeed):i(window).height()-(o.pageY-i(O).scrollTop())<b.scrollSensitivity&&(S=i(O).scrollTop(i(O).scrollTop()+b.scrollSpeed))),b.axis&&b.axis==="y"||(o.pageX-i(O).scrollLeft()<b.scrollSensitivity?S=i(O).scrollLeft(i(O).scrollLeft()-b.scrollSpeed):i(window).width()-(o.pageX-i(O).scrollLeft())<b.scrollSensitivity&&(S=i(O).scrollLeft(i(O).scrollLeft()+b.scrollSpeed)))),S!==!1&&i.ui.ddmanager&&!b.dropBehaviour&&i.ui.ddmanager.prepareOffsets(p,o)}}),i.ui.plugin.add("draggable","snap",{start:function(o,d,p){var b=p.options;p.snapElements=[],i(b.snap.constructor!==String?b.snap.items||":data(ui-draggable)":b.snap).each(function(){var S=i(this),_=S.offset();this!==p.element[0]&&p.snapElements.push({item:this,width:S.outerWidth(),height:S.outerHeight(),top:_.top,left:_.left})})},drag:function(o,d,p){for(var b,S,_,O,B,X,it,dt,ct,kt=p.options,Ot=kt.snapTolerance,ie=d.offset.left,Jt=ie+p.helperProportions.width,$t=d.offset.top,Ne=$t+p.helperProportions.height,Et=p.snapElements.length-1;0<=Et;Et--)X=(B=p.snapElements[Et].left-p.margins.left)+p.snapElements[Et].width,dt=(it=p.snapElements[Et].top-p.margins.top)+p.snapElements[Et].height,Jt<B-Ot||X+Ot<ie||Ne<it-Ot||dt+Ot<$t||!i.contains(p.snapElements[Et].item.ownerDocument,p.snapElements[Et].item)?(p.snapElements[Et].snapping&&p.options.snap.release&&p.options.snap.release.call(p.element,o,i.extend(p._uiHash(),{snapItem:p.snapElements[Et].item})),p.snapElements[Et].snapping=!1):(kt.snapMode!=="inner"&&(b=Math.abs(it-Ne)<=Ot,S=Math.abs(dt-$t)<=Ot,_=Math.abs(B-Jt)<=Ot,O=Math.abs(X-ie)<=Ot,b&&(d.position.top=p._convertPositionTo("relative",{top:it-p.helperProportions.height,left:0}).top),S&&(d.position.top=p._convertPositionTo("relative",{top:dt,left:0}).top),_&&(d.position.left=p._convertPositionTo("relative",{top:0,left:B-p.helperProportions.width}).left),O&&(d.position.left=p._convertPositionTo("relative",{top:0,left:X}).left)),ct=b||S||_||O,kt.snapMode!=="outer"&&(b=Math.abs(it-$t)<=Ot,S=Math.abs(dt-Ne)<=Ot,_=Math.abs(B-ie)<=Ot,O=Math.abs(X-Jt)<=Ot,b&&(d.position.top=p._convertPositionTo("relative",{top:it,left:0}).top),S&&(d.position.top=p._convertPositionTo("relative",{top:dt-p.helperProportions.height,left:0}).top),_&&(d.position.left=p._convertPositionTo("relative",{top:0,left:B}).left),O&&(d.position.left=p._convertPositionTo("relative",{top:0,left:X-p.helperProportions.width}).left)),!p.snapElements[Et].snapping&&(b||S||_||O||ct)&&p.options.snap.snap&&p.options.snap.snap.call(p.element,o,i.extend(p._uiHash(),{snapItem:p.snapElements[Et].item})),p.snapElements[Et].snapping=b||S||_||O||ct)}}),i.ui.plugin.add("draggable","stack",{start:function(o,d,S){var b,S=S.options,S=i.makeArray(i(S.stack)).sort(function(_,O){return(parseInt(i(_).css("zIndex"),10)||0)-(parseInt(i(O).css("zIndex"),10)||0)});S.length&&(b=parseInt(i(S[0]).css("zIndex"),10)||0,i(S).each(function(_){i(this).css("zIndex",b+_)}),this.css("zIndex",b+S.length))}}),i.ui.plugin.add("draggable","zIndex",{start:function(o,d,p){d=i(d.helper),p=p.options,d.css("zIndex")&&(p._zIndex=d.css("zIndex")),d.css("zIndex",p.zIndex)},stop:function(o,d,p){p=p.options,p._zIndex&&i(d.helper).css("zIndex",p._zIndex)}}),i.ui.draggable,i.widget("ui.resizable",i.ui.mouse,{version:"1.13.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(o){return parseFloat(o)||0},_isNumber:function(o){return!isNaN(parseFloat(o))},_hasScroll:function(o,b){if(i(o).css("overflow")==="hidden")return!1;var p=b&&b==="left"?"scrollLeft":"scrollTop",b=!1;if(0<o[p])return!0;try{o[p]=1,b=0<o[p],o[p]=0}catch{}return b},_create:function(){var o,d=this.options,p=this;this._addClass("ui-resizable"),i.extend(this,{_aspectRatio:!!d.aspectRatio,aspectRatio:d.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:d.helper||d.ghost||d.animate?d.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(i("<div class='ui-wrapper'></div>").css({overflow:"hidden",position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,o={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")},this.element.css(o),this.originalElement.css("margin",0),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css(o),this._proportionallyResize()),this._setupHandles(),d.autoHide&&i(this.element).on("mouseenter",function(){d.disabled||(p._removeClass("ui-resizable-autohide"),p._handles.show())}).on("mouseleave",function(){d.disabled||p.resizing||(p._addClass("ui-resizable-autohide"),p._handles.hide())}),this._mouseInit()},_destroy:function(){this._mouseDestroy(),this._addedHandles.remove();function o(p){i(p).removeData("resizable").removeData("ui-resizable").off(".resizable")}var d;return this.elementIsWrapper&&(o(this.element),d=this.element,this.originalElement.css({position:d.css("position"),width:d.outerWidth(),height:d.outerHeight(),top:d.css("top"),left:d.css("left")}).insertAfter(d),d.remove()),this.originalElement.css("resize",this.originalResizeStyle),o(this.originalElement),this},_setOption:function(o,d){switch(this._super(o,d),o){case"handles":this._removeHandles(),this._setupHandles();break;case"aspectRatio":this._aspectRatio=!!d}},_setupHandles:function(){var o,d,p,b,S,_=this.options,O=this;if(this.handles=_.handles||(i(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=i(),this._addedHandles=i(),this.handles.constructor===String)for(this.handles==="all"&&(this.handles="n,e,s,w,se,sw,ne,nw"),p=this.handles.split(","),this.handles={},d=0;d<p.length;d++)b="ui-resizable-"+(o=String.prototype.trim.call(p[d])),S=i("<div>"),this._addClass(S,"ui-resizable-handle "+b),S.css({zIndex:_.zIndex}),this.handles[o]=".ui-resizable-"+o,this.element.children(this.handles[o]).length||(this.element.append(S),this._addedHandles=this._addedHandles.add(S));this._renderAxis=function(B){var X,it,dt;for(X in B=B||this.element,this.handles)this.handles[X].constructor===String?this.handles[X]=this.element.children(this.handles[X]).first().show():(this.handles[X].jquery||this.handles[X].nodeType)&&(this.handles[X]=i(this.handles[X]),this._on(this.handles[X],{mousedown:O._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(it=i(this.handles[X],this.element),dt=/sw|ne|nw|se|n|s/.test(X)?it.outerHeight():it.outerWidth(),it=["padding",/ne|nw|n/.test(X)?"Top":/se|sw|s/.test(X)?"Bottom":/^e$/.test(X)?"Right":"Left"].join(""),B.css(it,dt),this._proportionallyResize()),this._handles=this._handles.add(this.handles[X])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.on("mouseover",function(){O.resizing||(this.className&&(S=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),O.axis=S&&S[1]?S[1]:"se")}),_.autoHide&&(this._handles.hide(),this._addClass("ui-resizable-autohide"))},_removeHandles:function(){this._addedHandles.remove()},_mouseCapture:function(o){var d,p,b=!1;for(d in this.handles)(p=i(this.handles[d])[0])!==o.target&&!i.contains(p,o.target)||(b=!0);return!this.options.disabled&&b},_mouseStart:function(o){var d,p,b=this.options,S=this.element;return this.resizing=!0,this._renderProxy(),d=this._num(this.helper.css("left")),p=this._num(this.helper.css("top")),b.containment&&(d+=i(b.containment).scrollLeft()||0,p+=i(b.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:d,top:p},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:S.width(),height:S.height()},this.originalSize=this._helper?{width:S.outerWidth(),height:S.outerHeight()}:{width:S.width(),height:S.height()},this.sizeDiff={width:S.outerWidth()-S.width(),height:S.outerHeight()-S.height()},this.originalPosition={left:d,top:p},this.originalMousePosition={left:o.pageX,top:o.pageY},this.aspectRatio=typeof b.aspectRatio=="number"?b.aspectRatio:this.originalSize.width/this.originalSize.height||1,b=i(".ui-resizable-"+this.axis).css("cursor"),i("body").css("cursor",b==="auto"?this.axis+"-resize":b),this._addClass("ui-resizable-resizing"),this._propagate("start",o),!0},_mouseDrag:function(o){var p=this.originalMousePosition,b=this.axis,d=o.pageX-p.left||0,p=o.pageY-p.top||0,b=this._change[b];return this._updatePrevProperties(),b&&(p=b.apply(this,[o,d,p]),this._updateVirtualBoundaries(o.shiftKey),(this._aspectRatio||o.shiftKey)&&(p=this._updateRatio(p,o)),p=this._respectSize(p,o),this._updateCache(p),this._propagate("resize",o),p=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),i.isEmptyObject(p)||(this._updatePrevProperties(),this._trigger("resize",o,this.ui()),this._applyChanges())),!1},_mouseStop:function(o){this.resizing=!1;var d,p,b,S=this.options,_=this;return this._helper&&(b=(d=(p=this._proportionallyResizeElements).length&&/textarea/i.test(p[0].nodeName))&&this._hasScroll(p[0],"left")?0:_.sizeDiff.height,p=d?0:_.sizeDiff.width,d={width:_.helper.width()-p,height:_.helper.height()-b},p=parseFloat(_.element.css("left"))+(_.position.left-_.originalPosition.left)||null,b=parseFloat(_.element.css("top"))+(_.position.top-_.originalPosition.top)||null,S.animate||this.element.css(i.extend(d,{top:b,left:p})),_.helper.height(_.size.height),_.helper.width(_.size.width),this._helper&&!S.animate&&this._proportionallyResize()),i("body").css("cursor","auto"),this._removeClass("ui-resizable-resizing"),this._propagate("stop",o),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var o={};return this.position.top!==this.prevPosition.top&&(o.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(o.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(o.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(o.height=this.size.height+"px"),this.helper.css(o),o},_updateVirtualBoundaries:function(o){var d,p,b=this.options,S={minWidth:this._isNumber(b.minWidth)?b.minWidth:0,maxWidth:this._isNumber(b.maxWidth)?b.maxWidth:1/0,minHeight:this._isNumber(b.minHeight)?b.minHeight:0,maxHeight:this._isNumber(b.maxHeight)?b.maxHeight:1/0};(this._aspectRatio||o)&&(d=S.minHeight*this.aspectRatio,p=S.minWidth/this.aspectRatio,b=S.maxHeight*this.aspectRatio,o=S.maxWidth/this.aspectRatio,d>S.minWidth&&(S.minWidth=d),p>S.minHeight&&(S.minHeight=p),b<S.maxWidth&&(S.maxWidth=b),o<S.maxHeight&&(S.maxHeight=o)),this._vBoundaries=S},_updateCache:function(o){this.offset=this.helper.offset(),this._isNumber(o.left)&&(this.position.left=o.left),this._isNumber(o.top)&&(this.position.top=o.top),this._isNumber(o.height)&&(this.size.height=o.height),this._isNumber(o.width)&&(this.size.width=o.width)},_updateRatio:function(o){var d=this.position,p=this.size,b=this.axis;return this._isNumber(o.height)?o.width=o.height*this.aspectRatio:this._isNumber(o.width)&&(o.height=o.width/this.aspectRatio),b==="sw"&&(o.left=d.left+(p.width-o.width),o.top=null),b==="nw"&&(o.top=d.top+(p.height-o.height),o.left=d.left+(p.width-o.width)),o},_respectSize:function(o){var d=this._vBoundaries,it=this.axis,p=this._isNumber(o.width)&&d.maxWidth&&d.maxWidth<o.width,b=this._isNumber(o.height)&&d.maxHeight&&d.maxHeight<o.height,S=this._isNumber(o.width)&&d.minWidth&&d.minWidth>o.width,_=this._isNumber(o.height)&&d.minHeight&&d.minHeight>o.height,O=this.originalPosition.left+this.originalSize.width,B=this.originalPosition.top+this.originalSize.height,X=/sw|nw|w/.test(it),it=/nw|ne|n/.test(it);return S&&(o.width=d.minWidth),_&&(o.height=d.minHeight),p&&(o.width=d.maxWidth),b&&(o.height=d.maxHeight),S&&X&&(o.left=O-d.minWidth),p&&X&&(o.left=O-d.maxWidth),_&&it&&(o.top=B-d.minHeight),b&&it&&(o.top=B-d.maxHeight),o.width||o.height||o.left||!o.top?o.width||o.height||o.top||!o.left||(o.left=null):o.top=null,o},_getPaddingPlusBorderDimensions:function(o){for(var d=0,p=[],b=[o.css("borderTopWidth"),o.css("borderRightWidth"),o.css("borderBottomWidth"),o.css("borderLeftWidth")],S=[o.css("paddingTop"),o.css("paddingRight"),o.css("paddingBottom"),o.css("paddingLeft")];d<4;d++)p[d]=parseFloat(b[d])||0,p[d]+=parseFloat(S[d])||0;return{height:p[0]+p[2],width:p[1]+p[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var o,d=0,p=this.helper||this.element;d<this._proportionallyResizeElements.length;d++)o=this._proportionallyResizeElements[d],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(o)),o.css({height:p.height()-this.outerDimensions.height||0,width:p.width()-this.outerDimensions.width||0})},_renderProxy:function(){var o=this.element,d=this.options;this.elementOffset=o.offset(),this._helper?(this.helper=this.helper||i("<div></div>").css({overflow:"hidden"}),this._addClass(this.helper,this._helper),this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++d.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(o,d){return{width:this.originalSize.width+d}},w:function(o,d){var p=this.originalSize;return{left:this.originalPosition.left+d,width:p.width-d}},n:function(o,d,p){var b=this.originalSize;return{top:this.originalPosition.top+p,height:b.height-p}},s:function(o,d,p){return{height:this.originalSize.height+p}},se:function(o,d,p){return i.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[o,d,p]))},sw:function(o,d,p){return i.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[o,d,p]))},ne:function(o,d,p){return i.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[o,d,p]))},nw:function(o,d,p){return i.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[o,d,p]))}},_propagate:function(o,d){i.ui.plugin.call(this,o,[d,this.ui()]),o!=="resize"&&this._trigger(o,d,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),i.ui.plugin.add("resizable","animate",{stop:function(o){var d=i(this).resizable("instance"),p=d.options,b=d._proportionallyResizeElements,S=b.length&&/textarea/i.test(b[0].nodeName),O=S&&d._hasScroll(b[0],"left")?0:d.sizeDiff.height,_=S?0:d.sizeDiff.width,S={width:d.size.width-_,height:d.size.height-O},_=parseFloat(d.element.css("left"))+(d.position.left-d.originalPosition.left)||null,O=parseFloat(d.element.css("top"))+(d.position.top-d.originalPosition.top)||null;d.element.animate(i.extend(S,O&&_?{top:O,left:_}:{}),{duration:p.animateDuration,easing:p.animateEasing,step:function(){var B={width:parseFloat(d.element.css("width")),height:parseFloat(d.element.css("height")),top:parseFloat(d.element.css("top")),left:parseFloat(d.element.css("left"))};b&&b.length&&i(b[0]).css({width:B.width,height:B.height}),d._updateCache(B),d._propagate("resize",o)}})}}),i.ui.plugin.add("resizable","containment",{start:function(){var o,d,p=i(this).resizable("instance"),b=p.options,S=p.element,_=b.containment,O=_ instanceof i?_.get(0):/parent/.test(_)?S.parent().get(0):_;O&&(p.containerElement=i(O),/document/.test(_)||_===document?(p.containerOffset={left:0,top:0},p.containerPosition={left:0,top:0},p.parentData={element:i(document),left:0,top:0,width:i(document).width(),height:i(document).height()||document.body.parentNode.scrollHeight}):(o=i(O),d=[],i(["Top","Right","Left","Bottom"]).each(function(B,X){d[B]=p._num(o.css("padding"+X))}),p.containerOffset=o.offset(),p.containerPosition=o.position(),p.containerSize={height:o.innerHeight()-d[3],width:o.innerWidth()-d[1]},b=p.containerOffset,S=p.containerSize.height,_=p.containerSize.width,_=p._hasScroll(O,"left")?O.scrollWidth:_,S=p._hasScroll(O)?O.scrollHeight:S,p.parentData={element:O,left:b.left,top:b.top,width:_,height:S}))},resize:function(X){var d=i(this).resizable("instance"),p=d.options,b=d.containerOffset,S=d.position,_=d._aspectRatio||X.shiftKey,O={top:0,left:0},B=d.containerElement,X=!0;B[0]!==document&&/static/.test(B.css("position"))&&(O=b),S.left<(d._helper?b.left:0)&&(d.size.width=d.size.width+(d._helper?d.position.left-b.left:d.position.left-O.left),_&&(d.size.height=d.size.width/d.aspectRatio,X=!1),d.position.left=p.helper?b.left:0),S.top<(d._helper?b.top:0)&&(d.size.height=d.size.height+(d._helper?d.position.top-b.top:d.position.top),_&&(d.size.width=d.size.height*d.aspectRatio,X=!1),d.position.top=d._helper?b.top:0),p=d.containerElement.get(0)===d.element.parent().get(0),S=/relative|absolute/.test(d.containerElement.css("position")),p&&S?(d.offset.left=d.parentData.left+d.position.left,d.offset.top=d.parentData.top+d.position.top):(d.offset.left=d.element.offset().left,d.offset.top=d.element.offset().top),S=Math.abs(d.sizeDiff.width+(d._helper?d.offset.left-O.left:d.offset.left-b.left)),b=Math.abs(d.sizeDiff.height+(d._helper?d.offset.top-O.top:d.offset.top-b.top)),S+d.size.width>=d.parentData.width&&(d.size.width=d.parentData.width-S,_&&(d.size.height=d.size.width/d.aspectRatio,X=!1)),b+d.size.height>=d.parentData.height&&(d.size.height=d.parentData.height-b,_&&(d.size.width=d.size.height*d.aspectRatio,X=!1)),X||(d.position.left=d.prevPosition.left,d.position.top=d.prevPosition.top,d.size.width=d.prevSize.width,d.size.height=d.prevSize.height)},stop:function(){var o=i(this).resizable("instance"),d=o.options,p=o.containerOffset,b=o.containerPosition,S=o.containerElement,B=i(o.helper),_=B.offset(),O=B.outerWidth()-o.sizeDiff.width,B=B.outerHeight()-o.sizeDiff.height;o._helper&&!d.animate&&/relative/.test(S.css("position"))&&i(this).css({left:_.left-b.left-p.left,width:O,height:B}),o._helper&&!d.animate&&/static/.test(S.css("position"))&&i(this).css({left:_.left-b.left-p.left,width:O,height:B})}}),i.ui.plugin.add("resizable","alsoResize",{start:function(){var o=i(this).resizable("instance").options;i(o.alsoResize).each(function(){var d=i(this);d.data("ui-resizable-alsoresize",{width:parseFloat(d.width()),height:parseFloat(d.height()),left:parseFloat(d.css("left")),top:parseFloat(d.css("top"))})})},resize:function(o,d){var p=i(this).resizable("instance"),b=p.options,S=p.originalSize,_=p.originalPosition,O={height:p.size.height-S.height||0,width:p.size.width-S.width||0,top:p.position.top-_.top||0,left:p.position.left-_.left||0};i(b.alsoResize).each(function(){var B=i(this),X=i(this).data("ui-resizable-alsoresize"),it={},dt=B.parents(d.originalElement[0]).length?["width","height"]:["width","height","top","left"];i.each(dt,function(ct,kt){var Ot=(X[kt]||0)+(O[kt]||0);Ot&&0<=Ot&&(it[kt]=Ot||null)}),B.css(it)})},stop:function(){i(this).removeData("ui-resizable-alsoresize")}}),i.ui.plugin.add("resizable","ghost",{start:function(){var o=i(this).resizable("instance"),d=o.size;o.ghost=o.originalElement.clone(),o.ghost.css({opacity:.25,display:"block",position:"relative",height:d.height,width:d.width,margin:0,left:0,top:0}),o._addClass(o.ghost,"ui-resizable-ghost"),i.uiBackCompat!==!1&&typeof o.options.ghost=="string"&&o.ghost.addClass(this.options.ghost),o.ghost.appendTo(o.helper)},resize:function(){var o=i(this).resizable("instance");o.ghost&&o.ghost.css({position:"relative",height:o.size.height,width:o.size.width})},stop:function(){var o=i(this).resizable("instance");o.ghost&&o.helper&&o.helper.get(0).removeChild(o.ghost.get(0))}}),i.ui.plugin.add("resizable","grid",{resize:function(){var o,d=i(this).resizable("instance"),p=d.options,$t=d.size,b=d.originalSize,S=d.originalPosition,_=d.axis,O=typeof p.grid=="number"?[p.grid,p.grid]:p.grid,B=O[0]||1,X=O[1]||1,it=Math.round(($t.width-b.width)/B)*B,dt=Math.round(($t.height-b.height)/X)*X,ct=b.width+it,kt=b.height+dt,Ot=p.maxWidth&&p.maxWidth<ct,ie=p.maxHeight&&p.maxHeight<kt,Jt=p.minWidth&&p.minWidth>ct,$t=p.minHeight&&p.minHeight>kt;p.grid=O,Jt&&(ct+=B),$t&&(kt+=X),Ot&&(ct-=B),ie&&(kt-=X),/^(se|s|e)$/.test(_)?(d.size.width=ct,d.size.height=kt):/^(ne)$/.test(_)?(d.size.width=ct,d.size.height=kt,d.position.top=S.top-dt):/^(sw)$/.test(_)?(d.size.width=ct,d.size.height=kt,d.position.left=S.left-it):((kt-X<=0||ct-B<=0)&&(o=d._getPaddingPlusBorderDimensions(this)),0<kt-X?(d.size.height=kt,d.position.top=S.top-dt):(kt=X-o.height,d.size.height=kt,d.position.top=S.top+b.height-kt),0<ct-B?(d.size.width=ct,d.position.left=S.left-it):(ct=B-o.width,d.size.width=ct,d.position.left=S.left+b.width-ct))}}),i.ui.resizable,i.widget("ui.sortable",i.ui.mouse,{version:"1.13.1",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(o,d,p){return d<=o&&o<d+p},_isFloating:function(o){return/left|right/.test(o.css("float"))||/inline|table-cell/.test(o.css("display"))},_create:function(){this.containerCache={},this._addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(o,d){this._super(o,d),o==="handle"&&this._setHandleClassName()},_setHandleClassName:function(){var o=this;this._removeClass(this.element.find(".ui-sortable-handle"),"ui-sortable-handle"),i.each(this.items,function(){o._addClass(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item,"ui-sortable-handle")})},_destroy:function(){this._mouseDestroy();for(var o=this.items.length-1;0<=o;o--)this.items[o].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(o,d){var p=null,b=!1,S=this;return!this.reverting&&!this.options.disabled&&this.options.type!=="static"&&(this._refreshItems(o),i(o.target).parents().each(function(){if(i.data(this,S.widgetName+"-item")===S)return p=i(this),!1}),!!(p=i.data(o.target,S.widgetName+"-item")===S?i(o.target):p)&&!(this.options.handle&&!d&&(i(this.options.handle,p).find("*").addBack().each(function(){this===o.target&&(b=!0)}),!b))&&(this.currentItem=p,this._removeCurrentsFromItems(),!0))},_mouseStart:function(o,d,p){var b,S,_=this.options;if((this.currentContainer=this).refreshPositions(),this.appendTo=i(_.appendTo!=="parent"?_.appendTo:this.currentItem.parent()),this.helper=this._createHelper(o),this._cacheHelperProportions(),this._cacheMargins(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},i.extend(this.offset,{click:{left:o.pageX-this.offset.left,top:o.pageY-this.offset.top},relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),_.cursorAt&&this._adjustOffsetFromHelper(_.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),this.scrollParent=this.placeholder.scrollParent(),i.extend(this.offset,{parent:this._getParentOffset()}),_.containment&&this._setContainment(),_.cursor&&_.cursor!=="auto"&&(S=this.document.find("body"),this.storedCursor=S.css("cursor"),S.css("cursor",_.cursor),this.storedStylesheet=i("<style>*{ cursor: "+_.cursor+" !important; }</style>").appendTo(S)),_.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",_.zIndex)),_.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",_.opacity)),this.scrollParent[0]!==this.document[0]&&this.scrollParent[0].tagName!=="HTML"&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",o,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!p)for(b=this.containers.length-1;0<=b;b--)this.containers[b]._trigger("activate",o,this._uiHash(this));return i.ui.ddmanager&&(i.ui.ddmanager.current=this),i.ui.ddmanager&&!_.dropBehaviour&&i.ui.ddmanager.prepareOffsets(this,o),this.dragging=!0,this._addClass(this.helper,"ui-sortable-helper"),this.helper.parent().is(this.appendTo)||(this.helper.detach().appendTo(this.appendTo),this.offset.parent=this._getParentOffset()),this.position=this.originalPosition=this._generatePosition(o),this.originalPageX=o.pageX,this.originalPageY=o.pageY,this.lastPositionAbs=this.positionAbs=this._convertPositionTo("absolute"),this._mouseDrag(o),!0},_scroll:function(o){var d=this.options,p=!1;return this.scrollParent[0]!==this.document[0]&&this.scrollParent[0].tagName!=="HTML"?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-o.pageY<d.scrollSensitivity?this.scrollParent[0].scrollTop=p=this.scrollParent[0].scrollTop+d.scrollSpeed:o.pageY-this.overflowOffset.top<d.scrollSensitivity&&(this.scrollParent[0].scrollTop=p=this.scrollParent[0].scrollTop-d.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-o.pageX<d.scrollSensitivity?this.scrollParent[0].scrollLeft=p=this.scrollParent[0].scrollLeft+d.scrollSpeed:o.pageX-this.overflowOffset.left<d.scrollSensitivity&&(this.scrollParent[0].scrollLeft=p=this.scrollParent[0].scrollLeft-d.scrollSpeed)):(o.pageY-this.document.scrollTop()<d.scrollSensitivity?p=this.document.scrollTop(this.document.scrollTop()-d.scrollSpeed):this.window.height()-(o.pageY-this.document.scrollTop())<d.scrollSensitivity&&(p=this.document.scrollTop(this.document.scrollTop()+d.scrollSpeed)),o.pageX-this.document.scrollLeft()<d.scrollSensitivity?p=this.document.scrollLeft(this.document.scrollLeft()-d.scrollSpeed):this.window.width()-(o.pageX-this.document.scrollLeft())<d.scrollSensitivity&&(p=this.document.scrollLeft(this.document.scrollLeft()+d.scrollSpeed))),p},_mouseDrag:function(o){var d,p,b,S,_=this.options;for(this.position=this._generatePosition(o),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&this.options.axis==="y"||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&this.options.axis==="x"||(this.helper[0].style.top=this.position.top+"px"),_.scroll&&this._scroll(o)!==!1&&(this._refreshItemPositions(!0),i.ui.ddmanager&&!_.dropBehaviour&&i.ui.ddmanager.prepareOffsets(this,o)),this.dragDirection={vertical:this._getDragVerticalDirection(),horizontal:this._getDragHorizontalDirection()},d=this.items.length-1;0<=d;d--)if(b=(p=this.items[d]).item[0],(S=this._intersectsWithPointer(p))&&p.instance===this.currentContainer&&!(b===this.currentItem[0]||this.placeholder[S===1?"next":"prev"]()[0]===b||i.contains(this.placeholder[0],b)||this.options.type==="semi-dynamic"&&i.contains(this.element[0],b))){if(this.direction=S===1?"down":"up",this.options.tolerance!=="pointer"&&!this._intersectsWithSides(p))break;this._rearrange(o,p),this._trigger("change",o,this._uiHash());break}return this._contactContainers(o),i.ui.ddmanager&&i.ui.ddmanager.drag(this,o),this._trigger("sort",o,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(o,d){var p,b,S,_;if(o)return i.ui.ddmanager&&!this.options.dropBehaviour&&i.ui.ddmanager.drop(this,o),this.options.revert?(b=(p=this).placeholder.offset(),_={},(S=this.options.axis)&&S!=="x"||(_.left=b.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),S&&S!=="y"||(_.top=b.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,i(this.helper).animate(_,parseInt(this.options.revert,10)||500,function(){p._clear(o)})):this._clear(o,d),!1},cancel:function(){if(this.dragging){this._mouseUp(new i.Event("mouseup",{target:null})),this.options.helper==="original"?(this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")):this.currentItem.show();for(var o=this.containers.length-1;0<=o;o--)this.containers[o]._trigger("deactivate",null,this._uiHash(this)),this.containers[o].containerCache.over&&(this.containers[o]._trigger("out",null,this._uiHash(this)),this.containers[o].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.options.helper!=="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),i.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?i(this.domPosition.prev).after(this.currentItem):i(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(o){var d=this._getItemsAsjQuery(o&&o.connected),p=[];return o=o||{},i(d).each(function(){var b=(i(o.item||this).attr(o.attribute||"id")||"").match(o.expression||/(.+)[\-=_](.+)/);b&&p.push((o.key||b[1]+"[]")+"="+(o.key&&o.expression?b[1]:b[2]))}),!p.length&&o.key&&p.push(o.key+"="),p.join("&")},toArray:function(o){var d=this._getItemsAsjQuery(o&&o.connected),p=[];return o=o||{},d.each(function(){p.push(i(o.item||this).attr(o.attribute||"id")||"")}),p},_intersectsWith:function(o){var d=this.positionAbs.left,p=d+this.helperProportions.width,b=this.positionAbs.top,S=b+this.helperProportions.height,_=o.left,O=_+o.width,B=o.top,X=B+o.height,it=this.offset.click.top,dt=this.offset.click.left,it=this.options.axis==="x"||B<b+it&&b+it<X,dt=this.options.axis==="y"||_<d+dt&&d+dt<O;return this.options.tolerance==="pointer"||this.options.forcePointerForContainers||this.options.tolerance!=="pointer"&&this.helperProportions[this.floating?"width":"height"]>o[this.floating?"width":"height"]?it&&dt:_<d+this.helperProportions.width/2&&p-this.helperProportions.width/2<O&&B<b+this.helperProportions.height/2&&S-this.helperProportions.height/2<X},_intersectsWithPointer:function(p){var d=this.options.axis==="x"||this._isOverAxis(this.positionAbs.top+this.offset.click.top,p.top,p.height),p=this.options.axis==="y"||this._isOverAxis(this.positionAbs.left+this.offset.click.left,p.left,p.width);return!(!d||!p)&&(d=this.dragDirection.vertical,p=this.dragDirection.horizontal,this.floating?p==="right"||d==="down"?2:1:d&&(d==="down"?2:1))},_intersectsWithSides:function(S){var d=this._isOverAxis(this.positionAbs.top+this.offset.click.top,S.top+S.height/2,S.height),p=this._isOverAxis(this.positionAbs.left+this.offset.click.left,S.left+S.width/2,S.width),b=this.dragDirection.vertical,S=this.dragDirection.horizontal;return this.floating&&S?S==="right"&&p||S==="left"&&!p:b&&(b==="down"&&d||b==="up"&&!d)},_getDragVerticalDirection:function(){var o=this.positionAbs.top-this.lastPositionAbs.top;return o!=0&&(0<o?"down":"up")},_getDragHorizontalDirection:function(){var o=this.positionAbs.left-this.lastPositionAbs.left;return o!=0&&(0<o?"right":"left")},refresh:function(o){return this._refreshItems(o),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var o=this.options;return o.connectWith.constructor===String?[o.connectWith]:o.connectWith},_getItemsAsjQuery:function(o){var d,p,b,S,_=[],O=[],B=this._connectWith();if(B&&o)for(d=B.length-1;0<=d;d--)for(p=(b=i(B[d],this.document[0])).length-1;0<=p;p--)(S=i.data(b[p],this.widgetFullName))&&S!==this&&!S.options.disabled&&O.push([typeof S.options.items=="function"?S.options.items.call(S.element):i(S.options.items,S.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),S]);function X(){_.push(this)}for(O.push([typeof this.options.items=="function"?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):i(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),d=O.length-1;0<=d;d--)O[d][0].each(X);return i(_)},_removeCurrentsFromItems:function(){var o=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=i.grep(this.items,function(d){for(var p=0;p<o.length;p++)if(o[p]===d.item[0])return!1;return!0})},_refreshItems:function(o){this.items=[],this.containers=[this];var d,p,b,S,_,O,B,X,it=this.items,dt=[[typeof this.options.items=="function"?this.options.items.call(this.element[0],o,{item:this.currentItem}):i(this.options.items,this.element),this]],ct=this._connectWith();if(ct&&this.ready)for(d=ct.length-1;0<=d;d--)for(p=(b=i(ct[d],this.document[0])).length-1;0<=p;p--)(S=i.data(b[p],this.widgetFullName))&&S!==this&&!S.options.disabled&&(dt.push([typeof S.options.items=="function"?S.options.items.call(S.element[0],o,{item:this.currentItem}):i(S.options.items,S.element),S]),this.containers.push(S));for(d=dt.length-1;0<=d;d--)for(_=dt[d][1],X=(O=dt[d][p=0]).length;p<X;p++)(B=i(O[p])).data(this.widgetName+"-item",_),it.push({item:B,instance:_,width:0,height:0,left:0,top:0})},_refreshItemPositions:function(o){for(var d,p,b=this.items.length-1;0<=b;b--)d=this.items[b],this.currentContainer&&d.instance!==this.currentContainer&&d.item[0]!==this.currentItem[0]||(p=this.options.toleranceElement?i(this.options.toleranceElement,d.item):d.item,o||(d.width=p.outerWidth(),d.height=p.outerHeight()),p=p.offset(),d.left=p.left,d.top=p.top)},refreshPositions:function(o){var d,p;if(this.floating=!!this.items.length&&(this.options.axis==="x"||this._isFloating(this.items[0].item)),this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset()),this._refreshItemPositions(o),this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(d=this.containers.length-1;0<=d;d--)p=this.containers[d].element.offset(),this.containers[d].containerCache.left=p.left,this.containers[d].containerCache.top=p.top,this.containers[d].containerCache.width=this.containers[d].element.outerWidth(),this.containers[d].containerCache.height=this.containers[d].element.outerHeight();return this},_createPlaceholder:function(o){var d,p,b=(o=o||this).options;b.placeholder&&b.placeholder.constructor!==String||(d=b.placeholder,p=o.currentItem[0].nodeName.toLowerCase(),b.placeholder={element:function(){var S=i("<"+p+">",o.document[0]);return o._addClass(S,"ui-sortable-placeholder",d||o.currentItem[0].className)._removeClass(S,"ui-sortable-helper"),p==="tbody"?o._createTrPlaceholder(o.currentItem.find("tr").eq(0),i("<tr>",o.document[0]).appendTo(S)):p==="tr"?o._createTrPlaceholder(o.currentItem,S):p==="img"&&S.attr("src",o.currentItem.attr("src")),d||S.css("visibility","hidden"),S},update:function(S,_){d&&!b.forcePlaceholderSize||(_.height()&&(!b.forcePlaceholderSize||p!=="tbody"&&p!=="tr")||_.height(o.currentItem.innerHeight()-parseInt(o.currentItem.css("paddingTop")||0,10)-parseInt(o.currentItem.css("paddingBottom")||0,10)),_.width()||_.width(o.currentItem.innerWidth()-parseInt(o.currentItem.css("paddingLeft")||0,10)-parseInt(o.currentItem.css("paddingRight")||0,10)))}}),o.placeholder=i(b.placeholder.element.call(o.element,o.currentItem)),o.currentItem.after(o.placeholder),b.placeholder.update(o,o.placeholder)},_createTrPlaceholder:function(o,d){var p=this;o.children().each(function(){i("<td>&#160;</td>",p.document[0]).attr("colspan",i(this).attr("colspan")||1).appendTo(d)})},_contactContainers:function(o){for(var d,p,b,S,_,O,B,X,it,dt=null,ct=null,kt=this.containers.length-1;0<=kt;kt--)i.contains(this.currentItem[0],this.containers[kt].element[0])||(this._intersectsWith(this.containers[kt].containerCache)?dt&&i.contains(this.containers[kt].element[0],dt.element[0])||(dt=this.containers[kt],ct=kt):this.containers[kt].containerCache.over&&(this.containers[kt]._trigger("out",o,this._uiHash(this)),this.containers[kt].containerCache.over=0));if(dt)if(this.containers.length===1)this.containers[ct].containerCache.over||(this.containers[ct]._trigger("over",o,this._uiHash(this)),this.containers[ct].containerCache.over=1);else{for(p=1e4,b=null,S=(X=dt.floating||this._isFloating(this.currentItem))?"left":"top",_=X?"width":"height",it=X?"pageX":"pageY",d=this.items.length-1;0<=d;d--)i.contains(this.containers[ct].element[0],this.items[d].item[0])&&this.items[d].item[0]!==this.currentItem[0]&&(O=this.items[d].item.offset()[S],B=!1,o[it]-O>this.items[d][_]/2&&(B=!0),Math.abs(o[it]-O)<p&&(p=Math.abs(o[it]-O),b=this.items[d],this.direction=B?"up":"down"));(b||this.options.dropOnEmpty)&&(this.currentContainer!==this.containers[ct]?(b?this._rearrange(o,b,null,!0):this._rearrange(o,null,this.containers[ct].element,!0),this._trigger("change",o,this._uiHash()),this.containers[ct]._trigger("change",o,this._uiHash(this)),this.currentContainer=this.containers[ct],this.options.placeholder.update(this.currentContainer,this.placeholder),this.scrollParent=this.placeholder.scrollParent(),this.scrollParent[0]!==this.document[0]&&this.scrollParent[0].tagName!=="HTML"&&(this.overflowOffset=this.scrollParent.offset()),this.containers[ct]._trigger("over",o,this._uiHash(this)),this.containers[ct].containerCache.over=1):this.currentContainer.containerCache.over||(this.containers[ct]._trigger("over",o,this._uiHash()),this.currentContainer.containerCache.over=1))}},_createHelper:function(p){var d=this.options,p=typeof d.helper=="function"?i(d.helper.apply(this.element[0],[p,this.currentItem])):d.helper==="clone"?this.currentItem.clone():this.currentItem;return p.parents("body").length||this.appendTo[0].appendChild(p[0]),p[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),p[0].style.width&&!d.forceHelperSize||p.width(this.currentItem.width()),p[0].style.height&&!d.forceHelperSize||p.height(this.currentItem.height()),p},_adjustOffsetFromHelper:function(o){typeof o=="string"&&(o=o.split(" ")),"left"in(o=Array.isArray(o)?{left:+o[0],top:+o[1]||0}:o)&&(this.offset.click.left=o.left+this.margins.left),"right"in o&&(this.offset.click.left=this.helperProportions.width-o.right+this.margins.left),"top"in o&&(this.offset.click.top=o.top+this.margins.top),"bottom"in o&&(this.offset.click.top=this.helperProportions.height-o.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var o=this.offsetParent.offset();return this.cssPosition==="absolute"&&this.scrollParent[0]!==this.document[0]&&i.contains(this.scrollParent[0],this.offsetParent[0])&&(o.left+=this.scrollParent.scrollLeft(),o.top+=this.scrollParent.scrollTop()),{top:(o=this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()==="html"&&i.ui.ie?{top:0,left:0}:o).top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:o.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition!=="relative")return{top:0,left:0};var o=this.currentItem.position();return{top:o.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:o.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var o,d,p=this.options;p.containment==="parent"&&(p.containment=this.helper[0].parentNode),p.containment!=="document"&&p.containment!=="window"||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,p.containment==="document"?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,(p.containment==="document"?this.document.height()||document.body.parentNode.scrollHeight:this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(p.containment)||(o=i(p.containment)[0],d=i(p.containment).offset(),p=i(o).css("overflow")!=="hidden",this.containment=[d.left+(parseInt(i(o).css("borderLeftWidth"),10)||0)+(parseInt(i(o).css("paddingLeft"),10)||0)-this.margins.left,d.top+(parseInt(i(o).css("borderTopWidth"),10)||0)+(parseInt(i(o).css("paddingTop"),10)||0)-this.margins.top,d.left+(p?Math.max(o.scrollWidth,o.offsetWidth):o.offsetWidth)-(parseInt(i(o).css("borderLeftWidth"),10)||0)-(parseInt(i(o).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,d.top+(p?Math.max(o.scrollHeight,o.offsetHeight):o.offsetHeight)-(parseInt(i(o).css("borderTopWidth"),10)||0)-(parseInt(i(o).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(S,d){d=d||this.position;var p=S==="absolute"?1:-1,b=this.cssPosition!=="absolute"||this.scrollParent[0]!==this.document[0]&&i.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,S=/(html|body)/i.test(b[0].tagName);return{top:d.top+this.offset.relative.top*p+this.offset.parent.top*p-(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():S?0:b.scrollTop())*p,left:d.left+this.offset.relative.left*p+this.offset.parent.left*p-(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():S?0:b.scrollLeft())*p}},_generatePosition:function(o){var d=this.options,p=o.pageX,b=o.pageY,S=this.cssPosition!=="absolute"||this.scrollParent[0]!==this.document[0]&&i.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,_=/(html|body)/i.test(S[0].tagName);return this.cssPosition!=="relative"||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(o.pageX-this.offset.click.left<this.containment[0]&&(p=this.containment[0]+this.offset.click.left),o.pageY-this.offset.click.top<this.containment[1]&&(b=this.containment[1]+this.offset.click.top),o.pageX-this.offset.click.left>this.containment[2]&&(p=this.containment[2]+this.offset.click.left),o.pageY-this.offset.click.top>this.containment[3]&&(b=this.containment[3]+this.offset.click.top)),d.grid&&(o=this.originalPageY+Math.round((b-this.originalPageY)/d.grid[1])*d.grid[1],b=!this.containment||o-this.offset.click.top>=this.containment[1]&&o-this.offset.click.top<=this.containment[3]?o:o-this.offset.click.top>=this.containment[1]?o-d.grid[1]:o+d.grid[1],o=this.originalPageX+Math.round((p-this.originalPageX)/d.grid[0])*d.grid[0],p=!this.containment||o-this.offset.click.left>=this.containment[0]&&o-this.offset.click.left<=this.containment[2]?o:o-this.offset.click.left>=this.containment[0]?o-d.grid[0]:o+d.grid[0])),{top:b-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():_?0:S.scrollTop()),left:p-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():_?0:S.scrollLeft())}},_rearrange:function(o,d,p,b){p?p[0].appendChild(this.placeholder[0]):d.item[0].parentNode.insertBefore(this.placeholder[0],this.direction==="down"?d.item[0]:d.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var S=this.counter;this._delay(function(){S===this.counter&&this.refreshPositions(!b)})},_clear:function(o,d){this.reverting=!1;var p,b=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(p in this._storedCSS)this._storedCSS[p]!=="auto"&&this._storedCSS[p]!=="static"||(this._storedCSS[p]="");this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")}else this.currentItem.show();function S(_,O,B){return function(X){B._trigger(_,X,O._uiHash(O))}}for(this.fromOutside&&!d&&b.push(function(_){this._trigger("receive",_,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||d||b.push(function(_){this._trigger("update",_,this._uiHash())}),this!==this.currentContainer&&(d||(b.push(function(_){this._trigger("remove",_,this._uiHash())}),b.push((function(_){return function(O){_._trigger("receive",O,this._uiHash(this))}}).call(this,this.currentContainer)),b.push((function(_){return function(O){_._trigger("update",O,this._uiHash(this))}}).call(this,this.currentContainer)))),p=this.containers.length-1;0<=p;p--)d||b.push(S("deactivate",this,this.containers[p])),this.containers[p].containerCache.over&&(b.push(S("out",this,this.containers[p])),this.containers[p].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex",this._storedZIndex==="auto"?"":this._storedZIndex),this.dragging=!1,d||this._trigger("beforeStop",o,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!d){for(p=0;p<b.length;p++)b[p].call(this,o);this._trigger("stop",o,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){i.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(o){var d=o||this;return{helper:d.helper,placeholder:d.placeholder||i([]),position:d.position,originalPosition:d.originalPosition,offset:d.positionAbs,item:d.currentItem,sender:o?o.element:null}}}),i.widget("ui.accordion",{version:"1.13.1",options:{active:0,animate:{},classes:{"ui-accordion-header":"ui-corner-top","ui-accordion-header-collapsed":"ui-corner-all","ui-accordion-content":"ui-corner-bottom"},collapsible:!1,event:"click",header:function(o){return o.find("> li > :first-child").add(o.find("> :not(li)").even())},heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var o=this.options;this.prevShow=this.prevHide=i(),this._addClass("ui-accordion","ui-widget ui-helper-reset"),this.element.attr("role","tablist"),o.collapsible||o.active!==!1&&o.active!=null||(o.active=0),this._processPanels(),o.active<0&&(o.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():i()}},_createIcons:function(){var o,d=this.options.icons;d&&(o=i("<span>"),this._addClass(o,"ui-accordion-header-icon","ui-icon "+d.header),o.prependTo(this.headers),o=this.active.children(".ui-accordion-header-icon"),this._removeClass(o,d.header)._addClass(o,null,d.activeHeader)._addClass(this.headers,"ui-accordion-icons"))},_destroyIcons:function(){this._removeClass(this.headers,"ui-accordion-icons"),this.headers.children(".ui-accordion-header-icon").remove()},_destroy:function(){var o;this.element.removeAttr("role"),this.headers.removeAttr("role aria-expanded aria-selected aria-controls tabIndex").removeUniqueId(),this._destroyIcons(),o=this.headers.next().css("display","").removeAttr("role aria-hidden aria-labelledby").removeUniqueId(),this.options.heightStyle!=="content"&&o.css("height","")},_setOption:function(o,d){o!=="active"?(o==="event"&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(d)),this._super(o,d),o!=="collapsible"||d||this.options.active!==!1||this._activate(0),o==="icons"&&(this._destroyIcons(),d&&this._createIcons())):this._activate(d)},_setOptionDisabled:function(o){this._super(o),this.element.attr("aria-disabled",o),this._toggleClass(null,"ui-state-disabled",!!o),this._toggleClass(this.headers.add(this.headers.next()),null,"ui-state-disabled",!!o)},_keydown:function(o){if(!o.altKey&&!o.ctrlKey){var d=i.ui.keyCode,p=this.headers.length,b=this.headers.index(o.target),S=!1;switch(o.keyCode){case d.RIGHT:case d.DOWN:S=this.headers[(b+1)%p];break;case d.LEFT:case d.UP:S=this.headers[(b-1+p)%p];break;case d.SPACE:case d.ENTER:this._eventHandler(o);break;case d.HOME:S=this.headers[0];break;case d.END:S=this.headers[p-1]}S&&(i(o.target).attr("tabIndex",-1),i(S).attr("tabIndex",0),i(S).trigger("focus"),o.preventDefault())}},_panelKeyDown:function(o){o.keyCode===i.ui.keyCode.UP&&o.ctrlKey&&i(o.currentTarget).prev().trigger("focus")},refresh:function(){var o=this.options;this._processPanels(),o.active===!1&&o.collapsible===!0||!this.headers.length?(o.active=!1,this.active=i()):o.active===!1?this._activate(0):this.active.length&&!i.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(o.active=!1,this.active=i()):this._activate(Math.max(0,o.active-1)):o.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){var o=this.headers,d=this.panels;typeof this.options.header=="function"?this.headers=this.options.header(this.element):this.headers=this.element.find(this.options.header),this._addClass(this.headers,"ui-accordion-header ui-accordion-header-collapsed","ui-state-default"),this.panels=this.headers.next().filter(":not(.ui-accordion-content-active)").hide(),this._addClass(this.panels,"ui-accordion-content","ui-helper-reset ui-widget-content"),d&&(this._off(o.not(this.headers)),this._off(d.not(this.panels)))},_refresh:function(){var o,d=this.options,p=d.heightStyle,b=this.element.parent();this.active=this._findActive(d.active),this._addClass(this.active,"ui-accordion-header-active","ui-state-active")._removeClass(this.active,"ui-accordion-header-collapsed"),this._addClass(this.active.next(),"ui-accordion-content-active"),this.active.next().show(),this.headers.attr("role","tab").each(function(){var S=i(this),_=S.uniqueId().attr("id"),O=S.next(),B=O.uniqueId().attr("id");S.attr("aria-controls",B),O.attr("aria-labelledby",_)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(d.event),p==="fill"?(o=b.height(),this.element.siblings(":visible").each(function(){var S=i(this),_=S.css("position");_!=="absolute"&&_!=="fixed"&&(o-=S.outerHeight(!0))}),this.headers.each(function(){o-=i(this).outerHeight(!0)}),this.headers.next().each(function(){i(this).height(Math.max(0,o-i(this).innerHeight()+i(this).height()))}).css("overflow","auto")):p==="auto"&&(o=0,this.headers.next().each(function(){var S=i(this).is(":visible");S||i(this).show(),o=Math.max(o,i(this).css("height","").height()),S||i(this).hide()}).height(o))},_activate:function(o){o=this._findActive(o)[0],o!==this.active[0]&&(o=o||this.active[0],this._eventHandler({target:o,currentTarget:o,preventDefault:i.noop}))},_findActive:function(o){return typeof o=="number"?this.headers.eq(o):i()},_setupEvents:function(o){var d={keydown:"_keydown"};o&&i.each(o.split(" "),function(p,b){d[b]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,d),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(o){var d=this.options,p=this.active,b=i(o.currentTarget),S=b[0]===p[0],_=S&&d.collapsible,B=_?i():b.next(),O=p.next(),B={oldHeader:p,oldPanel:O,newHeader:_?i():b,newPanel:B};o.preventDefault(),S&&!d.collapsible||this._trigger("beforeActivate",o,B)===!1||(d.active=!_&&this.headers.index(b),this.active=S?i():b,this._toggle(B),this._removeClass(p,"ui-accordion-header-active","ui-state-active"),d.icons&&(p=p.children(".ui-accordion-header-icon"),this._removeClass(p,null,d.icons.activeHeader)._addClass(p,null,d.icons.header)),S||(this._removeClass(b,"ui-accordion-header-collapsed")._addClass(b,"ui-accordion-header-active","ui-state-active"),d.icons&&(S=b.children(".ui-accordion-header-icon"),this._removeClass(S,null,d.icons.header)._addClass(S,null,d.icons.activeHeader)),this._addClass(b.next(),"ui-accordion-content-active")))},_toggle:function(o){var d=o.newPanel,p=this.prevShow.length?this.prevShow:o.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=d,this.prevHide=p,this.options.animate?this._animate(d,p,o):(p.hide(),d.show(),this._toggleComplete(o)),p.attr({"aria-hidden":"true"}),p.prev().attr({"aria-selected":"false","aria-expanded":"false"}),d.length&&p.length?p.prev().attr({tabIndex:-1,"aria-expanded":"false"}):d.length&&this.headers.filter(function(){return parseInt(i(this).attr("tabIndex"),10)===0}).attr("tabIndex",-1),d.attr("aria-hidden","false").prev().attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_animate:function(o,d,p){var b,S,_,O=this,B=0,X=o.css("box-sizing"),ct=o.length&&(!d.length||o.index()<d.index()),it=this.options.animate||{},dt=ct&&it.down||it,ct=function(){O._toggleComplete(p)};return S=(S=typeof dt=="string"?dt:S)||dt.easing||it.easing,_=(_=typeof dt=="number"?dt:_)||dt.duration||it.duration,d.length?o.length?(b=o.show().outerHeight(),d.animate(this.hideProps,{duration:_,easing:S,step:function(kt,Ot){Ot.now=Math.round(kt)}}),void o.hide().animate(this.showProps,{duration:_,easing:S,complete:ct,step:function(kt,Ot){Ot.now=Math.round(kt),Ot.prop!=="height"?X==="content-box"&&(B+=Ot.now):O.options.heightStyle!=="content"&&(Ot.now=Math.round(b-d.outerHeight()-B),B=0)}})):d.animate(this.hideProps,_,S,ct):o.animate(this.showProps,_,S,ct)},_toggleComplete:function(o){var d=o.oldPanel,p=d.prev();this._removeClass(d,"ui-accordion-content-active"),this._removeClass(p,"ui-accordion-header-active")._addClass(p,"ui-accordion-header-collapsed"),d.length&&(d.parent()[0].className=d.parent()[0].className),this._trigger("activate",null,o)}});var St=/ui-corner-([a-z]){2,6}/g;i.widget("ui.controlgroup",{version:"1.13.1",defaultElement:"<div>",options:{direction:"horizontal",disabled:null,onlyVisible:!0,items:{button:"input[type=button], input[type=submit], input[type=reset], button, a",controlgroupLabel:".ui-controlgroup-label",checkboxradio:"input[type='checkbox'], input[type='radio']",selectmenu:"select",spinner:".ui-spinner-input"}},_create:function(){this._enhance()},_enhance:function(){this.element.attr("role","toolbar"),this.refresh()},_destroy:function(){this._callChildMethod("destroy"),this.childWidgets.removeData("ui-controlgroup-data"),this.element.removeAttr("role"),this.options.items.controlgroupLabel&&this.element.find(this.options.items.controlgroupLabel).find(".ui-controlgroup-label-contents").contents().unwrap()},_initWidgets:function(){var o=this,d=[];i.each(this.options.items,function(p,b){var S,_={};if(b)return p==="controlgroupLabel"?((S=o.element.find(b)).each(function(){var O=i(this);O.children(".ui-controlgroup-label-contents").length||O.contents().wrapAll("<span class='ui-controlgroup-label-contents'></span>")}),o._addClass(S,null,"ui-widget ui-widget-content ui-state-default"),void(d=d.concat(S.get()))):void(i.fn[p]&&(_=o["_"+p+"Options"]?o["_"+p+"Options"]("middle"):{classes:{}},o.element.find(b).each(function(){var O=i(this),B=O[p]("instance"),X=i.widget.extend({},_);p==="button"&&O.parent(".ui-spinner").length||((B=B||O[p]()[p]("instance"))&&(X.classes=o._resolveClassesValues(X.classes,B)),O[p](X),X=O[p]("widget"),i.data(X[0],"ui-controlgroup-data",B||O[p]("instance")),d.push(X[0]))})))}),this.childWidgets=i(i.uniqueSort(d)),this._addClass(this.childWidgets,"ui-controlgroup-item")},_callChildMethod:function(o){this.childWidgets.each(function(){var d=i(this).data("ui-controlgroup-data");d&&d[o]&&d[o]()})},_updateCornerClass:function(o,d){d=this._buildSimpleOptions(d,"label").classes.label,this._removeClass(o,null,"ui-corner-top ui-corner-bottom ui-corner-left ui-corner-right ui-corner-all"),this._addClass(o,null,d)},_buildSimpleOptions:function(o,d){var p=this.options.direction==="vertical",b={classes:{}};return b.classes[d]={middle:"",first:"ui-corner-"+(p?"top":"left"),last:"ui-corner-"+(p?"bottom":"right"),only:"ui-corner-all"}[o],b},_spinnerOptions:function(o){return o=this._buildSimpleOptions(o,"ui-spinner"),o.classes["ui-spinner-up"]="",o.classes["ui-spinner-down"]="",o},_buttonOptions:function(o){return this._buildSimpleOptions(o,"ui-button")},_checkboxradioOptions:function(o){return this._buildSimpleOptions(o,"ui-checkboxradio-label")},_selectmenuOptions:function(o){var d=this.options.direction==="vertical";return{width:d&&"auto",classes:{middle:{"ui-selectmenu-button-open":"","ui-selectmenu-button-closed":""},first:{"ui-selectmenu-button-open":"ui-corner-"+(d?"top":"tl"),"ui-selectmenu-button-closed":"ui-corner-"+(d?"top":"left")},last:{"ui-selectmenu-button-open":d?"":"ui-corner-tr","ui-selectmenu-button-closed":"ui-corner-"+(d?"bottom":"right")},only:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"}}[o]}},_resolveClassesValues:function(o,d){var p={};return i.each(o,function(b){var S=d.options.classes[b]||"",S=String.prototype.trim.call(S.replace(St,""));p[b]=(S+" "+o[b]).replace(/\s+/g," ")}),p},_setOption:function(o,d){o==="direction"&&this._removeClass("ui-controlgroup-"+this.options.direction),this._super(o,d),o!=="disabled"?this.refresh():this._callChildMethod(d?"disable":"enable")},refresh:function(){var o,d=this;this._addClass("ui-controlgroup ui-controlgroup-"+this.options.direction),this.options.direction==="horizontal"&&this._addClass(null,"ui-helper-clearfix"),this._initWidgets(),o=this.childWidgets,(o=this.options.onlyVisible?o.filter(":visible"):o).length&&(i.each(["first","last"],function(p,b){var S,_=o[b]().data("ui-controlgroup-data");_&&d["_"+_.widgetName+"Options"]?((S=d["_"+_.widgetName+"Options"](o.length===1?"only":b)).classes=d._resolveClassesValues(S.classes,_),_.element[_.widgetName](S)):d._updateCornerClass(o[b](),b)}),this._callChildMethod("refresh"))}}),i.widget("ui.checkboxradio",[i.ui.formResetMixin,{version:"1.13.1",options:{disabled:null,label:null,icon:!0,classes:{"ui-checkboxradio-label":"ui-corner-all","ui-checkboxradio-icon":"ui-corner-all"}},_getCreateOptions:function(){var o,d=this,p=this._super()||{};return this._readType(),o=this.element.labels(),this.label=i(o[o.length-1]),this.label.length||i.error("No label found for checkboxradio widget"),this.originalLabel="",this.label.contents().not(this.element[0]).each(function(){d.originalLabel+=this.nodeType===3?i(this).text():this.outerHTML}),this.originalLabel&&(p.label=this.originalLabel),(o=this.element[0].disabled)!=null&&(p.disabled=o),p},_create:function(){var o=this.element[0].checked;this._bindFormResetHandler(),this.options.disabled==null&&(this.options.disabled=this.element[0].disabled),this._setOption("disabled",this.options.disabled),this._addClass("ui-checkboxradio","ui-helper-hidden-accessible"),this._addClass(this.label,"ui-checkboxradio-label","ui-button ui-widget"),this.type==="radio"&&this._addClass(this.label,"ui-checkboxradio-radio-label"),this.options.label&&this.options.label!==this.originalLabel?this._updateLabel():this.originalLabel&&(this.options.label=this.originalLabel),this._enhance(),o&&this._addClass(this.label,"ui-checkboxradio-checked","ui-state-active"),this._on({change:"_toggleClasses",focus:function(){this._addClass(this.label,null,"ui-state-focus ui-visual-focus")},blur:function(){this._removeClass(this.label,null,"ui-state-focus ui-visual-focus")}})},_readType:function(){var o=this.element[0].nodeName.toLowerCase();this.type=this.element[0].type,o==="input"&&/radio|checkbox/.test(this.type)||i.error("Can't create checkboxradio on element.nodeName="+o+" and element.type="+this.type)},_enhance:function(){this._updateIcon(this.element[0].checked)},widget:function(){return this.label},_getRadioGroup:function(){var o=this.element[0].name,d="input[name='"+i.escapeSelector(o)+"']";return o?(this.form.length?i(this.form[0].elements).filter(d):i(d).filter(function(){return i(this)._form().length===0})).not(this.element):i([])},_toggleClasses:function(){var o=this.element[0].checked;this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",o),this.options.icon&&this.type==="checkbox"&&this._toggleClass(this.icon,null,"ui-icon-check ui-state-checked",o)._toggleClass(this.icon,null,"ui-icon-blank",!o),this.type==="radio"&&this._getRadioGroup().each(function(){var d=i(this).checkboxradio("instance");d&&d._removeClass(d.label,"ui-checkboxradio-checked","ui-state-active")})},_destroy:function(){this._unbindFormResetHandler(),this.icon&&(this.icon.remove(),this.iconSpace.remove())},_setOption:function(o,d){if(o!=="label"||d){if(this._super(o,d),o==="disabled")return this._toggleClass(this.label,null,"ui-state-disabled",d),void(this.element[0].disabled=d);this.refresh()}},_updateIcon:function(o){var d="ui-icon ui-icon-background ";this.options.icon?(this.icon||(this.icon=i("<span>"),this.iconSpace=i("<span> </span>"),this._addClass(this.iconSpace,"ui-checkboxradio-icon-space")),this.type==="checkbox"?(d+=o?"ui-icon-check ui-state-checked":"ui-icon-blank",this._removeClass(this.icon,null,o?"ui-icon-blank":"ui-icon-check")):d+="ui-icon-blank",this._addClass(this.icon,"ui-checkboxradio-icon",d),o||this._removeClass(this.icon,null,"ui-icon-check ui-state-checked"),this.icon.prependTo(this.label).after(this.iconSpace)):this.icon!==void 0&&(this.icon.remove(),this.iconSpace.remove(),delete this.icon)},_updateLabel:function(){var o=this.label.contents().not(this.element[0]);this.icon&&(o=o.not(this.icon[0])),(o=this.iconSpace?o.not(this.iconSpace[0]):o).remove(),this.label.append(this.options.label)},refresh:function(){var o=this.element[0].checked,d=this.element[0].disabled;this._updateIcon(o),this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",o),this.options.label!==null&&this._updateLabel(),d!==this.options.disabled&&this._setOptions({disabled:d})}}]);var ot;i.ui.checkboxradio,i.widget("ui.button",{version:"1.13.1",defaultElement:"<button>",options:{classes:{"ui-button":"ui-corner-all"},disabled:null,icon:null,iconPosition:"beginning",label:null,showLabel:!0},_getCreateOptions:function(){var o,d=this._super()||{};return this.isInput=this.element.is("input"),(o=this.element[0].disabled)!=null&&(d.disabled=o),this.originalLabel=this.isInput?this.element.val():this.element.html(),this.originalLabel&&(d.label=this.originalLabel),d},_create:function(){!this.option.showLabel&!this.options.icon&&(this.options.showLabel=!0),this.options.disabled==null&&(this.options.disabled=this.element[0].disabled||!1),this.hasTitle=!!this.element.attr("title"),this.options.label&&this.options.label!==this.originalLabel&&(this.isInput?this.element.val(this.options.label):this.element.html(this.options.label)),this._addClass("ui-button","ui-widget"),this._setOption("disabled",this.options.disabled),this._enhance(),this.element.is("a")&&this._on({keyup:function(o){o.keyCode===i.ui.keyCode.SPACE&&(o.preventDefault(),this.element[0].click?this.element[0].click():this.element.trigger("click"))}})},_enhance:function(){this.element.is("button")||this.element.attr("role","button"),this.options.icon&&(this._updateIcon("icon",this.options.icon),this._updateTooltip())},_updateTooltip:function(){this.title=this.element.attr("title"),this.options.showLabel||this.title||this.element.attr("title",this.options.label)},_updateIcon:function(S,d){var p=S!=="iconPosition",b=p?this.options.iconPosition:d,S=b==="top"||b==="bottom";this.icon?p&&this._removeClass(this.icon,null,this.options.icon):(this.icon=i("<span>"),this._addClass(this.icon,"ui-button-icon","ui-icon"),this.options.showLabel||this._addClass("ui-button-icon-only")),p&&this._addClass(this.icon,null,d),this._attachIcon(b),S?(this._addClass(this.icon,null,"ui-widget-icon-block"),this.iconSpace&&this.iconSpace.remove()):(this.iconSpace||(this.iconSpace=i("<span> </span>"),this._addClass(this.iconSpace,"ui-button-icon-space")),this._removeClass(this.icon,null,"ui-wiget-icon-block"),this._attachIconSpace(b))},_destroy:function(){this.element.removeAttr("role"),this.icon&&this.icon.remove(),this.iconSpace&&this.iconSpace.remove(),this.hasTitle||this.element.removeAttr("title")},_attachIconSpace:function(o){this.icon[/^(?:end|bottom)/.test(o)?"before":"after"](this.iconSpace)},_attachIcon:function(o){this.element[/^(?:end|bottom)/.test(o)?"append":"prepend"](this.icon)},_setOptions:function(o){var d=(o.showLabel===void 0?this.options:o).showLabel,p=(o.icon===void 0?this.options:o).icon;d||p||(o.showLabel=!0),this._super(o)},_setOption:function(o,d){o==="icon"&&(d?this._updateIcon(o,d):this.icon&&(this.icon.remove(),this.iconSpace&&this.iconSpace.remove())),o==="iconPosition"&&this._updateIcon(o,d),o==="showLabel"&&(this._toggleClass("ui-button-icon-only",null,!d),this._updateTooltip()),o==="label"&&(this.isInput?this.element.val(d):(this.element.html(d),this.icon&&(this._attachIcon(this.options.iconPosition),this._attachIconSpace(this.options.iconPosition)))),this._super(o,d),o==="disabled"&&(this._toggleClass(null,"ui-state-disabled",d),(this.element[0].disabled=d)&&this.element.trigger("blur"))},refresh:function(){var o=this.element.is("input, button")?this.element[0].disabled:this.element.hasClass("ui-button-disabled");o!==this.options.disabled&&this._setOptions({disabled:o}),this._updateTooltip()}}),i.uiBackCompat!==!1&&(i.widget("ui.button",i.ui.button,{options:{text:!0,icons:{primary:null,secondary:null}},_create:function(){this.options.showLabel&&!this.options.text&&(this.options.showLabel=this.options.text),!this.options.showLabel&&this.options.text&&(this.options.text=this.options.showLabel),this.options.icon||!this.options.icons.primary&&!this.options.icons.secondary?this.options.icon&&(this.options.icons.primary=this.options.icon):this.options.icons.primary?this.options.icon=this.options.icons.primary:(this.options.icon=this.options.icons.secondary,this.options.iconPosition="end"),this._super()},_setOption:function(o,d){o!=="text"?(o==="showLabel"&&(this.options.text=d),o==="icon"&&(this.options.icons.primary=d),o==="icons"&&(d.primary?(this._super("icon",d.primary),this._super("iconPosition","beginning")):d.secondary&&(this._super("icon",d.secondary),this._super("iconPosition","end"))),this._superApply(arguments)):this._super("showLabel",d)}}),i.fn.button=(ot=i.fn.button,function(o){var d=typeof o=="string",p=Array.prototype.slice.call(arguments,1),b=this;return d?this.length||o!=="instance"?this.each(function(){var S=i(this).attr("type"),_=i.data(this,"ui-"+(S!=="checkbox"&&S!=="radio"?"button":"checkboxradio"));return o==="instance"?(b=_,!1):_?typeof _[o]!="function"||o.charAt(0)==="_"?i.error("no such method '"+o+"' for button widget instance"):(S=_[o].apply(_,p))!==_&&S!==void 0?(b=S&&S.jquery?b.pushStack(S.get()):S,!1):void 0:i.error("cannot call methods on button prior to initialization; attempted to call method '"+o+"'")}):b=void 0:(p.length&&(o=i.widget.extend.apply(null,[o].concat(p))),this.each(function(){var _=i(this).attr("type"),S=_!=="checkbox"&&_!=="radio"?"button":"checkboxradio",_=i.data(this,"ui-"+S);_?(_.option(o||{}),_._init&&_._init()):S!="button"?i(this).checkboxradio(i.extend({icon:!1},o)):ot.call(i(this),o)})),b}),i.fn.buttonset=function(){return i.ui.controlgroup||i.error("Controlgroup widget missing"),arguments[0]==="option"&&arguments[1]==="items"&&arguments[2]?this.controlgroup.apply(this,[arguments[0],"items.button",arguments[2]]):arguments[0]==="option"&&arguments[1]==="items"?this.controlgroup.apply(this,[arguments[0],"items.button"]):(typeof arguments[0]=="object"&&arguments[0].items&&(arguments[0].items={button:arguments[0].items}),this.controlgroup.apply(this,arguments))}),i.ui.button,i.widget("ui.dialog",{version:"1.13.1",options:{appendTo:"body",autoOpen:!0,buttons:[],classes:{"ui-dialog":"ui-corner-all","ui-dialog-titlebar":"ui-corner-all"},closeOnEscape:!0,closeText:"Close",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(o){var d=i(this).css(o).offset().top;d<0&&i(this).css("top",o.top-d)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title==null&&this.originalTitle!=null&&(this.options.title=this.originalTitle),this.options.disabled&&(this.options.disabled=!1),this._createWrapper(),this.element.show().removeAttr("title").appendTo(this.uiDialog),this._addClass("ui-dialog-content","ui-widget-content"),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&i.fn.draggable&&this._makeDraggable(),this.options.resizable&&i.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var o=this.options.appendTo;return o&&(o.jquery||o.nodeType)?i(o):this.document.find(o||"body").eq(0)},_destroy:function(){var o,d=this.originalPosition;this._untrackInstance(),this._destroyOverlay(),this.element.removeUniqueId().css(this.originalCss).detach(),this.uiDialog.remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),(o=d.parent.children().eq(d.index)).length&&o[0]!==this.element[0]?o.before(this.element):d.parent.append(this.element)},widget:function(){return this.uiDialog},disable:i.noop,enable:i.noop,close:function(o){var d=this;this._isOpen&&this._trigger("beforeClose",o)!==!1&&(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),this.opener.filter(":focusable").trigger("focus").length||i.ui.safeBlur(i.ui.safeActiveElement(this.document[0])),this._hide(this.uiDialog,this.options.hide,function(){d._trigger("close",o)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(o,d){var p=!1,b=this.uiDialog.siblings(".ui-front:visible").map(function(){return+i(this).css("z-index")}).get(),b=Math.max.apply(null,b);return b>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",b+1),p=!0),p&&!d&&this._trigger("focus",o),p},open:function(){var o=this;this._isOpen?this._moveToTop()&&this._focusTabbable():(this._isOpen=!0,this.opener=i(i.ui.safeActiveElement(this.document[0])),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,function(){o._focusTabbable(),o._trigger("focus")}),this._makeFocusTarget(),this._trigger("open"))},_focusTabbable:function(){var o=this._focusedElement;(o=(o=(o=(o=(o=o||this.element.find("[autofocus]")).length?o:this.element.find(":tabbable")).length?o:this.uiDialogButtonPane.find(":tabbable")).length?o:this.uiDialogTitlebarClose.filter(":tabbable")).length?o:this.uiDialog).eq(0).trigger("focus")},_restoreTabbableFocus:function(){var o=i.ui.safeActiveElement(this.document[0]);this.uiDialog[0]===o||i.contains(this.uiDialog[0],o)||this._focusTabbable()},_keepFocus:function(o){o.preventDefault(),this._restoreTabbableFocus(),this._delay(this._restoreTabbableFocus)},_createWrapper:function(){this.uiDialog=i("<div>").hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._addClass(this.uiDialog,"ui-dialog","ui-widget ui-widget-content ui-front"),this._on(this.uiDialog,{keydown:function(o){if(this.options.closeOnEscape&&!o.isDefaultPrevented()&&o.keyCode&&o.keyCode===i.ui.keyCode.ESCAPE)return o.preventDefault(),void this.close(o);var d,p,b;o.keyCode!==i.ui.keyCode.TAB||o.isDefaultPrevented()||(d=this.uiDialog.find(":tabbable"),p=d.first(),b=d.last(),o.target!==b[0]&&o.target!==this.uiDialog[0]||o.shiftKey?o.target!==p[0]&&o.target!==this.uiDialog[0]||!o.shiftKey||(this._delay(function(){b.trigger("focus")}),o.preventDefault()):(this._delay(function(){p.trigger("focus")}),o.preventDefault()))},mousedown:function(o){this._moveToTop(o)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var o;this.uiDialogTitlebar=i("<div>"),this._addClass(this.uiDialogTitlebar,"ui-dialog-titlebar","ui-widget-header ui-helper-clearfix"),this._on(this.uiDialogTitlebar,{mousedown:function(d){i(d.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.trigger("focus")}}),this.uiDialogTitlebarClose=i("<button type='button'></button>").button({label:i("<a>").text(this.options.closeText).html(),icon:"ui-icon-closethick",showLabel:!1}).appendTo(this.uiDialogTitlebar),this._addClass(this.uiDialogTitlebarClose,"ui-dialog-titlebar-close"),this._on(this.uiDialogTitlebarClose,{click:function(d){d.preventDefault(),this.close(d)}}),o=i("<span>").uniqueId().prependTo(this.uiDialogTitlebar),this._addClass(o,"ui-dialog-title"),this._title(o),this.uiDialogTitlebar.prependTo(this.uiDialog),this.uiDialog.attr({"aria-labelledby":o.attr("id")})},_title:function(o){this.options.title?o.text(this.options.title):o.html("&#160;")},_createButtonPane:function(){this.uiDialogButtonPane=i("<div>"),this._addClass(this.uiDialogButtonPane,"ui-dialog-buttonpane","ui-widget-content ui-helper-clearfix"),this.uiButtonSet=i("<div>").appendTo(this.uiDialogButtonPane),this._addClass(this.uiButtonSet,"ui-dialog-buttonset"),this._createButtons()},_createButtons:function(){var o=this,d=this.options.buttons;this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),i.isEmptyObject(d)||Array.isArray(d)&&!d.length?this._removeClass(this.uiDialog,"ui-dialog-buttons"):(i.each(d,function(p,b){var S;b=i.extend({type:"button"},b=typeof b=="function"?{click:b,text:p}:b),S=b.click,p={icon:b.icon,iconPosition:b.iconPosition,showLabel:b.showLabel,icons:b.icons,text:b.text},delete b.click,delete b.icon,delete b.iconPosition,delete b.showLabel,delete b.icons,typeof b.text=="boolean"&&delete b.text,i("<button></button>",b).button(p).appendTo(o.uiButtonSet).on("click",function(){S.apply(o.element[0],arguments)})}),this._addClass(this.uiDialog,"ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){var o=this,d=this.options;function p(b){return{position:b.position,offset:b.offset}}this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(b,S){o._addClass(i(this),"ui-dialog-dragging"),o._blockFrames(),o._trigger("dragStart",b,p(S))},drag:function(b,S){o._trigger("drag",b,p(S))},stop:function(b,S){var _=S.offset.left-o.document.scrollLeft(),O=S.offset.top-o.document.scrollTop();d.position={my:"left top",at:"left"+(0<=_?"+":"")+_+" top"+(0<=O?"+":"")+O,of:o.window},o._removeClass(i(this),"ui-dialog-dragging"),o._unblockFrames(),o._trigger("dragStop",b,p(S))}})},_makeResizable:function(){var o=this,d=this.options,b=d.resizable,p=this.uiDialog.css("position"),b=typeof b=="string"?b:"n,e,s,w,se,sw,ne,nw";function S(_){return{originalPosition:_.originalPosition,originalSize:_.originalSize,position:_.position,size:_.size}}this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:d.maxWidth,maxHeight:d.maxHeight,minWidth:d.minWidth,minHeight:this._minHeight(),handles:b,start:function(_,O){o._addClass(i(this),"ui-dialog-resizing"),o._blockFrames(),o._trigger("resizeStart",_,S(O))},resize:function(_,O){o._trigger("resize",_,S(O))},stop:function(_,O){var X=o.uiDialog.offset(),B=X.left-o.document.scrollLeft(),X=X.top-o.document.scrollTop();d.height=o.uiDialog.height(),d.width=o.uiDialog.width(),d.position={my:"left top",at:"left"+(0<=B?"+":"")+B+" top"+(0<=X?"+":"")+X,of:o.window},o._removeClass(i(this),"ui-dialog-resizing"),o._unblockFrames(),o._trigger("resizeStop",_,S(O))}}).css("position",p)},_trackFocus:function(){this._on(this.widget(),{focusin:function(o){this._makeFocusTarget(),this._focusedElement=i(o.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var o=this._trackingInstances(),d=i.inArray(this,o);d!==-1&&o.splice(d,1)},_trackingInstances:function(){var o=this.document.data("ui-dialog-instances");return o||this.document.data("ui-dialog-instances",o=[]),o},_minHeight:function(){var o=this.options;return o.height==="auto"?o.minHeight:Math.min(o.minHeight,o.height)},_position:function(){var o=this.uiDialog.is(":visible");o||this.uiDialog.show(),this.uiDialog.position(this.options.position),o||this.uiDialog.hide()},_setOptions:function(o){var d=this,p=!1,b={};i.each(o,function(S,_){d._setOption(S,_),S in d.sizeRelatedOptions&&(p=!0),S in d.resizableRelatedOptions&&(b[S]=_)}),p&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",b)},_setOption:function(o,d){var p,b=this.uiDialog;o!=="disabled"&&(this._super(o,d),o==="appendTo"&&this.uiDialog.appendTo(this._appendTo()),o==="buttons"&&this._createButtons(),o==="closeText"&&this.uiDialogTitlebarClose.button({label:i("<a>").text(""+this.options.closeText).html()}),o==="draggable"&&((p=b.is(":data(ui-draggable)"))&&!d&&b.draggable("destroy"),!p&&d&&this._makeDraggable()),o==="position"&&this._position(),o==="resizable"&&((p=b.is(":data(ui-resizable)"))&&!d&&b.resizable("destroy"),p&&typeof d=="string"&&b.resizable("option","handles",d),p||d===!1||this._makeResizable()),o==="title"&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var o,d,p,b=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),b.minWidth>b.width&&(b.width=b.minWidth),o=this.uiDialog.css({height:"auto",width:b.width}).outerHeight(),d=Math.max(0,b.minHeight-o),p=typeof b.maxHeight=="number"?Math.max(0,b.maxHeight-o):"none",b.height==="auto"?this.element.css({minHeight:d,maxHeight:p,height:"auto"}):this.element.height(Math.max(0,b.height-o)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var o=i(this);return i("<div>").css({position:"absolute",width:o.outerWidth(),height:o.outerHeight()}).appendTo(o.parent()).offset(o.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(o){return!!i(o.target).closest(".ui-dialog").length||!!i(o.target).closest(".ui-datepicker").length},_createOverlay:function(){var o,d;this.options.modal&&(o=i.fn.jquery.substring(0,4),d=!0,this._delay(function(){d=!1}),this.document.data("ui-dialog-overlays")||this.document.on("focusin.ui-dialog",(function(p){var b;d||(b=this._trackingInstances()[0])._allowInteraction(p)||(p.preventDefault(),b._focusTabbable(),o!=="3.4."&&o!=="3.5."||b._delay(b._restoreTabbableFocus))}).bind(this)),this.overlay=i("<div>").appendTo(this._appendTo()),this._addClass(this.overlay,null,"ui-widget-overlay ui-front"),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1))},_destroyOverlay:function(){var o;this.options.modal&&this.overlay&&((o=this.document.data("ui-dialog-overlays")-1)?this.document.data("ui-dialog-overlays",o):(this.document.off("focusin.ui-dialog"),this.document.removeData("ui-dialog-overlays")),this.overlay.remove(),this.overlay=null)}}),i.uiBackCompat!==!1&&i.widget("ui.dialog",i.ui.dialog,{options:{dialogClass:""},_createWrapper:function(){this._super(),this.uiDialog.addClass(this.options.dialogClass)},_setOption:function(o,d){o==="dialogClass"&&this.uiDialog.removeClass(this.options.dialogClass).addClass(d),this._superApply(arguments)}}),i.ui.dialog;var st=i,wt={},Tt=wt.toString,At=/^([\-+])=\s*(\d+\.?\d*)/,Pt=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(o){return[o[1],o[2],o[3],o[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(o){return[2.55*o[1],2.55*o[2],2.55*o[3],o[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})?/,parse:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16),o[4]?(parseInt(o[4],16)/255).toFixed(2):1]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])([a-f0-9])?/,parse:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16),o[4]?(parseInt(o[4]+o[4],16)/255).toFixed(2):1]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(o){return[o[1],o[2]/100,o[3]/100,o[4]]}}],K=st.Color=function(o,d,p,b){return new st.Color.fn.parse(o,d,p,b)},lt={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},z={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},oe=K.support={},Zt=st("<p>")[0],ee=st.each;function jt(o){return o==null?o+"":typeof o=="object"?wt[Tt.call(o)]||"object":typeof o}function Nt(o,d,p){var b=z[d.type]||{};return o==null?p||!d.def?null:d.def:(o=b.floor?~~o:parseFloat(o),isNaN(o)?d.def:b.mod?(o+b.mod)%b.mod:Math.min(b.max,Math.max(0,o)))}function Vt(o){var d=K(),p=d._rgba=[];return o=o.toLowerCase(),ee(Pt,function(b,O){var _=O.re.exec(o),_=_&&O.parse(_),O=O.space||"rgba";if(_)return _=d[O](_),d[lt[O].cache]=_[lt[O].cache],p=d._rgba=_._rgba,!1}),p.length?(p.join()==="0,0,0,0"&&st.extend(p,Yt.transparent),d):Yt[o]}function de(o,d,p){return 6*(p=(p+1)%1)<1?o+(d-o)*p*6:2*p<1?d:3*p<2?o+(d-o)*(2/3-p)*6:o}Zt.style.cssText="background-color:rgba(1,1,1,.5)",oe.rgba=-1<Zt.style.backgroundColor.indexOf("rgba"),ee(lt,function(o,d){d.cache="_"+o,d.props.alpha={idx:3,type:"percent",def:1}}),st.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(o,d){wt["[object "+d+"]"]=d.toLowerCase()}),(K.fn=st.extend(K.prototype,{parse:function(o,d,p,b){if(o===void 0)return this._rgba=[null,null,null,null],this;(o.jquery||o.nodeType)&&(o=st(o).css(d),d=void 0);var S=this,_=jt(o),O=this._rgba=[];return d!==void 0&&(o=[o,d,p,b],_="array"),_==="string"?this.parse(Vt(o)||Yt._default):_==="array"?(ee(lt.rgba.props,function(B,X){O[X.idx]=Nt(o[X.idx],X)}),this):_==="object"?(ee(lt,o instanceof K?function(B,X){o[X.cache]&&(S[X.cache]=o[X.cache].slice())}:function(B,X){var it=X.cache;ee(X.props,function(dt,ct){if(!S[it]&&X.to){if(dt==="alpha"||o[dt]==null)return;S[it]=X.to(S._rgba)}S[it][ct.idx]=Nt(o[dt],ct,!0)}),S[it]&&st.inArray(null,S[it].slice(0,3))<0&&(S[it][3]==null&&(S[it][3]=1),X.from&&(S._rgba=X.from(S[it])))}),this):void 0},is:function(o){var d=K(o),p=!0,b=this;return ee(lt,function(S,_){var O,B=d[_.cache];return B&&(O=b[_.cache]||_.to&&_.to(b._rgba)||[],ee(_.props,function(X,it){if(B[it.idx]!=null)return p=B[it.idx]===O[it.idx]})),p}),p},_space:function(){var o=[],d=this;return ee(lt,function(p,b){d[b.cache]&&o.push(p)}),o.pop()},transition:function(S,d){var p=(B=K(S))._space(),b=lt[p],S=this.alpha()===0?K("transparent"):this,_=S[b.cache]||b.to(S._rgba),O=_.slice(),B=B[b.cache];return ee(b.props,function(X,it){var dt=it.idx,ct=_[dt],kt=B[dt],Ot=z[it.type]||{};kt!==null&&(ct===null?O[dt]=kt:(Ot.mod&&(kt-ct>Ot.mod/2?ct+=Ot.mod:ct-kt>Ot.mod/2&&(ct-=Ot.mod)),O[dt]=Nt((kt-ct)*d+ct,it)))}),this[p](O)},blend:function(o){if(this._rgba[3]===1)return this;var d=this._rgba.slice(),p=d.pop(),b=K(o)._rgba;return K(st.map(d,function(S,_){return(1-p)*b[_]+p*S}))},toRgbaString:function(){var o="rgba(",d=st.map(this._rgba,function(p,b){return p??(2<b?1:0)});return d[3]===1&&(d.pop(),o="rgb("),o+d.join()+")"},toHslaString:function(){var o="hsla(",d=st.map(this.hsla(),function(p,b){return p==null&&(p=2<b?1:0),p=b&&b<3?Math.round(100*p)+"%":p});return d[3]===1&&(d.pop(),o="hsl("),o+d.join()+")"},toHexString:function(o){var d=this._rgba.slice(),p=d.pop();return o&&d.push(~~(255*p)),"#"+st.map(d,function(b){return(b=(b||0).toString(16)).length===1?"0"+b:b}).join("")},toString:function(){return this._rgba[3]===0?"transparent":this.toRgbaString()}})).parse.prototype=K.fn,lt.hsla.to=function(B){if(B[0]==null||B[1]==null||B[2]==null)return[null,null,null,B[3]];var d=B[0]/255,X=B[1]/255,p=B[2]/255,b=B[3],S=Math.max(d,X,p),_=Math.min(d,X,p),O=S-_,it=S+_,B=.5*it,X=_===S?0:d===S?60*(X-p)/O+360:X===S?60*(p-d)/O+120:60*(d-X)/O+240,it=O==0?0:B<=.5?O/it:O/(2-it);return[Math.round(X)%360,it,B,b??1]},lt.hsla.from=function(p){if(p[0]==null||p[1]==null||p[2]==null)return[null,null,null,p[3]];var d=p[0]/360,b=p[1],S=p[2],p=p[3],b=S<=.5?S*(1+b):S+b-S*b,S=2*S-b;return[Math.round(255*de(S,b,d+1/3)),Math.round(255*de(S,b,d)),Math.round(255*de(S,b,d-1/3)),p]},ee(lt,function(o,d){var p=d.props,b=d.cache,S=d.to,_=d.from;K.fn[o]=function(O){if(S&&!this[b]&&(this[b]=S(this._rgba)),O===void 0)return this[b].slice();var B=jt(O),X=B==="array"||B==="object"?O:arguments,it=this[b].slice();return ee(p,function(dt,ct){dt=X[B==="object"?dt:ct.idx],dt==null&&(dt=it[ct.idx]),it[ct.idx]=Nt(dt,ct)}),_?((O=K(_(it)))[b]=it,O):K(it)},ee(p,function(O,B){K.fn[O]||(K.fn[O]=function(X){var it,dt=jt(X),ct=O==="alpha"?this._hsla?"hsla":"rgba":o,kt=this[ct](),Ot=kt[B.idx];return dt==="undefined"?Ot:(dt==="function"&&(dt=jt(X=X.call(this,Ot))),X==null&&B.empty?this:(dt==="string"&&(it=At.exec(X))&&(X=Ot+parseFloat(it[2])*(it[1]==="+"?1:-1)),kt[B.idx]=X,this[ct](kt)))})})}),(K.hook=function(o){o=o.split(" "),ee(o,function(d,p){st.cssHooks[p]={set:function(b,S){var _,O,B="";if(S!=="transparent"&&(jt(S)!=="string"||(_=Vt(S)))){if(S=K(_||S),!oe.rgba&&S._rgba[3]!==1){for(O=p==="backgroundColor"?b.parentNode:b;(B===""||B==="transparent")&&O&&O.style;)try{B=st.css(O,"backgroundColor"),O=O.parentNode}catch{}S=S.blend(B&&B!=="transparent"?B:"_default")}S=S.toRgbaString()}try{b.style[p]=S}catch{}}},st.fx.step[p]=function(b){b.colorInit||(b.start=K(b.elem,p),b.end=K(b.end),b.colorInit=!0),st.cssHooks[p].set(b.elem,b.start.transition(b.end,b.pos))}})})("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor"),st.cssHooks.borderColor={expand:function(o){var d={};return ee(["Top","Right","Bottom","Left"],function(p,b){d["border"+b+"Color"]=o}),d}};var ae,me,rt,Q,nt,N,Y,vt,pt,Lt,Yt=st.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"},Xt="ui-effects-",he="ui-effects-style",gt="ui-effects-animated";function Dt(o){var d,p,b=o.ownerDocument.defaultView?o.ownerDocument.defaultView.getComputedStyle(o,null):o.currentStyle,S={};if(b&&b.length&&b[0]&&b[b[0]])for(p=b.length;p--;)typeof b[d=b[p]]=="string"&&(S[d.replace(/-([\da-z])/gi,function(_,O){return O.toUpperCase()})]=b[d]);else for(d in b)typeof b[d]=="string"&&(S[d]=b[d]);return S}function xt(o,d,p,b){return o={effect:o=i.isPlainObject(o)?(d=o).effect:o},typeof(d=d??{})=="function"&&(b=d,p=null,d={}),typeof d!="number"&&!i.fx.speeds[d]||(b=p,p=d,d={}),typeof p=="function"&&(b=p,p=null),d&&i.extend(o,d),p=p||d.duration,o.duration=i.fx.off?0:typeof p=="number"?p:p in i.fx.speeds?i.fx.speeds[p]:i.fx.speeds._default,o.complete=b||d.complete,o}function qt(o){return!o||typeof o=="number"||i.fx.speeds[o]||typeof o=="string"&&!i.effects.effect[o]||typeof o=="function"||typeof o=="object"&&!o.effect}function Ft(S,b){var p=b.outerWidth(),b=b.outerHeight(),S=/^rect\((-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto)\)$/.exec(S)||["",0,p,b,0];return{top:parseFloat(S[1])||0,right:S[2]==="auto"?p:parseFloat(S[2]),bottom:S[3]==="auto"?b:parseFloat(S[3]),left:parseFloat(S[4])||0}}i.effects={effect:{}},Q=["add","remove","toggle"],nt={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1},i.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(o,d){i.fx.step[d]=function(p){(p.end!=="none"&&!p.setAttr||p.pos===1&&!p.setAttr)&&(st.style(p.elem,d,p.end),p.setAttr=!0)}}),i.fn.addBack||(i.fn.addBack=function(o){return this.add(o==null?this.prevObject:this.prevObject.filter(o))}),i.effects.animateClass=function(o,d,p,b){var S=i.speed(d,p,b);return this.queue(function(){var _=i(this),O=_.attr("class")||"",B=(B=S.children?_.find("*").addBack():_).map(function(){return{el:i(this),start:Dt(this)}}),X=function(){i.each(Q,function(it,dt){o[dt]&&_[dt+"Class"](o[dt])})};X(),B=B.map(function(){return this.end=Dt(this.el[0]),this.diff=function(it,dt){var ct,kt,Ot={};for(ct in dt)kt=dt[ct],it[ct]!==kt&&(nt[ct]||!i.fx.step[ct]&&isNaN(parseFloat(kt))||(Ot[ct]=kt));return Ot}(this.start,this.end),this}),_.attr("class",O),B=B.map(function(){var it=this,dt=i.Deferred(),ct=i.extend({},S,{queue:!1,complete:function(){dt.resolve(it)}});return this.el.animate(this.diff,ct),dt.promise()}),i.when.apply(i,B.get()).done(function(){X(),i.each(arguments,function(){var it=this.el;i.each(this.diff,function(dt){it.css(dt,"")})}),S.complete.call(_[0])})})},i.fn.extend({addClass:(rt=i.fn.addClass,function(o,d,p,b){return d?i.effects.animateClass.call(this,{add:o},d,p,b):rt.apply(this,arguments)}),removeClass:(me=i.fn.removeClass,function(o,d,p,b){return 1<arguments.length?i.effects.animateClass.call(this,{remove:o},d,p,b):me.apply(this,arguments)}),toggleClass:(ae=i.fn.toggleClass,function(o,d,p,b,S){return typeof d=="boolean"||d===void 0?p?i.effects.animateClass.call(this,d?{add:o}:{remove:o},p,b,S):ae.apply(this,arguments):i.effects.animateClass.call(this,{toggle:o},d,p,b)}),switchClass:function(o,d,p,b,S){return i.effects.animateClass.call(this,{add:d,remove:o},p,b,S)}}),i.expr&&i.expr.pseudos&&i.expr.pseudos.animated&&(i.expr.pseudos.animated=(N=i.expr.pseudos.animated,function(o){return!!i(o).data(gt)||N(o)})),i.uiBackCompat!==!1&&i.extend(i.effects,{save:function(o,d){for(var p=0,b=d.length;p<b;p++)d[p]!==null&&o.data(Xt+d[p],o[0].style[d[p]])},restore:function(o,d){for(var p,b=0,S=d.length;b<S;b++)d[b]!==null&&(p=o.data(Xt+d[b]),o.css(d[b],p))},setMode:function(o,d){return d=d==="toggle"?o.is(":hidden")?"show":"hide":d},createWrapper:function(o){if(o.parent().is(".ui-effects-wrapper"))return o.parent();var d={width:o.outerWidth(!0),height:o.outerHeight(!0),float:o.css("float")},p=i("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),b={width:o.width(),height:o.height()},S=document.activeElement;try{S.id}catch{S=document.body}return o.wrap(p),o[0]!==S&&!i.contains(o[0],S)||i(S).trigger("focus"),p=o.parent(),o.css("position")==="static"?(p.css({position:"relative"}),o.css({position:"relative"})):(i.extend(d,{position:o.css("position"),zIndex:o.css("z-index")}),i.each(["top","left","bottom","right"],function(_,O){d[O]=o.css(O),isNaN(parseInt(d[O],10))&&(d[O]="auto")}),o.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),o.css(b),p.css(d).show()},removeWrapper:function(o){var d=document.activeElement;return o.parent().is(".ui-effects-wrapper")&&(o.parent().replaceWith(o),o[0]!==d&&!i.contains(o[0],d)||i(d).trigger("focus")),o}}),i.extend(i.effects,{version:"1.13.1",define:function(o,d,p){return p||(p=d,d="effect"),i.effects.effect[o]=p,i.effects.effect[o].mode=d,p},scaledDimensions:function(o,S,p){if(S===0)return{height:0,width:0,outerHeight:0,outerWidth:0};var b=p!=="horizontal"?(S||100)/100:1,S=p!=="vertical"?(S||100)/100:1;return{height:o.height()*S,width:o.width()*b,outerHeight:o.outerHeight()*S,outerWidth:o.outerWidth()*b}},clipToBox:function(o){return{width:o.clip.right-o.clip.left,height:o.clip.bottom-o.clip.top,left:o.clip.left,top:o.clip.top}},unshift:function(o,d,p){var b=o.queue();1<d&&b.splice.apply(b,[1,0].concat(b.splice(d,p))),o.dequeue()},saveStyle:function(o){o.data(he,o[0].style.cssText)},restoreStyle:function(o){o[0].style.cssText=o.data(he)||"",o.removeData(he)},mode:function(o,d){return o=o.is(":hidden"),d==="toggle"&&(d=o?"show":"hide"),d=(o?d==="hide":d==="show")?"none":d},getBaseline:function(o,d){var p,b;switch(o[0]){case"top":p=0;break;case"middle":p=.5;break;case"bottom":p=1;break;default:p=o[0]/d.height}switch(o[1]){case"left":b=0;break;case"center":b=.5;break;case"right":b=1;break;default:b=o[1]/d.width}return{x:b,y:p}},createPlaceholder:function(o){var d,p=o.css("position"),b=o.position();return o.css({marginTop:o.css("marginTop"),marginBottom:o.css("marginBottom"),marginLeft:o.css("marginLeft"),marginRight:o.css("marginRight")}).outerWidth(o.outerWidth()).outerHeight(o.outerHeight()),/^(static|relative)/.test(p)&&(p="absolute",d=i("<"+o[0].nodeName+">").insertAfter(o).css({display:/^(inline|ruby)/.test(o.css("display"))?"inline-block":"block",visibility:"hidden",marginTop:o.css("marginTop"),marginBottom:o.css("marginBottom"),marginLeft:o.css("marginLeft"),marginRight:o.css("marginRight"),float:o.css("float")}).outerWidth(o.outerWidth()).outerHeight(o.outerHeight()).addClass("ui-effects-placeholder"),o.data(Xt+"placeholder",d)),o.css({position:p,left:b.left,top:b.top}),d},removePlaceholder:function(o){var d=Xt+"placeholder",p=o.data(d);p&&(p.remove(),o.removeData(d))},cleanUp:function(o){i.effects.restoreStyle(o),i.effects.removePlaceholder(o)},setTransition:function(o,d,p,b){return b=b||{},i.each(d,function(S,_){var O=o.cssUnit(_);0<O[0]&&(b[_]=O[0]*p+O[1])}),b}}),i.fn.extend({effect:function(){function o(dt){var ct=i(this),kt=i.effects.mode(ct,B)||b;ct.data(gt,!0),X.push(kt),b&&(kt==="show"||kt===b&&kt==="hide")&&ct.show(),b&&kt==="none"||i.effects.saveStyle(ct),typeof dt=="function"&&dt()}var d=xt.apply(this,arguments),p=i.effects.effect[d.effect],b=p.mode,S=d.queue,_=S||"fx",O=d.complete,B=d.mode,X=[];return i.fx.off||!p?B?this[B](d.duration,O):this.each(function(){O&&O.call(this)}):S===!1?this.each(o).each(it):this.queue(_,o).queue(_,it);function it(dt){var ct=i(this);function kt(){typeof O=="function"&&O.call(ct[0]),typeof dt=="function"&&dt()}d.mode=X.shift(),i.uiBackCompat===!1||b?d.mode==="none"?(ct[B](),kt()):p.call(ct[0],d,function(){ct.removeData(gt),i.effects.cleanUp(ct),d.mode==="hide"&&ct.hide(),kt()}):(ct.is(":hidden")?B==="hide":B==="show")?(ct[B](),kt()):p.call(ct[0],d,kt)}},show:(pt=i.fn.show,function(o){return qt(o)?pt.apply(this,arguments):(o=xt.apply(this,arguments),o.mode="show",this.effect.call(this,o))}),hide:(vt=i.fn.hide,function(o){return qt(o)?vt.apply(this,arguments):(o=xt.apply(this,arguments),o.mode="hide",this.effect.call(this,o))}),toggle:(Y=i.fn.toggle,function(o){return qt(o)||typeof o=="boolean"?Y.apply(this,arguments):(o=xt.apply(this,arguments),o.mode="toggle",this.effect.call(this,o))}),cssUnit:function(o){var d=this.css(o),p=[];return i.each(["em","px","%","pt"],function(b,S){0<d.indexOf(S)&&(p=[parseFloat(d),S])}),p},cssClip:function(o){return o?this.css("clip","rect("+o.top+"px "+o.right+"px "+o.bottom+"px "+o.left+"px)"):Ft(this.css("clip"),this)},transfer:function(o,d){var p=i(this),B=i(o.to),b=B.css("position")==="fixed",O=i("body"),S=b?O.scrollTop():0,_=b?O.scrollLeft():0,O=B.offset(),O={top:O.top-S,left:O.left-_,height:B.innerHeight(),width:B.innerWidth()},B=p.offset(),X=i("<div class='ui-effects-transfer'></div>");X.appendTo("body").addClass(o.className).css({top:B.top-S,left:B.left-_,height:p.innerHeight(),width:p.innerWidth(),position:b?"fixed":"absolute"}).animate(O,o.duration,o.easing,function(){X.remove(),typeof d=="function"&&d()})}}),i.fx.step.clip=function(o){o.clipInit||(o.start=i(o.elem).cssClip(),typeof o.end=="string"&&(o.end=Ft(o.end,o.elem)),o.clipInit=!0),i(o.elem).cssClip({top:o.pos*(o.end.top-o.start.top)+o.start.top,right:o.pos*(o.end.right-o.start.right)+o.start.right,bottom:o.pos*(o.end.bottom-o.start.bottom)+o.start.bottom,left:o.pos*(o.end.left-o.start.left)+o.start.left})},Lt={},i.each(["Quad","Cubic","Quart","Quint","Expo"],function(o,d){Lt[d]=function(p){return Math.pow(p,o+2)}}),i.extend(Lt,{Sine:function(o){return 1-Math.cos(o*Math.PI/2)},Circ:function(o){return 1-Math.sqrt(1-o*o)},Elastic:function(o){return o===0||o===1?o:-Math.pow(2,8*(o-1))*Math.sin((80*(o-1)-7.5)*Math.PI/15)},Back:function(o){return o*o*(3*o-2)},Bounce:function(o){for(var d,p=4;o<((d=Math.pow(2,--p))-1)/11;);return 1/Math.pow(4,3-p)-7.5625*Math.pow((3*d-2)/22-o,2)}}),i.each(Lt,function(o,d){i.easing["easeIn"+o]=d,i.easing["easeOut"+o]=function(p){return 1-d(1-p)},i.easing["easeInOut"+o]=function(p){return p<.5?d(2*p)/2:1-d(-2*p+2)/2}}),Zt=i.effects,i.effects.define("blind","hide",function(o,d){var p={up:["bottom","top"],vertical:["bottom","top"],down:["top","bottom"],left:["right","left"],horizontal:["right","left"],right:["left","right"]},b=i(this),S=o.direction||"up",_=b.cssClip(),O={clip:i.extend({},_)},B=i.effects.createPlaceholder(b);O.clip[p[S][0]]=O.clip[p[S][1]],o.mode==="show"&&(b.cssClip(O.clip),B&&B.css(i.effects.clipToBox(O)),O.clip=_),B&&B.animate(i.effects.clipToBox(O),o.duration,o.easing),b.animate(O,{queue:!1,duration:o.duration,easing:o.easing,complete:d})}),i.effects.define("bounce",function($t,d){var p,b,S=i(this),dt=$t.mode,_=dt==="hide",O=dt==="show",B=$t.direction||"up",X=$t.distance,it=$t.times||5,dt=2*it+(O||_?1:0),ct=$t.duration/dt,kt=$t.easing,Ot=B==="up"||B==="down"?"top":"left",ie=B==="up"||B==="left",Jt=0,$t=S.queue().length;for(i.effects.createPlaceholder(S),B=S.css(Ot),X=X||S[Ot=="top"?"outerHeight":"outerWidth"]()/3,O&&((b={opacity:1})[Ot]=B,S.css("opacity",0).css(Ot,ie?2*-X:2*X).animate(b,ct,kt)),_&&(X/=Math.pow(2,it-1)),(b={})[Ot]=B;Jt<it;Jt++)(p={})[Ot]=(ie?"-=":"+=")+X,S.animate(p,ct,kt).animate(b,ct,kt),X=_?2*X:X/2;_&&((p={opacity:0})[Ot]=(ie?"-=":"+=")+X,S.animate(p,ct,kt)),S.queue(d),i.effects.unshift(S,$t,1+dt)}),i.effects.define("clip","hide",function(o,d){var p={},b=i(this),O=o.direction||"vertical",_=O==="both",S=_||O==="horizontal",_=_||O==="vertical",O=b.cssClip();p.clip={top:_?(O.bottom-O.top)/2:O.top,right:S?(O.right-O.left)/2:O.right,bottom:_?(O.bottom-O.top)/2:O.bottom,left:S?(O.right-O.left)/2:O.left},i.effects.createPlaceholder(b),o.mode==="show"&&(b.cssClip(p.clip),p.clip=O),b.animate(p,{queue:!1,duration:o.duration,easing:o.easing,complete:d})}),i.effects.define("drop","hide",function(o,d){var p=i(this),b=o.mode==="show",S=o.direction||"left",_=S==="up"||S==="down"?"top":"left",O=S==="up"||S==="left"?"-=":"+=",B=O=="+="?"-=":"+=",X={opacity:0};i.effects.createPlaceholder(p),S=o.distance||p[_=="top"?"outerHeight":"outerWidth"](!0)/2,X[_]=O+S,b&&(p.css(X),X[_]=B+S,X.opacity=1),p.animate(X,{queue:!1,duration:o.duration,easing:o.easing,complete:d})}),i.effects.define("explode","hide",function(o,d){var p,b,S,_,O,B,X=o.pieces?Math.round(Math.sqrt(o.pieces)):3,it=X,dt=i(this),ct=o.mode==="show",kt=dt.show().css("visibility","hidden").offset(),Ot=Math.ceil(dt.outerWidth()/it),ie=Math.ceil(dt.outerHeight()/X),Jt=[];function $t(){Jt.push(this),Jt.length===X*it&&(dt.css({visibility:"visible"}),i(Jt).remove(),d())}for(p=0;p<X;p++)for(_=kt.top+p*ie,B=p-(X-1)/2,b=0;b<it;b++)S=kt.left+b*Ot,O=b-(it-1)/2,dt.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-b*Ot,top:-p*ie}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:Ot,height:ie,left:S+(ct?O*Ot:0),top:_+(ct?B*ie:0),opacity:ct?0:1}).animate({left:S+(ct?0:O*Ot),top:_+(ct?0:B*ie),opacity:ct?1:0},o.duration||500,o.easing,$t)}),i.effects.define("fade","toggle",function(o,d){var p=o.mode==="show";i(this).css("opacity",p?0:1).animate({opacity:p?1:0},{queue:!1,duration:o.duration,easing:o.easing,complete:d})}),i.effects.define("fold","hide",function(o,d){var p=i(this),ie=o.mode,b=ie==="show",S=ie==="hide",_=o.size||15,O=/([0-9]+)%/.exec(_),B=o.horizFirst?["right","bottom"]:["bottom","right"],X=o.duration/2,it=i.effects.createPlaceholder(p),dt=p.cssClip(),ct={clip:i.extend({},dt)},kt={clip:i.extend({},dt)},Ot=[dt[B[0]],dt[B[1]]],ie=p.queue().length;O&&(_=parseInt(O[1],10)/100*Ot[S?0:1]),ct.clip[B[0]]=_,kt.clip[B[0]]=_,kt.clip[B[1]]=0,b&&(p.cssClip(kt.clip),it&&it.css(i.effects.clipToBox(kt)),kt.clip=dt),p.queue(function(Jt){it&&it.animate(i.effects.clipToBox(ct),X,o.easing).animate(i.effects.clipToBox(kt),X,o.easing),Jt()}).animate(ct,X,o.easing).animate(kt,X,o.easing).queue(d),i.effects.unshift(p,ie,4)}),i.effects.define("highlight","show",function(o,d){var p=i(this),b={backgroundColor:p.css("backgroundColor")};o.mode==="hide"&&(b.opacity=0),i.effects.saveStyle(p),p.css({backgroundImage:"none",backgroundColor:o.color||"#ffff99"}).animate(b,{queue:!1,duration:o.duration,easing:o.easing,complete:d})}),i.effects.define("size",function(o,d){var p,b=i(this),S=["fontSize"],_=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],O=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],B=o.mode,X=B!=="effect",it=o.scale||"both",dt=o.origin||["middle","center"],ct=b.css("position"),kt=b.position(),Ot=i.effects.scaledDimensions(b),ie=o.from||Ot,Jt=o.to||i.effects.scaledDimensions(b,0);i.effects.createPlaceholder(b),B==="show"&&(B=ie,ie=Jt,Jt=B),p={from:{y:ie.height/Ot.height,x:ie.width/Ot.width},to:{y:Jt.height/Ot.height,x:Jt.width/Ot.width}},it!=="box"&&it!=="both"||(p.from.y!==p.to.y&&(ie=i.effects.setTransition(b,_,p.from.y,ie),Jt=i.effects.setTransition(b,_,p.to.y,Jt)),p.from.x!==p.to.x&&(ie=i.effects.setTransition(b,O,p.from.x,ie),Jt=i.effects.setTransition(b,O,p.to.x,Jt))),it!=="content"&&it!=="both"||p.from.y!==p.to.y&&(ie=i.effects.setTransition(b,S,p.from.y,ie),Jt=i.effects.setTransition(b,S,p.to.y,Jt)),dt&&(dt=i.effects.getBaseline(dt,Ot),ie.top=(Ot.outerHeight-ie.outerHeight)*dt.y+kt.top,ie.left=(Ot.outerWidth-ie.outerWidth)*dt.x+kt.left,Jt.top=(Ot.outerHeight-Jt.outerHeight)*dt.y+kt.top,Jt.left=(Ot.outerWidth-Jt.outerWidth)*dt.x+kt.left),delete ie.outerHeight,delete ie.outerWidth,b.css(ie),it!=="content"&&it!=="both"||(_=_.concat(["marginTop","marginBottom"]).concat(S),O=O.concat(["marginLeft","marginRight"]),b.find("*[width]").each(function(){var $t=i(this),Et=i.effects.scaledDimensions($t),Ne={height:Et.height*p.from.y,width:Et.width*p.from.x,outerHeight:Et.outerHeight*p.from.y,outerWidth:Et.outerWidth*p.from.x},Et={height:Et.height*p.to.y,width:Et.width*p.to.x,outerHeight:Et.height*p.to.y,outerWidth:Et.width*p.to.x};p.from.y!==p.to.y&&(Ne=i.effects.setTransition($t,_,p.from.y,Ne),Et=i.effects.setTransition($t,_,p.to.y,Et)),p.from.x!==p.to.x&&(Ne=i.effects.setTransition($t,O,p.from.x,Ne),Et=i.effects.setTransition($t,O,p.to.x,Et)),X&&i.effects.saveStyle($t),$t.css(Ne),$t.animate(Et,o.duration,o.easing,function(){X&&i.effects.restoreStyle($t)})})),b.animate(Jt,{queue:!1,duration:o.duration,easing:o.easing,complete:function(){var $t=b.offset();Jt.opacity===0&&b.css("opacity",ie.opacity),X||(b.css("position",ct==="static"?"relative":ct).offset($t),i.effects.saveStyle(b)),d()}})}),i.effects.define("scale",function(o,d){var p=i(this),b=o.mode,b=parseInt(o.percent,10)||(parseInt(o.percent,10)===0||b!=="effect"?0:100),b=i.extend(!0,{from:i.effects.scaledDimensions(p),to:i.effects.scaledDimensions(p,b,o.direction||"both"),origin:o.origin||["middle","center"]},o);o.fade&&(b.from.opacity=1,b.to.opacity=0),i.effects.effect.size.call(this,b,d)}),i.effects.define("puff","hide",function(o,d){o=i.extend(!0,{},o,{fade:!0,percent:parseInt(o.percent,10)||150}),i.effects.effect.scale.call(this,o,d)}),i.effects.define("pulsate","show",function(o,d){var p=i(this),X=o.mode,b=X==="show",S=2*(o.times||5)+(b||X==="hide"?1:0),_=o.duration/S,O=0,B=1,X=p.queue().length;for(!b&&p.is(":visible")||(p.css("opacity",0).show(),O=1);B<S;B++)p.animate({opacity:O},_,o.easing),O=1-O;p.animate({opacity:O},_,o.easing),p.queue(d),i.effects.unshift(p,X,1+S)}),i.effects.define("shake",function(o,d){var p=1,b=i(this),Ot=o.direction||"left",S=o.distance||20,_=o.times||3,O=2*_+1,B=Math.round(o.duration/O),X=Ot==="up"||Ot==="down"?"top":"left",it=Ot==="up"||Ot==="left",dt={},ct={},kt={},Ot=b.queue().length;for(i.effects.createPlaceholder(b),dt[X]=(it?"-=":"+=")+S,ct[X]=(it?"+=":"-=")+2*S,kt[X]=(it?"-=":"+=")+2*S,b.animate(dt,B,o.easing);p<_;p++)b.animate(ct,B,o.easing).animate(kt,B,o.easing);b.animate(ct,B,o.easing).animate(dt,B/2,o.easing).queue(d),i.effects.unshift(b,Ot,1+O)}),i.effects.define("slide","show",function(o,d){var p,b,S=i(this),_={up:["bottom","top"],down:["top","bottom"],left:["right","left"],right:["left","right"]},O=o.mode,B=o.direction||"left",X=B==="up"||B==="down"?"top":"left",it=B==="up"||B==="left",dt=o.distance||S[X=="top"?"outerHeight":"outerWidth"](!0),ct={};i.effects.createPlaceholder(S),p=S.cssClip(),b=S.position()[X],ct[X]=(it?-1:1)*dt+b,ct.clip=S.cssClip(),ct.clip[_[B][1]]=ct.clip[_[B][0]],O==="show"&&(S.cssClip(ct.clip),S.css(X,ct[X]),ct.clip=p,ct[X]=b),S.animate(ct,{queue:!1,duration:o.duration,easing:o.easing,complete:d})}),i.uiBackCompat!==!1&&i.effects.define("transfer",function(o,d){i(this).transfer(o,d)})});window.width=void 0;window.height=void 0;window.DPR=window.devicePixelRatio||1;function er(){DPR=window.devicePixelRatio||1,lightMode&&(DPR=1),width=document.getElementById("simulationArea").clientWidth*DPR,embed?height=document.getElementById("simulation").clientHeight*DPR:height=(document.body.clientHeight-document.getElementById("toolbar").clientHeight)*DPR,ai.setup(),f.setup(),tn(),document.getElementById("backgroundArea").style.height=height/DPR+100,document.getElementById("backgroundArea").style.width=width/DPR+100,document.getElementById("canvasArea").style.height=height/DPR,f.canvas.width=width,f.canvas.height=height,ai.canvas.width=width+100*DPR,ai.canvas.height=height+100*DPR,embed||Qt.setup(),be(!0),fs(),f.prevScale=0,tn()}window.onresize=er;window.onorientationchange=er;window.addEventListener("orientationchange",er);function Ab(){fb();const i=hs();window.projectId=i,ze(!0),ds("Main"),window.data={},er(),Gv()}function Nb(){$("#menu").empty(),window.circuitElementList=tm,window.annotationList=em,window.inputList=im,window.subCircuitInputList=nm,window.moduleList=[...circuitElementList,...annotationList],window.updateOrder=["wires",...circuitElementList,"nodes",...annotationList],window.renderOrder=[...moduleList.slice().reverse(),"wires","allNodes"];function i(t){return`<div class="icon logixModules" id="${t.name}" title="${t.label}">
            <img src= "/img/${t.name}.svg" alt="element's image" >
        </div>`}window.elementHierarchy=sm,window.elementPanelList=[];for(const t in elementHierarchy){let n="";const r=elementHierarchy[t];for(let g=0;g<r.length;g++){const v=r[g];v.name.startsWith("verilog")||(n+=i(v),window.elementPanelList.push(v.label))}const h=`<div class="panelHeader">${t}</div>
        <div class="panel customScroll">
        ${n}
        </div>`,c=`<div class="mobilepanelHeader">${t}</div>
        <div class="panel customScroll">
        ${n}
        </div>`;$("#menu").append(h),$("#menu2").append(c)}}function Rb(){const i=embed?lb:k0;Nb(),Ab(),embed||W0(),i(),embed||Mb(),setTimeout(()=>{if(__logix_project_id!=0)$(".loadingIcon").fadeIn(),$.ajax({url:`/simulator/get_data/${__logix_project_id}`,type:"GET",success(n){var r=n;r&&(Nn(r),f.changeClockTime(r.timePeriod||500)),$(".loadingIcon").fadeOut()},failure(){alert("Error: could not load "),$(".loadingIcon").fadeOut()}});else if(localStorage.getItem("recover_login")&&userSignedIn){var t=JSON.parse(localStorage.getItem("recover_login"));Nn(t),localStorage.removeItem("recover"),localStorage.removeItem("recover_login"),Kh()}else localStorage.getItem("recover")?Ce("We have detected that you did not save your last work. Don't worry we have recovered them. Access them using Project->Recover"):localStorage.getItem("autosave")&&Ce("We have detected an unexpected simulator crash. Don't worry we have recovered your project. Access them using Project->Recover")},1e3),!localStorage.tutorials_tour_done&&!embed&&setTimeout(()=>{_f()},2e3)}const Bb=Array=window.Array;Object.defineProperty(Array.prototype,"clean",{value:function(i){for(var t=0;t<this.length;t++)this[t]===i&&(this.splice(t,1),t--);return this},enumerable:!1});Object.defineProperty(Array.prototype,"extend",{value:function(i){i.forEach(function(t){this.push(t)},this)},enumerable:!1});Object.defineProperty(Array.prototype,"contains",{value:function(i){return this.indexOf(i)>-1},enumerable:!1});document.addEventListener("DOMContentLoaded",()=>{Rb()});window.Array=Bb;
//# sourceMappingURL=simulator-DCeYGSQR.js.map
